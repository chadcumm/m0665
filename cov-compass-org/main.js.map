{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app-routing.module.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/compass-content/admin/admin-user-assignment/admin-user-assignment.component.ts","./src/app/compass-content/admin/admin-user-assignment/admin-user-assignment.component.html","./src/app/compass-content/admin/admin.component.ts","./src/app/compass-content/admin/admin.component.html","./src/app/compass-content/admin/corepoint-integration/corepoint-integration.component.ts","./src/app/compass-content/admin/corepoint-integration/corepoint-integration.component.html","./src/app/compass-content/admin/system-configuration/system-configuration.component.ts","./src/app/compass-content/admin/system-configuration/system-configuration.component.html","./src/app/compass-content/admin/test-tools/document-viewer-test-tool/document-viewer-test-tool.component.ts","./src/app/compass-content/admin/test-tools/document-viewer-test-tool/document-viewer-test-tool-simple.component.html","./src/app/compass-content/admin/test-tools/test-tools.component.ts","./src/app/compass-content/admin/test-tools/test-tools-simple.component.html","./src/app/compass-content/compass-content.component.ts","./src/app/compass-content/compass-content.component.html","./src/app/compass-content/default/access-request/access-request.component.ts","./src/app/compass-content/default/access-request/access-request.component.html","./src/app/compass-content/default/default.component.ts","./src/app/compass-content/default/default.component.html","./src/app/compass-content/default/loading-timeline/loading-timeline.component.ts","./src/app/compass-content/default/loading-timeline/loading-timeline.component.html","./src/app/compass-content/feedback-form/feedback-form.component.ts","./src/app/compass-content/feedback-form/feedback-form.component.html","./src/app/compass-content/feedback/feedback-milestone-details/feedback-milestone-details.component.ts","./src/app/compass-content/feedback/feedback-milestone-details/feedback-milestone-details.component.html","./src/app/compass-content/feedback/feedback-worklist-table/feedback-workflow-cell/feedback-workflow-cell.component.ts","./src/app/compass-content/feedback/feedback-worklist-table/feedback-workflow-cell/feedback-workflow-cell.component.html","./src/app/compass-content/feedback/feedback-worklist-table/feedback-worklist-table.component.ts","./src/app/compass-content/feedback/feedback-worklist-table/feedback-worklist-table.component.html","./src/app/compass-content/feedback/feedback.component.ts","./src/app/compass-content/feedback/feedback.component.html","./src/app/compass-content/future-item/future-item.component.ts","./src/app/compass-content/future-item/future-item.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/codes/codes.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/codes/codes.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/comments/comments.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/comments/comments.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/item-details/item-details.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/item-details/item-details.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/milestone-details.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/milestone-details.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/milestone-timeline/milestone-timeline.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/milestone-timeline/milestone-timeline.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/patient-information/patient-information.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/patient-information/patient-information.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/payors/payors.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/payors/payors.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/user-assignment/user-assignment.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/user-assignment/user-assignment.component.html","./src/app/compass-content/oral-chemotherapy/milestone-details/workflow-status/workflow-status.component.ts","./src/app/compass-content/oral-chemotherapy/milestone-details/workflow-status/workflow-status.component.html","./src/app/compass-content/oral-chemotherapy/oral-chemo-filter-bar/oral-chemo-filter-bar.component.ts","./src/app/compass-content/oral-chemotherapy/oral-chemo-filter-bar/oral-chemo-filter-bar.component.html","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/item-info/item-info.component.ts","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/item-info/item-info.component.html","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/oral-chemo-worklist.component.ts","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/oral-chemo-worklist.component.html","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/patient-info/patient-info.component.ts","./src/app/compass-content/oral-chemotherapy/oral-chemo-worklist/patient-info/patient-info.component.html","./src/app/compass-content/oral-chemotherapy/oral-chemotherapy.component.ts","./src/app/compass-content/oral-chemotherapy/oral-chemotherapy.component.html","./src/app/compass-content/prior-auth/custom-worklist-wizard/custom-worklist-wizard.component.ts","./src/app/compass-content/prior-auth/custom-worklist-wizard/custom-worklist-wizard.component.html","./src/app/compass-content/prior-auth/milestone-details/codes/codes.component.ts","./src/app/compass-content/prior-auth/milestone-details/codes/codes.component.html","./src/app/compass-content/prior-auth/milestone-details/comments/comments.component.ts","./src/app/compass-content/prior-auth/milestone-details/comments/comments.component.html","./src/app/compass-content/prior-auth/milestone-details/item-details/item-details.component.ts","./src/app/compass-content/prior-auth/milestone-details/item-details/item-details.component.html","./src/app/compass-content/prior-auth/milestone-details/milestone-details.component.ts","./src/app/compass-content/prior-auth/milestone-details/milestone-details.component.html","./src/app/compass-content/prior-auth/milestone-details/milestone-timeline/milestone-timeline.component.ts","./src/app/compass-content/prior-auth/milestone-details/milestone-timeline/milestone-timeline.component.html","./src/app/compass-content/prior-auth/milestone-details/patient-information/patient-information.component.ts","./src/app/compass-content/prior-auth/milestone-details/patient-information/patient-information.component.html","./src/app/compass-content/prior-auth/milestone-details/payors/payors.component.ts","./src/app/compass-content/prior-auth/milestone-details/payors/payors.component.html","./src/app/compass-content/prior-auth/milestone-details/workflow-status/workflow-status.component.ts","./src/app/compass-content/prior-auth/milestone-details/workflow-status/workflow-status.component.html","./src/app/compass-content/prior-auth/prior-auth-filter-bar/prior-auth-filter-bar.component.ts","./src/app/compass-content/prior-auth/prior-auth-filter-bar/prior-auth-filter-bar.component.html","./src/app/compass-content/prior-auth/prior-auth-sider/prior-auth-sider.component.ts","./src/app/compass-content/prior-auth/prior-auth-sider/prior-auth-sider.component.html","./src/app/compass-content/prior-auth/prior-auth.component.ts","./src/app/compass-content/prior-auth/prior-auth.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/earliest-date-milestone/earliest-date-milestone.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/earliest-date-milestone/earliest-date-milestone.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-preview-drawer/document-preview-drawer.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-preview-drawer/document-preview-drawer.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-selection.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-selection.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-milestone.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-milestone.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-view.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-view.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-workflow-cell.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-workflow-cell.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/medical-necessity-milestone/medical-necessity-milestone.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/medical-necessity-milestone/medical-necessity-milestone.component.html","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/scheduling-info-milestone/scheduling-info-milestone.component.ts","./src/app/compass-content/prior-auth/worklist-table/glidian-workflow-cell/scheduling-info-milestone/scheduling-info-milestone.component.html","./src/app/compass-content/prior-auth/worklist-table/item-codes/item-codes.component.ts","./src/app/compass-content/prior-auth/worklist-table/item-codes/item-codes.component.html","./src/app/compass-content/prior-auth/worklist-table/item-info/item-info.component.ts","./src/app/compass-content/prior-auth/worklist-table/item-info/item-info.component.html","./src/app/compass-content/prior-auth/worklist-table/patient-info/patient-info.component.ts","./src/app/compass-content/prior-auth/worklist-table/patient-info/patient-info.component.html","./src/app/compass-content/prior-auth/worklist-table/scheduling-location/location-selection-modal/location-selection-modal.component.ts","./src/app/compass-content/prior-auth/worklist-table/scheduling-location/location-selection-modal/location-selection-modal.component.html","./src/app/compass-content/prior-auth/worklist-table/scheduling-location/scheduling-location.component.ts","./src/app/compass-content/prior-auth/worklist-table/scheduling-location/scheduling-location.component.html","./src/app/compass-content/prior-auth/worklist-table/user-assignment/user-assignment.component.ts","./src/app/compass-content/prior-auth/worklist-table/user-assignment/user-assignment.component.html","./src/app/compass-content/prior-auth/worklist-table/worklist-table.component.ts","./src/app/compass-content/prior-auth/worklist-table/worklist-table.component.html","./src/app/compass-content/reporting/reporting.component.ts","./src/app/compass-content/reporting/reporting.component.html","./src/app/compass-content/test-data/test-data.component.ts","./src/app/compass-content/test-data/test-data.component.html","./src/app/compass-content/test-data/test-person-demographics/test-person-demographics.component.ts","./src/app/compass-content/test-data/test-person-demographics/test-person-demographics.component.html","./src/app/data/random-users.data.ts","./src/app/directives/resizable-column.directive.ts","./src/app/footer-content/component-version/component-version.component.ts","./src/app/footer-content/component-version/component-version.component.html","./src/app/footer-content/footer-content.component.ts","./src/app/footer-content/footer-content.component.html","./src/app/footer-content/performance-stats/performance-details-modal/performance-details-modal.component.ts","./src/app/footer-content/performance-stats/performance-details-modal/performance-details-modal.component.html","./src/app/footer-content/performance-stats/performance-stats.component.ts","./src/app/footer-content/performance-stats/performance-stats.component.html","./src/app/header-content/header-content.component.ts","./src/app/header-content/header-content.component.html","./src/app/header-content/notification-bell/notification-bell.component.ts","./src/app/header-content/notification-bell/notification-bell.component.html","./src/app/header-content/notification-modal/notification-modal.component.ts","./src/app/header-content/notification-modal/notification-modal.component.html","./src/app/models/user-data.model.ts","./src/app/services/admin.service.ts","./src/app/services/app-status.service.ts","./src/app/services/cerner-action.service.ts","./src/app/services/column-config.service.ts","./src/app/services/custom-worklist.service.ts","./src/app/services/feedback-worklist.service.ts","./src/app/services/feedback.service.ts","./src/app/services/item-highlighting.service.ts","./src/app/services/messaging.service.ts","./src/app/services/notifications.service.ts","./src/app/services/oral-chemotherapy.service.ts","./src/app/services/prior-auth.service.ts","./src/app/services/random-user.service.ts","./src/app/services/sidebar-state.service.ts","./src/app/services/test-provider-registry.service.ts","./src/app/services/timer.service.ts","./src/app/services/user-preferences.service.ts","./src/environments/environment.ts","./src/main.ts","./src/app/version.js"],"sourcesContent":["import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {PriorAuthComponent} from './compass-content/prior-auth/prior-auth.component';\r\nimport {OralChemotherapyComponent} from './compass-content/oral-chemotherapy/oral-chemotherapy.component';\r\nimport {FutureItemComponent} from './compass-content/future-item/future-item.component';\r\nimport {TestDataComponent} from './compass-content/test-data/test-data.component';\r\nimport {DefaultComponent} from './compass-content/default/default.component';\r\nimport {AdminComponent} from './compass-content/admin/admin.component';\r\nimport {FeedbackComponent} from './compass-content/feedback/feedback.component';\r\nimport {ReportingComponent} from './compass-content/reporting/reporting.component';\r\n\r\nconst routes: Routes = [\r\n  {path: 'prior-auth', component: PriorAuthComponent},\r\n  {path: 'oral-chemotherapy', component: OralChemotherapyComponent},\r\n  {path: 'admin', component: AdminComponent},\r\n  {path: 'feedback', component: FeedbackComponent},\r\n  {path: 'reporting', component: ReportingComponent},\r\n  {path: 'future', component: FutureItemComponent},\r\n  {path: 'test-data', component: TestDataComponent},\r\n  {path: 'default', component: DefaultComponent},\r\n  {path: '', redirectTo: '/default', pathMatch: 'full'}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes, {useHash: true})],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRoutingModule {\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { mPageService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { CUSTOM_DATE_FORMATS } from './app.module';\r\nimport { UserPreferencesService } from './services/user-preferences.service';\r\nimport { AppStatusService } from './services/app-status.service';\r\n\r\n@Component({\r\n  selector: 'app-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent implements OnInit {\r\n  loading = true;\r\n\r\n  constructor(\r\n    public activatedRoute: ActivatedRoute, \r\n    public mPage: mPageService,\r\n    public userPreferences: UserPreferencesService,\r\n    private appStatus: AppStatusService,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Always start with /default route to show app structure immediately\r\n    this.router.navigate(['/default']);\r\n    \r\n    // Grab any parameters in the URL (Used in Cerner Components)\r\n    this.activatedRoute.queryParams.subscribe(params => {\r\n      this.mPage.personId = params['personId'] ? parseInt(params['personId']) : this.mPage.personId;\r\n      this.mPage.encntrId = params['encounterId'] ? parseInt(params['encounterId']) : this.mPage.encntrId;\r\n      this.mPage.prsnlId = params['userId'] ? parseInt(params['userId']) : this.mPage.prsnlId;\r\n    });\r\n    this.mPage.assignFromConfigFile();\r\n    \r\n    // Perform MPage Initialization\r\n    setTimeout((e: any) => {\r\n      this.mPage.setMaxInstances(10, true, 'ORG', false);\r\n      // Check MPage environment and user identification status\r\n      // inMpage indicates if running within Cerner PowerChart\r\n      // prsnlId contains the current user's personnel identifier\r\n      // Wait for service to be ready before loading user preferences\r\n      this.waitForServiceReady();\r\n    }, 0);\r\n  }\r\n\r\n  async waitForServiceReady(): Promise<void> {\r\n    while (!this.mPage.serviceReady) {\r\n      // Polling loop to wait for MPage service initialization\r\n      // Service readiness is required before making API calls to Cerner\r\n      await new Promise(resolve => setTimeout(resolve, 1000));\r\n    }\r\n    // MPage service is now ready for API interactions\r\n    // Set application to online mode for full functionality\r\n    this.appStatus.setOfflineMode(false);\r\n    \r\n    // Load user preferences once service is ready\r\n    if (this.mPage.prsnlId) {\r\n      this.userPreferences.loadUserPreferences(this.mPage.prsnlId);\r\n    } else {\r\n      // If no user ID is available, load default preferences\r\n      this.userPreferences.loadUserPreferences(0);\r\n    }\r\n  }\r\n}\r\n","<nz-layout class=\"compass-layout\">\r\n    <nz-header class=\"compass-header\">\r\n        <app-header-content></app-header-content>\r\n    </nz-header>\r\n        <nz-content class=\"compass-content\">\r\n            <app-compass-content></app-compass-content>\r\n        </nz-content>    \r\n    \r\n    <nz-footer class=\"compass-footer\">\r\n        <app-footer-content></app-footer-content>\r\n    </nz-footer>\r\n</nz-layout>\r\n<!--this is a placeholder href tag to then use the APPLINK function to open a chart-->\r\n<a href=\"#\" id=\"applink\"></a>\r\n<mpage-log-component></mpage-log-component>\r\n","import { NgModule, ErrorHandler, APP_INITIALIZER } from '@angular/core';\r\nimport { BrowserModule } from '@angular/platform-browser';\r\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { ClinicalOfficeMpageModule, MaterialModule, ErrorHandlerService, ConfigService } from '@clinicaloffice/clinical-office-mpage-core'\r\nimport { AppRoutingModule } from './app-routing.module';\r\nimport { AppComponent } from './app.component';\r\nimport { MatLuxonDateModule, LuxonDateAdapter } from '@angular/material-luxon-adapter';\r\nimport { DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE } from '@angular/material/core';\r\nimport { MAT_FORM_FIELD_DEFAULT_OPTIONS } from '@angular/material/form-field';\r\nimport { ComponentVersionComponent } from './footer-content/component-version/component-version.component';\r\nimport { PerformanceStatsComponent } from './footer-content/performance-stats/performance-stats.component';\r\nimport { PerformanceDetailsModalComponent } from './footer-content/performance-stats/performance-details-modal/performance-details-modal.component';\r\nimport { NZ_I18N } from 'ng-zorro-antd/i18n';\r\nimport { en_US } from 'ng-zorro-antd/i18n';\r\nimport { registerLocaleData } from '@angular/common';\r\nimport en from '@angular/common/locales/en';\r\nimport { HttpClientModule } from '@angular/common/http';\r\nimport { NzTypographyModule } from 'ng-zorro-antd/typography';\r\nimport { NzInputModule } from 'ng-zorro-antd/input';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { NzLayoutModule } from 'ng-zorro-antd/layout';\r\nimport { HeaderContentComponent } from './header-content/header-content.component';\r\nimport { FooterContentComponent } from './footer-content/footer-content.component';\r\nimport { CompassContentComponent } from './compass-content/compass-content.component';\r\nimport { NzSkeletonModule } from 'ng-zorro-antd/skeleton';\r\nimport { NzMenuModule } from 'ng-zorro-antd/menu';\r\nimport { NzGridModule } from 'ng-zorro-antd/grid';\r\nimport { PriorAuthComponent } from './compass-content/prior-auth/prior-auth.component';\r\nimport { OralChemotherapyComponent } from './compass-content/oral-chemotherapy/oral-chemotherapy.component';\r\nimport { OralChemoFilterBarComponent } from './compass-content/oral-chemotherapy/oral-chemo-filter-bar/oral-chemo-filter-bar.component';\r\nimport { OralChemoWorklistComponent } from './compass-content/oral-chemotherapy/oral-chemo-worklist/oral-chemo-worklist.component';\r\nimport { FutureItemComponent } from './compass-content/future-item/future-item.component';\r\nimport { NzTableModule } from 'ng-zorro-antd/table';\r\nimport { TestDataComponent } from './compass-content/test-data/test-data.component';\r\nimport { TestPersonDemographicsComponent } from './compass-content/test-data/test-person-demographics/test-person-demographics.component';\r\nimport { NzImageModule } from 'ng-zorro-antd/image';\r\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\r\nimport { NzButtonModule } from 'ng-zorro-antd/button';\r\nimport { NzSelectModule } from 'ng-zorro-antd/select';\r\nimport { NzTagModule } from 'ng-zorro-antd/tag';\r\nimport { NzDrawerModule } from 'ng-zorro-antd/drawer';\r\nimport { NzDescriptionsModule } from 'ng-zorro-antd/descriptions';\r\nimport { NzTimelineModule } from 'ng-zorro-antd/timeline';\r\nimport { WorklistTableComponent } from './compass-content/prior-auth/worklist-table/worklist-table.component';\r\nimport { MilestoneDetailsComponent } from './compass-content/prior-auth/milestone-details/milestone-details.component';\r\nimport { NzSpinModule } from 'ng-zorro-antd/spin';\r\nimport { NzStepsModule } from 'ng-zorro-antd/steps';\r\nimport { NzProgressModule } from 'ng-zorro-antd/progress';\r\nimport { GlidianWorkflowCellComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-workflow-cell.component';\r\nimport { EarliestDateMilestoneComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/earliest-date-milestone/earliest-date-milestone.component';\r\nimport { MedicalNecessityMilestoneComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/medical-necessity-milestone/medical-necessity-milestone.component';\r\nimport { GlidianProcessMilestoneComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-milestone.component';\r\nimport { NzCardModule } from 'ng-zorro-antd/card';\r\nimport { NzDatePickerModule } from 'ng-zorro-antd/date-picker';\r\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\r\nimport { NzSpaceModule } from 'ng-zorro-antd/space';\r\nimport { PriorAuthFilterBarComponent } from './compass-content/prior-auth/prior-auth-filter-bar/prior-auth-filter-bar.component';\r\nimport { NzCollapseModule } from 'ng-zorro-antd/collapse';\r\nimport { NzAlertModule } from 'ng-zorro-antd/alert';\r\nimport { NzListModule } from 'ng-zorro-antd/list';\r\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\r\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\r\nimport { PriorAuthSiderComponent } from './compass-content/prior-auth/prior-auth-sider/prior-auth-sider.component';\r\nimport { NzSliderModule } from 'ng-zorro-antd/slider';\r\nimport { PatientInfoComponent } from './compass-content/prior-auth/worklist-table/patient-info/patient-info.component';\r\nimport { ItemInfoComponent } from './compass-content/prior-auth/worklist-table/item-info/item-info.component';\r\nimport { SchedulingLocationComponent } from './compass-content/prior-auth/worklist-table/scheduling-location/scheduling-location.component';\r\nimport { LocationSelectionModalComponent } from './compass-content/prior-auth/worklist-table/scheduling-location/location-selection-modal/location-selection-modal.component';\r\nimport { SchedulingInfoMilestoneComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/scheduling-info-milestone/scheduling-info-milestone.component';\r\nimport { NzSegmentedModule } from 'ng-zorro-antd/segmented';\r\nimport { NzPageHeaderModule } from 'ng-zorro-antd/page-header';\r\nimport { NzAffixModule } from 'ng-zorro-antd/affix';\r\nimport { NzPaginationModule } from 'ng-zorro-antd/pagination';\r\nimport { NzModalModule } from 'ng-zorro-antd/modal';\r\nimport { NzFormModule } from 'ng-zorro-antd/form';\r\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\r\nimport { NzMessageModule } from 'ng-zorro-antd/message';\r\nimport { ResizableColumnDirective } from './directives/resizable-column.directive';\r\nimport { DefaultComponent } from './compass-content/default/default.component';\r\nimport { AccessRequestComponent } from './compass-content/default/access-request/access-request.component';\r\nimport { LoadingTimelineComponent } from './compass-content/default/loading-timeline/loading-timeline.component';\r\nimport { ItemCodesComponent } from './compass-content/prior-auth/worklist-table/item-codes/item-codes.component';\r\nimport { FeedbackFormComponent } from './compass-content/feedback-form/feedback-form.component';\r\nimport { AdminComponent } from './compass-content/admin/admin.component';\r\nimport { FeedbackComponent } from './compass-content/feedback/feedback.component';\r\nimport { ReportingComponent } from './compass-content/reporting/reporting.component';\r\nimport { UserAssignmentComponent } from './compass-content/prior-auth/worklist-table/user-assignment/user-assignment.component';\r\nimport { NotificationBellComponent } from './header-content/notification-bell/notification-bell.component';\r\nimport { NotificationModalComponent } from './header-content/notification-modal/notification-modal.component';\r\nimport { FeedbackWorklistTableComponent } from './compass-content/feedback/feedback-worklist-table/feedback-worklist-table.component';\r\nimport { FeedbackWorkflowCellComponent } from './compass-content/feedback/feedback-worklist-table/feedback-workflow-cell/feedback-workflow-cell.component';\r\nimport { FeedbackMilestoneDetailsComponent } from './compass-content/feedback/feedback-milestone-details/feedback-milestone-details.component';\r\nimport { NzBadgeModule } from 'ng-zorro-antd/badge';\r\nimport { NzEmptyModule } from 'ng-zorro-antd/empty';\r\nimport { NzAvatarModule } from 'ng-zorro-antd/avatar';\r\nimport { NzStatisticModule } from 'ng-zorro-antd/statistic';\r\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\r\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\r\nimport { NzRadioModule } from 'ng-zorro-antd/radio';\r\nimport { GlidianProcessViewComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/glidian-process-view.component';\r\nimport { DocumentSelectionComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-selection.component';\r\nimport { DocumentPreviewDrawerComponent } from './compass-content/prior-auth/worklist-table/glidian-workflow-cell/glidian-process-milestone/document-selection/document-preview-drawer/document-preview-drawer.component';\r\nimport { CorepointIntegrationComponent } from './compass-content/admin/corepoint-integration/corepoint-integration.component';\r\nimport { SystemConfigurationComponent } from './compass-content/admin/system-configuration/system-configuration.component';\r\nimport { AdminUserAssignmentComponent } from './compass-content/admin/admin-user-assignment/admin-user-assignment.component';\r\nimport { TestToolsComponent } from './compass-content/admin/test-tools/test-tools.component';\r\nimport { DocumentViewerTestToolComponent } from './compass-content/admin/test-tools/document-viewer-test-tool/document-viewer-test-tool.component';\r\nimport { PatientInformationComponent } from './compass-content/prior-auth/milestone-details/patient-information/patient-information.component';\r\nimport { CommentsComponent } from './compass-content/prior-auth/milestone-details/comments/comments.component';\r\nimport { ItemDetailsComponent } from './compass-content/prior-auth/milestone-details/item-details/item-details.component';\r\nimport { CodesComponent } from './compass-content/prior-auth/milestone-details/codes/codes.component';\r\nimport { WorkflowStatusComponent } from './compass-content/prior-auth/milestone-details/workflow-status/workflow-status.component';\r\nimport { PayorsComponent } from './compass-content/prior-auth/milestone-details/payors/payors.component';\r\nimport { MilestoneTimelineComponent } from './compass-content/prior-auth/milestone-details/milestone-timeline/milestone-timeline.component';\r\nimport { OralChemoItemInfoComponent } from './compass-content/oral-chemotherapy/oral-chemo-worklist/item-info/item-info.component';\r\nimport { OralChemoPatientInfoComponent } from './compass-content/oral-chemotherapy/oral-chemo-worklist/patient-info/patient-info.component';\r\nimport { OralChemoMilestoneDetailsComponent } from './compass-content/oral-chemotherapy/milestone-details/milestone-details.component';\r\nimport { OralChemoPatientInformationComponent } from './compass-content/oral-chemotherapy/milestone-details/patient-information/patient-information.component';\r\nimport { OralChemoCommentsComponent } from './compass-content/oral-chemotherapy/milestone-details/comments/comments.component';\r\nimport { OralChemoItemDetailsComponent } from './compass-content/oral-chemotherapy/milestone-details/item-details/item-details.component';\r\nimport { OralChemoCodesComponent } from './compass-content/oral-chemotherapy/milestone-details/codes/codes.component';\r\nimport { OralChemoWorkflowStatusComponent } from './compass-content/oral-chemotherapy/milestone-details/workflow-status/workflow-status.component';\r\nimport { OralChemoPayorsComponent } from './compass-content/oral-chemotherapy/milestone-details/payors/payors.component';\r\nimport { OralChemoUserAssignmentComponent } from './compass-content/oral-chemotherapy/milestone-details/user-assignment/user-assignment.component';\r\nimport { OralChemoMilestoneTimelineComponent } from './compass-content/oral-chemotherapy/milestone-details/milestone-timeline/milestone-timeline.component';\r\nimport { CustomWorklistWizardComponent } from './compass-content/prior-auth/custom-worklist-wizard/custom-worklist-wizard.component';\r\nimport { NzPopconfirmModule } from 'ng-zorro-antd/popconfirm';\r\n\r\nexport const configFactory = (configService: ConfigService) => {\r\n  return () => configService.loadConfig();\r\n}\r\n\r\n// Custom date formats\r\nexport const CUSTOM_DATE_FORMATS = {\r\n  parse: {\r\n    dateInput: ['dd-MMM-yyyy'],\r\n  },\r\n  display: {\r\n    dateInput: 'dd-MMM-yyyy',\r\n    dateTimeLabel: 'dd-MMM-yyyy HH:mm',\r\n    monthYearLabel: 'MMM yyyy',\r\n    dateA11yLabel: 'LL',\r\n    monthYearA11yLabel: 'MMMM yyyy',\r\n  }\r\n}\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent,\r\n    ComponentVersionComponent,\r\n    PerformanceStatsComponent,\r\n    PerformanceDetailsModalComponent,\r\n    HeaderContentComponent,\r\n    FooterContentComponent,\r\n    CompassContentComponent,\r\n    PriorAuthComponent,\r\n    OralChemotherapyComponent,\r\n    OralChemoFilterBarComponent,\r\n    OralChemoWorklistComponent,\r\n    FutureItemComponent,\r\n    TestDataComponent,\r\n    TestPersonDemographicsComponent,\r\n    WorklistTableComponent,\r\n    MilestoneDetailsComponent,\r\n    GlidianWorkflowCellComponent,\r\n    EarliestDateMilestoneComponent,\r\n    MedicalNecessityMilestoneComponent,\r\n    GlidianProcessMilestoneComponent,\r\n    PriorAuthFilterBarComponent,\r\n    CustomWorklistWizardComponent,\r\n    PriorAuthSiderComponent,\r\n    PatientInfoComponent,\r\n    ItemInfoComponent,\r\n    SchedulingLocationComponent,\r\n    LocationSelectionModalComponent,\r\n    SchedulingInfoMilestoneComponent,\r\n    ResizableColumnDirective,\r\n    DefaultComponent,\r\n    AccessRequestComponent,\r\n    LoadingTimelineComponent,\r\n    ItemCodesComponent,\r\n    FeedbackFormComponent,\r\n    AdminComponent,\r\n    FeedbackComponent,\r\n    ReportingComponent,\r\n    UserAssignmentComponent,\r\n    NotificationBellComponent,\r\n    NotificationModalComponent,\r\n    FeedbackWorklistTableComponent,\r\n    FeedbackWorkflowCellComponent,\r\n    FeedbackMilestoneDetailsComponent,\r\n    GlidianProcessViewComponent,\r\n    DocumentSelectionComponent,\r\n    DocumentPreviewDrawerComponent,\r\n    CorepointIntegrationComponent,\r\n    SystemConfigurationComponent,\r\n    PatientInformationComponent,\r\n    CommentsComponent,\r\n    ItemDetailsComponent,\r\n    CodesComponent,\r\n    WorkflowStatusComponent,\r\n    PayorsComponent,\r\n    MilestoneTimelineComponent,\r\n    AdminUserAssignmentComponent,\r\n    TestToolsComponent,\r\n    DocumentViewerTestToolComponent,\r\n    OralChemoItemInfoComponent,\r\n    OralChemoPatientInfoComponent,\r\n    OralChemoMilestoneDetailsComponent,\r\n    OralChemoPatientInformationComponent,\r\n    OralChemoCommentsComponent,\r\n    OralChemoItemDetailsComponent,\r\n    OralChemoCodesComponent,\r\n    OralChemoWorkflowStatusComponent,\r\n    OralChemoPayorsComponent,\r\n    OralChemoUserAssignmentComponent,\r\n    OralChemoMilestoneTimelineComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    CommonModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    DragDropModule,\r\n    ClinicalOfficeMpageModule,\r\n    MaterialModule,\r\n    AppRoutingModule,\r\n    HttpClientModule,\r\n    NzTypographyModule,\r\n    NzInputModule,\r\n    NzIconModule,\r\n    NzLayoutModule,\r\n    NzSkeletonModule,\r\n    NzMenuModule,\r\n    NzGridModule,\r\n    NzTableModule,\r\n    NzImageModule,\r\n    NzTabsModule,\r\n    NzButtonModule,\r\n    NzSelectModule,\r\n    NzTagModule,\r\n    NzDrawerModule,\r\n    NzDescriptionsModule,\r\n    NzTimelineModule,\r\n    NzSpinModule,\r\n    NzStepsModule,\r\n    NzProgressModule,\r\n    NzCardModule,\r\n    NzDatePickerModule,\r\n    NzSwitchModule,\r\n    NzSpaceModule,\r\n    NzCollapseModule,\r\n    NzAlertModule,\r\n    NzListModule,\r\n    NzDropDownModule,\r\n    NzCheckboxModule,\r\n    NzSliderModule,\r\n    NzSegmentedModule,\r\n    NzPageHeaderModule,\r\n    NzAffixModule,\r\n    NzPaginationModule,\r\n    NzModalModule,\r\n    NzFormModule,\r\n    NzToolTipModule,\r\n    NzMessageModule,\r\n    NzBadgeModule,\r\n    NzEmptyModule,\r\n    NzAvatarModule,\r\n    NzStatisticModule,\r\n    NzDividerModule,\r\n    NzInputNumberModule,\r\n    NzRadioModule,\r\n    NzPopconfirmModule\r\n  ],\r\n  providers: [\r\n    {\r\n      provide: APP_INITIALIZER,\r\n      useFactory: configFactory,\r\n      deps: [ConfigService],\r\n      multi: true\r\n    },\r\n    { provide: ErrorHandler, useClass: ErrorHandlerService },\r\n    { provide: DateAdapter, useClass: LuxonDateAdapter, deps: [MAT_DATE_LOCALE] },\r\n//    { provide: MAT_FORM_FIELD_DEFAULT_OPTIONS, useValue: { appearance: 'outline' } },\r\n    {\r\n      provide: MAT_DATE_FORMATS, useValue: CUSTOM_DATE_FORMATS\r\n    },\r\n{ provide: NZ_I18N, useValue: en_US }\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n","import { Component, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { AdminService } from '../../../services/admin.service';\r\nimport { MessagingService } from '../../../services/messaging.service';\r\nimport { User, UserAssignmentData } from '../../../models/admin.model';\r\n\r\n@Component({\r\n  selector: 'app-admin-user-assignment',\r\n  templateUrl: './admin-user-assignment.component.html',\r\n  styleUrls: ['./admin-user-assignment.component.scss']\r\n})\r\nexport class AdminUserAssignmentComponent implements OnInit {\r\n  loading = false;\r\n  saving = false;\r\n  adding = false;\r\n  error: string | null = null;\r\n  saveSuccess = false;\r\n  \r\n  workflows: any[] = [];\r\n  selectedWorkflow: string | null = null;\r\n  newUsername = '';\r\n  \r\n  userAssignments: UserAssignmentData = {};\r\n  originalUserAssignments: UserAssignmentData = {};\r\n  currentUsers: User[] = [];\r\n  \r\n  get hasChanges(): boolean {\r\n    return JSON.stringify(this.userAssignments) !== JSON.stringify(this.originalUserAssignments);\r\n  }\r\n\r\n  constructor(\r\n    private adminService: AdminService,\r\n    private messagingService: MessagingService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadData();\r\n  }\r\n\r\n  /**\r\n   * Load configuration and user assignments\r\n   */\r\n  loadData(): void {\r\n    // console.log('loadData started');\r\n    this.loading = true;\r\n    this.error = null;\r\n\r\n    // First get the configuration to get workflow list\r\n    this.adminService.getCompassConfiguration().subscribe({\r\n      next: (config: any) => {\r\n        // console.log('Configuration received:', config);\r\n        if (config && config.workflows) {\r\n          this.workflows = config.workflows;\r\n          // Set a default workflow if available\r\n          if (this.workflows.length > 0 && !this.selectedWorkflow) {\r\n            this.selectedWorkflow = this.workflows[0].meaning;\r\n            this.onWorkflowChange(this.selectedWorkflow);\r\n          }\r\n        }\r\n        \r\n        // Then get the user assignments\r\n        this.loadUserAssignments();\r\n      },\r\n      error: (err: unknown) => {\r\n        // console.error('Failed to load configuration:', err);\r\n        this.error = 'Failed to load configuration';\r\n        this.loading = false;\r\n        this.messagingService.error('Failed to load configuration');\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  loadUserAssignments(): void {\r\n    // console.log('loadUserAssignments started');\r\n    this.adminService.getUserAssignOptions().subscribe({\r\n      next: (data: any) => {\r\n        // console.log('User assignments received:', data);\r\n        if (data && data.usersAssignable) {\r\n          this.userAssignments = data.usersAssignable;\r\n          this.originalUserAssignments = JSON.parse(JSON.stringify(data.usersAssignable));\r\n        } else {\r\n          this.userAssignments = {};\r\n          this.originalUserAssignments = {};\r\n        }\r\n        this.updateCurrentUsers();\r\n        this.loading = false;\r\n        this.cdr.detectChanges();\r\n      },\r\n      error: (err: unknown) => {\r\n        // console.error('Failed to load user assignments:', err);\r\n        this.userAssignments = {};\r\n        this.originalUserAssignments = {};\r\n        this.updateCurrentUsers();\r\n        this.loading = false;\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  onWorkflowChange(workflow: string | null): void {\r\n    // console.log('Workflow changed to:', workflow);\r\n    this.newUsername = '';\r\n    this.saveSuccess = false;\r\n    this.error = null;\r\n    \r\n    if (workflow) {\r\n      this.selectedWorkflow = workflow;\r\n      const key = workflow.toLowerCase();\r\n      if (!this.userAssignments[key]) {\r\n        this.userAssignments[key] = [];\r\n      }\r\n    } else {\r\n      this.selectedWorkflow = null;\r\n    }\r\n    this.updateCurrentUsers();\r\n  }\r\n\r\n  /**\r\n   * Update the currentUsers array based on the selected workflow\r\n   */\r\n  updateCurrentUsers(): void {\r\n    if (this.selectedWorkflow) {\r\n      const key = this.selectedWorkflow.toLowerCase();\r\n      const users = this.userAssignments[key] || [];\r\n      // Sort by fullName, case-insensitive\r\n      this.currentUsers = [...users].sort((a, b) => {\r\n        const nameA = a.fullName ? a.fullName.toLowerCase() : '';\r\n        const nameB = b.fullName ? b.fullName.toLowerCase() : '';\r\n        if (nameA < nameB) return -1;\r\n        if (nameA > nameB) return 1;\r\n        return 0;\r\n      });\r\n    } else {\r\n      this.currentUsers = [];\r\n    }\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Add user to current workflow\r\n   */\r\n  addUser(): void {\r\n    if (!this.selectedWorkflow || !this.newUsername.trim()) {\r\n      return;\r\n    }\r\n\r\n    const username = this.newUsername.trim();\r\n    const key = this.selectedWorkflow.toLowerCase();\r\n    \r\n    // Check if user already exists (case-insensitive)\r\n    const lowerCaseUsername = username.toLowerCase();\r\n    if (this.userAssignments[key] && this.userAssignments[key].some(u => u.username.toLowerCase() === lowerCaseUsername)) {\r\n      this.error = `User \"${username}\" is already assigned to this workflow`;\r\n      this.messagingService.warning(this.error);\r\n      return;\r\n    }\r\n\r\n    // Add user\r\n    const newUser: User = {\r\n      username: username,\r\n      fullName: '', // Not provided by UI, will be populated by backend\r\n      personId: 0   // Not provided by UI, will be populated by backend\r\n    };\r\n    const currentUsers = this.userAssignments[key] || [];\r\n    this.userAssignments[key] = [...currentUsers, newUser];\r\n    this.newUsername = '';\r\n    this.error = null;\r\n    this.updateCurrentUsers();\r\n  }\r\n\r\n  /**\r\n   * Remove user from current workflow\r\n   */\r\n  removeUser(userToRemove: User): void {\r\n    if (!this.selectedWorkflow) {\r\n      return;\r\n    }\r\n\r\n    const key = this.selectedWorkflow.toLowerCase();\r\n    const currentUsers = this.userAssignments[key] || [];\r\n    this.userAssignments[key] = currentUsers.filter(u => u.username !== userToRemove.username);\r\n    this.updateCurrentUsers();\r\n  }\r\n\r\n  /**\r\n   * Save user assignments to backend\r\n   */\r\n  saveUserAssignments(): void {\r\n    this.saving = true;\r\n    this.saveSuccess = false;\r\n    this.error = null;\r\n\r\n    this.adminService.saveUserAssignOptions(this.userAssignments).subscribe({\r\n      next: () => {\r\n        this.saving = false;\r\n        this.saveSuccess = true;\r\n        this.messagingService.success('User assignments saved successfully');\r\n        this.loadUserAssignments(); // Refresh data\r\n        this.cdr.detectChanges();\r\n      },\r\n      error: (err: unknown) => {\r\n        this.saving = false;\r\n        this.error = 'Failed to save user assignments';\r\n        this.messagingService.error('Failed to save user assignments');\r\n        this.cdr.detectChanges();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Reset changes\r\n   */\r\n  resetChanges(): void {\r\n    this.userAssignments = JSON.parse(JSON.stringify(this.originalUserAssignments));\r\n    this.saveSuccess = false;\r\n    this.error = null;\r\n    this.cdr.detectChanges();\r\n  }\r\n}","<div class=\"user-assignment-container\">\r\n  <nz-card nzTitle=\"User Assignment Configuration\" [nzLoading]=\"loading\" [nzExtra]=\"extraTemplate\">\r\n    <ng-template #extraTemplate>\r\n      <button nz-button nzType=\"text\" (click)=\"loadData()\" [disabled]=\"loading\">\r\n        <span nz-icon nzType=\"reload\"></span>\r\n      </button>\r\n    </ng-template>\r\n    <!-- Loading State -->\r\n    <div *ngIf=\"loading\" class=\"loading-container\">\r\n      <nz-spin [nzSize]=\"'large'\"></nz-spin>\r\n      <p>Loading user assignments...</p>\r\n    </div>\r\n\r\n    <!-- Error State -->\r\n    <nz-alert \r\n      *ngIf=\"error && !loading\" \r\n      nzType=\"error\" \r\n      [nzMessage]=\"error\" \r\n      nzShowIcon \r\n      [nzCloseable]=\"true\"\r\n      (nzOnClose)=\"error = null\"\r\n      style=\"margin-bottom: 16px\"\r\n    ></nz-alert>\r\n\r\n    <!-- Main Content -->\r\n    <div *ngIf=\"!loading\">\r\n      <!-- Workflow Selection -->\r\n      <div class=\"workflow-selection\">\r\n        <h4>Select Workflow</h4>\r\n        <nz-select \r\n          [(ngModel)]=\"selectedWorkflow\" \r\n          [nzPlaceHolder]=\"'Select a workflow'\"\r\n          style=\"width: 300px;\"\r\n          (ngModelChange)=\"onWorkflowChange($event)\"\r\n        >\r\n          <nz-option \r\n            *ngFor=\"let workflow of workflows\" \r\n            [nzValue]=\"workflow.meaning\" \r\n            [nzLabel]=\"workflow.meaning\"\r\n          ></nz-option>\r\n        </nz-select>\r\n      </div>\r\n\r\n      <!-- User List for Selected Workflow -->\r\n      <div *ngIf=\"selectedWorkflow\" class=\"user-list-section\">\r\n        <h4>Assigned Users</h4>\r\n        \r\n        <!-- Add User Input -->\r\n        <div class=\"add-user-input\">\r\n          <nz-input-group nzSearch [nzAddOnAfter]=\"suffixIconButton\" style=\"width: 300px;\">\r\n            <input \r\n              type=\"text\" \r\n              nz-input \r\n              placeholder=\"Enter username\" \r\n              [(ngModel)]=\"newUsername\"\r\n              (keydown.enter)=\"addUser()\"\r\n            />\r\n          </nz-input-group>\r\n          <ng-template #suffixIconButton>\r\n            <button \r\n              nz-button \r\n              nzType=\"primary\" \r\n              nzSearch\r\n              [nzLoading]=\"adding\"\r\n              [disabled]=\"!newUsername.trim() || adding\"\r\n              (click)=\"addUser()\"\r\n            >\r\n              <span nz-icon nzType=\"plus\"></span>\r\n              Add\r\n            </button>\r\n          </ng-template>\r\n        </div>\r\n\r\n        <!-- User List -->\r\n        <nz-list \r\n          class=\"user-list\"\r\n          [nzDataSource]=\"currentUsers\"\r\n          [nzRenderItem]=\"userItem\"\r\n          [nzNoResult]=\"noDataTemplate\"\r\n        >\r\n          <ng-template #userItem let-user>\r\n            <nz-list-item [nzActions]=\"[deleteAction]\">\r\n              <nz-list-item-meta>\r\n                <nz-list-item-meta-title>\r\n                  <span nz-icon nzType=\"user\" style=\"margin-right: 8px;\"></span>\r\n                  {{ user.fullName }} <span class=\"username-display\">({{ user.username }})</span>\r\n                </nz-list-item-meta-title>\r\n              </nz-list-item-meta>\r\n              <ng-template #deleteAction>\r\n                <button \r\n                  nz-button \r\n                  nzType=\"text\" \r\n                  nzDanger\r\n                  nz-tooltip\r\n                  nzTooltipTitle=\"Remove user\"\r\n                  (click)=\"removeUser(user)\"\r\n                >\r\n                  <span nz-icon nzType=\"delete\"></span>\r\n                </button>\r\n              </ng-template>\r\n            </nz-list-item>\r\n          </ng-template>\r\n          <ng-template #noDataTemplate>\r\n            <nz-empty nzNotFoundContent=\"No users assigned to this workflow\"></nz-empty>\r\n          </ng-template>\r\n        </nz-list>\r\n      </div>\r\n\r\n      <!-- Save Button -->\r\n      <div class=\"action-buttons\" *ngIf=\"hasChanges\">\r\n        <button \r\n          nz-button \r\n          nzType=\"primary\"\r\n          [nzLoading]=\"saving\"\r\n          [disabled]=\"saving\"\r\n          (click)=\"saveUserAssignments()\"\r\n        >\r\n          <span nz-icon nzType=\"save\"></span>\r\n          Save Changes\r\n        </button>\r\n        <button \r\n          nz-button \r\n          [disabled]=\"saving\"\r\n          (click)=\"resetChanges()\"\r\n        >\r\n          Reset\r\n        </button>\r\n      </div>\r\n\r\n      <!-- Success Message -->\r\n      <nz-alert \r\n        *ngIf=\"saveSuccess\" \r\n        nzType=\"success\" \r\n        nzMessage=\"User assignments saved successfully!\" \r\n        nzShowIcon \r\n        [nzCloseable]=\"true\"\r\n        (nzOnClose)=\"saveSuccess = false\"\r\n        style=\"margin-top: 16px\"\r\n      ></nz-alert>\r\n    </div>\r\n  </nz-card>\r\n</div>","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-admin',\r\n  templateUrl: './admin.component.html',\r\n  styleUrls: ['./admin.component.scss']\r\n})\r\nexport class AdminComponent {\r\n  // This component now serves as a container for sub-components\r\n  // All functionality has been moved to dedicated sub-components:\r\n  // - CorepointIntegrationComponent for integration settings\r\n  // - SystemConfigurationComponent for system configuration\r\n}","<!-- COMPASS Administration Dashboard -->\r\n<div class=\"admin-dashboard\">\r\n  <!-- Header Section -->\r\n  <nz-page-header \r\n    nzTitle=\"COMPASS Administration\" \r\n    nzSubTitle=\"System Configuration & Management\"\r\n    [nzGhost]=\"false\"\r\n  >\r\n  </nz-page-header>\r\n\r\n  <!-- Main Administration Content -->\r\n  <div class=\"admin-content\">\r\n         <!-- Integration Settings Section -->\r\n     <nz-row [nzGutter]=\"24\" style=\"margin-bottom: 24px;\">\r\n       <nz-col [nzSpan]=\"24\">\r\n         <nz-collapse>\r\n           <nz-collapse-panel \r\n             nzHeader=\"Integration Settings\" \r\n             [nzActive]=\"false\"\r\n             [nzExtra]=\"integrationExtraTemplate\">\r\n             <ng-template #integrationExtraTemplate>\r\n               <nz-tag nzColor=\"blue\">API</nz-tag>\r\n             </ng-template>\r\n             \r\n             <div class=\"admin-section\">\r\n               <app-corepoint-integration></app-corepoint-integration>\r\n             </div>\r\n           </nz-collapse-panel>\r\n         </nz-collapse>\r\n       </nz-col>\r\n     </nz-row>\r\n\r\n    <!-- System Configuration Section -->\r\n    <nz-row [nzGutter]=\"24\" style=\"margin-bottom: 24px;\">\r\n      <nz-col [nzSpan]=\"24\">\r\n        <nz-collapse>\r\n          <nz-collapse-panel \r\n            nzHeader=\"System Configuration\" \r\n            [nzActive]=\"false\"\r\n            [nzExtra]=\"configExtraTemplate\">\r\n            <ng-template #configExtraTemplate>\r\n              <nz-tag nzColor=\"green\">Core</nz-tag>\r\n            </ng-template>\r\n            \r\n            <div class=\"admin-section\">\r\n              <app-system-configuration></app-system-configuration>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </nz-col>\r\n    </nz-row>\r\n\r\n    <!-- User Assignment Section -->\r\n    <nz-row [nzGutter]=\"24\" style=\"margin-bottom: 24px;\">\r\n      <nz-col [nzSpan]=\"24\">\r\n        <nz-collapse>\r\n          <nz-collapse-panel \r\n            nzHeader=\"User Assignment\" \r\n            [nzActive]=\"false\"\r\n            [nzExtra]=\"userExtraTemplate\">\r\n            <ng-template #userExtraTemplate>\r\n              <nz-tag nzColor=\"purple\">Users</nz-tag>\r\n            </ng-template>\r\n            \r\n            <div class=\"admin-section\">\r\n              <app-admin-user-assignment></app-admin-user-assignment>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </nz-col>\r\n    </nz-row>\r\n\r\n    <!-- Test Tools Section -->\r\n    <nz-row [nzGutter]=\"24\" style=\"margin-bottom: 24px;\">\r\n      <nz-col [nzSpan]=\"24\">\r\n        <nz-collapse>\r\n          <nz-collapse-panel \r\n            nzHeader=\"Test Tools\" \r\n            [nzActive]=\"false\"\r\n            [nzExtra]=\"testToolsExtraTemplate\">\r\n            <ng-template #testToolsExtraTemplate>\r\n              <nz-tag nzColor=\"cyan\">Testing</nz-tag>\r\n            </ng-template>\r\n            \r\n            <div class=\"admin-section\">\r\n              <app-test-tools></app-test-tools>\r\n            </div>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </nz-col>\r\n    </nz-row>\r\n\r\n    <!-- System Monitoring Section -->\r\n    <nz-row [nzGutter]=\"24\" style=\"margin-bottom: 24px;\">\r\n      <nz-col [nzSpan]=\"24\">\r\n        <nz-collapse>\r\n          <nz-collapse-panel \r\n            nzHeader=\"System Monitoring\" \r\n            [nzActive]=\"false\"\r\n            [nzExtra]=\"monitoringExtraTemplate\">\r\n            <ng-template #monitoringExtraTemplate>\r\n              <nz-tag nzColor=\"orange\">Future</nz-tag>\r\n            </ng-template>\r\n            \r\n            <nz-card nzTitle=\"System Monitoring\" [nzBordered]=\"true\">\r\n              <nz-empty \r\n                nzNotFoundImage=\"simple\"\r\n                nzNotFoundContent=\"System monitoring features will be available in a future release.\">\r\n              </nz-empty>\r\n            </nz-card>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </nz-col>\r\n    </nz-row>\r\n  </div>\r\n</div>","import { Component, OnInit, NgZone, ChangeDetectorRef } from '@angular/core';\r\nimport { AdminService } from '../../../services/admin.service';\r\nimport { MessagingService } from '../../../services/messaging.service';\r\n\r\n@Component({\r\n  selector: 'app-corepoint-integration',\r\n  templateUrl: './corepoint-integration.component.html',\r\n  styleUrls: ['./corepoint-integration.component.scss']\r\n})\r\nexport class CorepointIntegrationComponent implements OnInit {\r\n  // Corepoint Glidian Credentials properties\r\n  credentialsLoading = false; // Loading state for credentials\r\n  credentialsError: string | null = null; // Error message for credentials\r\n  credentialsSaving = false; // Save loading state for credentials\r\n  credentialsSaveSuccess = false; // Save success state for credentials\r\n  credentialsSaveError: string | null = null; // Save error state for credentials\r\n  \r\n  currentCredentials = {\r\n    username: '',\r\n    password: '',\r\n    hasCredentials: false\r\n  };\r\n  \r\n  credentialsForm = {\r\n    username: '',\r\n    password: ''\r\n  };\r\n\r\n  // Corepoint Glidian URL properties\r\n  urlLoading = false; // Loading state for URL\r\n  urlError: string | null = null; // Error message for URL\r\n  urlSaving = false; // Save loading state for URL\r\n  urlSaveSuccess = false; // Save success state for URL\r\n  urlSaveError: string | null = null; // Save error state for URL\r\n  \r\n  currentUrl = {\r\n    url: '',\r\n    hasUrl: false\r\n  };\r\n  \r\n  urlForm = {\r\n    url: ''\r\n  };\r\n\r\n  passwordVisible = false; // Controls password visibility toggle\r\n\r\n  // Corepoint Glidian Record URL properties\r\n  recordUrlLoading = false; // Loading state for Record URL\r\n  recordUrlError: string | null = null; // Error message for Record URL\r\n  recordUrlSaving = false; // Save loading state for Record URL\r\n  recordUrlSaveSuccess = false; // Save success state for Record URL\r\n  recordUrlSaveError: string | null = null; // Save error state for Record URL\r\n\r\n  currentRecordUrl = {\r\n    url: '',\r\n    hasUrl: false\r\n  };\r\n\r\n  recordUrlForm = {\r\n    url: ''\r\n  };\r\n\r\n  constructor(\r\n    private adminService: AdminService,\r\n    private ngZone: NgZone,\r\n    private cdr: ChangeDetectorRef,\r\n    private messagingService: MessagingService\r\n  ) {}\r\n\r\n  /**\r\n   * OnInit lifecycle hook to fetch Corepoint Glidian credentials and URL on load.\r\n   */\r\n  ngOnInit(): void {\r\n    this.fetchCorepointCredentials();\r\n    this.fetchCorepointUrl();\r\n    this.fetchCorepointGlidianRecordUrl();\r\n  }\r\n\r\n  /**\r\n   * Fetches the current Corepoint Glidian credentials from the backend.\r\n   */\r\n  fetchCorepointCredentials(): void {\r\n    this.credentialsLoading = true;\r\n    this.credentialsError = null;\r\n    // this.messagingService.info('Loading Corepoint Glidian credentials...');\r\n    \r\n    this.adminService.getCorepointGlidianCredentials().subscribe({\r\n      next: (response: any) => {\r\n        this.ngZone.run(() => {\r\n          this.currentCredentials = {\r\n            username: response.username || '',\r\n            password: response.password || '',\r\n            hasCredentials: response.hascredentials || response.hasCredentials || false\r\n          };\r\n          \r\n          // Update form with current values\r\n          this.credentialsForm = {\r\n            username: this.currentCredentials.username,\r\n            password: this.currentCredentials.password\r\n          };\r\n          \r\n          this.credentialsLoading = false;\r\n          this.cdr.detectChanges();\r\n          // this.messagingService.success('Corepoint Glidian credentials loaded.');\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.credentialsError = 'Failed to load Corepoint Glidian credentials.';\r\n          this.credentialsLoading = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to load Corepoint Glidian credentials.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Saves the updated Corepoint Glidian credentials to the backend.\r\n   */\r\n  saveCorepointCredentials(): void {\r\n    this.credentialsSaveSuccess = false;\r\n    this.credentialsSaveError = null;\r\n    this.credentialsSaving = true;\r\n    \r\n    // Basic validation\r\n    if (!this.credentialsForm.username.trim() || !this.credentialsForm.password.trim()) {\r\n      this.credentialsSaveError = 'Both username and password are required.';\r\n      this.credentialsSaving = false;\r\n      this.messagingService.error(this.credentialsSaveError);\r\n      return;\r\n    }\r\n    \r\n    // this.messagingService.info('Saving Corepoint Glidian credentials...');\r\n    \r\n    const credentials = {\r\n      username: this.credentialsForm.username.trim(),\r\n      password: this.credentialsForm.password.trim()\r\n    };\r\n    \r\n    this.adminService.storeCorepointGlidianCredentials(credentials).subscribe({\r\n      next: () => {\r\n        this.ngZone.run(() => {\r\n          this.credentialsSaveSuccess = true;\r\n          this.credentialsSaving = false;\r\n          \r\n          // Update current credentials\r\n          this.currentCredentials = {\r\n            username: credentials.username,\r\n            password: credentials.password,\r\n            hasCredentials: true\r\n          };\r\n          \r\n          this.cdr.detectChanges();\r\n          // this.messagingService.success('Corepoint Glidian credentials saved successfully.');\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.credentialsSaveError = 'Failed to save Corepoint Glidian credentials.';\r\n          this.credentialsSaving = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to save Corepoint Glidian credentials.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Resets the credentials form to the current saved values.\r\n   */\r\n  resetCredentialsForm(): void {\r\n    this.credentialsForm = {\r\n      username: this.currentCredentials.username,\r\n      password: this.currentCredentials.password\r\n    };\r\n    this.credentialsSaveSuccess = false;\r\n    this.credentialsSaveError = null;\r\n    // this.messagingService.info('Reset credentials form.');\r\n  }\r\n\r\n  /**\r\n   * Clears the credentials form.\r\n   */\r\n  clearCredentialsForm(): void {\r\n    this.credentialsForm = {\r\n      username: '',\r\n      password: ''\r\n    };\r\n    this.credentialsSaveSuccess = false;\r\n    this.credentialsSaveError = null;\r\n  }\r\n\r\n  /**\r\n   * Fetches the current Corepoint Glidian URL from the backend.\r\n   */\r\n  fetchCorepointUrl(): void {\r\n    this.urlLoading = true;\r\n    this.urlError = null;\r\n    // this.messagingService.info('Loading Corepoint Glidian URL...');\r\n    \r\n    this.adminService.getCorepointGlidianUrl().subscribe({\r\n      next: (response: any) => {\r\n        this.ngZone.run(() => {\r\n          this.currentUrl = {\r\n            url: response.url || '',\r\n            hasUrl: response.hasUrl || response.hasurl || false\r\n          };\r\n          \r\n          // Update form with current values\r\n          this.urlForm = {\r\n            url: this.currentUrl.url\r\n          };\r\n          \r\n          this.urlLoading = false;\r\n          this.cdr.detectChanges();\r\n          // this.messagingService.success('Corepoint Glidian URL loaded.');\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.urlError = 'Failed to load Corepoint Glidian URL.';\r\n          this.urlLoading = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to load Corepoint Glidian URL.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Saves the updated Corepoint Glidian URL to the backend.\r\n   */\r\n  saveCorepointUrl(): void {\r\n    this.urlSaveSuccess = false;\r\n    this.urlSaveError = null;\r\n    this.urlSaving = true;\r\n    \r\n    // Basic validation\r\n    if (!this.urlForm.url.trim()) {\r\n      this.urlSaveError = 'URL is required.';\r\n      this.urlSaving = false;\r\n      this.messagingService.error(this.urlSaveError);\r\n      return;\r\n    }\r\n    \r\n    // URL format validation\r\n    try {\r\n      new URL(this.urlForm.url.trim());\r\n    } catch (e) {\r\n      this.urlSaveError = 'Please enter a valid URL (e.g., https://api.example.com).';\r\n      this.urlSaving = false;\r\n      this.messagingService.error(this.urlSaveError);\r\n      return;\r\n    }\r\n    \r\n    // this.messagingService.info('Saving Corepoint Glidian URL...');\r\n    \r\n    const urlData = {\r\n      url: this.urlForm.url.trim()\r\n    };\r\n    \r\n    this.adminService.storeCorepointGlidianUrl(urlData).subscribe({\r\n      next: () => {\r\n        this.ngZone.run(() => {\r\n          this.urlSaveSuccess = true;\r\n          this.urlSaving = false;\r\n          \r\n          // Update current URL\r\n          this.currentUrl = {\r\n            url: urlData.url,\r\n            hasUrl: true\r\n          };\r\n          \r\n          this.cdr.detectChanges();\r\n          // this.messagingService.success('Corepoint Glidian URL saved successfully.');\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.urlSaveError = 'Failed to save Corepoint Glidian URL.';\r\n          this.urlSaving = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to save Corepoint Glidian URL.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Resets the URL form to the current saved values.\r\n   */\r\n  resetUrlForm(): void {\r\n    this.urlForm = {\r\n      url: this.currentUrl.url\r\n    };\r\n    this.urlSaveSuccess = false;\r\n    this.urlSaveError = null;\r\n    // this.messagingService.info('Reset URL form.');\r\n  }\r\n\r\n  /**\r\n   * Clears the URL form.\r\n   */\r\n  clearUrlForm(): void {\r\n    this.urlForm = {\r\n      url: ''\r\n    };\r\n    this.urlSaveSuccess = false;\r\n    this.urlSaveError = null;\r\n  }\r\n\r\n  /**\r\n   * Fetches the current Corepoint Glidian Record URL from the backend.\r\n   */\r\n  fetchCorepointGlidianRecordUrl(): void {\r\n    this.recordUrlLoading = true;\r\n    this.recordUrlError = null;\r\n    this.adminService.getCorepointGlidianRecordUrl().subscribe({\r\n      next: (response: any) => {\r\n        this.ngZone.run(() => {\r\n          this.currentRecordUrl = {\r\n            url: response.url || '',\r\n            hasUrl: response.hasUrl || response.hasurl || false\r\n          };\r\n          this.recordUrlForm = {\r\n            url: this.currentRecordUrl.url\r\n          };\r\n          this.recordUrlLoading = false;\r\n          this.cdr.detectChanges();\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.recordUrlError = 'Failed to load Corepoint Glidian Record URL.';\r\n          this.recordUrlLoading = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to load Corepoint Glidian Record URL.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Saves the updated Corepoint Glidian Record URL to the backend.\r\n   */\r\n  saveCorepointGlidianRecordUrl(): void {\r\n    this.recordUrlSaveSuccess = false;\r\n    this.recordUrlSaveError = null;\r\n    this.recordUrlSaving = true;\r\n    // Basic validation\r\n    if (!this.recordUrlForm.url.trim()) {\r\n      this.recordUrlSaveError = 'Record URL is required.';\r\n      this.recordUrlSaving = false;\r\n      this.messagingService.error(this.recordUrlSaveError);\r\n      return;\r\n    }\r\n    // URL format validation\r\n    try {\r\n      new URL(this.recordUrlForm.url.trim());\r\n    } catch (e) {\r\n      this.recordUrlSaveError = 'Please enter a valid URL (e.g., https://api.example.com).';\r\n      this.recordUrlSaving = false;\r\n      this.messagingService.error(this.recordUrlSaveError);\r\n      return;\r\n    }\r\n    const urlData = {\r\n      url: this.recordUrlForm.url.trim()\r\n    };\r\n    this.adminService.storeCorepointGlidianRecordUrl(urlData).subscribe({\r\n      next: () => {\r\n        this.ngZone.run(() => {\r\n          this.recordUrlSaveSuccess = true;\r\n          this.recordUrlSaving = false;\r\n          this.currentRecordUrl = {\r\n            url: urlData.url,\r\n            hasUrl: true\r\n          };\r\n          this.cdr.detectChanges();\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.recordUrlSaveError = 'Failed to save Corepoint Glidian Record URL.';\r\n          this.recordUrlSaving = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to save Corepoint Glidian Record URL.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Resets the Record URL form to the current saved values.\r\n   */\r\n  resetRecordUrlForm(): void {\r\n    this.recordUrlForm = {\r\n      url: this.currentRecordUrl.url\r\n    };\r\n    this.recordUrlSaveSuccess = false;\r\n    this.recordUrlSaveError = null;\r\n  }\r\n\r\n  /**\r\n   * Clears the Record URL form.\r\n   */\r\n  clearRecordUrlForm(): void {\r\n    this.recordUrlForm = {\r\n      url: ''\r\n    };\r\n    this.recordUrlSaveSuccess = false;\r\n    this.recordUrlSaveError = null;\r\n  }\r\n} ","<!-- Corepoint Glidian Integration Card -->\r\n<nz-card \r\n  nzTitle=\"Corepoint Glidian Integration\" \r\n  [nzExtra]=\"credentialsStatusTemplate\"\r\n  [nzBordered]=\"true\"\r\n  style=\"margin-bottom: 24px;\"\r\n>\r\n  <ng-template #credentialsStatusTemplate>\r\n    <nz-tag [nzColor]=\"currentCredentials.hasCredentials ? 'success' : 'warning'\">\r\n      <i nz-icon [nzType]=\"currentCredentials.hasCredentials ? 'check-circle' : 'warning'\" nzTheme=\"fill\"></i>\r\n      {{ currentCredentials.hasCredentials ? 'Configured' : 'Not Configured' }}\r\n    </nz-tag>\r\n  </ng-template>\r\n\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered nzSize=\"small\" style=\"margin-bottom: 16px;\">\r\n    <nz-descriptions-item nzTitle=\"Purpose\" [nzSpan]=\"2\">\r\n      Authentication credentials for Corepoint Glidian API integration\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Current Username\">\r\n      {{ currentCredentials.username || 'Not set' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Password Status\">\r\n      {{ currentCredentials.hasCredentials ? 'Configured' : 'Not set' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n  \r\n  <nz-spin [nzSpinning]=\"credentialsLoading\" nzTip=\"Loading credentials...\">\r\n    <div *ngIf=\"credentialsError\" class=\"error-state\" style=\"margin-bottom: 16px;\">\r\n      <nz-alert nzType=\"error\" [nzMessage]=\"credentialsError\" nzShowIcon></nz-alert>\r\n    </div>\r\n\r\n    <div *ngIf=\"!credentialsLoading && !credentialsError\">\r\n      <nz-divider nzText=\"Update Credentials\" nzOrientation=\"left\"></nz-divider>\r\n      \r\n      <form nz-form nzLayout=\"vertical\">\r\n        <nz-row [nzGutter]=\"16\">\r\n          <nz-col [nzSpan]=\"12\">\r\n            <nz-form-item>\r\n              <nz-form-label nzRequired>Username</nz-form-label>\r\n              <nz-form-control nzErrorTip=\"Username is required\">\r\n                <input \r\n                  nz-input \r\n                  placeholder=\"Enter Corepoint Glidian username\"\r\n                  [(ngModel)]=\"credentialsForm.username\"\r\n                  name=\"username\"\r\n                  [disabled]=\"credentialsSaving\">\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </nz-col>\r\n          \r\n          <nz-col [nzSpan]=\"12\">\r\n            <nz-form-item>\r\n              <nz-form-label nzRequired>Password</nz-form-label>\r\n              <nz-form-control nzErrorTip=\"Password is required\">\r\n                <nz-input-group [nzSuffix]=\"passwordSuffix\">\r\n                  <input \r\n                    [type]=\"passwordVisible ? 'text' : 'password'\"\r\n                    nz-input \r\n                    placeholder=\"Enter Corepoint Glidian password\"\r\n                    [(ngModel)]=\"credentialsForm.password\"\r\n                    name=\"password\"\r\n                    [disabled]=\"credentialsSaving\">\r\n                </nz-input-group>\r\n                <ng-template #passwordSuffix>\r\n                  <i \r\n                    nz-icon \r\n                    [nzType]=\"passwordVisible ? 'eye-invisible' : 'eye'\" \r\n                    class=\"password-toggle\"\r\n                    (click)=\"passwordVisible = !passwordVisible\">\r\n                  </i>\r\n                </ng-template>\r\n              </nz-form-control>\r\n            </nz-form-item>\r\n          </nz-col>\r\n        </nz-row>\r\n\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-button-group>\r\n              <button \r\n                nz-button \r\n                nzType=\"primary\" \r\n                (click)=\"saveCorepointCredentials()\" \r\n                [nzLoading]=\"credentialsSaving\"\r\n                [disabled]=\"credentialsSaving\">\r\n                <i nz-icon nzType=\"save\"></i>\r\n                Save Credentials\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"resetCredentialsForm()\" \r\n                [disabled]=\"credentialsSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reset\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"clearCredentialsForm()\" \r\n                [disabled]=\"credentialsSaving\">\r\n                <i nz-icon nzType=\"clear\"></i>\r\n                Clear\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"fetchCorepointCredentials()\" \r\n                [disabled]=\"credentialsLoading || credentialsSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reload\r\n              </button>\r\n            </nz-button-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <div *ngIf=\"credentialsSaveSuccess\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"success\"\r\n            nzMessage=\"Credentials Saved Successfully\"\r\n            nzDescription=\"Corepoint Glidian integration credentials have been updated.\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n        \r\n        <div *ngIf=\"credentialsSaveError\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"error\"\r\n            nzMessage=\"Failed to Save Credentials\"\r\n            [nzDescription]=\"credentialsSaveError\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </nz-spin>\r\n</nz-card>\r\n\r\n<!-- Corepoint Glidian URL Configuration Card -->\r\n<nz-card \r\n  nzTitle=\"Corepoint Glidian URL Configuration\" \r\n  [nzExtra]=\"urlStatusTemplate\"\r\n  [nzBordered]=\"true\"\r\n  style=\"margin-bottom: 24px;\"\r\n>\r\n  <ng-template #urlStatusTemplate>\r\n    <nz-tag [nzColor]=\"currentUrl.hasUrl ? 'success' : 'warning'\">\r\n      <i nz-icon [nzType]=\"currentUrl.hasUrl ? 'check-circle' : 'warning'\" nzTheme=\"fill\"></i>\r\n      {{ currentUrl.hasUrl ? 'Configured' : 'Not Configured' }}\r\n    </nz-tag>\r\n  </ng-template>\r\n\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered nzSize=\"small\" style=\"margin-bottom: 16px;\">\r\n    <nz-descriptions-item nzTitle=\"Purpose\" [nzSpan]=\"2\">\r\n      API endpoint URL for Corepoint Glidian integration\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Current URL\">\r\n      {{ currentUrl.url || 'Not set' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Status\">\r\n      {{ currentUrl.hasUrl ? 'Configured' : 'Not set' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n  \r\n  <nz-spin [nzSpinning]=\"urlLoading\" nzTip=\"Loading URL...\">\r\n    <div *ngIf=\"urlError\" class=\"error-state\" style=\"margin-bottom: 16px;\">\r\n      <nz-alert nzType=\"error\" [nzMessage]=\"urlError\" nzShowIcon></nz-alert>\r\n    </div>\r\n\r\n    <div *ngIf=\"!urlLoading && !urlError\">\r\n      <nz-divider nzText=\"Update URL\" nzOrientation=\"left\"></nz-divider>\r\n      \r\n      <form nz-form nzLayout=\"vertical\">\r\n        <nz-form-item>\r\n          <nz-form-label nzRequired>API URL</nz-form-label>\r\n          <nz-form-control nzErrorTip=\"URL is required\">\r\n            <input \r\n              nz-input \r\n              placeholder=\"https://api.corepointglidian.com/v1\"\r\n              [(ngModel)]=\"urlForm.url\"\r\n              name=\"url\"\r\n              [disabled]=\"urlSaving\">\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-button-group>\r\n              <button \r\n                nz-button \r\n                nzType=\"primary\" \r\n                (click)=\"saveCorepointUrl()\" \r\n                [nzLoading]=\"urlSaving\"\r\n                [disabled]=\"urlSaving\">\r\n                <i nz-icon nzType=\"save\"></i>\r\n                Save URL\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"resetUrlForm()\" \r\n                [disabled]=\"urlSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reset\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"clearUrlForm()\" \r\n                [disabled]=\"urlSaving\">\r\n                <i nz-icon nzType=\"clear\"></i>\r\n                Clear\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"fetchCorepointUrl()\" \r\n                [disabled]=\"urlLoading || urlSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reload\r\n              </button>\r\n            </nz-button-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <div *ngIf=\"urlSaveSuccess\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"success\"\r\n            nzMessage=\"URL Saved Successfully\"\r\n            nzDescription=\"Corepoint Glidian integration URL has been updated.\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n        \r\n        <div *ngIf=\"urlSaveError\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"error\"\r\n            nzMessage=\"Failed to Save URL\"\r\n            [nzDescription]=\"urlSaveError\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </nz-spin>\r\n</nz-card> \r\n\r\n<!-- Corepoint Glidian Record URL Configuration Card -->\r\n<nz-card \r\n  nzTitle=\"Corepoint Glidian Record URL Configuration\" \r\n  [nzExtra]=\"recordUrlStatusTemplate\"\r\n  [nzBordered]=\"true\"\r\n  style=\"margin-bottom: 24px;\"\r\n>\r\n  <ng-template #recordUrlStatusTemplate>\r\n    <nz-tag [nzColor]=\"currentRecordUrl.hasUrl ? 'success' : 'warning'\">\r\n      <i nz-icon [nzType]=\"currentRecordUrl.hasUrl ? 'check-circle' : 'warning'\" nzTheme=\"fill\"></i>\r\n      {{ currentRecordUrl.hasUrl ? 'Configured' : 'Not Configured' }}\r\n    </nz-tag>\r\n  </ng-template>\r\n\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered nzSize=\"small\" style=\"margin-bottom: 16px;\">\r\n    <nz-descriptions-item nzTitle=\"Purpose\" [nzSpan]=\"2\">\r\n      API endpoint URL for Corepoint Glidian Record retrieval\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Current Record URL\">\r\n      {{ currentRecordUrl.url || 'Not set' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Status\">\r\n      {{ currentRecordUrl.hasUrl ? 'Configured' : 'Not set' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n  \r\n  <nz-spin [nzSpinning]=\"recordUrlLoading\" nzTip=\"Loading Record URL...\">\r\n    <div *ngIf=\"recordUrlError\" class=\"error-state\" style=\"margin-bottom: 16px;\">\r\n      <nz-alert nzType=\"error\" [nzMessage]=\"recordUrlError\" nzShowIcon></nz-alert>\r\n    </div>\r\n\r\n    <div *ngIf=\"!recordUrlLoading && !recordUrlError\">\r\n      <nz-divider nzText=\"Update Record URL\" nzOrientation=\"left\"></nz-divider>\r\n      \r\n      <form nz-form nzLayout=\"vertical\">\r\n        <nz-form-item>\r\n          <nz-form-label nzRequired>Record API URL</nz-form-label>\r\n          <nz-form-control nzErrorTip=\"Record URL is required\">\r\n            <input \r\n              nz-input \r\n              placeholder=\"https://api.corepointglidian.com/record\"\r\n              [(ngModel)]=\"recordUrlForm.url\"\r\n              name=\"recordUrl\"\r\n              [disabled]=\"recordUrlSaving\">\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <nz-form-item>\r\n          <nz-form-control>\r\n            <nz-button-group>\r\n              <button \r\n                nz-button \r\n                nzType=\"primary\" \r\n                (click)=\"saveCorepointGlidianRecordUrl()\" \r\n                [nzLoading]=\"recordUrlSaving\"\r\n                [disabled]=\"recordUrlSaving\">\r\n                <i nz-icon nzType=\"save\"></i>\r\n                Save Record URL\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"resetRecordUrlForm()\" \r\n                [disabled]=\"recordUrlSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reset\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"clearRecordUrlForm()\" \r\n                [disabled]=\"recordUrlSaving\">\r\n                <i nz-icon nzType=\"clear\"></i>\r\n                Clear\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\" \r\n                (click)=\"fetchCorepointGlidianRecordUrl()\" \r\n                [disabled]=\"recordUrlLoading || recordUrlSaving\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n                Reload\r\n              </button>\r\n            </nz-button-group>\r\n          </nz-form-control>\r\n        </nz-form-item>\r\n\r\n        <div *ngIf=\"recordUrlSaveSuccess\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"success\"\r\n            nzMessage=\"Record URL Saved Successfully\"\r\n            nzDescription=\"Corepoint Glidian Record URL has been updated.\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n        \r\n        <div *ngIf=\"recordUrlSaveError\" style=\"margin-top: 16px;\">\r\n          <nz-alert\r\n            nzType=\"error\"\r\n            nzMessage=\"Failed to Save Record URL\"\r\n            [nzDescription]=\"recordUrlSaveError\"\r\n            nzShowIcon>\r\n          </nz-alert>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </nz-spin>\r\n</nz-card> ","import { Component, OnInit, NgZone, ChangeDetectorRef } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { AdminService } from '../../../services/admin.service';\r\nimport { MessagingService } from '../../../services/messaging.service';\r\nimport { \r\n  Workflow, \r\n  Worklist, \r\n  DataElement, \r\n  Milestone, \r\n  FilterSet,\r\n  Filter,\r\n  CompassConfiguration \r\n} from '../../../models/system-configuration.model';\r\n\r\n@Component({\r\n  selector: 'app-system-configuration',\r\n  templateUrl: './system-configuration.component.html',\r\n  styleUrls: ['./system-configuration.component.scss']\r\n})\r\nexport class SystemConfigurationComponent implements OnInit {\r\n  // === EXISTING PROPERTIES ===\r\n  configJson: any = null;\r\n  editableJson: string = '';\r\n  jsonError: string | null = null;\r\n  saveSuccess: boolean = false;\r\n  saveError: string | null = null;\r\n  saving: boolean = false;\r\n  loading = false;\r\n  error: string | null = null;\r\n\r\n  // === NEW PROPERTIES FOR STRUCTURED EDITING ===\r\n  editMode: 'json' | 'structured' = 'structured';\r\n  activeTab: 'workflows' | 'worklists' | 'overview' = 'overview';\r\n  \r\n  // Workflow management\r\n  workflows: Workflow[] = [];\r\n  selectedWorkflow: Workflow | null = null;\r\n  editingWorkflow: Workflow | null = null;\r\n  \r\n  // Data element management\r\n  selectedDataElement: DataElement | null = null;\r\n  editingDataElement: DataElement | null = null;\r\n  \r\n  // Milestone management\r\n  selectedMilestone: Milestone | null = null;\r\n  editingMilestone: Milestone | null = null;\r\n  \r\n  // Worklist management\r\n  worklists: Worklist[] = [];\r\n  selectedWorklist: Worklist | null = null;\r\n  editingWorklist: Worklist | null = null;\r\n\r\n  // Filter set management\r\n  selectedFilterSet: FilterSet | null = null;\r\n  editingFilterSet: FilterSet | null = null;\r\n\r\n  // Form states\r\n  showAddWorkflow = false;\r\n  showAddDataElement = false;\r\n  showAddMilestone = false;\r\n  showAddWorklist = false;\r\n  showAddFilterSet = false;\r\n\r\n  // Form groups\r\n  workflowForm!: FormGroup;\r\n  dataElementForm!: FormGroup;\r\n  milestoneForm!: FormGroup;\r\n  worklistForm!: FormGroup;\r\n  filterSetForm!: FormGroup;\r\n\r\n  constructor(\r\n    private adminService: AdminService,\r\n    private ngZone: NgZone,\r\n    private cdr: ChangeDetectorRef,\r\n    private messagingService: MessagingService,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.initializeForms();\r\n  }\r\n\r\n  /**\r\n   * Initialize form groups for structured editing\r\n   */\r\n  initializeForms(): void {\r\n    this.workflowForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      meaning: ['', Validators.required]\r\n    });\r\n\r\n    this.dataElementForm = this.fb.group({\r\n      display: ['', Validators.required],\r\n      meaning: ['', Validators.required],\r\n      definition: ['']\r\n    });\r\n\r\n    this.milestoneForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      meaning: ['', Validators.required],\r\n      sequence: [1, Validators.required],\r\n      requiredInd: [1]\r\n    });\r\n\r\n    this.worklistForm = this.fb.group({\r\n      name: ['', Validators.required],\r\n      meaning: ['', Validators.required]\r\n    });\r\n\r\n    this.filterSetForm = this.fb.group({\r\n      id: ['', Validators.required],\r\n      label: ['', Validators.required],\r\n      route: ['', Validators.required],\r\n      subroute: ['', Validators.required],\r\n      type: ['PredefinedFilter', Validators.required],\r\n      isDefault: [0],\r\n      sortOrder: [0, Validators.required]\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.fetchCompassConfig();\r\n  }\r\n\r\n  fetchCompassConfig(): void {\r\n    this.loading = true;\r\n    this.error = null;\r\n    \r\n    this.adminService.getCompassConfiguration().subscribe({\r\n      next: (config: any) => {\r\n        this.ngZone.run(() => {\r\n          this.configJson = config;\r\n          this.editableJson = JSON.stringify(config, null, 2);\r\n          this.parseStructuredData(config);\r\n          this.loading = false;\r\n          this.cdr.detectChanges();\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.error = 'Failed to load Compass Configuration.';\r\n          this.loading = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to load Compass Configuration.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Parse the configuration JSON into structured data for editing\r\n   */\r\n  parseStructuredData(config: any): void {\r\n    this.workflows = config.workflows || [];\r\n    this.worklists = config.worklists || [];\r\n  }\r\n\r\n  /**\r\n   * Generate the next available ID for a given array\r\n   */\r\n  getNextId(items: any[], idField: string = 'id'): number {\r\n    if (!items || items.length === 0) return 1;\r\n    const maxId = Math.max(...items.map(item => item[idField]));\r\n    return maxId + 1;\r\n  }\r\n\r\n  // === WORKFLOW MANAGEMENT ===\r\n\r\n  selectWorkflow(workflow: Workflow): void {\r\n    this.selectedWorkflow = workflow;\r\n    this.editingWorkflow = null;\r\n  }\r\n\r\n  addWorkflow(): void {\r\n    const newWorkflow: Workflow = {\r\n      id: this.getNextId(this.workflows),\r\n      name: '',\r\n      meaning: '',\r\n      updtDtTm: new Date().toISOString(),\r\n      dataElementsCnt: 0,\r\n      filterSetsCnt: 0,\r\n      filterSets: [],\r\n      dataElements: [],\r\n      milestoneCnt: 0,\r\n      milestones: []\r\n    };\r\n    \r\n    this.editingWorkflow = { ...newWorkflow };\r\n    this.workflowForm.patchValue({\r\n      name: '',\r\n      meaning: ''\r\n    });\r\n    this.showAddWorkflow = true;\r\n  }\r\n\r\n  editWorkflow(workflow: Workflow): void {\r\n    this.editingWorkflow = { ...workflow };\r\n    this.workflowForm.patchValue({\r\n      name: workflow.name,\r\n      meaning: workflow.meaning\r\n    });\r\n    this.showAddWorkflow = true;\r\n  }\r\n\r\n  saveWorkflow(): void {\r\n    if (!this.editingWorkflow || this.workflowForm.invalid) return;\r\n\r\n    const formValue = this.workflowForm.value;\r\n    \r\n    // Update the editing workflow with form values\r\n    this.editingWorkflow.name = formValue.name;\r\n    this.editingWorkflow.meaning = formValue.meaning;\r\n\r\n    if (this.editingWorkflow.id === 0) {\r\n      // New workflow\r\n      this.editingWorkflow.id = this.getNextId(this.workflows);\r\n      this.workflows.push({ ...this.editingWorkflow });\r\n    } else {\r\n      // Update existing workflow\r\n      const index = this.workflows.findIndex(w => w.id === this.editingWorkflow!.id);\r\n      if (index !== -1) {\r\n        this.workflows[index] = { ...this.editingWorkflow };\r\n      }\r\n    }\r\n\r\n    this.updateConfigFromStructured();\r\n    this.showAddWorkflow = false;\r\n    this.editingWorkflow = null;\r\n    this.messagingService.success('Workflow saved successfully');\r\n  }\r\n\r\n  deleteWorkflow(workflow: Workflow): void {\r\n    const index = this.workflows.findIndex(w => w.id === workflow.id);\r\n    if (index !== -1) {\r\n      this.workflows.splice(index, 1);\r\n      this.updateConfigFromStructured();\r\n      this.messagingService.success('Workflow deleted successfully');\r\n    }\r\n  }\r\n\r\n  // === DATA ELEMENT MANAGEMENT ===\r\n\r\n  addDataElement(workflow: Workflow): void {\r\n    const newDataElement: DataElement = {\r\n      id: 0,\r\n      display: '',\r\n      meaning: '',\r\n      definition: '',\r\n      domain: ''\r\n    };\r\n    this.editingDataElement = { ...newDataElement };\r\n    this.dataElementForm.reset(this.editingDataElement);\r\n    this.selectedWorkflow = workflow;\r\n    this.showAddDataElement = true;\r\n  }\r\n\r\n  editDataElement(dataElement: DataElement): void {\r\n    this.editingDataElement = { ...dataElement };\r\n    this.dataElementForm.reset(this.editingDataElement);\r\n    this.showAddDataElement = true;\r\n  }\r\n\r\n  saveDataElement(): void {\r\n    if (!this.selectedWorkflow) return;\r\n    const formValue = this.dataElementForm.value;\r\n    if (!formValue.display || !formValue.meaning) {\r\n      this.messagingService.error('Display and meaning are required for data elements');\r\n      return;\r\n    }\r\n    if (this.editingDataElement && this.editingDataElement.id === 0) {\r\n      // New data element\r\n      formValue.id = this.getNextId(this.selectedWorkflow.dataElements);\r\n      this.selectedWorkflow.dataElements.push({ ...formValue });\r\n    } else if (this.editingDataElement) {\r\n      // Update existing data element\r\n      const index = this.selectedWorkflow.dataElements.findIndex(de => de.id === this.editingDataElement!.id);\r\n      if (index !== -1) {\r\n        formValue.id = this.editingDataElement.id;\r\n        this.selectedWorkflow.dataElements[index] = { ...formValue };\r\n      }\r\n    }\r\n    this.updateConfigFromStructured();\r\n    this.showAddDataElement = false;\r\n    this.editingDataElement = null;\r\n    this.messagingService.success('Data element saved successfully');\r\n  }\r\n\r\n  deleteDataElement(dataElement: DataElement): void {\r\n    if (!this.selectedWorkflow) return;\r\n    \r\n    const index = this.selectedWorkflow.dataElements.findIndex(de => de.id === dataElement.id);\r\n    if (index !== -1) {\r\n      this.selectedWorkflow.dataElements.splice(index, 1);\r\n      this.updateConfigFromStructured();\r\n      this.messagingService.success('Data element deleted successfully');\r\n    }\r\n  }\r\n\r\n  // === MILESTONE MANAGEMENT ===\r\n\r\n  addMilestone(workflow: Workflow): void {\r\n    const newMilestone: Milestone = {\r\n      id: this.getNextId(workflow.milestones),\r\n      name: '',\r\n      meaning: '',\r\n      sequence: workflow.milestones.length + 1,\r\n      requiredInd: 1\r\n    };\r\n    \r\n    this.editingMilestone = { ...newMilestone };\r\n    this.selectedWorkflow = workflow;\r\n    this.showAddMilestone = true;\r\n  }\r\n\r\n  editMilestone(milestone: Milestone): void {\r\n    this.editingMilestone = { ...milestone };\r\n    this.showAddMilestone = true;\r\n  }\r\n\r\n  saveMilestone(): void {\r\n    if (!this.editingMilestone || !this.selectedWorkflow) return;\r\n\r\n    // Validate required fields\r\n    if (!this.editingMilestone.name || !this.editingMilestone.meaning) {\r\n      this.messagingService.error('Name and meaning are required for milestones');\r\n      return;\r\n    }\r\n\r\n    if (this.editingMilestone.id === 0) {\r\n      // New milestone\r\n      this.editingMilestone.id = this.getNextId(this.selectedWorkflow.milestones);\r\n      this.selectedWorkflow.milestones.push({ ...this.editingMilestone });\r\n    } else {\r\n      // Update existing milestone\r\n      const index = this.selectedWorkflow.milestones.findIndex(m => m.id === this.editingMilestone!.id);\r\n      if (index !== -1) {\r\n        this.selectedWorkflow.milestones[index] = { ...this.editingMilestone };\r\n      }\r\n    }\r\n\r\n    this.updateConfigFromStructured();\r\n    this.showAddMilestone = false;\r\n    this.editingMilestone = null;\r\n    this.messagingService.success('Milestone saved successfully');\r\n  }\r\n\r\n  deleteMilestone(milestone: Milestone): void {\r\n    if (this.selectedWorkflow) {\r\n      this.selectedWorkflow.milestones = this.selectedWorkflow.milestones.filter(m => m.id !== milestone.id);\r\n      this.selectedWorkflow.milestoneCnt = this.selectedWorkflow.milestones.length;\r\n      this.updateConfigFromStructured();\r\n    }\r\n  }\r\n\r\n  // Filter Set Management Methods\r\n  addFilterSet(workflow: Workflow): void {\r\n    this.editingFilterSet = {\r\n      type: 'PredefinedFilter',\r\n      id: '',\r\n      label: '',\r\n      route: 'prior-auth',\r\n      subroute: 'outgoing',\r\n      filters: [],\r\n      excludedFiltes: [],\r\n      isDefault: 0,\r\n      sortOrder: 0\r\n    };\r\n    \r\n    this.filterSetForm.patchValue({\r\n      id: '',\r\n      label: '',\r\n      route: 'prior-auth',\r\n      subroute: 'outgoing',\r\n      type: 'PredefinedFilter',\r\n      isDefault: 0,\r\n      sortOrder: 0\r\n    });\r\n    \r\n    this.showAddFilterSet = true;\r\n  }\r\n\r\n  editFilterSet(filterSet: FilterSet): void {\r\n    this.editingFilterSet = { ...filterSet };\r\n    this.filterSetForm.patchValue({\r\n      id: filterSet.id,\r\n      label: filterSet.label,\r\n      route: filterSet.route,\r\n      subroute: filterSet.subroute,\r\n      type: filterSet.type,\r\n      isDefault: filterSet.isDefault,\r\n      sortOrder: filterSet.sortOrder\r\n    });\r\n    this.showAddFilterSet = true;\r\n  }\r\n\r\n  saveFilterSet(): void {\r\n    if (this.filterSetForm.valid && this.editingFilterSet && this.selectedWorkflow) {\r\n      const formValue = this.filterSetForm.value;\r\n      \r\n      this.editingFilterSet.id = formValue.id;\r\n      this.editingFilterSet.label = formValue.label;\r\n      this.editingFilterSet.route = formValue.route;\r\n      this.editingFilterSet.subroute = formValue.subroute;\r\n      this.editingFilterSet.type = formValue.type;\r\n      this.editingFilterSet.isDefault = formValue.isDefault;\r\n      this.editingFilterSet.sortOrder = formValue.sortOrder;\r\n\r\n      if (!this.editingFilterSet.id) {\r\n        // Add new filter set\r\n        this.editingFilterSet.id = this.getNextId(this.selectedWorkflow.filterSets, 'id').toString();\r\n        this.selectedWorkflow.filterSets.push(this.editingFilterSet);\r\n      } else {\r\n        // Update existing filter set\r\n        const index = this.selectedWorkflow.filterSets.findIndex(fs => fs.id === this.editingFilterSet!.id);\r\n        if (index !== -1) {\r\n          this.selectedWorkflow.filterSets[index] = { ...this.editingFilterSet };\r\n        }\r\n      }\r\n\r\n      this.selectedWorkflow.filterSetsCnt = this.selectedWorkflow.filterSets.length;\r\n      this.updateConfigFromStructured();\r\n      this.cancelEdit();\r\n    }\r\n  }\r\n\r\n  deleteFilterSet(filterSet: FilterSet): void {\r\n    if (this.selectedWorkflow) {\r\n      this.selectedWorkflow.filterSets = this.selectedWorkflow.filterSets.filter(fs => fs.id !== filterSet.id);\r\n      this.selectedWorkflow.filterSetsCnt = this.selectedWorkflow.filterSets.length;\r\n      this.updateConfigFromStructured();\r\n    }\r\n  }\r\n\r\n  // === WORKLIST MANAGEMENT ===\r\n\r\n  addWorklist(): void {\r\n    const newWorklist: Worklist = {\r\n      id: this.getNextId(this.worklists),\r\n      name: '',\r\n      meaning: ''\r\n    };\r\n    \r\n    this.editingWorklist = { ...newWorklist };\r\n    this.showAddWorklist = true;\r\n  }\r\n\r\n  editWorklist(worklist: Worklist): void {\r\n    this.editingWorklist = { ...worklist };\r\n    this.showAddWorklist = true;\r\n  }\r\n\r\n  saveWorklist(): void {\r\n    if (!this.editingWorklist) return;\r\n\r\n    // Validate required fields\r\n    if (!this.editingWorklist.name || !this.editingWorklist.meaning) {\r\n      this.messagingService.error('Name and meaning are required for worklists');\r\n      return;\r\n    }\r\n\r\n    if (this.editingWorklist.id === 0) {\r\n      // New worklist\r\n      this.editingWorklist.id = this.getNextId(this.worklists);\r\n      this.worklists.push({ ...this.editingWorklist });\r\n    } else {\r\n      // Update existing worklist\r\n      const index = this.worklists.findIndex(w => w.id === this.editingWorklist!.id);\r\n      if (index !== -1) {\r\n        this.worklists[index] = { ...this.editingWorklist };\r\n      }\r\n    }\r\n\r\n    this.updateConfigFromStructured();\r\n    this.showAddWorklist = false;\r\n    this.editingWorklist = null;\r\n    this.messagingService.success('Worklist saved successfully');\r\n  }\r\n\r\n  deleteWorklist(worklist: Worklist): void {\r\n    const index = this.worklists.findIndex(w => w.id === worklist.id);\r\n    if (index !== -1) {\r\n      this.worklists.splice(index, 1);\r\n      this.updateConfigFromStructured();\r\n      this.messagingService.success('Worklist deleted successfully');\r\n    }\r\n  }\r\n\r\n  // === CONFIGURATION UPDATES ===\r\n\r\n  updateConfigFromStructured(): void {\r\n    if (!this.configJson) return;\r\n\r\n    // Update the configuration with structured data\r\n    this.configJson.workflows = this.workflows;\r\n    this.configJson.worklists = this.worklists;\r\n    this.configJson.workflowCnt = this.workflows.length;\r\n    this.configJson.worklistCnt = this.worklists.length;\r\n\r\n    // Update counts\r\n    this.workflows.forEach(workflow => {\r\n      workflow.dataElementsCnt = workflow.dataElements.length;\r\n      workflow.milestoneCnt = workflow.milestones.length;\r\n      workflow.filterSetsCnt = workflow.filterSets.length;\r\n    });\r\n\r\n    // Update the editable JSON\r\n    this.editableJson = JSON.stringify(this.configJson, null, 2);\r\n  }\r\n\r\n  // === EXISTING METHODS ===\r\n\r\n  saveConfig(): void {\r\n    this.jsonError = null;\r\n    this.saveSuccess = false;\r\n    this.saveError = null;\r\n    let parsed: any;\r\n    try {\r\n      parsed = JSON.parse(this.editableJson);\r\n    } catch (e) {\r\n      this.jsonError = 'Invalid JSON: ' + (e as Error).message;\r\n      this.messagingService.error(this.jsonError);\r\n      return;\r\n    }\r\n    this.saving = true;\r\n    \r\n    this.adminService.saveCompassConfiguration(parsed).subscribe({\r\n      next: () => {\r\n        this.ngZone.run(() => {\r\n          this.saveSuccess = true;\r\n          this.saving = false;\r\n          this.configJson = parsed;\r\n          this.parseStructuredData(parsed);\r\n          this.cdr.detectChanges();\r\n        });\r\n      },\r\n      error: (err: unknown) => {\r\n        this.ngZone.run(() => {\r\n          this.saveError = 'Failed to save configuration.';\r\n          this.saving = false;\r\n          this.cdr.detectChanges();\r\n          this.messagingService.error('Failed to save configuration.');\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  resetEdit(): void {\r\n    this.editableJson = JSON.stringify(this.configJson, null, 2);\r\n    this.parseStructuredData(this.configJson);\r\n    this.jsonError = null;\r\n    this.saveSuccess = false;\r\n    this.saveError = null;\r\n  }\r\n\r\n  // === UTILITY METHODS ===\r\n\r\n  getDataElementsByMeaning(workflow: Workflow, meaning: string): DataElement[] {\r\n    return workflow.dataElements.filter(de => de.meaning === meaning);\r\n  }\r\n\r\n  getMilestonesByMeaning(workflow: Workflow, meaning: string): Milestone[] {\r\n    return workflow.milestones.filter(m => m.meaning === meaning);\r\n  }\r\n\r\n  /**\r\n   * Get filter sets grouped by type with summary statistics\r\n   */\r\n  getFilterSetTypes(): Array<{\r\n    type: string;\r\n    count: number;\r\n    workflows: number;\r\n    totalFilters: number;\r\n    samples: Array<{\r\n      workflow: string;\r\n      label: string;\r\n      filtersCount: number;\r\n      excludedCount: number;\r\n    }>;\r\n  }> {\r\n    const filterTypeMap = new Map<string, {\r\n      count: number;\r\n      workflows: Set<string>;\r\n      totalFilters: number;\r\n      samples: Array<{\r\n        workflow: string;\r\n        label: string;\r\n        filtersCount: number;\r\n        excludedCount: number;\r\n      }>;\r\n    }>();\r\n\r\n    // Process all workflows and their filter sets\r\n    this.workflows.forEach(workflow => {\r\n      if (workflow.filterSets) {\r\n        workflow.filterSets.forEach(filterSet => {\r\n          const type = filterSet.type || 'Unknown';\r\n          \r\n          if (!filterTypeMap.has(type)) {\r\n            filterTypeMap.set(type, {\r\n              count: 0,\r\n              workflows: new Set(),\r\n              totalFilters: 0,\r\n              samples: []\r\n            });\r\n          }\r\n\r\n          const typeData = filterTypeMap.get(type)!;\r\n          typeData.count++;\r\n          typeData.workflows.add(workflow.meaning);\r\n          \r\n          // Count filters\r\n          const filtersCount = filterSet.filters?.length || 0;\r\n          const excludedCount = filterSet.excludedFiltes?.length || 0;\r\n          typeData.totalFilters += filtersCount + excludedCount;\r\n\r\n          // Add sample (limit to 3 per type)\r\n          if (typeData.samples.length < 3) {\r\n            typeData.samples.push({\r\n              workflow: workflow.meaning,\r\n              label: filterSet.label,\r\n              filtersCount,\r\n              excludedCount\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // Convert to array format\r\n    return Array.from(filterTypeMap.entries()).map(([type, data]) => ({\r\n      type,\r\n      count: data.count,\r\n      workflows: data.workflows.size,\r\n      totalFilters: data.totalFilters,\r\n      samples: data.samples\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Add a new filter to the editing filter set\r\n   */\r\n  addFilter(filterType: 'included' | 'excluded'): void {\r\n    if (!this.editingFilterSet) return;\r\n\r\n    const newFilter: Filter = {\r\n      dataElement: '',\r\n      options: []\r\n    };\r\n\r\n    if (filterType === 'included') {\r\n      if (!this.editingFilterSet.filters) {\r\n        this.editingFilterSet.filters = [];\r\n      }\r\n      this.editingFilterSet.filters.push(newFilter);\r\n    } else {\r\n      if (!this.editingFilterSet.excludedFiltes) {\r\n        this.editingFilterSet.excludedFiltes = [];\r\n      }\r\n      this.editingFilterSet.excludedFiltes.push(newFilter);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a filter from the editing filter set\r\n   */\r\n  removeFilter(index: number, filterType: 'included' | 'excluded'): void {\r\n    if (!this.editingFilterSet) return;\r\n\r\n    if (filterType === 'included') {\r\n      if (this.editingFilterSet.filters) {\r\n        this.editingFilterSet.filters.splice(index, 1);\r\n      }\r\n    } else {\r\n      if (this.editingFilterSet.excludedFiltes) {\r\n        this.editingFilterSet.excludedFiltes.splice(index, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get total count of filter sets across all workflows\r\n   */\r\n  getTotalFilterSetsCount(): number {\r\n    return this.workflows.reduce((total, workflow) => {\r\n      return total + (workflow.filterSets?.length || 0);\r\n    }, 0);\r\n  }\r\n\r\n  /**\r\n   * Get milestones for a workflow\r\n   */\r\n  getMilestones(workflow: any): any[] {\r\n    return workflow.milestones || [];\r\n  }\r\n\r\n  /**\r\n   * Get filter sets for a workflow\r\n   */\r\n  getFilterSets(workflow: any): any[] {\r\n    return workflow.filterSets || [];\r\n  }\r\n\r\n\r\n  /**\r\n   * Format date for display\r\n   */\r\n  formatDate(dateString: string): string {\r\n    if (!dateString || dateString === '0000-00-00T00:00:00.000+00:00') {\r\n      return 'Not Set';\r\n    }\r\n    try {\r\n      const date = new Date(dateString);\r\n      return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\r\n    } catch {\r\n      return dateString;\r\n    }\r\n  }\r\n\r\n  cancelEdit(): void {\r\n    this.showAddWorkflow = false;\r\n    this.showAddDataElement = false;\r\n    this.showAddMilestone = false;\r\n    this.showAddWorklist = false;\r\n    this.showAddFilterSet = false;\r\n    \r\n    this.editingWorkflow = null;\r\n    this.editingDataElement = null;\r\n    this.editingMilestone = null;\r\n    this.editingWorklist = null;\r\n    this.editingFilterSet = null;\r\n  }\r\n} ","<!-- COMPASS Configuration Card -->\r\n<nz-card \r\n  nzTitle=\"COMPASS Configuration\" \r\n  [nzExtra]=\"configStatusTemplate\"\r\n  [nzBordered]=\"true\"\r\n>\r\n  <ng-template #configStatusTemplate>\r\n    <nz-button-group>\r\n      <button \r\n        nz-button \r\n        nzType=\"default\" \r\n        nzSize=\"small\"\r\n        (click)=\"fetchCompassConfig()\" \r\n        [nzLoading]=\"loading\"\r\n        [disabled]=\"loading\">\r\n        <i nz-icon nzType=\"reload\"></i>\r\n        Reload\r\n      </button>\r\n    </nz-button-group>\r\n  </ng-template>\r\n\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered nzSize=\"small\" style=\"margin-bottom: 16px;\">\r\n    <nz-descriptions-item nzTitle=\"Purpose\" [nzSpan]=\"2\">\r\n      Core system configuration including workflows, milestones, and data elements\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Last Modified\">\r\n      {{ configJson?.updtDtTm || 'Unknown' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Configuration Size\">\r\n      {{ editableJson ? (editableJson.length + ' characters') : 'Not loaded' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n\r\n  <nz-spin [nzSpinning]=\"loading\" nzTip=\"Loading configuration...\">\r\n    <div *ngIf=\"error\" class=\"error-state\" style=\"margin-bottom: 16px;\">\r\n      <nz-alert nzType=\"error\" [nzMessage]=\"error\" nzShowIcon></nz-alert>\r\n    </div>\r\n\r\n    <div *ngIf=\"configJson && !loading && !error\">\r\n      <!-- Edit Mode Toggle -->\r\n      <div class=\"edit-mode-toggle\" style=\"margin-bottom: 16px;\">\r\n        <label nz-radio-button nzValue=\"structured\">\r\n          <input type=\"radio\" [(ngModel)]=\"editMode\" name=\"editMode\" value=\"structured\" /> Structured Editor\r\n        </label>\r\n        <label nz-radio-button nzValue=\"json\">\r\n          <input type=\"radio\" [(ngModel)]=\"editMode\" name=\"editMode\" value=\"json\" /> Raw JSON\r\n        </label>\r\n      </div>\r\n\r\n             <!-- Structured Editor -->\r\n       <div *ngIf=\"editMode === 'structured'\">\r\n                   <!-- Overview Section -->\r\n          <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 16px;\">\r\n            <nz-col [nzSpan]=\"24\">\r\n              <nz-collapse>\r\n                <nz-collapse-panel \r\n                  nzHeader=\"System Overview\" \r\n                  [nzActive]=\"false\"\r\n                  [nzExtra]=\"overviewExtraTemplate\">\r\n                  <ng-template #overviewExtraTemplate>\r\n                    <nz-tag nzColor=\"blue\">Overview</nz-tag>\r\n                  </ng-template>\r\n                 \r\n                 <nz-row [nzGutter]=\"16\">\r\n                   <nz-col [nzSpan]=\"12\">\r\n                     <nz-card nzTitle=\"Workflows\" [nzExtra]=\"addWorkflowTemplate\" nzSize=\"small\">\r\n                       <ng-template #addWorkflowTemplate>\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addWorkflow()\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add\r\n                         </button>\r\n                       </ng-template>\r\n                       <nz-statistic \r\n                         [nzValue]=\"workflows.length\" \r\n                         nzTitle=\"Total Workflows\"\r\n                         [nzValueStyle]=\"{ color: '#3f8600' }\">\r\n                       </nz-statistic>\r\n                       <div style=\"margin-top: 16px;\">\r\n                         <div *ngFor=\"let workflow of workflows\" class=\"workflow-item\">\r\n                           <nz-tag>{{ workflow.meaning }}</nz-tag>\r\n                           <span>{{ workflow.name }}</span>\r\n                           <span class=\"workflow-stats\">\r\n                             {{ workflow.dataElementsCnt }} elements, {{ workflow.milestoneCnt }} milestones, {{ workflow.filterSetsCnt }} filter sets\r\n                           </span>\r\n                         </div>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                   \r\n                   <nz-col [nzSpan]=\"12\">\r\n                     <nz-card nzTitle=\"Worklists\" [nzExtra]=\"addWorklistTemplate\" nzSize=\"small\">\r\n                       <ng-template #addWorklistTemplate>\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addWorklist()\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add\r\n                         </button>\r\n                       </ng-template>\r\n                       <nz-statistic \r\n                         [nzValue]=\"worklists.length\" \r\n                         nzTitle=\"Total Worklists\"\r\n                         [nzValueStyle]=\"{ color: '#1890ff' }\">\r\n                       </nz-statistic>\r\n                       <div style=\"margin-top: 16px;\">\r\n                         <div *ngFor=\"let worklist of worklists\" class=\"worklist-item\">\r\n                           <nz-tag>{{ worklist.meaning }}</nz-tag>\r\n                           <span>{{ worklist.name }}</span>\r\n                         </div>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n               </nz-collapse-panel>\r\n             </nz-collapse>\r\n           </nz-col>\r\n         </nz-row>\r\n\r\n         <!-- Worklists Management Section -->\r\n         <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 16px;\">\r\n           <nz-col [nzSpan]=\"24\">\r\n             <nz-collapse>\r\n               <nz-collapse-panel \r\n                 nzHeader=\"Worklists Management\" \r\n                 [nzActive]=\"false\"\r\n                 [nzExtra]=\"worklistsExtraTemplate\">\r\n                 <ng-template #worklistsExtraTemplate>\r\n                   <nz-tag nzColor=\"green\">Management</nz-tag>\r\n                 </ng-template>\r\n                 \r\n                 <nz-card nzTitle=\"Worklists\" [nzExtra]=\"addWorklistTemplate2\" nzSize=\"small\">\r\n                   <ng-template #addWorklistTemplate2>\r\n                     <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addWorklist()\">\r\n                       <i nz-icon nzType=\"plus\"></i>\r\n                       Add Worklist\r\n                     </button>\r\n                   </ng-template>\r\n                   \r\n                   <nz-table \r\n                     [nzData]=\"worklists\" \r\n                     [nzPageSize]=\"10\"\r\n                     nzSize=\"small\">\r\n                     <thead>\r\n                       <tr>\r\n                         <th>ID</th>\r\n                         <th>Name</th>\r\n                         <th>Meaning</th>\r\n                         <th>Actions</th>\r\n                       </tr>\r\n                     </thead>\r\n                     <tbody>\r\n                       <tr *ngFor=\"let worklist of worklists\">\r\n                         <td>{{ worklist.id }}</td>\r\n                         <td>{{ worklist.name }}</td>\r\n                         <td>{{ worklist.meaning }}</td>\r\n                         <td>\r\n                           <button nz-button nzType=\"text\" nzSize=\"small\" (click)=\"editWorklist(worklist)\">\r\n                             <i nz-icon nzType=\"edit\"></i>\r\n                           </button>\r\n                         </td>\r\n                       </tr>\r\n                     </tbody>\r\n                   </nz-table>\r\n                 </nz-card>\r\n               </nz-collapse-panel>\r\n             </nz-collapse>\r\n           </nz-col>\r\n         </nz-row>\r\n\r\n         <!-- Workflows Management Section -->\r\n         <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 16px;\">\r\n           <nz-col [nzSpan]=\"24\">\r\n             <nz-collapse>\r\n               <nz-collapse-panel \r\n                 nzHeader=\"Workflows Management\" \r\n                 [nzActive]=\"false\"\r\n                 [nzExtra]=\"workflowsExtraTemplate\">\r\n                 <ng-template #workflowsExtraTemplate>\r\n                   <nz-tag nzColor=\"purple\">Management</nz-tag>\r\n                 </ng-template>\r\n                 \r\n                 <div class=\"workflows-container\">\r\n                   <!-- Workflow List -->\r\n                   <nz-col [nzSpan]=\"8\">\r\n                     <nz-card nzTitle=\"Workflows\" [nzExtra]=\"addWorkflowTemplate2\" nzSize=\"small\">\r\n                       <ng-template #addWorkflowTemplate2>\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addWorkflow()\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add\r\n                         </button>\r\n                       </ng-template>\r\n                       \r\n                       <nz-list [nzDataSource]=\"workflows\" [nzRenderItem]=\"workflowItem\">\r\n                         <ng-template #workflowItem let-workflow>\r\n                           <nz-list-item \r\n                             [class.selected]=\"selectedWorkflow?.id === workflow.id\"\r\n                             (click)=\"selectWorkflow(workflow)\"\r\n                             class=\"workflow-list-item\">\r\n                             <div class=\"workflow-info\">\r\n                               <div class=\"workflow-name\">{{ workflow.name }}</div>\r\n                               <div class=\"workflow-meaning\">{{ workflow.meaning }}</div>\r\n                               <div class=\"workflow-stats\">\r\n                                 {{ workflow.dataElementsCnt }} elements, {{ workflow.milestoneCnt }} milestones, {{ workflow.filterSetsCnt }} filter sets\r\n                               </div>\r\n                             </div>\r\n                             <div class=\"workflow-actions\">\r\n                               <button nz-button nzType=\"text\" nzSize=\"small\" (click)=\"editWorkflow(workflow)\">\r\n                                 <i nz-icon nzType=\"edit\"></i>\r\n                               </button>\r\n                             </div>\r\n                           </nz-list-item>\r\n                         </ng-template>\r\n                       </nz-list>\r\n                     </nz-card>\r\n                   </nz-col>\r\n\r\n                   <!-- Workflow Details -->\r\n                   <nz-col [nzSpan]=\"16\" *ngIf=\"selectedWorkflow\">\r\n                     <nz-card [nzTitle]=\"selectedWorkflow.name\" nzSize=\"small\">\r\n                       <nz-descriptions [nzColumn]=\"2\" nzBordered nzSize=\"small\">\r\n                         <nz-descriptions-item nzTitle=\"Meaning\">{{ selectedWorkflow.meaning }}</nz-descriptions-item>\r\n                         <nz-descriptions-item nzTitle=\"Last Updated\">{{ selectedWorkflow.updtDtTm | date:'short' }}</nz-descriptions-item>\r\n                         <nz-descriptions-item nzTitle=\"Data Elements\">{{ selectedWorkflow.dataElementsCnt }}</nz-descriptions-item>\r\n                         <nz-descriptions-item nzTitle=\"Milestones\">{{ selectedWorkflow.milestoneCnt }}</nz-descriptions-item>\r\n                         <nz-descriptions-item nzTitle=\"Filter Sets\">{{ selectedWorkflow.filterSetsCnt }}</nz-descriptions-item>\r\n                       </nz-descriptions>\r\n\r\n                       <!-- Data Elements Section -->\r\n                       <nz-divider nzText=\"Data Elements\" nzOrientation=\"left\"></nz-divider>\r\n                       <div style=\"margin-bottom: 16px;\">\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addDataElement(selectedWorkflow)\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add Data Element\r\n                         </button>\r\n                       </div>\r\n                       \r\n                       <nz-table \r\n                         [nzData]=\"selectedWorkflow.dataElements\" \r\n                         [nzPageSize]=\"5\"\r\n                         nzSize=\"small\">\r\n                         <thead>\r\n                           <tr>\r\n                             <th>ID</th>\r\n                             <th>Display</th>\r\n                             <th>Meaning</th>\r\n                             <th>Definition</th>\r\n                             <th>Actions</th>\r\n                           </tr>\r\n                         </thead>\r\n                         <tbody>\r\n                           <tr *ngFor=\"let element of selectedWorkflow.dataElements\">\r\n                             <td>{{ element.id }}</td>\r\n                             <td>{{ element.display }}</td>\r\n                             <td>{{ element.meaning }}</td>\r\n                             <td>{{ element.definition }}</td>\r\n                             <td>\r\n                               <button nz-button nzType=\"text\" nzSize=\"small\" (click)=\"editDataElement(element)\">\r\n                                 <i nz-icon nzType=\"edit\"></i>\r\n                               </button>\r\n                             </td>\r\n                           </tr>\r\n                         </tbody>\r\n                       </nz-table>\r\n\r\n                       <!-- Milestones Section -->\r\n                       <nz-divider nzText=\"Milestones\" nzOrientation=\"left\"></nz-divider>\r\n                       <div style=\"margin-bottom: 16px;\">\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addMilestone(selectedWorkflow)\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add Milestone\r\n                         </button>\r\n                       </div>\r\n                       \r\n                       <nz-table \r\n                         [nzData]=\"selectedWorkflow.milestones\" \r\n                         [nzPageSize]=\"5\"\r\n                         nzSize=\"small\">\r\n                         <thead>\r\n                           <tr>\r\n                             <th>ID</th>\r\n                             <th>Name</th>\r\n                             <th>Meaning</th>\r\n                             <th>Sequence</th>\r\n                             <th>Required</th>\r\n                             <th>Actions</th>\r\n                           </tr>\r\n                         </thead>\r\n                         <tbody>\r\n                           <tr *ngFor=\"let milestone of selectedWorkflow.milestones\">\r\n                             <td>{{ milestone.id }}</td>\r\n                             <td>{{ milestone.name }}</td>\r\n                             <td>{{ milestone.meaning }}</td>\r\n                             <td>{{ milestone.sequence }}</td>\r\n                             <td>\r\n                               <nz-tag [nzColor]=\"milestone.requiredInd ? 'green' : 'default'\">\r\n                                 {{ milestone.requiredInd ? 'Yes' : 'No' }}\r\n                               </nz-tag>\r\n                             </td>\r\n                             <td>\r\n                               <button nz-button nzType=\"text\" nzSize=\"small\" (click)=\"editMilestone(milestone)\">\r\n                                 <i nz-icon nzType=\"edit\"></i>\r\n                               </button>\r\n                             </td>\r\n                           </tr>\r\n                         </tbody>\r\n                       </nz-table>\r\n\r\n                       <!-- Filter Sets Section -->\r\n                       <nz-divider nzText=\"Filter Sets\" nzOrientation=\"left\"></nz-divider>\r\n                       <div style=\"margin-bottom: 16px;\">\r\n                         <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"addFilterSet(selectedWorkflow)\">\r\n                           <i nz-icon nzType=\"plus\"></i>\r\n                           Add Filter Set\r\n                         </button>\r\n                       </div>\r\n                       \r\n                       <!-- Enhanced Filter Sets Display -->\r\n                       <div class=\"filter-sets-container\">\r\n                         <div *ngFor=\"let filterSet of selectedWorkflow.filterSets\" class=\"filter-set-card\">\r\n                           <nz-card \r\n                             [nzTitle]=\"filterSet.label\" \r\n                             [nzExtra]=\"filterSetActionsTemplate\"\r\n                             nzSize=\"small\"\r\n                             style=\"margin-bottom: 16px;\">\r\n                             \r\n                             <ng-template #filterSetActionsTemplate>\r\n                               <div class=\"filter-set-header\">\r\n                                 <nz-tag [nzColor]=\"filterSet.isDefault ? 'green' : 'default'\" style=\"margin-right: 8px;\">\r\n                                   {{ filterSet.isDefault ? 'Default' : 'Custom' }}\r\n                                 </nz-tag>\r\n                                 <nz-tag nzColor=\"blue\">{{ filterSet.type }}</nz-tag>\r\n                                 <button nz-button nzType=\"text\" nzSize=\"small\" (click)=\"editFilterSet(filterSet)\" style=\"margin-left: 8px;\">\r\n                                   <i nz-icon nzType=\"edit\"></i>\r\n                                 </button>\r\n                               </div>\r\n                             </ng-template>\r\n\r\n                             <!-- Filter Set Details -->\r\n                             <nz-descriptions [nzColumn]=\"3\" nzBordered nzSize=\"small\" style=\"margin-bottom: 16px;\">\r\n                               <nz-descriptions-item nzTitle=\"ID\">{{ filterSet.id }}</nz-descriptions-item>\r\n                               <nz-descriptions-item nzTitle=\"Route\">{{ filterSet.route }}</nz-descriptions-item>\r\n                               <nz-descriptions-item nzTitle=\"Subroute\">{{ filterSet.subroute }}</nz-descriptions-item>\r\n                               <nz-descriptions-item nzTitle=\"Sort Order\">{{ filterSet.sortOrder }}</nz-descriptions-item>\r\n                               <nz-descriptions-item nzTitle=\"Filters Count\">{{ filterSet.filters?.length || 0 }}</nz-descriptions-item>\r\n                               <nz-descriptions-item nzTitle=\"Excluded Filters\">{{ filterSet.excludedFiltes?.length || 0 }}</nz-descriptions-item>\r\n                             </nz-descriptions>\r\n\r\n                             <!-- Filters Breakdown by Type -->\r\n                             <div *ngIf=\"filterSet.filters && filterSet.filters.length > 0\" class=\"filters-breakdown\">\r\n                               <nz-divider nzText=\"Included Filters\" nzOrientation=\"left\" nzTextOrientation=\"left\"></nz-divider>\r\n                               \r\n                               <div *ngFor=\"let filter of filterSet.filters\" class=\"filter-item\">\r\n                                 <nz-card nzTitle=\"Data Element: {{ filter.dataElement }}\" nzSize=\"small\" style=\"margin-bottom: 8px;\">\r\n                                   <div class=\"filter-options\">\r\n                                     <div class=\"filter-options-header\">\r\n                                       <span class=\"filter-label\">Filtered Items ({{ filter.options?.length || 0 }}):</span>\r\n                                     </div>\r\n                                     <div class=\"filter-options-list\">\r\n                                       <nz-tag \r\n                                         *ngFor=\"let option of filter.options\" \r\n                                         nzColor=\"blue\" \r\n                                         style=\"margin: 2px;\">\r\n                                         {{ option.item }}\r\n                                       </nz-tag>\r\n                                     </div>\r\n                                   </div>\r\n                                 </nz-card>\r\n                               </div>\r\n                             </div>\r\n\r\n                             <!-- Excluded Filters Breakdown -->\r\n                             <div *ngIf=\"filterSet.excludedFiltes && filterSet.excludedFiltes.length > 0\" class=\"excluded-filters-breakdown\">\r\n                               <nz-divider nzText=\"Excluded Filters\" nzOrientation=\"left\" nzTextOrientation=\"left\"></nz-divider>\r\n                               \r\n                               <div *ngFor=\"let filter of filterSet.excludedFiltes\" class=\"filter-item\">\r\n                                 <nz-card nzTitle=\"Data Element: {{ filter.dataElement }}\" nzSize=\"small\" style=\"margin-bottom: 8px;\">\r\n                                   <div class=\"filter-options\">\r\n                                     <div class=\"filter-options-header\">\r\n                                       <span class=\"filter-label\">Excluded Items ({{ filter.options?.length || 0 }}):</span>\r\n                                     </div>\r\n                                     <div class=\"filter-options-list\">\r\n                                       <nz-tag \r\n                                         *ngFor=\"let option of filter.options\" \r\n                                         nzColor=\"red\" \r\n                                         style=\"margin: 2px;\">\r\n                                         {{ option.item }}\r\n                                       </nz-tag>\r\n                                     </div>\r\n                                   </div>\r\n                                 </nz-card>\r\n                               </div>\r\n                             </div>\r\n\r\n                             <!-- No Filters Message -->\r\n                             <div *ngIf=\"(!filterSet.filters || filterSet.filters.length === 0) && (!filterSet.excludedFiltes || filterSet.excludedFiltes.length === 0)\" class=\"no-filters\">\r\n                               <nz-empty nzNotFoundImage=\"simple\" nzNotFoundContent=\"No filters configured for this filter set\"></nz-empty>\r\n                             </div>\r\n                           </nz-card>\r\n                         </div>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </div>\r\n               </nz-collapse-panel>\r\n             </nz-collapse>\r\n           </nz-col>\r\n         </nz-row>\r\n\r\n         <!-- Configuration Mapping Section -->\r\n         <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 16px;\">\r\n           <nz-col [nzSpan]=\"24\">\r\n             <nz-collapse>\r\n               <nz-collapse-panel \r\n                 nzHeader=\"Configuration Mapping\" \r\n                 [nzActive]=\"false\"\r\n                 [nzExtra]=\"mappingExtraTemplate\">\r\n                 <ng-template #mappingExtraTemplate>\r\n                   <nz-tag nzColor=\"geekblue\">Mapping</nz-tag>\r\n                 </ng-template>\r\n                 \r\n                 <!-- Configuration Overview -->\r\n                 <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 24px;\">\r\n                   <nz-col [nzSpan]=\"24\">\r\n                     <nz-card nzTitle=\"Configuration Overview\" [nzBordered]=\"true\">\r\n                       <div class=\"overview-grid\">\r\n                         <div class=\"overview-item\">\r\n                           <nz-statistic\r\n                             [nzValue]=\"worklists.length\"\r\n                             [nzTitle]=\"'Worklists'\">\r\n                           </nz-statistic>\r\n                         </div>\r\n                         <div class=\"overview-item\">\r\n                           <nz-statistic\r\n                             [nzValue]=\"workflows.length\"\r\n                             [nzTitle]=\"'Workflows'\">\r\n                           </nz-statistic>\r\n                         </div>\r\n                         <div class=\"overview-item\">\r\n                           <nz-statistic\r\n                             [nzValue]=\"getTotalFilterSetsCount()\"\r\n                             [nzTitle]=\"'Filter Sets'\">\r\n                           </nz-statistic>\r\n                         </div>\r\n                         <div class=\"overview-item\">\r\n                           <nz-statistic\r\n                             [nzValue]=\"configJson.updtDtTm ? formatDate(configJson.updtDtTm) : 'Not Set'\"\r\n                             [nzTitle]=\"'Last Updated'\">\r\n                           </nz-statistic>\r\n                         </div>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n\r\n                 <!-- Worklists Section -->\r\n                 <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 24px;\">\r\n                   <nz-col [nzSpan]=\"24\">\r\n                     <nz-card nzTitle=\"Worklists\" [nzBordered]=\"true\">\r\n                       <nz-table\r\n                         [nzData]=\"worklists\"\r\n                         nzSize=\"small\"\r\n                         [nzShowPagination]=\"false\">\r\n                         <thead>\r\n                           <tr>\r\n                             <th>ID</th>\r\n                             <th>Name</th>\r\n                             <th>Meaning</th>\r\n                           </tr>\r\n                         </thead>\r\n                         <tbody>\r\n                           <tr *ngFor=\"let worklist of worklists\">\r\n                             <td>{{ worklist.id }}</td>\r\n                             <td>{{ worklist.name }}</td>\r\n                             <td><nz-tag nzColor=\"blue\">{{ worklist.meaning }}</nz-tag></td>\r\n                           </tr>\r\n                         </tbody>\r\n                       </nz-table>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n\r\n                 <!-- Workflows Section -->\r\n                 <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 24px;\">\r\n                   <nz-col [nzSpan]=\"24\">\r\n                     <nz-card nzTitle=\"Workflows\" [nzBordered]=\"true\">\r\n                       <div class=\"workflows-mapping-container\">\r\n                         <div class=\"workflow-mapping-list\">\r\n                           <h4>Available Workflows</h4>\r\n                           <nz-list [nzDataSource]=\"workflows\" [nzRenderItem]=\"workflowMappingItem\">\r\n                             <ng-template #workflowMappingItem let-workflow>\r\n                               <nz-list-item\r\n                                 [nzActions]=\"[mappingViewAction]\"\r\n                                 (click)=\"selectWorkflow(workflow)\"\r\n                                 [class.selected]=\"selectedWorkflow?.id === workflow.id\">\r\n                                 <nz-list-item-meta\r\n                                   [nzTitle]=\"workflow.name\"\r\n                                   [nzDescription]=\"workflow.meaning\">\r\n                                   <nz-list-item-meta-avatar>\r\n                                     <nz-tag nzColor=\"green\">{{ workflow.dataElementsCnt || 0 }}</nz-tag>\r\n                                   </nz-list-item-meta-avatar>\r\n                                 </nz-list-item-meta>\r\n                               </nz-list-item>\r\n                               <ng-template #mappingViewAction>\r\n                                 <i nz-icon nzType=\"eye\" nz-tooltip=\"View Details\"></i>\r\n                               </ng-template>\r\n                             </ng-template>\r\n                           </nz-list>\r\n                         </div>\r\n\r\n                         <div class=\"workflow-mapping-details\" *ngIf=\"selectedWorkflow\">\r\n                           <h4>Workflow Details: {{ selectedWorkflow.name }}</h4>\r\n\r\n                           <!-- Workflow Info -->\r\n                           <nz-descriptions nzTitle=\"Basic Information\" [nzColumn]=\"2\" nzBordered nzSize=\"small\">\r\n                             <nz-descriptions-item nzTitle=\"ID\">{{ selectedWorkflow.id }}</nz-descriptions-item>\r\n                             <nz-descriptions-item nzTitle=\"Meaning\">\r\n                               <nz-tag nzColor=\"purple\">{{ selectedWorkflow.meaning }}</nz-tag>\r\n                             </nz-descriptions-item>\r\n                             <nz-descriptions-item nzTitle=\"Last Updated\">\r\n                               {{ formatDate(selectedWorkflow.updtDtTm) }}\r\n                             </nz-descriptions-item>\r\n                             <nz-descriptions-item nzTitle=\"Data Elements\">{{ selectedWorkflow.dataElementsCnt || 0 }}</nz-descriptions-item>\r\n                           </nz-descriptions>\r\n\r\n                           <!-- Data Elements by Type -->\r\n                           <div class=\"mapping-data-elements-section\" style=\"margin-top: 24px;\">\r\n                             <h5>Data Elements by Type</h5>\r\n\r\n                             <!-- Workflow Status IDs -->\r\n                             <nz-card nzTitle=\"Workflow Status IDs\" nzSize=\"small\" style=\"margin-bottom: 16px;\" *ngIf=\"getDataElementsByMeaning(selectedWorkflow, 'WORKFLOW_STATUS_ID').length > 0\">\r\n                               <nz-table\r\n                                 [nzData]=\"getDataElementsByMeaning(selectedWorkflow, 'WORKFLOW_STATUS_ID')\"\r\n                                 nzSize=\"small\"\r\n                                 [nzShowPagination]=\"false\">\r\n                                 <tbody>\r\n                                   <tr *ngFor=\"let element of getDataElementsByMeaning(selectedWorkflow, 'WORKFLOW_STATUS_ID')\">\r\n                                     <td><strong>{{ element.display }}</strong></td>\r\n                                     <td>{{ element.definition }}</td>\r\n                                     <td><small>ID: {{ element.id }}</small></td>\r\n                                   </tr>\r\n                                 </tbody>\r\n                               </nz-table>\r\n                             </nz-card>\r\n\r\n                             <!-- Milestone Status IDs -->\r\n                             <nz-card nzTitle=\"Milestone Status IDs\" nzSize=\"small\" style=\"margin-bottom: 16px;\" *ngIf=\"getDataElementsByMeaning(selectedWorkflow, 'MILESTONE_STATUS_ID').length > 0\">\r\n                               <nz-table\r\n                                 [nzData]=\"getDataElementsByMeaning(selectedWorkflow, 'MILESTONE_STATUS_ID')\"\r\n                                 nzSize=\"small\"\r\n                                 [nzShowPagination]=\"false\">\r\n                                 <tbody>\r\n                                   <tr *ngFor=\"let element of getDataElementsByMeaning(selectedWorkflow, 'MILESTONE_STATUS_ID')\">\r\n                                     <td><strong>{{ element.display }}</strong></td>\r\n                                     <td>{{ element.definition }}</td>\r\n                                     <td><small>ID: {{ element.id }}</small></td>\r\n                                   </tr>\r\n                                 </tbody>\r\n                               </nz-table>\r\n                             </nz-card>\r\n\r\n                             <!-- Action Type IDs -->\r\n                             <nz-card nzTitle=\"Action Type IDs\" nzSize=\"small\" style=\"margin-bottom: 16px;\" *ngIf=\"getDataElementsByMeaning(selectedWorkflow, 'ACTION_TYPE_ID').length > 0\">\r\n                               <nz-table\r\n                                 [nzData]=\"getDataElementsByMeaning(selectedWorkflow, 'ACTION_TYPE_ID')\"\r\n                                 nzSize=\"small\"\r\n                                 [nzShowPagination]=\"false\">\r\n                                 <tbody>\r\n                                   <tr *ngFor=\"let element of getDataElementsByMeaning(selectedWorkflow, 'ACTION_TYPE_ID')\">\r\n                                     <td><strong>{{ element.display }}</strong></td>\r\n                                     <td>{{ element.definition }}</td>\r\n                                     <td><small>ID: {{ element.id }}</small></td>\r\n                                   </tr>\r\n                                 </tbody>\r\n                               </nz-table>\r\n                             </nz-card>\r\n\r\n                             <!-- Action Status IDs -->\r\n                             <nz-card nzTitle=\"Action Status IDs\" nzSize=\"small\" style=\"margin-bottom: 16px;\" *ngIf=\"getDataElementsByMeaning(selectedWorkflow, 'ACTION_STATUS_ID').length > 0\">\r\n                               <nz-table\r\n                                 [nzData]=\"getDataElementsByMeaning(selectedWorkflow, 'ACTION_STATUS_ID')\"\r\n                                 nzSize=\"small\"\r\n                                 [nzShowPagination]=\"false\">\r\n                                 <tbody>\r\n                                   <tr *ngFor=\"let element of getDataElementsByMeaning(selectedWorkflow, 'ACTION_STATUS_ID')\">\r\n                                     <td><strong>{{ element.display }}</strong></td>\r\n                                     <td>{{ element.definition }}</td>\r\n                                     <td><small>ID: {{ element.id }}</small></td>\r\n                                   </tr>\r\n                                 </tbody>\r\n                               </nz-table>\r\n                             </nz-card>\r\n                           </div>\r\n\r\n                           <!-- Milestones -->\r\n                           <nz-card nzTitle=\"Milestones\" nzSize=\"small\" style=\"margin-top: 24px;\" *ngIf=\"getMilestones(selectedWorkflow).length > 0\">\r\n                             <nz-table\r\n                               [nzData]=\"getMilestones(selectedWorkflow)\"\r\n                               nzSize=\"small\"\r\n                               [nzShowPagination]=\"false\">\r\n                               <thead>\r\n                                 <tr>\r\n                                   <th>ID</th>\r\n                                   <th>Name</th>\r\n                                   <th>Meaning</th>\r\n                                   <th>Sequence</th>\r\n                                   <th>Required</th>\r\n                                 </tr>\r\n                               </thead>\r\n                               <tbody>\r\n                                 <tr *ngFor=\"let milestone of getMilestones(selectedWorkflow)\">\r\n                                   <td>{{ milestone.id }}</td>\r\n                                   <td>{{ milestone.name }}</td>\r\n                                   <td><nz-tag nzColor=\"orange\">{{ milestone.meaning }}</nz-tag></td>\r\n                                   <td>{{ milestone.sequence }}</td>\r\n                                   <td>\r\n                                     <nz-tag *ngIf=\"milestone.requiredInd === 1\" nzColor=\"green\">Required</nz-tag>\r\n                                     <nz-tag *ngIf=\"milestone.requiredInd === 0\" nzColor=\"default\">Optional</nz-tag>\r\n                                   </td>\r\n                                 </tr>\r\n                               </tbody>\r\n                             </nz-table>\r\n                           </nz-card>\r\n\r\n                           <!-- Filter Sets -->\r\n                           <nz-card nzTitle=\"Filter Sets\" nzSize=\"small\" style=\"margin-top: 24px;\" *ngIf=\"getFilterSets(selectedWorkflow).length > 0\">\r\n                             <nz-table\r\n                               [nzData]=\"getFilterSets(selectedWorkflow)\"\r\n                               nzSize=\"small\"\r\n                               [nzShowPagination]=\"false\">\r\n                               <thead>\r\n                                 <tr>\r\n                                   <th>ID</th>\r\n                                   <th>Label</th>\r\n                                   <th>Type</th>\r\n                                   <th>Route</th>\r\n                                   <th>Filters</th>\r\n                                   <th>Excluded</th>\r\n                                   <th>Default</th>\r\n                                 </tr>\r\n                               </thead>\r\n                               <tbody>\r\n                                 <tr *ngFor=\"let filterSet of getFilterSets(selectedWorkflow)\">\r\n                                   <td>{{ filterSet.id }}</td>\r\n                                   <td>{{ filterSet.label }}</td>\r\n                                   <td><nz-tag nzColor=\"cyan\">{{ filterSet.type }}</nz-tag></td>\r\n                                   <td>{{ filterSet.route }}/{{ filterSet.subroute }}</td>\r\n                                   <td>{{ filterSet.filters?.length || 0 }}</td>\r\n                                   <td>{{ filterSet.excludedFiltes?.length || 0 }}</td>\r\n                                   <td>\r\n                                     <i nz-icon [nzType]=\"filterSet.isDefault ? 'check-circle' : 'close-circle'\"\r\n                                        [nzTheme]=\"filterSet.isDefault ? 'fill' : 'outline'\"\r\n                                        [style.color]=\"filterSet.isDefault ? 'green' : 'red'\"></i>\r\n                                   </td>\r\n                                 </tr>\r\n                               </tbody>\r\n                             </nz-table>\r\n                           </nz-card>\r\n                         </div>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n\r\n                 <!-- Filter Sets Summary -->\r\n                 <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 24px;\" *ngIf=\"getTotalFilterSetsCount() > 0\">\r\n                   <nz-col [nzSpan]=\"24\">\r\n                     <nz-card nzTitle=\"Filter Sets Summary\" [nzBordered]=\"true\">\r\n                       <div class=\"filter-mapping-summary-grid\">\r\n                         <nz-card *ngFor=\"let filterType of getFilterSetTypes()\" nzSize=\"small\">\r\n                           <nz-statistic\r\n                             [nzValue]=\"filterType.count\"\r\n                             [nzTitle]=\"filterType.type + ' Filters'\">\r\n                           </nz-statistic>\r\n                           <div class=\"filter-type-mapping-details\">\r\n                             <p><strong>Used in {{ filterType.workflows }} workflow(s)</strong></p>\r\n                             <p>Total filters: {{ filterType.totalFilters }}</p>\r\n                             <div *ngIf=\"filterType.samples.length > 0\" class=\"filter-mapping-samples\">\r\n                               <small><strong>Samples:</strong></small>\r\n                               <ul>\r\n                                 <li *ngFor=\"let sample of filterType.samples\">\r\n                                   {{ sample.workflow }}: {{ sample.label }}\r\n                                   ({{ sample.filtersCount }} incl, {{ sample.excludedCount }} excl)\r\n                                 </li>\r\n                               </ul>\r\n                             </div>\r\n                           </div>\r\n                         </nz-card>\r\n                       </div>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n\r\n                 <!-- Configuration Mappings -->\r\n                 <nz-row [nzGutter]=\"16\" style=\"margin-bottom: 24px;\" *ngIf=\"configJson.mapping && configJson.mapping.length > 0\">\r\n                   <nz-col [nzSpan]=\"24\">\r\n                     <nz-card nzTitle=\"Configuration Mappings\" [nzBordered]=\"true\">\r\n                       <nz-table\r\n                         [nzData]=\"configJson.mapping\"\r\n                         nzSize=\"small\"\r\n                         [nzShowPagination]=\"true\"\r\n                         [nzPageSize]=\"10\">\r\n                         <thead>\r\n                           <tr>\r\n                             <th>Type</th>\r\n                             <th>Key Reference</th>\r\n                             <th>Key Type</th>\r\n                             <th>Value</th>\r\n                             <th>Value Type</th>\r\n                           </tr>\r\n                         </thead>\r\n                         <tbody>\r\n                           <tr *ngFor=\"let mapping of configJson.mapping\">\r\n                             <td>\r\n                               <nz-tag nzColor=\"purple\">{{ mapping.type }}</nz-tag>\r\n                             </td>\r\n                             <td>\r\n                               <nz-tag nzColor=\"blue\">{{ mapping.keyRef }}</nz-tag>\r\n                             </td>\r\n                             <td>\r\n                               <small>{{ mapping.keyRefType }}</small>\r\n                             </td>\r\n                             <td>\r\n                               <strong>{{ mapping.value }}</strong>\r\n                             </td>\r\n                             <td>\r\n                               <small>{{ mapping.valueType }}</small>\r\n                             </td>\r\n                           </tr>\r\n                         </tbody>\r\n                       </nz-table>\r\n                     </nz-card>\r\n                   </nz-col>\r\n                 </nz-row>\r\n               </nz-collapse-panel>\r\n             </nz-collapse>\r\n           </nz-col>\r\n         </nz-row>\r\n       </div>\r\n\r\n      <!-- Raw JSON Editor -->\r\n      <div *ngIf=\"editMode === 'json'\">\r\n        <nz-divider nzText=\"Configuration Editor\" nzOrientation=\"left\"></nz-divider>\r\n        \r\n        <nz-alert\r\n          nzType=\"warning\"\r\n          nzMessage=\"Advanced Configuration\"\r\n          nzDescription=\"This is raw JSON configuration. Incorrect changes may affect system functionality. Please ensure JSON is valid before saving.\"\r\n          nzShowIcon\r\n          style=\"margin-bottom: 16px;\">\r\n        </nz-alert>\r\n\r\n        <div class=\"config-editor\">\r\n          <textarea \r\n            nz-input\r\n            [(ngModel)]=\"editableJson\" \r\n            name=\"editableJson\"\r\n            [nzAutosize]=\"{ minRows: 20, maxRows: 30 }\"\r\n            placeholder=\"JSON configuration will appear here...\"\r\n            style=\"font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace; font-size: 12px;\">\r\n          </textarea>\r\n          \r\n          <div *ngIf=\"jsonError\" style=\"margin-top: 8px;\">\r\n            <nz-alert nzType=\"error\" [nzMessage]=\"'JSON Error: ' + jsonError\" nzShowIcon></nz-alert>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- Save Controls -->\r\n      <div style=\"margin-top: 16px;\">\r\n        <nz-button-group>\r\n          <button \r\n            nz-button \r\n            nzType=\"primary\" \r\n            (click)=\"saveConfig()\" \r\n            [nzLoading]=\"saving\"\r\n            [disabled]=\"saving\">\r\n            <i nz-icon nzType=\"save\"></i>\r\n            Save Configuration\r\n          </button>\r\n          \r\n          <button \r\n            nz-button \r\n            nzType=\"default\" \r\n            (click)=\"resetEdit()\" \r\n            [disabled]=\"saving\">\r\n            <i nz-icon nzType=\"reload\"></i>\r\n            Reset Changes\r\n          </button>\r\n        </nz-button-group>\r\n      </div>\r\n      \r\n      <div *ngIf=\"saveSuccess\" style=\"margin-top: 16px;\">\r\n        <nz-alert\r\n          nzType=\"success\"\r\n          nzMessage=\"Configuration Saved Successfully\"\r\n          nzDescription=\"System configuration has been updated and is now active.\"\r\n          nzShowIcon>\r\n        </nz-alert>\r\n      </div>\r\n      \r\n      <div *ngIf=\"saveError\" style=\"margin-top: 16px;\">\r\n        <nz-alert\r\n          nzType=\"error\"\r\n          nzMessage=\"Failed to Save Configuration\"\r\n          [nzDescription]=\"saveError\"\r\n          nzShowIcon>\r\n        </nz-alert>\r\n      </div>\r\n    </div>\r\n    \r\n    <div *ngIf=\"!configJson && !loading && !error\">\r\n      <nz-empty \r\n        nzNotFoundImage=\"simple\"\r\n        nzNotFoundContent=\"Click 'Reload' to load the current system configuration.\">\r\n      </nz-empty>\r\n    </div>\r\n  </nz-spin>\r\n</nz-card>\r\n\r\n<!-- Add/Edit Workflow Modal -->\r\n<nz-modal\r\n  [(nzVisible)]=\"showAddWorkflow\"\r\n  [nzTitle]=\"editingWorkflow?.id ? 'Edit Workflow' : 'Add Workflow'\"\r\n  (nzOnCancel)=\"cancelEdit()\"\r\n  [nzFooter]=\"null\">\r\n  <form nz-form [formGroup]=\"workflowForm\" *ngIf=\"editingWorkflow\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Name</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"name\" placeholder=\"Workflow name\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Meaning</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"meaning\" placeholder=\"Workflow meaning\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <div style=\"text-align: right;\">\r\n      <button nz-button nzType=\"default\" (click)=\"cancelEdit()\">Cancel</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"saveWorkflow()\" style=\"margin-left: 8px;\">Save</button>\r\n    </div>\r\n  </form>\r\n</nz-modal>\r\n\r\n<!-- Add/Edit Data Element Modal -->\r\n<nz-modal\r\n  [(nzVisible)]=\"showAddDataElement\"\r\n  [nzTitle]=\"editingDataElement?.id ? 'Edit Data Element' : 'Add Data Element'\"\r\n  (nzOnCancel)=\"cancelEdit()\"\r\n  [nzFooter]=\"null\">\r\n  <div *ngIf=\"!dataElementForm\">Form group is NOT initialized!</div>\r\n  <div *ngIf=\"dataElementForm\">Form group IS initialized!</div>\r\n  <form nz-form [formGroup]=\"dataElementForm\" *ngIf=\"dataElementForm\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Display</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"display\" placeholder=\"Display name\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Meaning</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"meaning\" placeholder=\"Data element meaning\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Definition</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <textarea nz-input formControlName=\"definition\" placeholder=\"Definition\" [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"></textarea>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <div style=\"text-align: right;\">\r\n      <button nz-button nzType=\"default\" (click)=\"cancelEdit()\">Cancel</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"saveDataElement()\" style=\"margin-left: 8px;\">Save</button>\r\n    </div>\r\n  </form>\r\n</nz-modal>\r\n\r\n<!-- Add/Edit Milestone Modal -->\r\n<nz-modal\r\n  [(nzVisible)]=\"showAddMilestone\"\r\n  [nzTitle]=\"editingMilestone?.id ? 'Edit Milestone' : 'Add Milestone'\"\r\n  (nzOnCancel)=\"cancelEdit()\"\r\n  [nzFooter]=\"null\">\r\n  <form nz-form [formGroup]=\"milestoneForm\" *ngIf=\"editingMilestone\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Name</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"name\" placeholder=\"Milestone name\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Meaning</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"meaning\" placeholder=\"Milestone meaning\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Sequence</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-input-number formControlName=\"sequence\" [nzMin]=\"1\" [nzMax]=\"100\"></nz-input-number>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Required</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-switch formControlName=\"requiredInd\"></nz-switch>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <div style=\"text-align: right;\">\r\n      <button nz-button nzType=\"default\" (click)=\"cancelEdit()\">Cancel</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"saveMilestone()\" style=\"margin-left: 8px;\">Save</button>\r\n    </div>\r\n  </form>\r\n</nz-modal>\r\n\r\n<!-- Add/Edit Worklist Modal -->\r\n<nz-modal\r\n  [(nzVisible)]=\"showAddWorklist\"\r\n  [nzTitle]=\"editingWorklist?.id ? 'Edit Worklist' : 'Add Worklist'\"\r\n  (nzOnCancel)=\"cancelEdit()\"\r\n  [nzFooter]=\"null\">\r\n  <form nz-form [formGroup]=\"worklistForm\" *ngIf=\"editingWorklist\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Name</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"name\" placeholder=\"Worklist name\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Meaning</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"meaning\" placeholder=\"Worklist meaning\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <div style=\"text-align: right;\">\r\n      <button nz-button nzType=\"default\" (click)=\"cancelEdit()\">Cancel</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"saveWorklist()\" style=\"margin-left: 8px;\">Save</button>\r\n    </div>\r\n  </form>\r\n</nz-modal>\r\n\r\n<!-- Add/Edit Filter Set Modal -->\r\n<nz-modal\r\n  [(nzVisible)]=\"showAddFilterSet\"\r\n  [nzTitle]=\"editingFilterSet?.id ? 'Edit Filter Set' : 'Add Filter Set'\"\r\n  (nzOnCancel)=\"cancelEdit()\"\r\n  [nzFooter]=\"null\">\r\n  <form nz-form [formGroup]=\"filterSetForm\" *ngIf=\"editingFilterSet\">\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>ID</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"id\" placeholder=\"Filter set ID\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Label</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"label\" placeholder=\"Filter set label\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Route</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"route\" placeholder=\"Route (e.g., prior-auth)\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Subroute</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"subroute\" placeholder=\"Subroute (e.g., outgoing, incoming)\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Type</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <input nz-input formControlName=\"type\" placeholder=\"Filter type\" />\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Default</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-switch formControlName=\"isDefault\"></nz-switch>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\" nzRequired>Sort Order</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <nz-input-number formControlName=\"sortOrder\" [nzMin]=\"0\" [nzMax]=\"100\"></nz-input-number>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <!-- Filters Management -->\r\n    <nz-divider nzText=\"Filters Configuration\" nzOrientation=\"left\"></nz-divider>\r\n    \r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Included Filters</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <div class=\"filters-management\">\r\n          <div *ngFor=\"let filter of editingFilterSet.filters; let i = index\" class=\"filter-row\">\r\n            <nz-row [nzGutter]=\"8\">\r\n              <nz-col [nzSpan]=\"8\">\r\n                <input nz-input placeholder=\"Data Element\" [(ngModel)]=\"filter.dataElement\" />\r\n              </nz-col>\r\n              <nz-col [nzSpan]=\"12\">\r\n                <nz-select \r\n                  mode=\"tags\" \r\n                  placeholder=\"Filter Options\" \r\n                  [(ngModel)]=\"filter.options\"\r\n                  [nzMaxTagCount]=\"3\"\r\n                  style=\"width: 100%;\">\r\n                  <nz-option *ngFor=\"let option of filter.options\" [nzValue]=\"option.item\" [nzLabel]=\"option.item\"></nz-option>\r\n                </nz-select>\r\n              </nz-col>\r\n              <nz-col [nzSpan]=\"4\">\r\n                <button nz-button nzType=\"text\" nzDanger nzSize=\"small\" (click)=\"removeFilter(i, 'included')\">\r\n                  <i nz-icon nzType=\"delete\"></i>\r\n                </button>\r\n              </nz-col>\r\n            </nz-row>\r\n          </div>\r\n          <button nz-button nzType=\"dashed\" nzSize=\"small\" (click)=\"addFilter('included')\" style=\"width: 100%; margin-top: 8px;\">\r\n            <i nz-icon nzType=\"plus\"></i> Add Included Filter\r\n          </button>\r\n        </div>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n\r\n    <nz-form-item>\r\n      <nz-form-label [nzSpan]=\"6\">Excluded Filters</nz-form-label>\r\n      <nz-form-control [nzSpan]=\"18\">\r\n        <div class=\"filters-management\">\r\n          <div *ngFor=\"let filter of editingFilterSet.excludedFiltes; let i = index\" class=\"filter-row\">\r\n            <nz-row [nzGutter]=\"8\">\r\n              <nz-col [nzSpan]=\"8\">\r\n                <input nz-input placeholder=\"Data Element\" [(ngModel)]=\"filter.dataElement\" />\r\n              </nz-col>\r\n              <nz-col [nzSpan]=\"12\">\r\n                <nz-select \r\n                  mode=\"tags\" \r\n                  placeholder=\"Filter Options\" \r\n                  [(ngModel)]=\"filter.options\"\r\n                  [nzMaxTagCount]=\"3\"\r\n                  style=\"width: 100%;\">\r\n                  <nz-option *ngFor=\"let option of filter.options\" [nzValue]=\"option.item\" [nzLabel]=\"option.item\"></nz-option>\r\n                </nz-select>\r\n              </nz-col>\r\n              <nz-col [nzSpan]=\"4\">\r\n                <button nz-button nzType=\"text\" nzDanger nzSize=\"small\" (click)=\"removeFilter(i, 'excluded')\">\r\n                  <i nz-icon nzType=\"delete\"></i>\r\n                </button>\r\n              </nz-col>\r\n            </nz-row>\r\n          </div>\r\n          <button nz-button nzType=\"dashed\" nzSize=\"small\" (click)=\"addFilter('excluded')\" style=\"width: 100%; margin-top: 8px;\">\r\n            <i nz-icon nzType=\"plus\"></i> Add Excluded Filter\r\n          </button>\r\n        </div>\r\n      </nz-form-control>\r\n    </nz-form-item>\r\n    \r\n    <div style=\"text-align: right;\">\r\n      <button nz-button nzType=\"default\" (click)=\"cancelEdit()\">Cancel</button>\r\n      <button nz-button nzType=\"primary\" (click)=\"saveFilterSet()\" style=\"margin-left: 8px;\">Save</button>\r\n    </div>\r\n  </form>\r\n</nz-modal> ","import { Component, Input, Output, EventEmitter, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DocumentRow } from '../../../../models/document.model';\r\nimport { AdminService } from '../../../../services/admin.service';\r\nimport { MessagingService } from '../../../../services/messaging.service';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\n\r\n@Component({\r\n  selector: 'app-document-viewer-test-tool',\r\n  templateUrl: './document-viewer-test-tool-simple.component.html',\r\n  styleUrls: ['./document-viewer-test-tool-simple.component.scss']\r\n})\r\nexport class DocumentViewerTestToolComponent implements OnInit, OnDestroy {\r\n  @Input() isVisible = false;\r\n  @Output() close = new EventEmitter<void>();\r\n\r\n  /** Person ID input */\r\n  personId: number = 0;\r\n  /** Available documents from the document browser */\r\n  availableDocuments: DocumentRow[] = [];\r\n  /** Selected documents for viewing */\r\n  selectedDocuments: Set<number | string> = new Set();\r\n  /** Loading state for fetching documents */\r\n  isLoadingDocuments = false;\r\n  /** Search filter */\r\n  searchText = '';\r\n  /** Filtered documents for display */\r\n  filteredDocuments: DocumentRow[] = [];\r\n  /** Document preview drawer visibility */\r\n  previewModalVisible = false;\r\n  /** Currently selected document for preview */\r\n  selectedDocumentForPreview: DocumentRow | null = null;\r\n  /** Currently highlighted row for preview */\r\n  highlightedRowId: string | number | null = null;\r\n  /** Date range for the picker component */\r\n  dateRange: [Date, Date] | null = null;\r\n  /** Begin date for document search */\r\n  beginDate: Date | null = null;\r\n  /** End date for document search */\r\n  endDate: Date | null = null;\r\n  /** Begin date as string for input binding */\r\n  beginDateStr: string = '';\r\n  /** End date as string for input binding */\r\n  endDateStr: string = '';\r\n  /** Current sort field */\r\n  currentSortField: string = '';\r\n  /** Sort direction */\r\n  sortDirection: 'asc' | 'desc' = 'asc';\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private adminService: AdminService,\r\n    private messagingService: MessagingService,\r\n    private cernerActionService: CernerActionService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Set default date range to \"all dates\" (1900-2100)\r\n    this.setAllDates();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * Set date range to cover all possible dates (1900-2100)\r\n   */\r\n  setAllDates(): void {\r\n    // Set start date to January 1, 1900\r\n    this.beginDate = new Date(1900, 0, 1); // Month is 0-indexed, so 0 = January\r\n    \r\n    // Set end date to December 31, 2100\r\n    this.endDate = new Date(2100, 11, 31); // Month is 0-indexed, so 11 = December\r\n    \r\n    // Update the date range for the picker component\r\n    this.dateRange = [this.beginDate, this.endDate];\r\n    \r\n    // Update string representations for input binding\r\n    this.beginDateStr = this.beginDate.toISOString().split('T')[0];\r\n    this.endDateStr = this.endDate.toISOString().split('T')[0];\r\n  }\r\n\r\n  /**\r\n   * Load documents for the specified person ID\r\n   */\r\n  loadDocuments(): void {\r\n    if (!this.personId || this.personId <= 0) {\r\n      this.messagingService.warning('Please enter a valid Person ID');\r\n      return;\r\n    }\r\n\r\n    const personIdNum = this.personId;\r\n    if (isNaN(personIdNum) || personIdNum <= 0) {\r\n      this.messagingService.error('Person ID must be a valid positive number');\r\n      return;\r\n    }\r\n\r\n    console.log('=== DocumentViewerTestTool.loadDocuments Debug ===');\r\n    console.log('personId:', personIdNum);\r\n    console.log('beginDate:', this.beginDate);\r\n    console.log('endDate:', this.endDate);\r\n\r\n    this.isLoadingDocuments = true;\r\n    \r\n    // Convert dates to ISO strings if provided\r\n    const beginDateStr = this.beginDate ? this.beginDate.toISOString() : undefined;\r\n    const endDateStr = this.endDate ? this.endDate.toISOString() : undefined;\r\n\r\n    console.log('Date strings being sent:');\r\n    console.log('beginDateStr:', beginDateStr);\r\n    console.log('endDateStr:', endDateStr);\r\n\r\n    this.adminService.getDocumentsForPerson(\r\n      personIdNum,\r\n      beginDateStr,\r\n      endDateStr\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          console.log('=== Response received in component ===');\r\n          console.log('Full response:', response);\r\n          console.log('Response success:', response.success);\r\n          console.log('Response documents:', response.documents);\r\n          \r\n          if (response.success) {\r\n            // Process available documents\r\n            this.availableDocuments = (response.documents || []).map((doc: any) => ({\r\n              eventId: doc.eventId,\r\n              title: doc.title,\r\n              author: doc.author,\r\n              effectiveDate: doc.effectiveDate,\r\n              type: doc.type,\r\n              source: doc.source,\r\n              eventType: doc.eventType,\r\n              isAttached: false, // Test tool doesn't have attachment concept\r\n              isSelected: false\r\n            }));\r\n\r\n            console.log('Processed availableDocuments:', this.availableDocuments);\r\n            \r\n            // Update filter\r\n            this.applyFilter();\r\n          } else {\r\n            console.error('Response indicates failure:', response);\r\n            this.messagingService.error('Failed to load documents');\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.error('=== Error in component subscription ===');\r\n          console.error('Error object:', error);\r\n          console.error('Error message:', error.message);\r\n          if (error instanceof Error) {\r\n            console.error('Error stack:', error.stack);\r\n          }\r\n          this.messagingService.error('Error loading documents');\r\n        },\r\n        complete: () => {\r\n          // Ensure loading state is always reset when the observable completes\r\n          this.isLoadingDocuments = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Apply search filter to documents\r\n   */\r\n  applyFilter(): void {\r\n    this.filteredDocuments = this.availableDocuments.filter(doc => {\r\n      // Search filter\r\n      if (this.searchText) {\r\n        const searchLower = this.searchText.toLowerCase();\r\n        const matchesSearch = \r\n          doc.title.toLowerCase().includes(searchLower) ||\r\n          doc.author.toLowerCase().includes(searchLower) ||\r\n          doc.type.toLowerCase().includes(searchLower);\r\n        if (!matchesSearch) return false;\r\n      }\r\n      \r\n      return true;\r\n    });\r\n    \r\n    // Ensure loading state is false when filtering (in case it was stuck)\r\n    if (this.isLoadingDocuments) {\r\n      this.isLoadingDocuments = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle document selection\r\n   */\r\n  toggleDocumentSelection(doc: DocumentRow, checked: boolean): void {\r\n    console.log('=== toggleDocumentSelection Debug ===');\r\n    console.log('Document:', doc);\r\n    console.log('Checked value:', checked);\r\n    \r\n    if (checked) {\r\n      this.selectedDocuments.add(doc.eventId);\r\n    } else {\r\n      this.selectedDocuments.delete(doc.eventId);\r\n    }\r\n    \r\n    doc.isSelected = this.selectedDocuments.has(doc.eventId);\r\n    console.log('Document isSelected property:', doc.isSelected);\r\n  }\r\n\r\n  /**\r\n   * Check if any documents are selected\r\n   */\r\n  hasSelectedDocuments(): boolean {\r\n    return this.selectedDocuments.size > 0;\r\n  }\r\n\r\n  /**\r\n   * Get the count of selected documents\r\n   */\r\n  getSelectedDocumentsCount(): number {\r\n    return this.selectedDocuments.size;\r\n  }\r\n\r\n  /**\r\n   * Handle date range change\r\n   */\r\n  onDateRangeChange(dates: (Date | null)[]): void {\r\n    if (dates && dates.length === 2 && dates[0] && dates[1]) {\r\n      this.beginDate = dates[0];\r\n      this.endDate = dates[1];\r\n      this.dateRange = [dates[0], dates[1]];\r\n    } else if (!dates || dates.length === 0 || (dates.length === 2 && !dates[0] && !dates[1])) {\r\n      // Handle when dates are cleared manually\r\n      this.beginDate = null;\r\n      this.endDate = null;\r\n      this.dateRange = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear date filters\r\n   */\r\n  clearDateFilter(): void {\r\n    this.beginDate = null;\r\n    this.endDate = null;\r\n    this.dateRange = null;\r\n  }\r\n\r\n  /**\r\n   * Check if the current date range represents \"all dates\" (1900-2100)\r\n   */\r\n  isAllDatesSelected(): boolean {\r\n    if (!this.beginDate || !this.endDate) {\r\n      return false;\r\n    }\r\n    \r\n    const startDate = new Date(1900, 0, 1);\r\n    const endDate = new Date(2100, 11, 31);\r\n    \r\n    return this.beginDate.getTime() === startDate.getTime() && \r\n           this.endDate.getTime() === endDate.getTime();\r\n  }\r\n\r\n  /**\r\n   * Preview a document in a drawer\r\n   */\r\n  previewDocument(doc: DocumentRow): void {\r\n    console.log('=== PREVIEW DOCUMENT CALLED ===');\r\n    console.log('Document:', doc);\r\n    \r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot preview documents with temporary IDs');\r\n      return;\r\n    }\r\n\r\n    // Set the selected document, highlight the row, and show the drawer\r\n    this.selectedDocumentForPreview = doc;\r\n    this.highlightedRowId = doc.eventId;\r\n    this.previewModalVisible = true;\r\n    \r\n    console.log('Selected document set:', this.selectedDocumentForPreview);\r\n    console.log('Highlighted row ID:', this.highlightedRowId);\r\n    console.log('Preview modal visible:', this.previewModalVisible);\r\n  }\r\n\r\n  /**\r\n   * Close the preview drawer\r\n   */\r\n  closePreviewModal(): void {\r\n    this.previewModalVisible = false;\r\n    this.selectedDocumentForPreview = null;\r\n    this.highlightedRowId = null;\r\n  }\r\n\r\n  /**\r\n   * Check if a document row should be highlighted\r\n   */\r\n  isRowHighlighted(doc: DocumentRow): boolean {\r\n    return this.highlightedRowId === doc.eventId;\r\n  }\r\n\r\n  /**\r\n   * Check if an event ID is valid for viewing in Cerner\r\n   */\r\n  isValidEventId(eventId: number | string): boolean {\r\n    return !(!eventId || eventId === 0 || eventId === '0' || eventId === 0.0 || eventId === '0.0');\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Document Viewer\r\n   */\r\n  canViewInCerner(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Don't show view buttons for invalid event IDs\r\n    if (!this.isValidEventId(doc.eventId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Document Viewer\r\n    const supportedEventTypes = ['MDOC', 'DOC', 'RAD'];\r\n    return supportedEventTypes.includes(doc.eventType);\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Procedure Viewer\r\n   */\r\n  canViewInCernerProcedure(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Don't show view buttons for invalid event IDs\r\n    if (!this.isValidEventId(doc.eventId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Procedure Viewer\r\n    return doc.eventType === 'PROCEDURE';\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in any Cerner viewer\r\n   */\r\n  canViewInCernerAny(doc: DocumentRow): boolean {\r\n    return this.canViewInCerner(doc) || this.canViewInCernerProcedure(doc);\r\n  }\r\n\r\n  /**\r\n   * View document in Cerner Document Viewer\r\n   */\r\n  viewInCerner(doc: DocumentRow): void {\r\n    if (!this.personId) {\r\n      this.messagingService.error('No person ID available for document viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCerner(doc)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view documents with temporary IDs in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId;\r\n    const personIdNum = this.personId;\r\n\r\n    // Call the Cerner Document Viewer action\r\n    this.cernerActionService.CernerAction('DOC_VIEWER', {\r\n      personId: personIdNum,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${doc.title}\" in Cerner Document Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open document in Cerner Document Viewer');\r\n      console.error('Cerner Document Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View procedure in Cerner Procedure Viewer\r\n   */\r\n  viewInCernerProcedure(doc: DocumentRow): void {\r\n    if (!this.personId) {\r\n      this.messagingService.error('No person ID available for procedure viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCernerProcedure(doc)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view procedures with temporary IDs in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId;\r\n    const personIdNum = this.personId;\r\n\r\n    // Call the Cerner Procedure Viewer action\r\n    this.cernerActionService.CernerAction('PROC_VIEWER', {\r\n      personId: personIdNum,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${doc.title}\" in Cerner Procedure Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open procedure in Cerner Procedure Viewer');\r\n      console.error('Cerner Procedure Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View document/procedure in the appropriate Cerner viewer\r\n   */\r\n  viewInCernerAppropriate(doc: DocumentRow): void {\r\n    if (this.canViewInCerner(doc)) {\r\n      this.viewInCerner(doc);\r\n    } else if (this.canViewInCernerProcedure(doc)) {\r\n      this.viewInCernerProcedure(doc);\r\n    } else {\r\n      this.messagingService.warning('This document type cannot be viewed in any Cerner viewer');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * View selected documents in Cerner Document Viewer\r\n   */\r\n  viewSelectedInCerner(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected for viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.personId) {\r\n      this.messagingService.error('No person ID available for document viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents\r\n    const selectedDocs = this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId));\r\n    \r\n    // Filter documents that can be viewed in Cerner Document Viewer\r\n    const viewableDocs = selectedDocs.filter(doc => this.canViewInCerner(doc));\r\n    \r\n    if (viewableDocs.length === 0) {\r\n      this.messagingService.warning('No selected documents can be viewed in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    if (viewableDocs.length !== selectedDocs.length) {\r\n      this.messagingService.warning(`${selectedDocs.length - viewableDocs.length} document(s) cannot be viewed in Cerner Document Viewer and will be skipped`);\r\n    }\r\n\r\n    // Extract event IDs, filtering out fallback IDs\r\n    const eventIds = viewableDocs\r\n      .filter(doc => !(typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')))\r\n      .map(doc => typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId);\r\n\r\n    if (eventIds.length === 0) {\r\n      this.messagingService.warning('No valid documents to view in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    const personIdNum = this.personId;\r\n\r\n    // Call the Cerner Document Viewer action with multiple documents\r\n    this.cernerActionService.CernerAction('DOC_VIEWER', {\r\n      personId: personIdNum,\r\n      eventIds: eventIds\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening ${eventIds.length} document(s) in Cerner Document Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open documents in Cerner Document Viewer');\r\n      console.error('Cerner Document Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View selected procedures in Cerner Procedure Viewer\r\n   */\r\n  viewSelectedInCernerProcedure(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No procedures selected for viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.personId) {\r\n      this.messagingService.error('No person ID available for procedure viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents\r\n    const selectedDocs = this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId));\r\n    \r\n    // Filter documents that can be viewed in Cerner Procedure Viewer\r\n    const viewableDocs = selectedDocs.filter(doc => this.canViewInCernerProcedure(doc));\r\n    \r\n    if (viewableDocs.length === 0) {\r\n      this.messagingService.warning('No selected procedures can be viewed in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    if (viewableDocs.length !== selectedDocs.length) {\r\n      this.messagingService.warning(`${selectedDocs.length - viewableDocs.length} document(s) cannot be viewed in Cerner Procedure Viewer and will be skipped`);\r\n    }\r\n\r\n    // Extract event IDs, filtering out fallback IDs\r\n    const eventIds = viewableDocs\r\n      .filter(doc => !(typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')))\r\n      .map(doc => typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId);\r\n\r\n    if (eventIds.length === 0) {\r\n      this.messagingService.warning('No valid procedures to view in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    const personIdNum = this.personId;\r\n\r\n    // Call the Cerner Procedure Viewer action with multiple procedures\r\n    this.cernerActionService.CernerAction('PROC_VIEWER', {\r\n      personId: personIdNum,\r\n      eventIds: eventIds\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening ${eventIds.length} procedure(s) in Cerner Procedure Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open procedures in Cerner Procedure Viewer');\r\n      console.error('Cerner Procedure Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View selected documents/procedures in appropriate Cerner viewers\r\n   */\r\n  viewSelectedInCernerAppropriate(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected for viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.personId) {\r\n      this.messagingService.error('No person ID available for viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents\r\n    const selectedDocs = this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId));\r\n    \r\n    // Separate documents and procedures\r\n    const documentsToView = selectedDocs.filter(doc => this.canViewInCerner(doc));\r\n    const proceduresToView = selectedDocs.filter(doc => this.canViewInCernerProcedure(doc));\r\n    \r\n    if (documentsToView.length === 0 && proceduresToView.length === 0) {\r\n      this.messagingService.warning('No selected documents or procedures can be viewed in Cerner viewers');\r\n      return;\r\n    }\r\n\r\n    // View documents if any\r\n    if (documentsToView.length > 0) {\r\n      this.viewSelectedInCerner();\r\n    }\r\n\r\n    // View procedures if any (with a small delay to avoid conflicts)\r\n    if (proceduresToView.length > 0) {\r\n      setTimeout(() => {\r\n        this.viewSelectedInCernerProcedure();\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Close the modal\r\n   */\r\n  closeModal(): void {\r\n    this.close.emit();\r\n  }\r\n\r\n  /**\r\n   * Clear all data\r\n   */\r\n  clearData(): void {\r\n    this.personId = 0;\r\n    this.availableDocuments = [];\r\n    this.selectedDocuments.clear();\r\n    this.filteredDocuments = [];\r\n    this.searchText = '';\r\n    this.setAllDates();\r\n  }\r\n\r\n  /**\r\n   * Get color for document type\r\n   */\r\n  getTypeColor(type: string): string {\r\n    const typeColors: { [key: string]: string } = {\r\n      'Document': 'blue',\r\n      'Note': 'green',\r\n      'Report': 'orange',\r\n      'Image': 'purple',\r\n      'Procedure': 'red',\r\n      'Lab': 'cyan',\r\n      'Radiology': 'magenta'\r\n    };\r\n    return typeColors[type] || 'default';\r\n  }\r\n\r\n  /**\r\n   * Sorting functions for the documents table\r\n   */\r\n  sortByDate = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.effectiveDate && !b.effectiveDate) return 0;\r\n    if (!a.effectiveDate) return 1;\r\n    if (!b.effectiveDate) return -1;\r\n    \r\n    // Convert string dates to Date objects for comparison\r\n    const dateA = new Date(a.effectiveDate);\r\n    const dateB = new Date(b.effectiveDate);\r\n    \r\n    // Check if dates are valid\r\n    if (isNaN(dateA.getTime()) && isNaN(dateB.getTime())) return 0;\r\n    if (isNaN(dateA.getTime())) return 1;\r\n    if (isNaN(dateB.getTime())) return -1;\r\n    \r\n    return dateA.getTime() - dateB.getTime();\r\n  };\r\n\r\n  sortByType = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.type && !b.type) return 0;\r\n    if (!a.type) return 1;\r\n    if (!b.type) return -1;\r\n    return a.type.localeCompare(b.type);\r\n  };\r\n\r\n  sortByTitle = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.title && !b.title) return 0;\r\n    if (!a.title) return 1;\r\n    if (!b.title) return -1;\r\n    return a.title.localeCompare(b.title);\r\n  };\r\n\r\n  sortByAuthor = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.author && !b.author) return 0;\r\n    if (!a.author) return 1;\r\n    if (!b.author) return -1;\r\n    return a.author.localeCompare(b.author);\r\n  };\r\n\r\n  /**\r\n   * Check if all documents are selected\r\n   */\r\n  isAllDocumentsSelected(): boolean {\r\n    return this.filteredDocuments.length > 0 && \r\n           this.filteredDocuments.every(doc => this.selectedDocuments.has(doc.eventId));\r\n  }\r\n\r\n  /**\r\n   * Check if some documents are selected\r\n   */\r\n  isSomeDocumentsSelected(): boolean {\r\n    return this.filteredDocuments.some(doc => this.selectedDocuments.has(doc.eventId)) && \r\n           !this.isAllDocumentsSelected();\r\n  }\r\n\r\n  /**\r\n   * Toggle selection for all documents\r\n   */\r\n  toggleAllDocumentsSelection(checked: boolean): void {\r\n    this.filteredDocuments.forEach(doc => {\r\n      this.toggleDocumentSelection(doc, checked);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Sort documents by field\r\n   */\r\n  sortBy(field: string): void {\r\n    if (this.currentSortField === field) {\r\n      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';\r\n    } else {\r\n      this.currentSortField = field;\r\n      this.sortDirection = 'asc';\r\n    }\r\n\r\n    this.filteredDocuments.sort((a, b) => {\r\n      let aValue: any = a[field as keyof DocumentRow];\r\n      let bValue: any = b[field as keyof DocumentRow];\r\n\r\n      if (field === 'effectiveDate') {\r\n        aValue = aValue ? new Date(aValue) : new Date(0);\r\n        bValue = bValue ? new Date(bValue) : new Date(0);\r\n      }\r\n\r\n      if (aValue < bValue) return this.sortDirection === 'asc' ? -1 : 1;\r\n      if (aValue > bValue) return this.sortDirection === 'asc' ? 1 : -1;\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle select all checkbox change\r\n   */\r\n  onSelectAllChange(event: Event): void {\r\n    const target = event.target as HTMLInputElement;\r\n    this.toggleAllDocumentsSelection(target.checked);\r\n  }\r\n\r\n  /**\r\n   * Handle individual document checkbox change\r\n   */\r\n  onDocumentSelectChange(doc: DocumentRow, event: Event): void {\r\n    const target = event.target as HTMLInputElement;\r\n    this.toggleDocumentSelection(doc, target.checked);\r\n  }\r\n}\r\n","<!-- Document Viewer Test Tool Modal - Simple Version -->\r\n<div class=\"modal-overlay\" *ngIf=\"isVisible\" (click)=\"closeModal()\">\r\n  <div class=\"modal-content\" (click)=\"$event.stopPropagation()\">\r\n    <!-- Modal Header -->\r\n    <div class=\"modal-header\">\r\n      <h3>Document Viewer Test Tool</h3>\r\n      <button class=\"close-btn\" (click)=\"closeModal()\">&times;</button>\r\n    </div>\r\n\r\n    <!-- Modal Body -->\r\n    <div class=\"modal-body\">\r\n      <!-- Input Section -->\r\n      <div class=\"input-section\">\r\n        <div class=\"form-group\">\r\n          <label>Person ID *</label>\r\n          <input \r\n            type=\"number\" \r\n            [(ngModel)]=\"personId\" \r\n            placeholder=\"Enter Person ID\"\r\n            [disabled]=\"isLoadingDocuments\"\r\n            class=\"form-control\">\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n          <label>Date Range</label>\r\n          <div class=\"date-range-group\">\r\n            <input \r\n              type=\"date\" \r\n              [(ngModel)]=\"beginDateStr\"\r\n              [disabled]=\"isLoadingDocuments\"\r\n              class=\"form-control\">\r\n            <span>to</span>\r\n            <input \r\n              type=\"date\" \r\n              [(ngModel)]=\"endDateStr\"\r\n              [disabled]=\"isLoadingDocuments\"\r\n              class=\"form-control\">\r\n            <button \r\n              class=\"btn btn-secondary\"\r\n              (click)=\"setAllDates()\"\r\n              [disabled]=\"isLoadingDocuments\">\r\n              All Dates\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"form-group\">\r\n          <button \r\n            class=\"btn btn-primary\"\r\n            (click)=\"loadDocuments()\"\r\n            [disabled]=\"!personId || isLoadingDocuments\">\r\n            <span *ngIf=\"isLoadingDocuments\">Loading...</span>\r\n            <span *ngIf=\"!isLoadingDocuments\">Load Documents</span>\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Search Section -->\r\n      <div class=\"search-section\" *ngIf=\"availableDocuments.length > 0\">\r\n        <div class=\"form-group\">\r\n          <input \r\n            type=\"text\" \r\n            [(ngModel)]=\"searchText\" \r\n            (ngModelChange)=\"applyFilter()\"\r\n            placeholder=\"Search documents by title, author, or type...\"\r\n            [disabled]=\"isLoadingDocuments\"\r\n            class=\"form-control\">\r\n        </div>\r\n        \r\n        <div class=\"action-buttons\">\r\n          <button \r\n            class=\"btn btn-outline-primary\"\r\n            (click)=\"viewSelectedInCerner()\"\r\n            [disabled]=\"!hasSelectedDocuments() || isLoadingDocuments\">\r\n            View Selected in Cerner\r\n          </button>\r\n          <button \r\n            class=\"btn btn-outline-secondary\"\r\n            (click)=\"clearData()\"\r\n            [disabled]=\"isLoadingDocuments\">\r\n            Clear All\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Results Section -->\r\n      <div class=\"results-section\">\r\n        <!-- Loading State -->\r\n        <div *ngIf=\"isLoadingDocuments\" class=\"loading-state\">\r\n          <div class=\"spinner\"></div>\r\n          <p>Loading documents...</p>\r\n        </div>\r\n\r\n        <!-- No Results State -->\r\n        <div *ngIf=\"!isLoadingDocuments && availableDocuments.length === 0 && personId\" class=\"no-results\">\r\n          <p>No documents found for the specified Person ID and date range.</p>\r\n        </div>\r\n\r\n        <!-- No Person ID State -->\r\n        <div *ngIf=\"!isLoadingDocuments && availableDocuments.length === 0 && !personId\" class=\"no-person-id\">\r\n          <p>Please enter a Person ID to load documents.</p>\r\n        </div>\r\n\r\n        <!-- Results Table -->\r\n        <div *ngIf=\"!isLoadingDocuments && availableDocuments.length > 0\" class=\"results-table\">\r\n          <div class=\"results-summary\">\r\n            <span class=\"badge badge-primary\">{{ filteredDocuments.length }} of {{ availableDocuments.length }} documents</span>\r\n            <span *ngIf=\"hasSelectedDocuments()\" class=\"badge badge-success\">{{ getSelectedDocumentsCount() }} selected</span>\r\n          </div>\r\n\r\n          <div class=\"table-container\">\r\n            <table class=\"table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>\r\n                    <input \r\n                      type=\"checkbox\" \r\n                      [checked]=\"isAllDocumentsSelected()\"\r\n                      [indeterminate]=\"isSomeDocumentsSelected()\"\r\n                      (change)=\"onSelectAllChange($event)\">\r\n                  </th>\r\n                  <th (click)=\"sortBy('title')\">Title</th>\r\n                  <th (click)=\"sortBy('author')\">Author</th>\r\n                  <th (click)=\"sortBy('type')\">Type</th>\r\n                  <th (click)=\"sortBy('effectiveDate')\">Date</th>\r\n                  <th>Source</th>\r\n                  <th>Actions</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr *ngFor=\"let doc of filteredDocuments\" \r\n                    [class.highlighted-row]=\"isRowHighlighted(doc)\">\r\n                  <td>\r\n                    <input \r\n                      type=\"checkbox\" \r\n                      [checked]=\"selectedDocuments.has(doc.eventId)\"\r\n                      (change)=\"onDocumentSelectChange(doc, $event)\">\r\n                  </td>\r\n                  <td>\r\n                    <div class=\"document-title\" [title]=\"doc.title\">\r\n                      {{ doc.title }}\r\n                    </div>\r\n                  </td>\r\n                  <td>{{ doc.author || 'N/A' }}</td>\r\n                  <td>\r\n                    <span class=\"badge badge-info\">{{ doc.type || 'Document' }}</span>\r\n                  </td>\r\n                  <td>\r\n                    <span *ngIf=\"doc.effectiveDate; else noDate\">\r\n                      {{ doc.effectiveDate | date:'MM/dd/yyyy' }}\r\n                    </span>\r\n                    <ng-template #noDate>\r\n                      <span class=\"text-muted\">N/A</span>\r\n                    </ng-template>\r\n                  </td>\r\n                  <td>{{ doc.source || 'Clinical' }}</td>\r\n                  <td>\r\n                    <div class=\"action-buttons\">\r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-primary\"\r\n                        (click)=\"previewDocument(doc)\"\r\n                        [disabled]=\"!isValidEventId(doc.eventId)\">\r\n                        Preview\r\n                      </button>\r\n                      <button \r\n                        class=\"btn btn-sm btn-outline-success\"\r\n                        (click)=\"viewInCerner(doc)\"\r\n                        [disabled]=\"!canViewInCerner(doc)\">\r\n                        Cerner\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Document Preview Modal -->\r\n<div class=\"modal-overlay\" *ngIf=\"previewModalVisible\" (click)=\"closePreviewModal()\">\r\n  <div class=\"modal-content preview-modal\" (click)=\"$event.stopPropagation()\">\r\n    <div class=\"modal-header\">\r\n      <h3>Document Preview</h3>\r\n      <button class=\"close-btn\" (click)=\"closePreviewModal()\">&times;</button>\r\n    </div>\r\n    \r\n    <div class=\"modal-body\" *ngIf=\"selectedDocumentForPreview\">\r\n      <div class=\"document-details\">\r\n        <div class=\"detail-row\">\r\n          <strong>Title:</strong> {{ selectedDocumentForPreview.title }}\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <strong>Author:</strong> {{ selectedDocumentForPreview.author || 'N/A' }}\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <strong>Type:</strong> {{ selectedDocumentForPreview.type || 'Document' }}\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <strong>Source:</strong> {{ selectedDocumentForPreview.source || 'Clinical' }}\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <strong>Date:</strong> {{ selectedDocumentForPreview.effectiveDate ? (selectedDocumentForPreview.effectiveDate | date:'MM/dd/yyyy') : 'N/A' }}\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <strong>Event ID:</strong> {{ selectedDocumentForPreview.eventId }}\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"preview-actions\">\r\n        <button \r\n          class=\"btn btn-primary\" \r\n          (click)=\"viewInCerner(selectedDocumentForPreview)\"\r\n          [disabled]=\"!canViewInCerner(selectedDocumentForPreview)\">\r\n          View in Cerner Document Viewer\r\n        </button>\r\n        <button \r\n          class=\"btn btn-secondary\" \r\n          (click)=\"viewInCernerProcedure(selectedDocumentForPreview)\"\r\n          [disabled]=\"!canViewInCernerProcedure(selectedDocumentForPreview)\">\r\n          View in Cerner Procedure Viewer\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-test-tools',\r\n  templateUrl: './test-tools-simple.component.html',\r\n  styleUrls: ['./test-tools-simple.component.scss']\r\n})\r\nexport class TestToolsComponent {\r\n  // This component serves as a container for various test tools\r\n  // Each test tool will be implemented as a separate sub-component\r\n  \r\n  /** Document viewer test tool modal visibility */\r\n  documentViewerTestVisible = false;\r\n\r\n  /**\r\n   * Open the document viewer test tool\r\n   */\r\n  openDocumentViewerTest(): void {\r\n    this.documentViewerTestVisible = true;\r\n  }\r\n\r\n  /**\r\n   * Close the document viewer test tool\r\n   */\r\n  closeDocumentViewerTest(): void {\r\n    this.documentViewerTestVisible = false;\r\n  }\r\n}\r\n","<!-- Test Tools Section - Simple Version -->\r\n<div class=\"test-tools-section\">\r\n  <div class=\"section-header\">\r\n    <h2>Test Tools</h2>\r\n    <p>Administrative tools for testing and debugging system functionality.</p>\r\n  </div>\r\n\r\n  <div class=\"tools-grid\">\r\n    <!-- Document Viewer Test Tool -->\r\n    <div class=\"tool-card\">\r\n      <div class=\"tool-header\">\r\n        <h3>Document Viewer Test Tool</h3>\r\n        <p>Test document retrieval and viewing functionality using a Person ID.</p>\r\n      </div>\r\n      \r\n      <div class=\"tool-content\">\r\n        <div class=\"tool-description\">\r\n          <p>This tool allows you to:</p>\r\n          <ul>\r\n            <li>Enter a Person ID to retrieve documents</li>\r\n            <li>View all documents for that person (with date filtering)</li>\r\n            <li>Select and preview documents</li>\r\n            <li>Open documents in Cerner viewers</li>\r\n            <li>Test document attachment functionality</li>\r\n          </ul>\r\n        </div>\r\n        \r\n        <div class=\"tool-actions\">\r\n          <button \r\n            class=\"btn btn-primary\"\r\n            (click)=\"openDocumentViewerTest()\">\r\n            Open Document Viewer Test Tool\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Placeholder for future tools -->\r\n    <div class=\"tool-card placeholder\">\r\n      <div class=\"tool-header\">\r\n        <h3>More Test Tools Coming Soon</h3>\r\n        <p>Additional testing and debugging tools will be added here.</p>\r\n      </div>\r\n      \r\n      <div class=\"tool-content\">\r\n        <div class=\"tool-description\">\r\n          <p>Future tools may include:</p>\r\n          <ul>\r\n            <li>API Testing Tools</li>\r\n            <li>Data Validation Tools</li>\r\n            <li>Performance Testing Tools</li>\r\n            <li>Integration Testing Tools</li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- Document Viewer Test Tool Modal -->\r\n<app-document-viewer-test-tool\r\n  [isVisible]=\"documentViewerTestVisible\"\r\n  (close)=\"closeDocumentViewerTest()\">\r\n</app-document-viewer-test-tool>\r\n","// src/app/compass-content/compass-content.component.ts\r\nimport { Component, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Router, NavigationEnd } from '@angular/router';\r\nimport { SidebarStateService } from '../services/sidebar-state.service';\r\nimport { ColumnConfigService } from '../services/column-config.service';\r\nimport { filter } from 'rxjs/operators';\r\nimport { ColumnItem } from '../models/column-item.model';\r\n\r\n@Component({\r\n  selector: 'app-compass-content',\r\n  templateUrl: './compass-content.component.html',\r\n  styleUrls: ['./compass-content.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CompassContentComponent {\r\n  columns!: ColumnItem[];\r\n  constructor(\r\n    public router: Router,\r\n    public sidebarState: SidebarStateService,\r\n    private columnConfig: ColumnConfigService\r\n  ) {\r\n    // Set columns based on the initial route\r\n    this.columns = this.columnConfig.getColumnsForCurrentRoute(this.router.url);\r\n    // Listen for route changes\r\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: any) => {\r\n      this.columns = this.columnConfig.getColumnsForCurrentRoute(event.urlAfterRedirects || event.url);\r\n    });\r\n  }\r\n}","<nz-layout class=\"compass-layout\">\r\n  <ng-container *ngIf=\"router.url.includes('prior-auth')\">\r\n    <nz-sider \r\n      nzCollapsible \r\n      [nzCollapsed]=\"sidebarState.collapsed()\" \r\n      nzTheme=\"light\"\r\n      [nzWidth]=\"sidebarState.width()\"\r\n      [nzCollapsedWidth]=\"0\"\r\n      [nzTrigger]=\"null\"\r\n    >\r\n      <app-prior-auth-sider [columns]=\"columns\"></app-prior-auth-sider>\r\n    </nz-sider>\r\n  </ng-container>\r\n  <nz-content class=\"compass-content\">\r\n    <router-outlet></router-outlet>\r\n  </nz-content>\r\n</nz-layout>","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-access-request',\r\n  templateUrl: './access-request.component.html',\r\n  styleUrls: ['./access-request.component.scss']\r\n})\r\nexport class AccessRequestComponent {\r\n  \r\n  requestText = '';\r\n\r\n  constructor() { }\r\n\r\n  /**\r\n   * Handle form submission (currently does nothing as requested)\r\n   */\r\n  onSubmit(): void {\r\n    // Process access request submission with the entered text\r\n    // TODO: Implement access request submission logic\r\n  }\r\n} ","<div class=\"access-request-container\">\r\n  <nz-card>\r\n    <div class=\"access-request-header\">\r\n      <h3>Access Request</h3>\r\n      <p>You don't currently have access to any COMPASS modules. Please submit a request for access below.</p>\r\n    </div>\r\n\r\n    <form (ngSubmit)=\"onSubmit()\" class=\"access-request-form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"requestText\">Please describe why you need access to COMPASS:</label>\r\n        <textarea\r\n          id=\"requestText\"\r\n          name=\"requestText\"\r\n          [(ngModel)]=\"requestText\"\r\n          rows=\"6\"\r\n          placeholder=\"Please provide details about your role and why you need access to COMPASS modules...\"\r\n          required\r\n        ></textarea>\r\n      </div>\r\n\r\n      <div class=\"form-actions\">\r\n        <button \r\n          nz-button \r\n          nzType=\"primary\" \r\n          type=\"submit\"\r\n          [disabled]=\"true\"\r\n        >\r\n          Submit Access Request\r\n        </button>\r\n      </div>\r\n    </form>\r\n  </nz-card>\r\n</div> ","import { Component, OnInit, OnDestroy, effect, Injector } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { UserPreferencesService } from '../../services/user-preferences.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'app-default',\r\n  templateUrl: './default.component.html',\r\n  styleUrls: ['./default.component.scss']\r\n})\r\nexport class DefaultComponent implements OnInit, OnDestroy {\r\n  showAccessRequest = false;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  // Use field initializer for effect - this runs in injection context\r\n  private preferencesEffect = effect(() => {\r\n    const loaded = this.userPreferences.preferencesLoaded();\r\n    if (loaded) {\r\n      this.checkTabAccess();\r\n    }\r\n  });\r\n\r\n  constructor(\r\n    public userPreferences: UserPreferencesService,\r\n    private injector: Injector,\r\n    private router: Router\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Initial check in case preferences are already loaded\r\n    if (this.userPreferences.preferencesLoaded()) {\r\n      this.checkTabAccess();\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private checkTabAccess(): void {\r\n    console.log('[DefaultComponent] checkTabAccess called');\r\n    const userData = this.userPreferences.getUserData();\r\n    console.log('[DefaultComponent] User data:', userData);\r\n    \r\n    if (userData?.preferences?.displaySettings) {\r\n      const displaySettings = userData.preferences.displaySettings;\r\n      const enabledTabs = displaySettings['enabledTabs'] || [];\r\n      console.log('[DefaultComponent] Enabled tabs:', enabledTabs);\r\n      \r\n      // If user has enabled tabs, redirect to the appropriate tab\r\n      if (enabledTabs.length > 0) {\r\n        // First check if there's a default tab specified\r\n        if (displaySettings['defaultTab']) {\r\n          const defaultTab = displaySettings['defaultTab'];\r\n          console.log('[DefaultComponent] Default tab:', defaultTab);\r\n          // Verify the default tab is in enabledTabs\r\n          if (enabledTabs.includes(defaultTab)) {\r\n            console.log('[DefaultComponent] Navigating to default tab:', '/' + defaultTab);\r\n            this.router.navigate(['/' + defaultTab]);\r\n            return;\r\n          }\r\n        }\r\n        \r\n        // If no default tab or default tab not enabled, use first enabled tab\r\n        console.log('[DefaultComponent] Navigating to first enabled tab:', '/' + enabledTabs[0]);\r\n        this.router.navigate(['/' + enabledTabs[0]]);\r\n        return;\r\n      }\r\n      \r\n      // If no tabs are enabled, show access request\r\n      console.log('[DefaultComponent] No enabled tabs, showing access request');\r\n      this.showAccessRequest = true;\r\n    } else {\r\n      // If no display settings, show access request\r\n      console.log('[DefaultComponent] No display settings, showing access request');\r\n      this.showAccessRequest = true;\r\n    }\r\n  }\r\n} ","<div class=\"default-container\">\r\n  \r\n  <!-- Show loading timeline if no access request needed -->\r\n  <app-loading-timeline *ngIf=\"!showAccessRequest\"></app-loading-timeline>\r\n\r\n  <!-- Show access request form if no tabs are enabled -->\r\n  <app-access-request *ngIf=\"showAccessRequest\"></app-access-request>\r\n</div> ","import { Component, OnInit, OnDestroy, ChangeDetectionStrategy, signal, computed, effect } from '@angular/core';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { AppStatusService } from '../../../services/app-status.service';\r\nimport { mPageService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { timer, Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n/**\r\n * LoadingTimelineComponent - Application Initialization Progress Display\r\n * \r\n * This component provides a visual timeline showing the progress of application\r\n * initialization steps, from basic setup through MPage service connection to\r\n * user preference loading. It includes intelligent fallback to offline mode\r\n * if services are unavailable.\r\n * \r\n * COMPONENT ARCHITECTURE:\r\n * - Uses Angular Signals for reactive state management\r\n * - Implements OnPush change detection for optimal performance\r\n * - Integrates with NG-Zorro Steps component for visual progress indication\r\n * - Supports both online and offline operational modes\r\n * \r\n * INITIALIZATION FLOW:\r\n * 1. Application Environment Setup - Basic Angular initialization\r\n * 2. MPage Service Connection - Establishes connection to Cerner services\r\n * 3. User Preference Loading - Retrieves personalized user settings\r\n * 4. Ready State - Application fully loaded and ready for use\r\n * \r\n * SIGNAL-BASED STATE MANAGEMENT:\r\n * - _currentStep: Tracks which initialization step is currently active\r\n * - _preferencesLoaded: Monitors user preference loading completion\r\n * - _showOfflineButton: Controls visibility of manual offline mode button\r\n * - Uses effect() with allowSignalWrites for reactive preference monitoring\r\n * \r\n * OFFLINE MODE SUPPORT:\r\n * - Automatically detects when services are unavailable\r\n * - Provides manual offline mode activation after 5-second timeout\r\n * - Gracefully handles service connection failures\r\n * - Maintains full application functionality in offline mode\r\n * \r\n * USER EXPERIENCE FEATURES:\r\n * - Clear visual progress indication with descriptive steps\r\n * - Automatic progression through initialization phases\r\n * - Manual escape hatch via offline mode button\r\n * - Informative step descriptions and status indicators\r\n * \r\n * PERFORMANCE CONSIDERATIONS:\r\n * - Uses RxJS timer() instead of setTimeout for OnPush compatibility\r\n * - Efficient signal-based state updates minimize re-renders\r\n * - Proper cleanup of intervals and subscriptions prevents memory leaks\r\n * - Smart service polling with automatic termination conditions\r\n * \r\n * ERROR HANDLING:\r\n * - Graceful degradation when MPage services are unavailable\r\n * - User-friendly offline mode with full feature preservation\r\n * - Automatic cleanup of polling when initialization completes\r\n * - Clear status indicators for each potential failure point\r\n */\r\n@Component({\r\n  selector: 'app-loading-timeline',\r\n  templateUrl: './loading-timeline.component.html',\r\n  styleUrls: ['./loading-timeline.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class LoadingTimelineComponent implements OnInit, OnDestroy {\r\n  // Signals for reactive state management\r\n  private _currentStep = signal<number>(1);\r\n  private _preferencesLoaded = signal<boolean>(false);\r\n  private _showOfflineButton = signal<boolean>(false);\r\n  \r\n  // Read-only signals for template access\r\n  readonly currentStep = this._currentStep.asReadonly();\r\n  readonly preferencesLoaded = this._preferencesLoaded.asReadonly();\r\n  readonly showOfflineButton = this._showOfflineButton.asReadonly();\r\n  \r\n  // Computed signal for offline mode from service\r\n  readonly offlineMode = computed(() => this.appStatus.offlineMode());\r\n  \r\n  private serviceCheckInterval: any;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  // Step definitions for Ant Design Steps\r\n  steps = [\r\n    {\r\n      title: 'Initializing application',\r\n      description: 'Setting up the application environment...',\r\n      status: 'finish' as 'finish' | 'process' | 'wait' | 'error'\r\n    },\r\n    {\r\n      title: 'Connecting to MPage services',\r\n      description: 'Establishing connection to Mpage services...',\r\n      status: 'process' as 'finish' | 'process' | 'wait' | 'error'\r\n    },\r\n    {\r\n      title: 'Loading user preferences',\r\n      description: 'Retrieving your personalized settings...',\r\n      status: 'wait' as 'finish' | 'process' | 'wait' | 'error'\r\n    },\r\n    {\r\n      title: 'Ready to navigate',\r\n      description: 'Your workspace is ready!',\r\n      status: 'wait' as 'finish' | 'process' | 'wait' | 'error'\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    public userPreferences: UserPreferencesService,\r\n    private appStatus: AppStatusService,\r\n    private mPage: mPageService\r\n  ) { }\r\n\r\n  // Use field initializer for effect - this runs in injection context\r\n  private preferencesEffect = effect(() => {\r\n    const loaded = this.userPreferences.preferencesLoaded();\r\n    this._preferencesLoaded.set(loaded);\r\n    if (loaded) {\r\n      this.updateStep(3, 'finish'); // Step 4 (index 3) is finished\r\n      this.stopServiceCheck(); // Stop checking once final step is completed\r\n    }\r\n  }, { allowSignalWrites: true });\r\n\r\n  ngOnInit(): void {\r\n    // Check offline mode status and update steps accordingly\r\n    this.checkOfflineMode();\r\n    \r\n    // Start continuous service ready check\r\n    this.startServiceCheck();\r\n    \r\n    // Start 5-second timer for offline button using RxJS\r\n    this.startOfflineButtonTimer();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    this.stopServiceCheck();\r\n  }\r\n\r\n  /**\r\n   * Enter offline mode manually\r\n   */\r\n  enterOfflineMode(): void {\r\n    // User manually triggered offline mode due to service connection timeout\r\n    this.appStatus.setOfflineMode(true);\r\n    this._showOfflineButton.set(false); // Hide the button\r\n    \r\n    // Mark all steps as completed and load preferences\r\n    this.updateStep(1, 'finish'); // Step 2 (index 1) is finished\r\n    this.updateStep(2, 'finish'); // Step 3 (index 2) is finished\r\n    this.updateStep(3, 'finish'); // Step 4 (index 3) is finished\r\n    \r\n    // Stop service checking\r\n    this.stopServiceCheck();\r\n    \r\n    // Load user preferences in offline mode\r\n    if (this.mPage.prsnlId) {\r\n      this.userPreferences.loadUserPreferences(this.mPage.prsnlId);\r\n    } else {\r\n      this.userPreferences.loadUserPreferences(0);\r\n    }\r\n  }\r\n\r\n  private checkOfflineMode(): void {\r\n    // Check if application is already in offline mode and skip service connection steps\r\n    if (this.appStatus.offlineMode()) {\r\n      // In offline mode, skip service connection step and mark as completed\r\n      this.updateStep(1, 'finish'); // Step 2 (index 1) is finished\r\n      this.updateStep(2, 'finish'); // Step 3 (index 2) is finished\r\n      this.updateStep(3, 'finish'); // Step 4 (index 3) is finished\r\n      this.stopServiceCheck(); // Stop checking in offline mode\r\n    }\r\n  }\r\n\r\n  private startServiceCheck(): void {\r\n    // Check immediately\r\n    this.checkMPageServiceReady();\r\n    \r\n    // Then check every 500ms until final step is completed\r\n    this.serviceCheckInterval = setInterval(() => {\r\n      this.checkMPageServiceReady();\r\n    }, 500);\r\n  }\r\n\r\n  private stopServiceCheck(): void {\r\n    if (this.serviceCheckInterval) {\r\n      clearInterval(this.serviceCheckInterval);\r\n      this.serviceCheckInterval = null;\r\n    }\r\n  }\r\n\r\n  private startOfflineButtonTimer(): void {\r\n    // Show offline button after 5 seconds if still on step 2 using RxJS timer\r\n    timer(5000).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(() => {\r\n      if (this._currentStep() === 1 && this.steps[1].status === 'process' && !this.appStatus.offlineMode()) {\r\n        // Show offline button if still waiting for service connection after 5 seconds\r\n        this._showOfflineButton.set(true);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  private checkMPageServiceReady(): void {\r\n    // If mPage service is ready, mark step 2 as completed\r\n    if (this.mPage.serviceReady) {\r\n      // MPage service connection has been established successfully\r\n      this.updateStep(1, 'finish'); // Step 2 (index 1) is finished\r\n    }\r\n  }\r\n\r\n  private updateStep(stepIndex: number, status: 'finish' | 'process' | 'wait' | 'error'): void {\r\n    if (stepIndex >= 0 && stepIndex < this.steps.length) {\r\n      this.steps[stepIndex].status = status;\r\n      \r\n      // Update current step for process status\r\n      if (status === 'process') {\r\n        this._currentStep.set(stepIndex);\r\n      } else if (status === 'finish') {\r\n        // Move to next step if current step is finished\r\n        this._currentStep.set(Math.max(this._currentStep(), stepIndex + 1));\r\n        // Set next step to process if it exists\r\n        if (stepIndex + 1 < this.steps.length) {\r\n          this.steps[stepIndex + 1].status = 'process';\r\n        }\r\n        \r\n        // If step 2 is finished, hide the offline button\r\n        if (stepIndex === 1) {\r\n          this._showOfflineButton.set(false);\r\n        }\r\n      }\r\n    }\r\n  }\r\n} ","<nz-page-header>\r\n    <nz-page-header-content>\r\n      <h2>Welcome to COMPASS</h2>\r\n    </nz-page-header-content>\r\n  </nz-page-header>\r\n<div class=\"loading-timeline\">\r\n  <div class=\"timeline-container\">\r\n    <nz-steps [nzCurrent]=\"currentStep()\" nzDirection=\"vertical\">\r\n      <nz-step \r\n        *ngFor=\"let step of steps; let i = index\"\r\n        [nzTitle]=\"step.title\"\r\n        [nzDescription]=\"step.description\"\r\n        [nzStatus]=\"step.status\"\r\n      >\r\n      </nz-step>\r\n    </nz-steps>\r\n    \r\n    <!-- Offline mode button - shows after 5 seconds if stuck on step 2 -->\r\n    <div *ngIf=\"showOfflineButton()\" class=\"offline-mode-button\">\r\n      <nz-alert \r\n        nzType=\"warning\" \r\n        nzMessage=\"Service connection is taking longer than expected. You can continue in offline mode with default settings.\"\r\n        nzShowIcon\r\n        class=\"offline-warning\"\r\n      ></nz-alert>\r\n      <button \r\n        nz-button \r\n        nzType=\"default\" \r\n        nzDanger\r\n        (click)=\"enterOfflineMode()\"\r\n        class=\"offline-button\"\r\n      >\r\n        Continue in Offline Mode\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngIf=\"preferencesLoaded()\" class=\"navigation-message\">\r\n    <nz-alert \r\n      nzType=\"success\" \r\n      nzMessage=\"Preferences loaded successfully! Navigating to your workspace...\"\r\n      nzShowIcon\r\n    ></nz-alert>\r\n  </div>\r\n\r\n  <div *ngIf=\"offlineMode()\" class=\"offline-notice\">\r\n    <nz-alert \r\n      nzType=\"warning\" \r\n      nzMessage=\"Running in offline mode - using default preferences\"\r\n      nzShowIcon\r\n    ></nz-alert>\r\n  </div>\r\n</div> ","import { Component, Input, Output, EventEmitter, OnInit, Inject } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { NzModalRef, NZ_MODAL_DATA } from 'ng-zorro-antd/modal';\r\nimport { FeedbackService } from '../../services/feedback.service';\r\nimport { UserPreferencesService } from '../../services/user-preferences.service';\r\nimport { PriorAuthItem } from '../../models/prior-auth.model';\r\n\r\nexport interface FeedbackData {\r\n  user: string;\r\n  userName: string;\r\n  submissionDateTime: Date;\r\n  itemReference: string;\r\n  itemType: string;\r\n  itemId: string;\r\n  itemMeaning: string;\r\n  feedbackNarrative: string;\r\n  feedbackPriority: 'LOW' | 'MEDIUM' | 'HIGH' | 'CRITICAL';\r\n  workflowStatus: {\r\n    status: 'RECEIVED' | 'TRIAGED' | 'ASSIGNED' | 'IN_PROGRESS' | 'RESOLVED' | 'CLOSED';\r\n    status_datetime: Date;\r\n    updated_by?: string;\r\n  };\r\n  item: PriorAuthItem;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-feedback-form',\r\n  templateUrl: './feedback-form.component.html',\r\n  styleUrls: ['./feedback-form.component.scss']\r\n})\r\nexport class FeedbackFormComponent implements OnInit {\r\n  @Input() itemReference: string = '';\r\n  @Input() itemType: string = '';\r\n  @Input() itemId: string = '';\r\n  @Output() feedbackSubmitted = new EventEmitter<FeedbackData>();\r\n\r\n  feedbackForm: FormGroup;\r\n  isSubmitting = false;\r\n  submissionDateTime = new Date();\r\n  item: PriorAuthItem | null = null;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private modalRef: NzModalRef,\r\n    private feedbackService: FeedbackService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    @Inject(NZ_MODAL_DATA) public data: any\r\n  ) {\r\n    this.feedbackForm = this.fb.group({\r\n      user: [''],\r\n      userName: [''],\r\n      feedbackNarrative: ['', [Validators.required, Validators.minLength(1)]],\r\n      feedbackPriority: ['MEDIUM', [Validators.required]],\r\n      itemMeaning: ['']\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Pre-populate with current user info if available\r\n    this.populateUserInfo();\r\n    \r\n    // Set item information from modal data\r\n    if (this.data) {\r\n      this.itemReference = this.data.itemReference || '';\r\n      this.itemType = this.data.itemType || '';\r\n      this.itemId = this.data.itemId || '';\r\n      this.item = this.data.item || null;\r\n      // Set itemMeaning from modal data, not from item object\r\n      this.feedbackForm.patchValue({\r\n        itemMeaning: this.data.itemMeaning || ''\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Populate user information from available sources\r\n   */\r\n  private populateUserInfo(): void {\r\n    // Get user info from user preferences service\r\n    const userData = this.userPreferencesService.getUserData();\r\n    if (userData) {\r\n      this.feedbackForm.patchValue({\r\n        user: userData.fullName || 'Unknown User',\r\n        userName: userData.username || 'unknown.user@example.com'\r\n      });\r\n    } else {\r\n      // Fallback to placeholder values if no user data available\r\n      this.feedbackForm.patchValue({\r\n        user: 'Current User',\r\n        userName: 'current.user@example.com'\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Submit feedback to the service\r\n   */\r\n  submitFeedback(): void {\r\n    if (this.feedbackForm.valid) {\r\n      this.isSubmitting = true;\r\n      \r\n      const feedbackData: FeedbackData & { itemMeaning: string } = {\r\n        user: this.feedbackForm.get('user')?.value,\r\n        userName: this.feedbackForm.get('userName')?.value,\r\n        submissionDateTime: this.submissionDateTime,\r\n        itemReference: this.itemReference,\r\n        itemType: this.itemType,\r\n        itemId: this.itemId,\r\n        feedbackNarrative: this.feedbackForm.get('feedbackNarrative')?.value,\r\n        feedbackPriority: this.feedbackForm.get('feedbackPriority')?.value,\r\n        workflowStatus: {\r\n          status: 'RECEIVED',\r\n          status_datetime: this.submissionDateTime,\r\n          updated_by: this.feedbackForm.get('user')?.value\r\n        },\r\n        item: this.item as PriorAuthItem,\r\n        itemMeaning: this.feedbackForm.get('itemMeaning')?.value\r\n      };\r\n\r\n      this.feedbackService.submitFeedback(feedbackData).subscribe({\r\n        next: (response: any) => {\r\n          // Feedback submission successful - emit event and close modal\r\n          this.feedbackSubmitted.emit(feedbackData);\r\n          this.modalRef.close(feedbackData);\r\n        },\r\n        error: (error: any) => {\r\n          // Feedback submission failed - error handling delegated to feedback service\r\n          // Error message is now handled by the feedback service using messaging service\r\n        },\r\n        complete: () => {\r\n          this.isSubmitting = false;\r\n        }\r\n      });\r\n    } else {\r\n      this.markFormGroupTouched();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Mark all form controls as touched to trigger validation display\r\n   */\r\n  private markFormGroupTouched(): void {\r\n    Object.keys(this.feedbackForm.controls).forEach(key => {\r\n      const control = this.feedbackForm.get(key);\r\n      control?.markAsTouched();\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Cancel feedback submission\r\n   */\r\n  cancel(): void {\r\n    this.modalRef.close();\r\n  }\r\n} ","<div class=\"feedback-modal\">\r\n  <div class=\"feedback-header\">\r\n    <h2>Submit Feedback</h2>\r\n    <p class=\"feedback-subtitle\">Help us improve by providing feedback about this item</p>\r\n  </div>\r\n\r\n  <form nz-form [formGroup]=\"feedbackForm\" class=\"feedback-form\">\r\n    <!-- User Information Section -->\r\n    <div class=\"form-section\">\r\n      <h3>User Information</h3>\r\n      \r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\">Name</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\">\r\n          <input nz-input formControlName=\"user\" readonly />\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n\r\n    <!-- Item Information Section -->\r\n    <div class=\"form-section compact\">\r\n      <h3>Item Information</h3>\r\n      \r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\">Item Reference</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\">\r\n          <input nz-input [value]=\"itemReference\" readonly />\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\">Item Type</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\">\r\n          <input nz-input [value]=\"itemType\" readonly />\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\">Item ID</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\">\r\n          <input nz-input [value]=\"itemId\" readonly />\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n\r\n    <!-- Feedback Narrative Section -->\r\n    <div class=\"form-section\">\r\n      <h3>Feedback Details</h3>\r\n      \r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\" nzRequired>Priority</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\">\r\n          <nz-select formControlName=\"feedbackPriority\" placeholder=\"Select priority level\">\r\n            <nz-option nzValue=\"LOW\" nzLabel=\"Low\"></nz-option>\r\n            <nz-option nzValue=\"MEDIUM\" nzLabel=\"Medium\"></nz-option>\r\n            <nz-option nzValue=\"HIGH\" nzLabel=\"High\"></nz-option>\r\n            <nz-option nzValue=\"CRITICAL\" nzLabel=\"Critical\"></nz-option>\r\n          </nz-select>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n      \r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"6\" nzRequired>Feedback</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"18\" nzErrorTip=\"Please provide feedback (minimum 10 characters)\">\r\n          <textarea \r\n            nz-input \r\n            formControlName=\"feedbackNarrative\" \r\n            [nzAutosize]=\"{ minRows: 3, maxRows: 6 }\"\r\n            placeholder=\"Please describe your feedback, suggestions, or concerns about this item...\"\r\n          ></textarea>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n  </form>\r\n\r\n  <!-- Action Buttons -->\r\n  <div class=\"feedback-actions\">\r\n    <button \r\n      nz-button \r\n      nzType=\"default\" \r\n      (click)=\"cancel()\"\r\n      [disabled]=\"isSubmitting\"\r\n    >\r\n      Cancel\r\n    </button>\r\n    <button \r\n      nz-button \r\n      nzType=\"primary\" \r\n      (click)=\"submitFeedback()\"\r\n      [nzLoading]=\"isSubmitting\"\r\n      [disabled]=\"!feedbackForm.valid || isSubmitting\"\r\n    >\r\n      Submit Feedback\r\n    </button>\r\n  </div>\r\n</div> ","import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';\r\nimport { FeedbackItem } from '../../../models/feedback.model';\r\n\r\n/**\r\n * FeedbackMilestoneDetailsComponent - Detailed view for feedback milestone management\r\n * \r\n * This component provides a detailed interface for viewing and managing feedback\r\n * milestone information in the drawer/side panel. It shows the complete feedback\r\n * information, resolution timeline, and detailed action options.\r\n */\r\n@Component({\r\n  selector: 'app-feedback-milestone-details',\r\n  templateUrl: './feedback-milestone-details.component.html',\r\n  styleUrls: ['./feedback-milestone-details.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FeedbackMilestoneDetailsComponent {\r\n\r\n  @Input() feedbackItem!: FeedbackItem;\r\n  @Output() milestoneUpdated = new EventEmitter<void>();\r\n\r\n  /**\r\n   * Handle milestone update events\r\n   */\r\n  onMilestoneUpdated(): void {\r\n    this.milestoneUpdated.emit();\r\n  }\r\n\r\n  /**\r\n   * Format date for display\r\n   */\r\n  formatDate(date: Date | string): string {\r\n    const d = new Date(date);\r\n    return d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for feedback priority\r\n   */\r\n  getPriorityClass(priority: string): string {\r\n    switch (priority) {\r\n      case 'CRITICAL':\r\n        return 'priority-critical';\r\n      case 'HIGH':\r\n        return 'priority-high';\r\n      case 'MEDIUM':\r\n        return 'priority-medium';\r\n      case 'LOW':\r\n        return 'priority-low';\r\n      default:\r\n        return 'priority-medium';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for feedback status\r\n   */\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'RECEIVED':\r\n        return 'status-received';\r\n      case 'TRIAGED':\r\n        return 'status-triaged';\r\n      case 'ASSIGNED':\r\n        return 'status-assigned';\r\n      case 'IN_PROGRESS':\r\n        return 'status-in-progress';\r\n      case 'RESOLVED':\r\n        return 'status-resolved';\r\n      case 'CLOSED':\r\n        return 'status-closed';\r\n      default:\r\n        return 'status-received';\r\n    }\r\n  }\r\n}","<div class=\"feedback-milestone-details\">\r\n  \r\n  <!-- Feedback Header -->\r\n  <div class=\"feedback-header\">\r\n    <div class=\"header-main\">\r\n      <h3>Feedback Details</h3>\r\n      <div class=\"header-badges\">\r\n        <nz-tag [class]=\"getPriorityClass(feedbackItem.feedback_priority)\">\r\n          {{ feedbackItem.feedback_priority }}\r\n        </nz-tag>\r\n        <nz-tag [class]=\"getStatusClass(feedbackItem.workflow_status.status)\">\r\n          {{ feedbackItem.workflow_status.status }}\r\n        </nz-tag>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"submission-info\">\r\n      <div class=\"info-item\">\r\n        <strong>Submitted by:</strong> {{ feedbackItem.submitted_by_user }}\r\n      </div>\r\n      <div class=\"info-item\">\r\n        <strong>Submitted:</strong> {{ formatDate(feedbackItem.submission_datetime) }}\r\n      </div>\r\n      <div class=\"info-item\">\r\n        <strong>Type:</strong> \r\n        {{ feedbackItem.feedback_type === 'GENERAL_FEEDBACK' ? 'General Feedback' : 'Worklist Item Feedback' }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Feedback Content -->\r\n  <div class=\"feedback-content-section\">\r\n    <h4>Feedback Content</h4>\r\n    <div class=\"feedback-narrative\">\r\n      {{ feedbackItem.feedback_narrative }}\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Item Reference (if applicable) -->\r\n  <div class=\"item-reference-section\" *ngIf=\"feedbackItem.item_reference\">\r\n    <h4>Referenced Item</h4>\r\n    <div class=\"reference-details\">\r\n      <div class=\"detail-item\">\r\n        <strong>Item:</strong> {{ feedbackItem.item_reference }}\r\n      </div>\r\n      <div class=\"detail-item\" *ngIf=\"feedbackItem.item_type\">\r\n        <strong>Type:</strong> {{ feedbackItem.item_type }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Related Worklist Item (if applicable) -->\r\n  <div class=\"related-item-section\" *ngIf=\"feedbackItem.related_item\">\r\n    <h4>Related Worklist Item</h4>\r\n    <div class=\"related-item-details\">\r\n      <div class=\"detail-item\">\r\n        <strong>Description:</strong> {{ feedbackItem.related_item.item_description }}\r\n      </div>\r\n      <div class=\"detail-item\" *ngIf=\"feedbackItem.related_item.patient\">\r\n        <strong>Patient:</strong> {{ feedbackItem.related_item.patient.name }}\r\n      </div>\r\n      <div class=\"detail-item\" *ngIf=\"feedbackItem.related_item.ordering_provider\">\r\n        <strong>Provider:</strong> {{ feedbackItem.related_item.ordering_provider }}\r\n      </div>\r\n      <div class=\"detail-item\" *ngIf=\"feedbackItem.related_item.workflow_status\">\r\n        <strong>Workflow Status:</strong> {{ feedbackItem.related_item.workflow_status.status }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Assignment Information -->\r\n  <div class=\"assignment-section\" *ngIf=\"feedbackItem.assigned_to\">\r\n    <h4>Assignment</h4>\r\n    <div class=\"assignment-details\">\r\n      <div class=\"detail-item\">\r\n        <strong>Assigned to:</strong> {{ feedbackItem.assigned_to }}\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Resolution Timeline -->\r\n  <div class=\"timeline-section\">\r\n    <h4>Resolution Timeline</h4>\r\n    <nz-timeline nzMode=\"left\">\r\n      <nz-timeline-item \r\n        *ngFor=\"let milestone of feedbackItem.milestones\"\r\n        [nzColor]=\"milestone.status === 'COMPLETED' ? 'green' : (milestone.status === 'IN_PROGRESS' ? 'blue' : 'gray')\">\r\n        \r\n        <div class=\"timeline-content\">\r\n          <div class=\"milestone-header\">\r\n            <strong>{{ milestone.name }}</strong>\r\n            <nz-tag \r\n              [nzColor]=\"milestone.status === 'COMPLETED' ? 'success' : (milestone.status === 'IN_PROGRESS' ? 'processing' : 'default')\">\r\n              {{ milestone.status }}\r\n            </nz-tag>\r\n          </div>\r\n          \r\n          <div class=\"milestone-details\">\r\n            <div class=\"milestone-time\">\r\n              {{ formatDate(milestone.status_datetime) }}\r\n            </div>\r\n            \r\n            <div class=\"milestone-assignee\" *ngIf=\"milestone.assignee\">\r\n              Assignee: {{ milestone.assignee }}\r\n            </div>\r\n            \r\n            <div class=\"milestone-notes\" *ngIf=\"milestone.completion_notes\">\r\n              Notes: {{ milestone.completion_notes }}\r\n            </div>\r\n            \r\n            <!-- Milestone Data -->\r\n            <div class=\"milestone-data\" *ngIf=\"milestone.milestone_data.length > 0\">\r\n              <div \r\n                *ngFor=\"let data of milestone.milestone_data\"\r\n                class=\"data-item\">\r\n                <strong>{{ data.name }}:</strong> {{ data.value_text }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nz-timeline-item>\r\n    </nz-timeline>\r\n  </div>\r\n\r\n  <!-- Action Buttons -->\r\n  <div class=\"action-buttons\">\r\n    <app-feedback-workflow-cell\r\n      [feedbackItem]=\"feedbackItem\"\r\n      (milestoneUpdated)=\"onMilestoneUpdated()\">\r\n    </app-feedback-workflow-cell>\r\n  </div>\r\n\r\n  <!-- Resolution Notes (if resolved/closed) -->\r\n  <div class=\"resolution-section\" *ngIf=\"feedbackItem.resolution_notes\">\r\n    <h4>Resolution Notes</h4>\r\n    <div class=\"resolution-notes\">\r\n      {{ feedbackItem.resolution_notes }}\r\n    </div>\r\n  </div>\r\n\r\n</div>","import { Component, Input, OnInit, ChangeDetectionStrategy, signal } from '@angular/core';\r\nimport { FeedbackItem, FeedbackMilestone, FeedbackMilestoneUpdateRequest } from '../../../../models/feedback.model';\r\nimport { FeedbackWorklistService } from '../../../../services/feedback-worklist.service';\r\nimport { UserPreferencesService } from '../../../../services/user-preferences.service';\r\n\r\n/**\r\n * FeedbackWorkflowCellComponent - Interactive workflow milestone management for feedback items\r\n * \r\n * This component provides quick action buttons for managing feedback resolution milestones.\r\n * It displays the current milestone status and provides action buttons for:\r\n * - Opening feedback for review\r\n * - Marking feedback as reviewed\r\n * - Completing the resolution process\r\n * \r\n * The component follows the same interaction patterns as the prior-auth workflow cells\r\n * but is specifically designed for feedback resolution workflows.\r\n * \r\n * MILESTONE WORKFLOW:\r\n * REVIEW → TRIAGED → ASSIGNED → IN_PROGRESS → RESOLVED → CLOSED\r\n * \r\n * QUICK ACTIONS:\r\n * - \"Open\": Mark as opened for review (RECEIVED → TRIAGED)\r\n * - \"Review\": Mark as reviewed and triaged (TRIAGED → ASSIGNED) \r\n * - \"Complete\": Mark as completed (IN_PROGRESS → RESOLVED)\r\n */\r\n@Component({\r\n  selector: 'app-feedback-workflow-cell',\r\n  templateUrl: './feedback-workflow-cell.component.html',\r\n  styleUrls: ['./feedback-workflow-cell.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FeedbackWorkflowCellComponent implements OnInit {\r\n\r\n  @Input() feedbackItem!: FeedbackItem;\r\n  @Input() loading = false;\r\n\r\n  /**\r\n   * Loading state for individual actions\r\n   */\r\n  private _actionLoading = signal<Set<string>>(new Set());\r\n\r\n  /**\r\n   * Available milestone actions based on current status\r\n   */\r\n  readonly availableActions = signal<string[]>([]);\r\n\r\n  constructor(\r\n    private feedbackWorklistService: FeedbackWorklistService,\r\n    private userPreferencesService: UserPreferencesService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.updateAvailableActions();\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    this.updateAvailableActions();\r\n  }\r\n\r\n  /**\r\n   * Update available actions based on current feedback status\r\n   */\r\n  private updateAvailableActions(): void {\r\n    if (!this.feedbackItem) return;\r\n\r\n    const status = this.feedbackItem.workflow_status.status;\r\n    const actions: string[] = [];\r\n\r\n    switch (status) {\r\n      case 'RECEIVED':\r\n        actions.push('open', 'assign');\r\n        break;\r\n      case 'TRIAGED':\r\n        actions.push('assign', 'review');\r\n        break;\r\n      case 'ASSIGNED':\r\n        actions.push('start', 'review');\r\n        break;\r\n      case 'IN_PROGRESS':\r\n        actions.push('complete', 'reassign');\r\n        break;\r\n      case 'RESOLVED':\r\n        actions.push('close', 'reopen');\r\n        break;\r\n      case 'CLOSED':\r\n        actions.push('reopen');\r\n        break;\r\n    }\r\n\r\n    this.availableActions.set(actions);\r\n  }\r\n\r\n  /**\r\n   * Check if an action is currently loading\r\n   */\r\n  isActionLoading(action: string): boolean {\r\n    return this._actionLoading().has(action);\r\n  }\r\n\r\n  /**\r\n   * Get the display text for an action button\r\n   */\r\n  getActionLabel(action: string): string {\r\n    switch (action) {\r\n      case 'open':\r\n        return 'Open';\r\n      case 'assign':\r\n        return 'Assign';\r\n      case 'review':\r\n        return 'Review';\r\n      case 'start':\r\n        return 'Start';\r\n      case 'complete':\r\n        return 'Complete';\r\n      case 'close':\r\n        return 'Close';\r\n      case 'reopen':\r\n        return 'Reopen';\r\n      case 'reassign':\r\n        return 'Reassign';\r\n      default:\r\n        return action;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the icon for an action button\r\n   */\r\n  getActionIcon(action: string): string {\r\n    switch (action) {\r\n      case 'open':\r\n        return 'eye';\r\n      case 'assign':\r\n        return 'user';\r\n      case 'review':\r\n        return 'audit';\r\n      case 'start':\r\n        return 'play-circle';\r\n      case 'complete':\r\n        return 'check-circle';\r\n      case 'close':\r\n        return 'close-circle';\r\n      case 'reopen':\r\n        return 'undo';\r\n      case 'reassign':\r\n        return 'swap';\r\n      default:\r\n        return 'question-circle';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the button type for an action\r\n   */\r\n  getActionType(action: string): 'primary' | 'default' | 'dashed' {\r\n    switch (action) {\r\n      case 'complete':\r\n      case 'close':\r\n        return 'primary';\r\n      case 'open':\r\n      case 'start':\r\n        return 'default';\r\n      default:\r\n        return 'dashed';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle action button click\r\n   */\r\n  onActionClick(action: string): void {\r\n    if (this.loading || this.isActionLoading(action)) return;\r\n\r\n    // Add to loading set\r\n    this._actionLoading.update(current => new Set([...current, action]));\r\n\r\n    // Determine the new status and milestone updates based on action\r\n    const updates = this.getActionUpdates(action);\r\n    \r\n    if (updates.milestoneUpdate) {\r\n      this.updateMilestone(updates.milestoneUpdate, action);\r\n    } else if (updates.statusUpdate) {\r\n      this.updateStatus(updates.statusUpdate, action);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the updates needed for a specific action\r\n   */\r\n  private getActionUpdates(action: string): { milestoneUpdate?: FeedbackMilestoneUpdateRequest, statusUpdate?: any } {\r\n    const currentUserId = this.getCurrentUserId();\r\n    \r\n    switch (action) {\r\n      case 'open':\r\n        return {\r\n          milestoneUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            milestone_id: this.getReviewMilestoneId(),\r\n            new_status: 'IN_PROGRESS',\r\n            completion_notes: 'Feedback opened for review'\r\n          }\r\n        };\r\n        \r\n      case 'assign':\r\n        return {\r\n          milestoneUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            milestone_id: this.getReviewMilestoneId(),\r\n            new_status: 'COMPLETED',\r\n            assignee_person_id: currentUserId,\r\n            completion_notes: 'Feedback triaged and assigned'\r\n          }\r\n        };\r\n        \r\n      case 'review':\r\n        return {\r\n          milestoneUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            milestone_id: this.getReviewMilestoneId(),\r\n            new_status: 'COMPLETED',\r\n            completion_notes: 'Feedback reviewed'\r\n          }\r\n        };\r\n        \r\n      case 'start':\r\n        return {\r\n          milestoneUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            milestone_id: this.getReviewMilestoneId(),\r\n            new_status: 'IN_PROGRESS',\r\n            completion_notes: 'Started working on feedback resolution'\r\n          }\r\n        };\r\n        \r\n      case 'complete':\r\n        return {\r\n          milestoneUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            milestone_id: this.getReviewMilestoneId(),\r\n            new_status: 'COMPLETED',\r\n            completion_notes: 'Feedback resolution completed'\r\n          }\r\n        };\r\n        \r\n      case 'close':\r\n        return {\r\n          statusUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            new_status: 'CLOSED',\r\n            updated_by_person_id: currentUserId,\r\n            resolution_notes: 'Feedback closed'\r\n          }\r\n        };\r\n        \r\n      case 'reopen':\r\n        return {\r\n          statusUpdate: {\r\n            compass_worklist_id: this.feedbackItem.compass_worklist_id,\r\n            new_status: 'IN_PROGRESS',\r\n            updated_by_person_id: currentUserId,\r\n            resolution_notes: 'Feedback reopened for further review'\r\n          }\r\n        };\r\n        \r\n      default:\r\n        return {};\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Update a milestone status\r\n   */\r\n  private updateMilestone(request: FeedbackMilestoneUpdateRequest, action: string): void {\r\n    this.feedbackWorklistService.updateFeedbackMilestone(request).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          // Success handled by service\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // console.error(`Failed to ${action} feedback:`, error);\r\n      },\r\n      complete: () => {\r\n        this._actionLoading.update(current => {\r\n          const newSet = new Set(current);\r\n          newSet.delete(action);\r\n          return newSet;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update workflow status\r\n   */\r\n  private updateStatus(request: any, action: string): void {\r\n    this.feedbackWorklistService.updateFeedbackStatus(request).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          // Success handled by service\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // console.error(`Failed to ${action} feedback:`, error);\r\n      },\r\n      complete: () => {\r\n        this._actionLoading.update(current => {\r\n          const newSet = new Set(current);\r\n          newSet.delete(action);\r\n          return newSet;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the review milestone ID (for feedback, there's typically one main milestone)\r\n   */\r\n  private getReviewMilestoneId(): number {\r\n    // Find the review milestone or return the first milestone\r\n    const reviewMilestone = this.feedbackItem.milestones.find(m => m.meaning === 'REVIEW');\r\n    return reviewMilestone?.milestone_id || this.feedbackItem.milestones[0]?.milestone_id || 0;\r\n  }\r\n\r\n  /**\r\n   * Get current user ID\r\n   */\r\n  private getCurrentUserId(): number {\r\n    const userData = this.userPreferencesService.getUserData();\r\n    return userData?.userId || 0;\r\n  }\r\n\r\n  /**\r\n   * Get the current milestone status for display\r\n   */\r\n  getCurrentMilestoneStatus(): string {\r\n    const reviewMilestone = this.feedbackItem.milestones.find(m => m.meaning === 'REVIEW');\r\n    return reviewMilestone?.status || 'OPEN';\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for current status\r\n   */\r\n  getStatusClass(): string {\r\n    const status = this.feedbackItem.workflow_status.status;\r\n    return `status-${status.toLowerCase().replace('_', '-')}`;\r\n  }\r\n\r\n  /**\r\n   * Check if any actions are available\r\n   */\r\n  hasAvailableActions(): boolean {\r\n    return this.availableActions().length > 0;\r\n  }\r\n\r\n  /**\r\n   * Get a summary of the current workflow state\r\n   */\r\n  getWorkflowSummary(): string {\r\n    const status = this.feedbackItem.workflow_status.status;\r\n    const assignee = this.feedbackItem.assigned_to;\r\n    \r\n    if (assignee && status === 'ASSIGNED') {\r\n      return `Assigned to ${assignee}`;\r\n    }\r\n    \r\n    switch (status) {\r\n      case 'RECEIVED':\r\n        return 'Waiting for review';\r\n      case 'TRIAGED':\r\n        return 'Triaged, needs assignment';\r\n      case 'IN_PROGRESS':\r\n        return 'In progress';\r\n      case 'RESOLVED':\r\n        return 'Resolved, ready to close';\r\n      case 'CLOSED':\r\n        return 'Completed';\r\n      default:\r\n        return status;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get milestone progress percentage\r\n   */\r\n  getMilestoneProgress(): number {\r\n    const status = this.feedbackItem.workflow_status.status;\r\n    \r\n    switch (status) {\r\n      case 'RECEIVED':\r\n        return 0;\r\n      case 'TRIAGED':\r\n        return 25;\r\n      case 'ASSIGNED':\r\n        return 50;\r\n      case 'IN_PROGRESS':\r\n        return 75;\r\n      case 'RESOLVED':\r\n        return 90;\r\n      case 'CLOSED':\r\n        return 100;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n}","<div class=\"feedback-workflow-cell\" [class]=\"getStatusClass()\">\r\n  <!-- Workflow Status Display -->\r\n  <div class=\"workflow-status\">\r\n    <div class=\"status-badge\">\r\n      <nz-tag [class]=\"getStatusClass()\">\r\n        {{ feedbackItem.workflow_status.status }}\r\n      </nz-tag>\r\n    </div>\r\n    \r\n    <div class=\"status-summary\" *ngIf=\"!loading\">\r\n      {{ getWorkflowSummary() }}\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Action Buttons -->\r\n  <div class=\"workflow-actions\" *ngIf=\"hasAvailableActions() && !loading\">\r\n    <nz-button-group nzSize=\"small\">\r\n      <button\r\n        *ngFor=\"let action of availableActions()\"\r\n        nz-button\r\n        [nzType]=\"getActionType(action)\"\r\n        nzSize=\"small\"\r\n        [nzLoading]=\"isActionLoading(action)\"\r\n        [disabled]=\"loading || isActionLoading(action)\"\r\n        (click)=\"onActionClick(action)\"\r\n        [nz-tooltip]=\"getActionLabel(action)\">\r\n        \r\n        <i \r\n          *ngIf=\"!isActionLoading(action)\"\r\n          nz-icon \r\n          [nzType]=\"getActionIcon(action)\">\r\n        </i>\r\n        \r\n        <span class=\"action-label\">{{ getActionLabel(action) }}</span>\r\n      </button>\r\n    </nz-button-group>\r\n  </div>\r\n\r\n  <!-- Loading State -->\r\n  <div class=\"workflow-loading\" *ngIf=\"loading\">\r\n    <nz-spin nzSize=\"small\">\r\n      <div class=\"loading-text\">Updating...</div>\r\n    </nz-spin>\r\n  </div>\r\n\r\n  <!-- Milestone Progress Indicator -->\r\n  <div class=\"milestone-progress\" *ngIf=\"!loading\">\r\n    <div class=\"progress-bar\">\r\n      <div \r\n        class=\"progress-fill\"\r\n        [style.width.%]=\"getMilestoneProgress()\">\r\n      </div>\r\n    </div>\r\n    <div class=\"progress-text\">\r\n      {{ getCurrentMilestoneStatus() }}\r\n    </div>\r\n  </div>\r\n</div>","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectionStrategy, signal, computed } from '@angular/core';\r\nimport { FeedbackItem, FeedbackTableColumn } from '../../../models/feedback.model';\r\nimport { FeedbackWorklistService } from '../../../services/feedback-worklist.service';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\n\r\n/**\r\n * FeedbackWorklistTableComponent - Advanced table component for displaying feedback worklist items\r\n * \r\n * This component provides a comprehensive interface for displaying and managing feedback\r\n * worklist items. It follows the same patterns as the prior-auth worklist table but is\r\n * customized for feedback data and workflows.\r\n * \r\n * FEATURES:\r\n * - Signal-based reactive rendering with OnPush change detection\r\n * - Dynamic column configuration and resizing\r\n * - Integrated workflow actions and milestone management\r\n * - Real-time loading states and error handling\r\n * - Responsive design with proper accessibility\r\n * - Detail drawer for comprehensive feedback information\r\n * \r\n * SIGNAL ARCHITECTURE:\r\n * - Manages loading states and selection\r\n * - Computed signals for template optimization\r\n * - Reactive integration with FeedbackWorklistService\r\n * \r\n * INTERACTION PATTERNS:\r\n * - Drawer integration for milestone management and detailed view\r\n * - Context menu actions for feedback operations\r\n * - Keyboard navigation and accessibility support\r\n */\r\n@Component({\r\n  selector: 'app-feedback-worklist-table',\r\n  templateUrl: './feedback-worklist-table.component.html',\r\n  styleUrls: ['./feedback-worklist-table.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FeedbackWorklistTableComponent implements OnInit {\r\n\r\n  @Input() feedbackItems: FeedbackItem[] = [];\r\n  @Input() loading = false;\r\n  \r\n  @Output() refreshRequested = new EventEmitter<void>();\r\n  @Output() itemSelected = new EventEmitter<FeedbackItem>();\r\n\r\n  // === SIGNAL-BASED STATE MANAGEMENT ===\r\n\r\n  /**\r\n   * Set of feedback item IDs currently being loaded/updated\r\n   */\r\n  private _loadingItems = signal<Set<number>>(new Set());\r\n\r\n  /**\r\n   * Currently selected feedback item for drawer display\r\n   */\r\n  private _selectedItem = signal<FeedbackItem | null>(null);\r\n\r\n  /**\r\n   * Drawer visibility state\r\n   */\r\n  private _drawerVisible = signal<boolean>(false);\r\n\r\n  /**\r\n   * Column widths for resizable columns\r\n   */\r\n  private _columnWidths = signal<Map<string, number>>(new Map());\r\n\r\n  // === COMPUTED SIGNALS FOR TEMPLATE OPTIMIZATION ===\r\n\r\n  /**\r\n   * Function to check if a feedback item is currently loading\r\n   */\r\n  readonly isItemLoading = computed(() => \r\n    (itemId: number) => this._loadingItems().has(itemId) || this.feedbackWorklistService.isItemLoadingDetails(itemId)\r\n  );\r\n\r\n  /**\r\n   * Current selected item (read-only)\r\n   */\r\n  readonly selectedItem = this._selectedItem.asReadonly();\r\n\r\n  /**\r\n   * Drawer visibility state (read-only)\r\n   */\r\n  readonly drawerVisible = this._drawerVisible.asReadonly();\r\n\r\n  /**\r\n   * Table columns configuration\r\n   */\r\n  readonly tableColumns = computed(() => \r\n    this.columnConfigService.columnsForRoute()('feedback')\r\n  );\r\n\r\n  /**\r\n   * Function to get column width\r\n   */\r\n  readonly getColumnWidth = computed(() => \r\n    (columnName: string) => this._columnWidths().get(columnName) || 150\r\n  );\r\n\r\n  constructor(\r\n    private feedbackWorklistService: FeedbackWorklistService,\r\n    private columnConfigService: ColumnConfigService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Initialize column widths from localStorage\r\n    this.loadColumnWidths();\r\n  }\r\n\r\n  // === TABLE INTERACTION METHODS ===\r\n\r\n  /**\r\n   * Select a feedback item and open the detail drawer\r\n   */\r\n  selectItem(item: FeedbackItem): void {\r\n    this._selectedItem.set(item);\r\n    this._drawerVisible.set(true);\r\n    this.itemSelected.emit(item);\r\n  }\r\n\r\n  /**\r\n   * Close the detail drawer\r\n   */\r\n  closeDrawer(): void {\r\n    this._drawerVisible.set(false);\r\n    this._selectedItem.set(null);\r\n  }\r\n\r\n  /**\r\n   * Refresh a specific feedback item\r\n   */\r\n  refreshItem(item: FeedbackItem): void {\r\n    const itemId = item.compass_worklist_id;\r\n    \r\n    this._loadingItems.update(current => new Set([...current, itemId]));\r\n    \r\n    this.feedbackWorklistService.refreshFeedbackItem(itemId);\r\n    \r\n    // Remove from loading set after a delay (will be updated by service)\r\n    setTimeout(() => {\r\n      this._loadingItems.update(current => {\r\n        const newSet = new Set(current);\r\n        newSet.delete(itemId);\r\n        return newSet;\r\n      });\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Handle refresh request from user\r\n   */\r\n  onRefreshRequested(): void {\r\n    this.refreshRequested.emit();\r\n  }\r\n\r\n  // === COLUMN MANAGEMENT ===\r\n\r\n  /**\r\n   * Handle column resize events\r\n   */\r\n  onColumnResize(event: { columnKey: string, width: number }): void {\r\n    this._columnWidths.update(current => new Map(current.set(event.columnKey, event.width)));\r\n    this.saveColumnWidths();\r\n  }\r\n\r\n  /**\r\n   * Reset all column widths to defaults\r\n   */\r\n  resetColumnWidths(): void {\r\n    this._columnWidths.set(new Map());\r\n    this.saveColumnWidths();\r\n  }\r\n\r\n  /**\r\n   * Load column widths from localStorage\r\n   */\r\n  private loadColumnWidths(): void {\r\n    const saved = localStorage.getItem('compass_feedback_column_widths');\r\n    if (saved) {\r\n      try {\r\n        const widthsObject = JSON.parse(saved);\r\n        const widthsMap = new Map(Object.entries(widthsObject).map(([key, value]) => [key, Number(value)]));\r\n        this._columnWidths.set(widthsMap);\r\n      } catch (error) {\r\n        // console.warn('Failed to load column widths:', error);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save column widths to localStorage\r\n   */\r\n  private saveColumnWidths(): void {\r\n    const widthsObject = Object.fromEntries(this._columnWidths());\r\n    localStorage.setItem('compass_feedback_column_widths', JSON.stringify(widthsObject));\r\n  }\r\n\r\n  // === UTILITY METHODS ===\r\n\r\n  /**\r\n   * Get the display value for a feedback item column\r\n   */\r\n  getColumnValue(item: FeedbackItem, columnName: string): string {\r\n    switch (columnName) {\r\n      case 'SUBMITTER':\r\n        return item.submitted_by_user || 'Unknown';\r\n      case 'SUBMISSION_DATE':\r\n        return new Date(item.submission_datetime).toLocaleDateString();\r\n      case 'FEEDBACK_TYPE':\r\n        return item.feedback_type === 'GENERAL_FEEDBACK' ? 'General' : 'Worklist Item';\r\n      case 'PRIORITY':\r\n        return item.feedback_priority || 'MEDIUM';\r\n      case 'ITEM_REFERENCE':\r\n        return item.item_reference || 'N/A';\r\n      case 'FEEDBACK_CONTENT':\r\n        return item.feedback_narrative || 'No feedback content';\r\n      case 'STATUS':\r\n        return item.workflow_status?.status || 'RECEIVED';\r\n      case 'ASSIGNED_TO':\r\n        return item.assigned_to || 'Unassigned';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for feedback priority\r\n   */\r\n  getPriorityClass(priority: string): string {\r\n    switch (priority) {\r\n      case 'CRITICAL':\r\n        return 'priority-critical';\r\n      case 'HIGH':\r\n        return 'priority-high';\r\n      case 'MEDIUM':\r\n        return 'priority-medium';\r\n      case 'LOW':\r\n        return 'priority-low';\r\n      default:\r\n        return 'priority-medium';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for feedback status\r\n   */\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'RECEIVED':\r\n        return 'status-received';\r\n      case 'TRIAGED':\r\n        return 'status-triaged';\r\n      case 'ASSIGNED':\r\n        return 'status-assigned';\r\n      case 'IN_PROGRESS':\r\n        return 'status-in-progress';\r\n      case 'RESOLVED':\r\n        return 'status-resolved';\r\n      case 'CLOSED':\r\n        return 'status-closed';\r\n      default:\r\n        return 'status-received';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get icon for feedback type\r\n   */\r\n  getFeedbackTypeIcon(type: string): string {\r\n    switch (type) {\r\n      case 'GENERAL_FEEDBACK':\r\n        return 'message';\r\n      case 'WORKLISTITEM':\r\n        return 'file-text';\r\n      default:\r\n        return 'question-circle';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format date for display\r\n   */\r\n  formatDate(date: Date | string): string {\r\n    const d = new Date(date);\r\n    return d.toLocaleDateString() + ' ' + d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n  }\r\n\r\n  /**\r\n   * Truncate text for display\r\n   */\r\n  truncateText(text: string, maxLength: number = 100): string {\r\n    if (!text) return '';\r\n    return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;\r\n  }\r\n\r\n}","<div class=\"feedback-worklist-table-container\">\r\n\r\n\r\n  <!-- Main Data Table -->\r\n  <nz-table \r\n    #feedbackTable\r\n    [nzData]=\"feedbackItems\"\r\n    [nzLoading]=\"loading\"\r\n    [nzSize]=\"'small'\"\r\n    [nzPageSize]=\"50\"\r\n    [nzShowPagination]=\"feedbackItems.length > 50\"\r\n    [nzScroll]=\"{ y: '600px' }\"\r\n>\r\n    \r\n    <thead>\r\n      <tr>\r\n        <!-- Submitter Column -->\r\n        <th \r\n          nzWidth=\"140px\"\r\n          nzSortKey=\"submitted_by_user\"\r\n          [nzSortFn]=\"true\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_SUBMITTER\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"200\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Submitter\r\n        </th>\r\n        \r\n        <!-- Submission Date Column -->\r\n        <th \r\n          nzWidth=\"120px\"\r\n          nzSortKey=\"submission_datetime\"\r\n          [nzSortFn]=\"true\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_SUBMISSION_DATE\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"150\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Submitted\r\n        </th>\r\n        \r\n        <!-- Feedback Type Column -->\r\n        <th \r\n          nzWidth=\"100px\"\r\n          nzSortKey=\"feedback_type\"\r\n          [nzSortFn]=\"true\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_TYPE\"\r\n          [minWidth]=\"80\"\r\n          [maxWidth]=\"120\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Type\r\n        </th>\r\n        \r\n        <!-- Priority Column -->\r\n        <th \r\n          nzWidth=\"80px\"\r\n          nzSortKey=\"feedback_priority\"\r\n          [nzSortFn]=\"true\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_PRIORITY\"\r\n          [minWidth]=\"60\"\r\n          [maxWidth]=\"100\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Priority\r\n        </th>\r\n        \r\n        <!-- Item Reference Column -->\r\n        <th \r\n          nzWidth=\"180px\"\r\n          appResizableColumn\r\n          columnKey=\"ITEM_REFERENCE\"\r\n          [minWidth]=\"120\"\r\n          [maxWidth]=\"250\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Item Reference\r\n        </th>\r\n        \r\n        <!-- Feedback Content Column -->\r\n        <th \r\n          nzWidth=\"250px\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_CONTENT\"\r\n          [minWidth]=\"150\"\r\n          [maxWidth]=\"400\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Feedback Content\r\n        </th>\r\n        \r\n        <!-- Status Column -->\r\n        <th \r\n          nzWidth=\"100px\"\r\n          nzSortKey=\"workflow_status.status\"\r\n          [nzSortFn]=\"true\"\r\n          appResizableColumn\r\n          columnKey=\"FEEDBACK_STATUS\"\r\n          [minWidth]=\"80\"\r\n          [maxWidth]=\"120\"\r\n          (columnResize)=\"onColumnResize($event)\">\r\n          Status\r\n        </th>\r\n        \r\n        <!-- Workflow Actions Column -->\r\n        <th \r\n          nzWidth=\"150px\"\r\n          nzAlign=\"center\">\r\n          Workflow Actions\r\n        </th>\r\n        \r\n        <!-- Actions Column -->\r\n        <th \r\n          nzWidth=\"80px\" \r\n          nzAlign=\"center\">\r\n          Actions\r\n        </th>\r\n      </tr>\r\n    </thead>\r\n    \r\n    <tbody>\r\n      <ng-container *ngFor=\"let item of feedbackItems\">\r\n        <!-- Main Row -->\r\n        <tr \r\n          [class.loading]=\"isItemLoading()(item.compass_worklist_id)\">\r\n          \r\n          <!-- Submitter -->\r\n          <td>\r\n            <div class=\"submitter-info\">\r\n              <div class=\"submitter-name\">{{ item.submitted_by_user }}</div>\r\n              <div class=\"submitter-username\">{{ item.submitted_by_username }}</div>\r\n            </div>\r\n          </td>\r\n          \r\n          <!-- Submission Date -->\r\n          <td>\r\n            <nz-tag [nzColor]=\"'blue'\">\r\n              {{ formatDate(item.submission_datetime) }}\r\n            </nz-tag>\r\n          </td>\r\n          \r\n          <!-- Feedback Type -->\r\n          <td>\r\n            <div class=\"feedback-type\">\r\n              <i \r\n                nz-icon \r\n                [nzType]=\"getFeedbackTypeIcon(item.feedback_type)\"\r\n                class=\"type-icon\">\r\n              </i>\r\n              <span>{{ getColumnValue(item, 'FEEDBACK_TYPE') }}</span>\r\n            </div>\r\n          </td>\r\n          \r\n          <!-- Priority -->\r\n          <td>\r\n            <nz-tag [class]=\"getPriorityClass(item.feedback_priority)\">\r\n              {{ item.feedback_priority }}\r\n            </nz-tag>\r\n          </td>\r\n          \r\n          <!-- Item Reference -->\r\n          <td>\r\n            <div class=\"item-reference\">\r\n              <div class=\"reference-text\" [title]=\"item.item_reference\">\r\n                {{ truncateText(item.item_reference, 30) }}\r\n              </div>\r\n              <div class=\"item-type\" *ngIf=\"item.item_type\">\r\n                {{ truncateText(item.item_type, 20) }}\r\n              </div>\r\n            </div>\r\n          </td>\r\n          \r\n          <!-- Feedback Content -->\r\n          <td>\r\n            <div class=\"feedback-content\" [title]=\"item.feedback_narrative\">\r\n              <div class=\"feedback-text\">\r\n                {{ item.feedback_narrative }}\r\n              </div>\r\n              <div class=\"feedback-preview\" *ngIf=\"item.feedback_narrative && item.feedback_narrative.length > 1000\">\r\n                <nz-tag nzSize=\"small\" nzColor=\"blue\">More</nz-tag>\r\n              </div>\r\n            </div>\r\n          </td>\r\n          \r\n          <!-- Status -->\r\n          <td>\r\n            <nz-tag [class]=\"getStatusClass(item.workflow_status.status)\">\r\n              {{ item.workflow_status.status }}\r\n            </nz-tag>\r\n          </td>\r\n          \r\n          <!-- Workflow Actions -->\r\n          <td nzAlign=\"center\">\r\n            <app-feedback-workflow-cell\r\n              [feedbackItem]=\"item\"\r\n              [loading]=\"isItemLoading()(item.compass_worklist_id)\">\r\n            </app-feedback-workflow-cell>\r\n          </td>\r\n          \r\n          <!-- Actions -->\r\n          <td nzAlign=\"center\">\r\n            <nz-button-group nzSize=\"small\">\r\n              <button \r\n                nz-button \r\n                nzType=\"default\"\r\n                nzSize=\"small\"\r\n                (click)=\"selectItem(item)\"\r\n                nz-tooltip=\"View Details\">\r\n                <i nz-icon nzType=\"eye\"></i>\r\n              </button>\r\n              \r\n              <button \r\n                nz-button \r\n                nzType=\"default\"\r\n                nzSize=\"small\"\r\n                (click)=\"refreshItem(item)\"\r\n                [nzLoading]=\"isItemLoading()(item.compass_worklist_id)\"\r\n                nz-tooltip=\"Refresh Item\">\r\n                <i nz-icon nzType=\"reload\"></i>\r\n              </button>\r\n            </nz-button-group>\r\n          </td>\r\n        </tr>\r\n        \r\n\r\n      </ng-container>\r\n    </tbody>\r\n  </nz-table>\r\n\r\n  <!-- Empty State -->\r\n  <nz-empty \r\n    *ngIf=\"!loading && feedbackItems.length === 0\"\r\n    nzNotFoundImage=\"simple\"\r\n    nzNotFoundContent=\"No feedback items found\">\r\n  </nz-empty>\r\n</div>\r\n\r\n<!-- Detail Drawer -->\r\n<nz-drawer\r\n  [nzClosable]=\"true\"\r\n  [nzVisible]=\"drawerVisible()\"\r\n  nzPlacement=\"right\"\r\n  nzTitle=\"Feedback Details\"\r\n  [nzWidth]=\"600\"\r\n  (nzOnClose)=\"closeDrawer()\">\r\n  \r\n  <ng-container *nzDrawerContent>\r\n    <app-feedback-milestone-details\r\n      *ngIf=\"selectedItem()\"\r\n      [feedbackItem]=\"selectedItem()!\"\r\n      (milestoneUpdated)=\"refreshItem(selectedItem()!)\">\r\n    </app-feedback-milestone-details>\r\n  </ng-container>\r\n</nz-drawer>","import { Component, OnInit, ChangeDetectionStrategy, signal, effect, ViewChild } from '@angular/core';\nimport { FeedbackItem, FeedbackFilterOptions } from '../../models/feedback.model';\nimport { FeedbackWorklistService } from '../../services/feedback-worklist.service';\nimport { UserPreferencesService } from '../../services/user-preferences.service';\nimport { FeedbackWorklistTableComponent } from './feedback-worklist-table/feedback-worklist-table.component';\n\n/**\n * FeedbackComponent - Main container component for the feedback worklist management\n * \n * This component serves as the main orchestrator for the feedback worklist functionality.\n * It manages the overall layout, integrates the filter bar and worklist table components,\n * and coordinates data flow between child components.\n * \n * FEATURES:\n * - Signal-based reactive data management\n * - Integration with FeedbackWorklistService for data operations\n * - Filter management and coordination\n * - Loading state management\n * - Error handling and user messaging\n * \n * ARCHITECTURE:\n * - Container component pattern\n * - OnPush change detection for optimal performance\n * - Signal integration for reactive updates\n * - Child component communication via events and inputs\n */\n@Component({\n  selector: 'app-feedback',\n  templateUrl: './feedback.component.html',\n  styleUrls: ['./feedback.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FeedbackComponent implements OnInit {\n\n  /**\n   * Reference to the feedback worklist table component\n   */\n  @ViewChild('feedbackTable') feedbackTable!: FeedbackWorklistTableComponent;\n\n  /**\n   * Loading state for initial data load\n   */\n  private _initialLoading = signal<boolean>(true);\n\n  /**\n   * Current filter options\n   */\n  private _filterOptions = signal<FeedbackFilterOptions>({\n    status_filter: 'all',\n    priority_filter: 'all',\n    type_filter: 'all',\n    days_filter: 30,\n    assigned_to_me: false\n  });\n\n  /**\n   * Error state for the component\n   */\n  private _componentError = signal<string | null>(null);\n\n  /**\n   * Read-only access to loading state\n   */\n  readonly initialLoading = this._initialLoading.asReadonly();\n\n  /**\n   * Read-only access to filter options\n   */\n  readonly filterOptions = this._filterOptions.asReadonly();\n\n  /**\n   * Read-only access to component error\n   */\n  readonly componentError = this._componentError.asReadonly();\n\n  /**\n   * Controls visibility of the summary cards section\n   */\n  showSummaryCards = signal(false);\n\n  /**\n   * Toggle the summary cards section\n   */\n  toggleSummaryCards(): void {\n    this.showSummaryCards.update(v => !v);\n  }\n\n  /**\n   * Auto-update effect to sync with service filter changes\n   */\n  private filterSyncEffect = effect(() => {\n    const serviceFilters = this.feedbackWorklistService.filterOptions();\n    this._filterOptions.set(serviceFilters);\n  }, { allowSignalWrites: true });\n\n  constructor(\n    public feedbackWorklistService: FeedbackWorklistService,\n    private userPreferencesService: UserPreferencesService\n  ) {}\n\n  ngOnInit(): void {\n    // Set the current route for column configuration\n    this.userPreferencesService.setCurrentRoute('feedback');\n    \n    // Load initial feedback worklist data\n    this.loadFeedbackWorklist();\n  }\n\n  /**\n   * Load feedback worklist data\n   */\n  loadFeedbackWorklist(): void {\n    this._initialLoading.set(true);\n    this._componentError.set(null);\n\n    this.feedbackWorklistService.loadFeedbackWorklist().subscribe({\n      next: (feedbackItems: FeedbackItem[]) => {\n        // Success - data is managed by the service\n        this._initialLoading.set(false);\n      },\n      error: (error) => {\n        // console.error('Failed to load feedback worklist:', error);\n        this._componentError.set('Failed to load feedback worklist. Please try refreshing the page.');\n        this._initialLoading.set(false);\n      }\n    });\n  }\n\n  /**\n   * Handle refresh request from child components\n   */\n  onRefreshRequested(): void {\n    this.feedbackWorklistService.refreshWorklist();\n  }\n\n  /**\n   * Handle filter changes from filter bar\n   */\n  onFilterChanged(filters: Partial<FeedbackFilterOptions>): void {\n    this._filterOptions.update(current => ({ ...current, ...filters }));\n    this.feedbackWorklistService.updateFilterOptions(filters);\n  }\n\n  /**\n   * Handle filter reset\n   */\n  onFiltersReset(): void {\n    this._filterOptions.set({\n      status_filter: 'all',\n      priority_filter: 'all',\n      type_filter: 'all',\n      days_filter: 'all',\n      assigned_to_me: false\n    });\n    this.feedbackWorklistService.clearFilters();\n  }\n\n  /**\n   * Handle feedback item selection\n   */\n  onFeedbackItemSelected(item: FeedbackItem): void {\n    // Could be used for additional actions when an item is selected\n    // console.log('Feedback item selected:', item.compass_worklist_id);\n  }\n\n  /**\n   * Retry loading data after an error\n   */\n  retryLoad(): void {\n    this.loadFeedbackWorklist();\n  }\n\n  /**\n   * Reset column widths in the feedback table\n   */\n  onResetColumns(): void {\n    if (this.feedbackTable) {\n      this.feedbackTable.resetColumnWidths();\n    }\n  }\n\n  /**\n   * Get current user data for context\n   */\n  getCurrentUser(): any {\n    return this.userPreferencesService.getUserData();\n  }\n}","<div class=\"feedback-worklist-container\">\r\n  <!-- Page Header -->\r\n  <div class=\"page-header\">\r\n    <div class=\"header-content\">\r\n      <h2>Feedback Management</h2>\r\n      <p>Review and manage user feedback submitted through the COMPASS system</p>\r\n    </div>\r\n    \r\n    <!-- Summary Cards -->\r\n    <div class=\"summary-cards\" *ngIf=\"showSummaryCards() && !initialLoading()\">\r\n      <nz-card nzSize=\"small\" class=\"summary-card\">\r\n        <nz-statistic \r\n          nzTitle=\"Total Feedback\" \r\n          [nzValue]=\"feedbackWorklistService.itemCounts().total\"\r\n          [nzValueStyle]=\"{ color: '#1890ff' }\">\r\n        </nz-statistic>\r\n      </nz-card>\r\n      \r\n      <nz-card nzSize=\"small\" class=\"summary-card\">\r\n        <nz-statistic \r\n          nzTitle=\"Pending Review\" \r\n          [nzValue]=\"feedbackWorklistService.itemCounts().received + feedbackWorklistService.itemCounts().triaged\"\r\n          [nzValueStyle]=\"{ color: '#fa8c16' }\">\r\n        </nz-statistic>\r\n      </nz-card>\r\n      \r\n      <nz-card nzSize=\"small\" class=\"summary-card\">\r\n        <nz-statistic \r\n          nzTitle=\"In Progress\" \r\n          [nzValue]=\"feedbackWorklistService.itemCounts().in_progress + feedbackWorklistService.itemCounts().assigned\"\r\n          [nzValueStyle]=\"{ color: '#52c41a' }\">\r\n        </nz-statistic>\r\n      </nz-card>\r\n      \r\n      <nz-card nzSize=\"small\" class=\"summary-card\">\r\n        <nz-statistic \r\n          nzTitle=\"Resolved\" \r\n          [nzValue]=\"feedbackWorklistService.itemCounts().resolved + feedbackWorklistService.itemCounts().closed\"\r\n          [nzValueStyle]=\"{ color: '#722ed1' }\">\r\n        </nz-statistic>\r\n      </nz-card>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Filter Bar -->\r\n  <div class=\"filter-section\">\r\n    <nz-card nzSize=\"small\" [nzBordered]=\"false\">\r\n      <div class=\"filter-controls\">\r\n        \r\n        <!-- Status Filter -->\r\n        <div class=\"filter-group\">\r\n          <label>Status:</label>\r\n          <nz-select \r\n            [(ngModel)]=\"filterOptions().status_filter\"\r\n            (ngModelChange)=\"onFilterChanged({ status_filter: $event })\"\r\n            nzSize=\"small\"\r\n            style=\"width: 140px\">\r\n            <nz-option nzValue=\"all\" nzLabel=\"All Statuses\"></nz-option>\r\n            <nz-option nzValue=\"RECEIVED\" nzLabel=\"Received\"></nz-option>\r\n            <nz-option nzValue=\"TRIAGED\" nzLabel=\"Triaged\"></nz-option>\r\n            <nz-option nzValue=\"ASSIGNED\" nzLabel=\"Assigned\"></nz-option>\r\n            <nz-option nzValue=\"IN_PROGRESS\" nzLabel=\"In Progress\"></nz-option>\r\n            <nz-option nzValue=\"RESOLVED\" nzLabel=\"Resolved\"></nz-option>\r\n            <nz-option nzValue=\"CLOSED\" nzLabel=\"Closed\"></nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <!-- Priority Filter -->\r\n        <div class=\"filter-group\">\r\n          <label>Priority:</label>\r\n          <nz-select \r\n            [(ngModel)]=\"filterOptions().priority_filter\"\r\n            (ngModelChange)=\"onFilterChanged({ priority_filter: $event })\"\r\n            nzSize=\"small\"\r\n            style=\"width: 120px\">\r\n            <nz-option nzValue=\"all\" nzLabel=\"All Priorities\"></nz-option>\r\n            <nz-option nzValue=\"CRITICAL\" nzLabel=\"Critical\"></nz-option>\r\n            <nz-option nzValue=\"HIGH\" nzLabel=\"High\"></nz-option>\r\n            <nz-option nzValue=\"MEDIUM\" nzLabel=\"Medium\"></nz-option>\r\n            <nz-option nzValue=\"LOW\" nzLabel=\"Low\"></nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <!-- Type Filter -->\r\n        <div class=\"filter-group\">\r\n          <label>Type:</label>\r\n          <nz-select \r\n            [(ngModel)]=\"filterOptions().type_filter\"\r\n            (ngModelChange)=\"onFilterChanged({ type_filter: $event })\"\r\n            nzSize=\"small\"\r\n            style=\"width: 140px\">\r\n            <nz-option nzValue=\"all\" nzLabel=\"All Types\"></nz-option>\r\n            <nz-option nzValue=\"GENERAL_FEEDBACK\" nzLabel=\"General\"></nz-option>\r\n            <nz-option nzValue=\"WORKLISTITEM\" nzLabel=\"Worklist Item\"></nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <!-- Days Filter -->\r\n        <div class=\"filter-group\">\r\n          <label>Days:</label>\r\n          <nz-select \r\n            [(ngModel)]=\"filterOptions().days_filter\"\r\n            (ngModelChange)=\"onFilterChanged({ days_filter: $event })\"\r\n            nzSize=\"small\"\r\n            style=\"width: 100px\">\r\n            <nz-option nzValue=\"all\" nzLabel=\"All\"></nz-option>\r\n            <nz-option [nzValue]=\"7\" nzLabel=\"7 days\"></nz-option>\r\n            <nz-option [nzValue]=\"30\" nzLabel=\"30 days\"></nz-option>\r\n            <nz-option [nzValue]=\"90\" nzLabel=\"90 days\"></nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <!-- Action Buttons -->\r\n        <div class=\"filter-actions\">\r\n          <button \r\n            nz-button \r\n            nzType=\"default\" \r\n            nzSize=\"small\"\r\n            (click)=\"onRefreshRequested()\"\r\n            [nzLoading]=\"feedbackWorklistService.loading()\">\r\n            <i nz-icon nzType=\"reload\"></i>\r\n            Refresh\r\n          </button>\r\n          \r\n          <button \r\n            nz-button \r\n            nzType=\"default\" \r\n            nzSize=\"small\"\r\n            (click)=\"onFiltersReset()\">\r\n            <i nz-icon nzType=\"clear\"></i>\r\n            Reset\r\n          </button>\r\n          \r\n          <button \r\n            nz-button \r\n            nzType=\"default\" \r\n            nzSize=\"small\"\r\n            (click)=\"onResetColumns()\">\r\n            <i nz-icon nzType=\"column-width\"></i>\r\n            Reset Columns\r\n          </button>\r\n          \r\n          <button\r\n            nz-button\r\n            nzType=\"default\"\r\n            nzSize=\"small\"\r\n            (click)=\"toggleSummaryCards()\"\r\n            class=\"toggle-summary-btn\"\r\n            [attr.aria-expanded]=\"showSummaryCards()\"\r\n            style=\"margin-left: 16px;\"\r\n          >\r\n            <i nz-icon [nzType]=\"showSummaryCards() ? 'eye-invisible' : 'eye'\"></i>\r\n            {{ showSummaryCards() ? 'Hide Summary' : 'Show Summary' }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </nz-card>\r\n  </div>\r\n\r\n  <!-- Error State -->\r\n  <nz-alert \r\n    *ngIf=\"componentError()\"\r\n    nzType=\"error\"\r\n    [nzMessage]=\"componentError()\"\r\n    nzShowIcon\r\n    nzClosable\r\n    (nzOnClose)=\"retryLoad()\"\r\n    class=\"error-alert\">\r\n  </nz-alert>\r\n\r\n  <!-- Loading State -->\r\n  <div class=\"loading-container\" *ngIf=\"initialLoading()\">\r\n    <nz-spin nzSize=\"large\">\r\n      <div class=\"loading-content\">\r\n        <h3>Loading Feedback Worklist</h3>\r\n        <p>Please wait while we load the feedback data...</p>\r\n      </div>\r\n    </nz-spin>\r\n  </div>\r\n\r\n  <!-- Feedback Worklist Table -->\r\n  <div class=\"worklist-content\" *ngIf=\"!initialLoading() && !componentError()\">\r\n    <app-feedback-worklist-table\r\n      #feedbackTable\r\n      [feedbackItems]=\"feedbackWorklistService.filteredItems()\"\r\n      [loading]=\"feedbackWorklistService.loading()\"\r\n      (refreshRequested)=\"onRefreshRequested()\"\r\n      (itemSelected)=\"onFeedbackItemSelected($event)\">\r\n    </app-feedback-worklist-table>\r\n  </div>\r\n\r\n  <!-- Empty State -->\r\n  <div class=\"empty-state\" *ngIf=\"!initialLoading() && !componentError() && feedbackWorklistService.filteredItems().length === 0\">\r\n    <nz-empty \r\n      nzNotFoundImage=\"simple\"\r\n      nzNotFoundContent=\"No feedback items found matching your filters\">\r\n      <span nz-empty-footer>\r\n        <button nz-button nzType=\"primary\" (click)=\"onFiltersReset()\">\r\n          Reset Filters\r\n        </button>\r\n      </span>\r\n    </nz-empty>\r\n  </div>\r\n\r\n</div>","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-future-item',\r\n  templateUrl: './future-item.component.html',\r\n  styleUrls: ['./future-item.component.scss']\r\n})\r\nexport class FutureItemComponent {\r\n\r\n}\r\n","<div nz-row>\r\n    <div nz-col nzFlex=\"70%\">\r\n        <nz-skeleton\r\n            [nzAvatar]=\"true\" \r\n            [nzActive]=\"false\" \r\n            [nzParagraph]=\"{ rows: 4 }\">\r\n        </nz-skeleton>\r\n    </div>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem, OralChemoItemCodes } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying codes in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-codes',\r\n  templateUrl: './codes.component.html',\r\n  styleUrls: ['./codes.component.scss']\r\n})\r\nexport class OralChemoCodesComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n\r\n  /**\r\n   * Group codes by type for better organization\r\n   */\r\n  getCodeGroups(): { type: string; codes: OralChemoItemCodes[] }[] {\r\n    if (!this.worklistItem?.codeList) return [];\r\n    \r\n    const groups: { [key: string]: OralChemoItemCodes[] } = {};\r\n    \r\n    this.worklistItem.codeList.forEach(code => {\r\n      if (!groups[code.type]) {\r\n        groups[code.type] = [];\r\n      }\r\n      groups[code.type].push(code);\r\n    });\r\n    \r\n    return Object.keys(groups).map(type => ({\r\n      type,\r\n      codes: groups[type]\r\n    }));\r\n  }\r\n}\r\n","<div *ngIf=\"worklistItem && worklistItem.codeList && worklistItem.codeList.length > 0; else noCodes\" class=\"codes-container\">\r\n  <div *ngFor=\"let group of getCodeGroups()\" class=\"code-group\">\r\n    <h4 class=\"code-group-title\">{{ group.type }}</h4>\r\n    <nz-table [nzData]=\"group.codes\" [nzShowPagination]=\"false\" [nzSize]=\"'small'\">\r\n      <thead>\r\n        <tr>\r\n          <th>Vocabulary</th>\r\n          <th>Identifier</th>\r\n          <th>Display</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let code of group.codes\">\r\n          <td>{{ code.vocabulary }}</td>\r\n          <td>{{ code.identifier }}</td>\r\n          <td>{{ code.display }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #noCodes>\r\n  <div class=\"no-codes\">\r\n    <nz-empty nzNotFoundContent=\"No codes available\"></nz-empty>\r\n  </div>\r\n</ng-template>\r\n","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { OralChemoItem, OralChemoComment } from '../../../../models/oral-chemotherapy.model';\r\nimport { OralChemotherapyService } from '../../../../services/oral-chemotherapy.service';\r\nimport { UserPreferencesService } from '../../../../services/user-preferences.service';\r\n\r\n/**\r\n * Component for displaying and managing comments in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-comments',\r\n  templateUrl: './comments.component.html',\r\n  styleUrls: ['./comments.component.scss']\r\n})\r\nexport class OralChemoCommentsComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n  @Input() visible = false;\r\n  @Output() commentsCountChanged = new EventEmitter<number>();\r\n\r\n  private destroy$ = new Subject<void>();\r\n  private commentsSubscription: Subscription | null = null;\r\n\r\n  /**\r\n   * List of comments for the current worklist item\r\n   */\r\n  comments: OralChemoComment[] = [];\r\n  /**\r\n   * Loading state for comments\r\n   */\r\n  isCommentsLoading = false;\r\n  /**\r\n   * New comment text for the add comment form\r\n   */\r\n  newCommentText = '';\r\n  /**\r\n   * Comment currently being edited (null if none)\r\n   */\r\n  editingComment: OralChemoComment | null = null;\r\n  /**\r\n   * Text for the comment being edited\r\n   */\r\n  editingCommentText = '';\r\n  /**\r\n   * Loading state for comment update\r\n   */\r\n  isUpdatingComment = false;\r\n  /**\r\n   * Track the last loaded worklist item ID to prevent duplicate loads\r\n   */\r\n  private lastLoadedWorklistId: number | null = null;\r\n\r\n  constructor(\r\n    private worklistService: OralChemotherapyService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    if (this.worklistItem && this.visible) {\r\n      this.loadComments();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const worklistItemChanged = changes['worklistItem'] && !changes['worklistItem'].firstChange;\r\n    const visibleChanged = changes['visible'] && !changes['visible'].firstChange;\r\n    \r\n    // Reset lastLoadedWorklistId if worklist item changed to a different one\r\n    if (worklistItemChanged && this.worklistItem && \r\n        changes['worklistItem'].previousValue?.compass_worklist_id !== this.worklistItem.compass_worklist_id) {\r\n      this.lastLoadedWorklistId = null;\r\n    }\r\n    \r\n    if (this.worklistItem && this.visible) {\r\n      if (worklistItemChanged || visibleChanged) {\r\n        this.loadComments();\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    if (this.commentsSubscription) {\r\n      this.commentsSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  loadComments(): void {\r\n    if (!this.worklistItem) return;\r\n\r\n    this.isCommentsLoading = true;\r\n    // TODO: Implement getWorklistComments in OralChemotherapyService\r\n    // For now, simulate loading\r\n    setTimeout(() => {\r\n      this.comments = this.worklistItem?.comments || [];\r\n      this.isCommentsLoading = false;\r\n      this.commentsCountChanged.emit(this.comments.length);\r\n      this.cdr.detectChanges();\r\n    }, 500);\r\n  }\r\n\r\n  addComment(): void {\r\n    if (!this.worklistItem || !this.newCommentText.trim()) return;\r\n    this.isCommentsLoading = true;\r\n    // TODO: Implement addWorklistComment in OralChemotherapyService\r\n    // For now, simulate adding comment\r\n    setTimeout(() => {\r\n      const newComment: OralChemoComment = {\r\n        commentId: Date.now(),\r\n        author: 'Current User',\r\n        authorId: 1,\r\n        commentText: this.newCommentText.trim(),\r\n        createdDateTime: new Date()\r\n      };\r\n      this.comments.push(newComment);\r\n      this.newCommentText = '';\r\n      this.isCommentsLoading = false;\r\n      this.commentsCountChanged.emit(this.comments.length);\r\n      this.cdr.detectChanges();\r\n    }, 500);\r\n  }\r\n\r\n  /**\r\n   * Check if the current user can edit a comment (based on authorId matching current userId)\r\n   */\r\n  canEditComment(comment: OralChemoComment): boolean {\r\n    const currentUser = this.userPreferencesService.getUserData();\r\n    return currentUser?.userId === comment.authorId;\r\n  }\r\n\r\n  /**\r\n   * Start editing a comment\r\n   */\r\n  startEditingComment(comment: OralChemoComment): void {\r\n    this.editingComment = comment;\r\n    this.editingCommentText = comment.commentText;\r\n  }\r\n\r\n  /**\r\n   * Cancel editing a comment\r\n   */\r\n  cancelEditingComment(): void {\r\n    this.editingComment = null;\r\n    this.editingCommentText = '';\r\n  }\r\n\r\n  /**\r\n   * Update an existing comment\r\n   */\r\n  updateComment(): void {\r\n    if (!this.worklistItem || !this.editingComment || !this.editingCommentText.trim()) return;\r\n    \r\n    this.isUpdatingComment = true;\r\n    // TODO: Implement updateWorklistComment in OralChemotherapyService\r\n    // For now, simulate updating comment\r\n    setTimeout(() => {\r\n      const commentIndex = this.comments.findIndex(c => c.commentId === this.editingComment?.commentId);\r\n      if (commentIndex !== -1) {\r\n        this.comments[commentIndex].commentText = this.editingCommentText.trim();\r\n      }\r\n      this.editingComment = null;\r\n      this.editingCommentText = '';\r\n      this.isUpdatingComment = false;\r\n      this.cdr.detectChanges();\r\n    }, 500);\r\n  }\r\n\r\n  /**\r\n   * Check if a comment is currently being edited\r\n   */\r\n  isCommentBeingEdited(comment: OralChemoComment): boolean {\r\n    return this.editingComment?.commentId === comment.commentId;\r\n  }\r\n}\r\n","<div class=\"comments-container\">\r\n  <!-- Add Comment Form -->\r\n  <div class=\"add-comment-section\">\r\n    <nz-input-group [nzSuffix]=\"addButton\">\r\n      <textarea\r\n        nz-input\r\n        [(ngModel)]=\"newCommentText\"\r\n        placeholder=\"Add a comment...\"\r\n        [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"\r\n        (keydown.enter)=\"addComment()\"\r\n        [disabled]=\"isCommentsLoading\"\r\n      ></textarea>\r\n    </nz-input-group>\r\n    <ng-template #addButton>\r\n      <button\r\n        nz-button\r\n        nzType=\"primary\"\r\n        nzSize=\"small\"\r\n        (click)=\"addComment()\"\r\n        [disabled]=\"!newCommentText.trim() || isCommentsLoading\"\r\n        [nzLoading]=\"isCommentsLoading\"\r\n      >\r\n        Add\r\n      </button>\r\n    </ng-template>\r\n  </div>\r\n\r\n  <!-- Comments List -->\r\n  <div class=\"comments-list\" *ngIf=\"comments.length > 0; else noComments\">\r\n    <div *ngFor=\"let comment of comments\" class=\"comment-item\">\r\n      <div class=\"comment-header\">\r\n        <span class=\"comment-author\">{{ comment.author }}</span>\r\n        <span class=\"comment-date\">{{ comment.createdDateTime | date:'M/d/yy, h:mm a' }}</span>\r\n        <button\r\n          *ngIf=\"canEditComment(comment)\"\r\n          nz-button\r\n          nzType=\"text\"\r\n          nzSize=\"small\"\r\n          (click)=\"startEditingComment(comment)\"\r\n          [disabled]=\"editingComment !== null\"\r\n        >\r\n          <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"comment-content\">\r\n        <div *ngIf=\"!isCommentBeingEdited(comment); else editCommentTemplate\">\r\n          {{ comment.commentText }}\r\n        </div>\r\n        \r\n        <ng-template #editCommentTemplate>\r\n          <div class=\"edit-comment-form\">\r\n            <nz-input-group [nzSuffix]=\"editButtons\">\r\n              <textarea\r\n                nz-input\r\n                [(ngModel)]=\"editingCommentText\"\r\n                [nzAutosize]=\"{ minRows: 2, maxRows: 4 }\"\r\n                [disabled]=\"isUpdatingComment\"\r\n              ></textarea>\r\n            </nz-input-group>\r\n            <ng-template #editButtons>\r\n              <button\r\n                nz-button\r\n                nzType=\"primary\"\r\n                nzSize=\"small\"\r\n                (click)=\"updateComment()\"\r\n                [disabled]=\"!editingCommentText.trim() || isUpdatingComment\"\r\n                [nzLoading]=\"isUpdatingComment\"\r\n              >\r\n                Save\r\n              </button>\r\n              <button\r\n                nz-button\r\n                nzType=\"default\"\r\n                nzSize=\"small\"\r\n                (click)=\"cancelEditingComment()\"\r\n                [disabled]=\"isUpdatingComment\"\r\n              >\r\n                Cancel\r\n              </button>\r\n            </ng-template>\r\n          </div>\r\n        </ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ng-template #noComments>\r\n    <div class=\"no-comments\">\r\n      <nz-empty nzNotFoundContent=\"No comments yet\"></nz-empty>\r\n    </div>\r\n  </ng-template>\r\n\r\n  <!-- Loading State -->\r\n  <div *ngIf=\"isCommentsLoading && comments.length === 0\" class=\"loading-comments\">\r\n    <nz-spin nzSimple></nz-spin>\r\n  </div>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { OralChemoItem } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying item details in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-item-details',\r\n  templateUrl: './item-details.component.html',\r\n  styleUrls: ['./item-details.component.scss']\r\n})\r\nexport class OralChemoItemDetailsComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n  @Output() itemRefreshed = new EventEmitter<OralChemoItem>();\r\n\r\n  /**\r\n   * Get the color for the priority tag\r\n   */\r\n  getPriorityColor(priority: string): string {\r\n    switch (priority?.toLowerCase()) {\r\n      case 'high':\r\n      case 'urgent':\r\n        return 'red';\r\n      case 'medium':\r\n      case 'normal':\r\n        return 'blue';\r\n      case 'low':\r\n        return 'green';\r\n      default:\r\n        return 'default';\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"worklistItem\" class=\"item-details\">\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered>\r\n    <nz-descriptions-item nzTitle=\"Item Description\">\r\n      {{ worklistItem.itemDescription }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Workflow Type\">\r\n      {{ worklistItem.workflowType }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Priority\">\r\n      <nz-tag [nzColor]=\"getPriorityColor(worklistItem.priority)\">\r\n        {{ worklistItem.priority }}\r\n      </nz-tag>\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Ordering Location\">\r\n      {{ worklistItem.orderingLocation }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Ordering Provider\">\r\n      {{ worklistItem.orderingProvider }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Scheduling Location\">\r\n      {{ worklistItem.schedulingLocation }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Order Date\">\r\n      {{ worklistItem.origOrderDtTm | date:'M/d/yyyy, h:mm a' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"EDOS Date\">\r\n      {{ worklistItem.edosDate | date:'M/d/yyyy' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Last Updated\">\r\n      {{ worklistItem.workflowUpdateDateTime | date:'M/d/yyyy, h:mm a' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Update Count\">\r\n      {{ worklistItem.workflowUpdateCount }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n\r\n<div *ngIf=\"!worklistItem\" class=\"no-item-data\">\r\n  <nz-empty nzNotFoundContent=\"No item details available\"></nz-empty>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { OralChemoItem, OralChemoMilestone, OralChemoItemCodes, OralChemoAction, OralChemoComment } from '../../../models/oral-chemotherapy.model';\r\nimport { OralChemotherapyService } from '../../../services/oral-chemotherapy.service';\r\nimport { MessagingService } from '../../../services/messaging.service';\r\nimport { CernerActionService } from '../../../services/cerner-action.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { FeedbackFormComponent, FeedbackData } from '../../feedback-form/feedback-form.component';\r\n\r\ninterface CodeGroup {\r\n  type: string;\r\n  codes: OralChemoItemCodes[];\r\n}\r\n\r\n/**\r\n * Interface for timeline items that can be either milestones or actions\r\n */\r\ninterface TimelineItem {\r\n  id: number;\r\n  type: 'milestone' | 'action';\r\n  name: string;\r\n  description?: string;\r\n  status: string;\r\n  dateTime: Date;\r\n  milestoneId?: number; // For actions that belong to a milestone\r\n  meaning?: string;\r\n  milestoneData?: any[];\r\n  required?: boolean; // Added for milestones\r\n  actionBy?: string; // The user who performed the action (for actions only)\r\n}\r\n\r\n/**\r\n * MilestoneDetailsComponent - Oral Chemotherapy Milestone Details Drawer\r\n * \r\n * This component provides a comprehensive view of oral chemotherapy worklist items\r\n * in a side drawer format, displaying detailed information about milestones, actions,\r\n * patient data, and workflow status. It follows the same pattern as the prior-auth\r\n * milestone details but is adapted for oral chemotherapy workflows.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Displays detailed oral chemotherapy item information in a collapsible drawer\r\n * - Manages milestone and action timeline visualization\r\n * - Provides patient information, codes, payors, and workflow status\r\n * - Handles user comments and feedback collection\r\n * - Supports item refresh and data export functionality\r\n * - Manages panel expansion states for optimal user experience\r\n * \r\n * ARCHITECTURE INTEGRATION:\r\n * - Uses OralChemotherapyService for data operations\r\n * - Integrates with MessagingService for user notifications\r\n * - Leverages CernerActionService for PowerChart integration\r\n * - Coordinates with UserPreferencesService for user data\r\n * - Uses FeedbackFormComponent for user feedback collection\r\n * \r\n * DATA FLOW:\r\n * 1. Receives worklist item from parent component\r\n * 2. Displays item details in organized collapsible panels\r\n * 3. Handles user interactions (refresh, feedback, comments)\r\n * 4. Emits events for parent component coordination\r\n * 5. Manages loading states and error conditions\r\n * \r\n * USER WORKFLOW:\r\n * - Users click on oral chemotherapy items to view detailed information\r\n * - Drawer opens with organized panels for different data types\r\n * - Users can expand/collapse panels based on their needs\r\n * - Timeline shows milestone and action progression\r\n * - Feedback system captures user input for improvements\r\n * \r\n * PERFORMANCE OPTIMIZATIONS:\r\n * - OnPush change detection strategy for efficient rendering\r\n * - Panel state management to control visibility\r\n * - Lazy loading of comments and detailed data\r\n * - Optimized drawer width management\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-milestone-details',\r\n  templateUrl: './milestone-details.component.html',\r\n  styleUrls: ['./milestone-details.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class OralChemoMilestoneDetailsComponent implements OnInit, OnChanges {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n  @Input() visible = false;\r\n  @Output() visibleChange = new EventEmitter<boolean>();\r\n  /**\r\n   * Emits when the worklist item is refreshed so the parent can update the table row.\r\n   */\r\n  @Output() itemRefreshed = new EventEmitter<OralChemoItem>();\r\n  \r\n  isLoading = false;\r\n  drawerWidth = 1000;\r\n  isRefreshing = false;\r\n  \r\n  // Track copying state\r\n  isCopying = false;\r\n  \r\n  // Track comments count for badge display\r\n  commentsCount = 0;\r\n  \r\n  // Track if comments panel should be expanded\r\n  commentsPanelExpanded = false;\r\n\r\n  // New properties to manage panel states\r\n  panelStates = {\r\n    patientInfo: true,\r\n    comments: false,\r\n    itemDetails: true,\r\n    codes: true,\r\n    workflowStatus: true,\r\n    payors: true,\r\n    userAssignment: false,\r\n    supportInfo: false\r\n  };\r\n  \r\n  constructor(\r\n    private worklistService: OralChemotherapyService,\r\n    private modalService: NzModalService,\r\n    private messagingService: MessagingService,\r\n    private cernerActionService: CernerActionService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef // Inject ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Component initialization\r\n  }\r\n\r\n  // New methods to expand/collapse all\r\n  expandAll(): void {\r\n    this.setAllPanelStates(true);\r\n  }\r\n\r\n  collapseAll(): void {\r\n    this.setAllPanelStates(false);\r\n  }\r\n\r\n  private setAllPanelStates(state: boolean): void {\r\n    this.panelStates = {\r\n      patientInfo: state,\r\n      comments: state,\r\n      itemDetails: state,\r\n      codes: state,\r\n      workflowStatus: state,\r\n      payors: state,\r\n      userAssignment: state,\r\n      supportInfo: state\r\n    };\r\n    // Special handling for comments panel badge\r\n    this.commentsPanelExpanded = state;\r\n    this.cdr.detectChanges();\r\n  }\r\n  \r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // Handle worklistItem changes\r\n    if (changes['worklistItem'] && changes['worklistItem'].currentValue) {\r\n      const item = changes['worklistItem'].currentValue;\r\n      \r\n      // Auto-expand User Assignment panel if there's an assigned user\r\n      if (item.assignedTo || item.assignedName) {\r\n        this.panelStates.userAssignment = true;\r\n      }\r\n    }\r\n    \r\n    if (changes['visible']) {\r\n      // Handle visibility changes\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle comments count change from the comments component\r\n   */\r\n  onCommentsCountChanged(count: number): void {\r\n    this.commentsCount = count;\r\n    \r\n    // Automatically expand comments panel if there are comments\r\n    if (count > 0 && !this.commentsPanelExpanded) {\r\n      this.commentsPanelExpanded = true;\r\n      this.panelStates.comments = true;\r\n    } else if (count === 0) {\r\n        this.panelStates.comments = false;\r\n    }\r\n    \r\n    this.cdr.detectChanges(); // Force UI update for badge\r\n  }\r\n\r\n  onDrawerWidthChange(width: number): void {\r\n    this.drawerWidth = width;\r\n    this.cdr.detectChanges();\r\n  }\r\n  \r\n  close(): void {\r\n    this.visible = false;\r\n    this.visibleChange.emit(false);\r\n  }\r\n\r\n  /**\r\n   * Open feedback modal for the current item\r\n   */\r\n  openFeedbackModal(): void {\r\n    if (!this.worklistItem) return;\r\n\r\n    const modalRef = this.modalService.create({\r\n      nzTitle: 'Submit Feedback',\r\n      nzContent: FeedbackFormComponent,\r\n      nzWidth: 500,\r\n      nzData: {\r\n        itemReference: this.worklistItem.itemDescription || 'N/A',\r\n        itemType: 'Oral Chemotherapy',\r\n        itemMeaning: \"WORKLISTITEM\",\r\n        itemId: this.worklistItem.compass_worklist_id,\r\n        item: this.worklistItem\r\n      },\r\n      nzFooter: null,\r\n      nzClosable: true,\r\n      nzMaskClosable: false\r\n    });\r\n\r\n    // Handle feedback submission\r\n    modalRef.afterClose.subscribe((result: FeedbackData | undefined) => {\r\n      if (result) {\r\n        // Feedback was successfully submitted for the current worklist item\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Refresh the current worklist item by ID\r\n   */\r\n  refreshCurrentItem(): void {\r\n    if (!this.worklistItem) return;\r\n    this.isRefreshing = true;\r\n    // Initiate refresh of the current worklist item data\r\n    // Note: This method will need to be implemented in the OralChemotherapyService\r\n    // For now, we'll simulate the refresh\r\n    setTimeout(() => {\r\n      this.isRefreshing = false;\r\n      this.cdr.detectChanges();\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Copy the entire worklist item data to clipboard as JSON\r\n   */\r\n  async copyItemDataToClipboard(): Promise<void> {\r\n    if (!this.worklistItem) {\r\n      return;\r\n    }\r\n    \r\n    this.isCopying = true;\r\n    \r\n    try {\r\n      // Create a clean copy of the worklist item data\r\n      const itemData = {\r\n        compass_worklist_id: this.worklistItem.compass_worklist_id,\r\n        personId: this.worklistItem.personId,\r\n        encntrId: this.worklistItem.encntrId,\r\n        orderId: this.worklistItem.orderId,\r\n        workflow_id: this.worklistItem.workflow_id,\r\n        itemDescription: this.worklistItem.itemDescription,\r\n        workflowType: this.worklistItem.workflowType,\r\n        priority: this.worklistItem.priority,\r\n        orderingLocation: this.worklistItem.orderingLocation,\r\n        orderingProvider: this.worklistItem.orderingProvider,\r\n        schedulingLocation: this.worklistItem.schedulingLocation,\r\n        origOrderDtTm: this.worklistItem.origOrderDtTm,\r\n        edosDate: this.worklistItem.edosDate,\r\n        workflowUpdateDateTime: this.worklistItem.workflowUpdateDateTime,\r\n        workflowUpdateCount: this.worklistItem.workflowUpdateCount,\r\n        dataRefreshDtTm: this.worklistItem.dataRefreshDtTm,\r\n        patient: this.worklistItem.patient,\r\n        workflowStatus: this.worklistItem.workflowStatus,\r\n        subStatus: this.worklistItem.subStatus,\r\n        schedule: this.worklistItem.schedule,\r\n        codeList: this.worklistItem.codeList,\r\n        payors: this.worklistItem.payors,\r\n        milestones: this.worklistItem.milestones,\r\n        actions: this.worklistItem.actions,\r\n        // Add any additional fields that might be useful for troubleshooting\r\n        _exportedAt: new Date().toISOString(),\r\n        _exportedBy: 'Oral Chemo Milestone Details Component'\r\n      };\r\n      \r\n      // Convert to formatted JSON string\r\n      const jsonString = JSON.stringify(itemData, null, 2);\r\n      \r\n      // Copy to clipboard\r\n      await navigator.clipboard.writeText(jsonString);\r\n      \r\n      // Show success message\r\n      this.messagingService.success('Item data copied to clipboard successfully');\r\n      \r\n    } catch (error) {\r\n      this.messagingService.error('Failed to copy item data to clipboard');\r\n    } finally {\r\n      this.isCopying = false;\r\n    }\r\n  }\r\n}\r\n","<nz-drawer\r\n  [nzVisible]=\"visible\"\r\n  [nzWidth]=\"drawerWidth\"\r\n  [nzClosable]=\"true\"\r\n  [nzMaskClosable]=\"true\"\r\n  (nzOnClose)=\"close()\"\r\n  [nzTitle]=\"drawerTitle\"\r\n>\r\n  <ng-template #drawerTitle>\r\n    <div *ngIf=\"worklistItem\" class=\"drawer-header\">\r\n      <div class=\"drawer-title-content\">\r\n        <span>{{ worklistItem.patient?.name }} - {{ worklistItem.itemDescription }}</span>\r\n        <div class=\"drawer-subtitle\">\r\n          <span class=\"id-display\">ID: {{ worklistItem.compass_worklist_id }}</span>\r\n          <span *ngIf=\"worklistItem.dataRefreshDtTm\" class=\"refresh-display\">\r\n            Refreshed: {{ worklistItem.dataRefreshDtTm | date:'M/d/yy, h:mm:ss a' }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"drawer-actions\">\r\n        <!-- Collapse All Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"collapseAll()\"\r\n        >\r\n          <span nz-icon nzType=\"minus-square\" nzTheme=\"outline\"></span>\r\n        </button>\r\n\r\n        <!-- Expand All Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"expandAll()\"\r\n        >\r\n          <span nz-icon nzType=\"plus-square\" nzTheme=\"outline\"></span>\r\n        </button>\r\n\r\n        <!-- Refresh Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"refreshCurrentItem()\"\r\n          [disabled]=\"isRefreshing\"\r\n        >\r\n          <span nz-icon nzType=\"reload\" nzTheme=\"outline\" [nzSpin]=\"isRefreshing\"></span>\r\n        </button>\r\n\r\n        <!-- Copy Data Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"copyItemDataToClipboard()\"\r\n          [disabled]=\"isCopying\"\r\n        >\r\n          <span nz-icon nzType=\"copy\" nzTheme=\"outline\" [nzSpin]=\"isCopying\"></span>\r\n        </button>\r\n\r\n        <!-- Feedback Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"primary\" \r\n          nzSize=\"small\"\r\n          (click)=\"openFeedbackModal()\"\r\n        >\r\n          <span nz-icon nzType=\"message\" nzTheme=\"outline\"></span>\r\n          Feedback\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  \r\n  <ng-container *nzDrawerContent>\r\n    <div style=\"margin-bottom: 0px;\">\r\n      <nz-slider\r\n        [ngModel]=\"drawerWidth\"\r\n        [nzMin]=\"100\"\r\n        [nzMax]=\"2000\"\r\n        (ngModelChange)=\"onDrawerWidthChange($event)\">\r\n      </nz-slider>\r\n    </div>\r\n    <div *ngIf=\"worklistItem\">\r\n      <nz-collapse [nzAccordion]=\"false\" [nzBordered]=\"true\">\r\n        <!-- Patient Information Component -->\r\n        <nz-collapse-panel nzHeader=\"Patient Information\" [(nzActive)]=\"panelStates.patientInfo\">\r\n          <app-oral-chemo-patient-information [worklistItem]=\"worklistItem\"></app-oral-chemo-patient-information>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Comments Component -->\r\n        <nz-collapse-panel [nzHeader]=\"commentsPanelHeader\" [(nzActive)]=\"panelStates.comments\">\r\n          <ng-template #commentsPanelHeader>\r\n            Comments\r\n            <nz-badge *ngIf=\"commentsCount > 0\" [nzCount]=\"commentsCount\" style=\"margin-left: 8px;\"></nz-badge>\r\n          </ng-template>\r\n          <app-oral-chemo-comments \r\n            [worklistItem]=\"worklistItem\" \r\n            [visible]=\"visible\" \r\n            (commentsCountChanged)=\"onCommentsCountChanged($event)\"\r\n          ></app-oral-chemo-comments>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Item Details Component -->\r\n        <nz-collapse-panel nzHeader=\"Item Details\" [(nzActive)]=\"panelStates.itemDetails\">\r\n          <app-oral-chemo-item-details [worklistItem]=\"worklistItem\" (itemRefreshed)=\"refreshCurrentItem()\"></app-oral-chemo-item-details>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Codes Component -->\r\n        <nz-collapse-panel nzHeader=\"Codes\" [(nzActive)]=\"panelStates.codes\">\r\n          <app-oral-chemo-codes [worklistItem]=\"worklistItem\"></app-oral-chemo-codes>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Workflow Status Component -->\r\n        <nz-collapse-panel nzHeader=\"Workflow Status\" [(nzActive)]=\"panelStates.workflowStatus\">\r\n          <app-oral-chemo-workflow-status [worklistItem]=\"worklistItem\"></app-oral-chemo-workflow-status>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Payors Component -->\r\n        <nz-collapse-panel nzHeader=\"Payors\" [(nzActive)]=\"panelStates.payors\">\r\n          <app-oral-chemo-payors [worklistItem]=\"worklistItem\"></app-oral-chemo-payors>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- User Assignment Component -->\r\n        <nz-collapse-panel nzHeader=\"User Assignment\" [(nzActive)]=\"panelStates.userAssignment\">\r\n          <app-oral-chemo-user-assignment [item]=\"worklistItem\"></app-oral-chemo-user-assignment>\r\n        </nz-collapse-panel>\r\n      </nz-collapse>\r\n      \r\n      <!-- Milestone Timeline Component -->\r\n      <app-oral-chemo-milestone-timeline [worklistItem]=\"worklistItem\" [isLoading]=\"isLoading\"></app-oral-chemo-milestone-timeline>\r\n      \r\n      <!-- Support Information Section -->\r\n      <div class=\"support-section\" style=\"margin-top: 16px;\">\r\n        <nz-collapse [nzAccordion]=\"false\" [nzBordered]=\"true\">\r\n          <nz-collapse-panel nzHeader=\"Support Information\" [(nzActive)]=\"panelStates.supportInfo\">\r\n            <ng-template #supportPanelHeader>\r\n              Support Information\r\n            </ng-template>\r\n            <nz-descriptions nzTitle=\"Internal IDs for Troubleshooting\" [nzColumn]=\"2\" nzBordered>\r\n              <nz-descriptions-item nzTitle=\"Compass Worklist ID\">\r\n                {{ worklistItem.compass_worklist_id }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Person ID\">\r\n                {{ worklistItem.personId }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Encounter ID\">\r\n                {{ worklistItem.encntrId }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Order ID\">\r\n                {{ worklistItem.orderId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Workflow ID\">\r\n                {{ worklistItem.workflow_id }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule Event ID\">\r\n                {{ worklistItem.schedule?.eventId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule ID\">\r\n                {{ worklistItem.schedule?.scheduleId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule Status\">\r\n                {{ worklistItem.schedule?.state || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Milestone IDs\">\r\n                <div *ngIf=\"worklistItem.milestones && worklistItem.milestones.length > 0; else noMilestones\">\r\n                  <div *ngFor=\"let milestone of worklistItem.milestones\" class=\"id-list-item\">\r\n                    {{ milestone.milestoneId }} ({{ milestone.name }})\r\n                  </div>\r\n                </div>\r\n                <ng-template #noMilestones>\r\n                  <span class=\"no-data\">No milestones</span>\r\n                </ng-template>\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Action IDs\">\r\n                <div *ngIf=\"worklistItem.actions && worklistItem.actions.length > 0; else noActions\">\r\n                  <div *ngFor=\"let action of worklistItem.actions\" class=\"id-list-item\">\r\n                    {{ action.actionId }} ({{ action.name }})\r\n                  </div>\r\n                </div>\r\n                <ng-template #noActions>\r\n                  <span class=\"no-data\">No actions</span>\r\n                </ng-template>\r\n              </nz-descriptions-item>\r\n            </nz-descriptions>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem, OralChemoMilestone, OralChemoAction } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Interface for timeline items that can be either milestones or actions\r\n */\r\ninterface TimelineItem {\r\n  id: number;\r\n  type: 'milestone' | 'action';\r\n  name: string;\r\n  description?: string;\r\n  status: string;\r\n  dateTime: Date;\r\n  milestoneId?: number; // For actions that belong to a milestone\r\n  meaning?: string;\r\n  milestoneData?: any[];\r\n  required?: boolean; // Added for milestones\r\n  actionBy?: string; // The user who performed the action (for actions only)\r\n}\r\n\r\n/**\r\n * Component for displaying milestone timeline in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-milestone-timeline',\r\n  templateUrl: './milestone-timeline.component.html',\r\n  styleUrls: ['./milestone-timeline.component.scss']\r\n})\r\nexport class OralChemoMilestoneTimelineComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n  @Input() isLoading = false;\r\n\r\n  /**\r\n   * Get combined timeline items from milestones and actions\r\n   */\r\n  getTimelineItems(): TimelineItem[] {\r\n    if (!this.worklistItem) return [];\r\n\r\n    const timelineItems: TimelineItem[] = [];\r\n\r\n    // Add milestones\r\n    if (this.worklistItem.milestones) {\r\n      this.worklistItem.milestones.forEach(milestone => {\r\n        timelineItems.push({\r\n          id: milestone.milestoneId,\r\n          type: 'milestone',\r\n          name: milestone.name,\r\n          description: milestone.meaning,\r\n          status: milestone.status,\r\n          dateTime: milestone.statusDateTime,\r\n          required: milestone.requiredInd,\r\n          milestoneData: milestone.milestoneData\r\n        });\r\n      });\r\n    }\r\n\r\n    // Add actions\r\n    if (this.worklistItem.actions) {\r\n      this.worklistItem.actions.forEach(action => {\r\n        timelineItems.push({\r\n          id: action.actionId,\r\n          type: 'action',\r\n          name: action.name,\r\n          description: action.description,\r\n          status: action.status,\r\n          dateTime: action.actionDtTm,\r\n          milestoneId: action.milestoneId,\r\n          meaning: action.meaning,\r\n          actionBy: action.actionBy\r\n        });\r\n      });\r\n    }\r\n\r\n    // Sort by date/time\r\n    return timelineItems.sort((a, b) => new Date(a.dateTime).getTime() - new Date(b.dateTime).getTime());\r\n  }\r\n\r\n  /**\r\n   * Get the color for the timeline item status\r\n   */\r\n  getStatusColor(status: string): 'red' | 'blue' | 'green' | 'grey' | 'gray' {\r\n    switch (status?.toLowerCase()) {\r\n      case 'complete':\r\n      case 'completed':\r\n        return 'green';\r\n      case 'in progress':\r\n      case 'in_progress':\r\n        return 'blue';\r\n      case 'pending':\r\n        return 'gray';\r\n      case 'failed':\r\n      case 'error':\r\n        return 'red';\r\n      default:\r\n        return 'gray';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the icon for the timeline item type\r\n   */\r\n  getItemIcon(type: string): string {\r\n    switch (type) {\r\n      case 'milestone':\r\n        return 'flag';\r\n      case 'action':\r\n        return 'play-circle';\r\n      default:\r\n        return 'clock-circle';\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"worklistItem && getTimelineItems().length > 0; else noTimeline\" class=\"milestone-timeline\">\r\n  <h4 class=\"timeline-title\">Milestone Timeline</h4>\r\n  <nz-timeline>\r\n    <nz-timeline-item\r\n      *ngFor=\"let item of getTimelineItems()\"\r\n      [nzColor]=\"getStatusColor(item.status)\"\r\n      [nzDot]=\"itemIcon\"\r\n    >\r\n      <ng-template #itemIcon>\r\n        <span nz-icon [nzType]=\"getItemIcon(item.type)\" nzTheme=\"outline\"></span>\r\n      </ng-template>\r\n      \r\n      <div class=\"timeline-item-content\">\r\n        <div class=\"timeline-item-header\">\r\n          <span class=\"item-name\">{{ item.name }}</span>\r\n          <nz-tag [nzColor]=\"getStatusColor(item.status)\" nzSize=\"small\">\r\n            {{ item.status }}\r\n          </nz-tag>\r\n        </div>\r\n        \r\n        <div class=\"timeline-item-details\">\r\n          <div class=\"item-description\" *ngIf=\"item.description\">\r\n            {{ item.description }}\r\n          </div>\r\n          <div class=\"item-datetime\">\r\n            {{ item.dateTime | date:'M/d/yyyy, h:mm a' }}\r\n          </div>\r\n          <div class=\"item-action-by\" *ngIf=\"item.actionBy\">\r\n            Action by: {{ item.actionBy }}\r\n          </div>\r\n          <div class=\"item-required\" *ngIf=\"item.required !== undefined\">\r\n            <nz-tag nzColor=\"red\" nzSize=\"small\" *ngIf=\"item.required\">Required</nz-tag>\r\n            <nz-tag nzColor=\"default\" nzSize=\"small\" *ngIf=\"!item.required\">Optional</nz-tag>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nz-timeline-item>\r\n  </nz-timeline>\r\n</div>\r\n\r\n<ng-template #noTimeline>\r\n  <div class=\"no-timeline\">\r\n    <nz-empty nzNotFoundContent=\"No timeline data available\"></nz-empty>\r\n  </div>\r\n</ng-template>\r\n\r\n<!-- Loading State -->\r\n<div *ngIf=\"isLoading\" class=\"loading-timeline\">\r\n  <nz-spin nzSimple></nz-spin>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying patient information in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-patient-information',\r\n  templateUrl: './patient-information.component.html',\r\n  styleUrls: ['./patient-information.component.scss']\r\n})\r\nexport class OralChemoPatientInformationComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n}\r\n","<div *ngIf=\"worklistItem?.patient\" class=\"patient-information\">\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered>\r\n    <nz-descriptions-item nzTitle=\"Patient Name\">\r\n      {{ worklistItem?.patient?.name }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Date of Birth\">\r\n      {{ worklistItem?.patient?.dateOfBirth | date:'M/d/yyyy' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"FIN\">\r\n      {{ worklistItem?.patient?.fin }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"MRN\">\r\n      {{ worklistItem?.patient?.mrn }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n\r\n<div *ngIf=\"!worklistItem?.patient\" class=\"no-patient-data\">\r\n  <nz-empty nzNotFoundContent=\"No patient information available\"></nz-empty>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem, OralChemoPayor } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying payors in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-payors',\r\n  templateUrl: './payors.component.html',\r\n  styleUrls: ['./payors.component.scss']\r\n})\r\nexport class OralChemoPayorsComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n\r\n  /**\r\n   * Get the color for the plan type tag\r\n   */\r\n  getPlanTypeColor(planType: string): string {\r\n    switch (planType?.toLowerCase()) {\r\n      case 'medicare':\r\n        return 'blue';\r\n      case 'medicaid':\r\n        return 'green';\r\n      case 'commercial':\r\n        return 'purple';\r\n      case 'self pay':\r\n      case 'self-pay':\r\n        return 'orange';\r\n      default:\r\n        return 'default';\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"worklistItem && worklistItem.payors && worklistItem.payors.length > 0; else noPayors\" class=\"payors-container\">\r\n  <nz-table [nzData]=\"worklistItem.payors\" [nzShowPagination]=\"false\" [nzSize]=\"'small'\">\r\n    <thead>\r\n      <tr>\r\n        <th>Plan Name</th>\r\n        <th>Plan Type</th>\r\n        <th>Plan ID</th>\r\n        <th>Effective Date</th>\r\n        <th>End Date</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr *ngFor=\"let payor of worklistItem?.payors\">\r\n        <td>{{ payor.planName }}</td>\r\n        <td>\r\n          <nz-tag [nzColor]=\"getPlanTypeColor(payor.planType)\">\r\n            {{ payor.planType }}\r\n          </nz-tag>\r\n        </td>\r\n        <td>{{ payor.planId }}</td>\r\n        <td>{{ payor.effectiveDate | date:'M/d/yyyy' }}</td>\r\n        <td>{{ payor.endDate | date:'M/d/yyyy' }}</td>\r\n      </tr>\r\n    </tbody>\r\n  </nz-table>\r\n</div>\r\n\r\n<ng-template #noPayors>\r\n  <div class=\"no-payors\">\r\n    <nz-empty nzNotFoundContent=\"No payor information available\"></nz-empty>\r\n  </div>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying user assignment in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-user-assignment',\r\n  templateUrl: './user-assignment.component.html',\r\n  styleUrls: ['./user-assignment.component.scss']\r\n})\r\nexport class OralChemoUserAssignmentComponent {\r\n  @Input() item: OralChemoItem | null = null;\r\n\r\n  /**\r\n   * Check if there is an assigned user\r\n   */\r\n  hasAssignedUser(): boolean {\r\n    return !!(this.item?.assignedTo || this.item?.assignedName);\r\n  }\r\n}\r\n","<div *ngIf=\"hasAssignedUser(); else noAssignment\" class=\"user-assignment\">\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered>\r\n    <nz-descriptions-item nzTitle=\"Assigned To\">\r\n      {{ item?.assignedName || item?.assignedTo || 'N/A' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Username\">\r\n      {{ item?.assignedTo || 'N/A' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n\r\n<ng-template #noAssignment>\r\n  <div class=\"no-assignment\">\r\n    <nz-empty nzNotFoundContent=\"No user assignment\"></nz-empty>\r\n  </div>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\nimport { OralChemoItem } from '../../../../models/oral-chemotherapy.model';\r\n\r\n/**\r\n * Component for displaying workflow status in the oral chemotherapy milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-workflow-status',\r\n  templateUrl: './workflow-status.component.html',\r\n  styleUrls: ['./workflow-status.component.scss']\r\n})\r\nexport class OralChemoWorkflowStatusComponent {\r\n  @Input() worklistItem: OralChemoItem | null = null;\r\n\r\n  /**\r\n   * Get the color for the workflow status tag\r\n   */\r\n  getStatusColor(status: string): string {\r\n    switch (status?.toLowerCase()) {\r\n      case 'complete':\r\n      case 'completed':\r\n        return 'green';\r\n      case 'in progress':\r\n      case 'in_progress':\r\n        return 'blue';\r\n      case 'pending':\r\n        return 'orange';\r\n      case 'ordered':\r\n        return 'purple';\r\n      case 'cancelled':\r\n      case 'canceled':\r\n        return 'red';\r\n      default:\r\n        return 'default';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get the color for the sub-status tag\r\n   */\r\n  getSubStatusColor(subStatus: string): string {\r\n    switch (subStatus?.toLowerCase()) {\r\n      case 'approved':\r\n        return 'green';\r\n      case 'denied':\r\n        return 'red';\r\n      case 'pending':\r\n        return 'orange';\r\n      default:\r\n        return 'default';\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"worklistItem\" class=\"workflow-status\">\r\n  <nz-descriptions [nzColumn]=\"2\" nzBordered>\r\n    <nz-descriptions-item nzTitle=\"Workflow Status\">\r\n      <nz-tag [nzColor]=\"getStatusColor(worklistItem.workflowStatus?.status || '')\">\r\n        {{ worklistItem.workflowStatus?.status || 'N/A' }}\r\n      </nz-tag>\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Status Date\">\r\n      {{ worklistItem.workflowStatus?.statusDateTime | date:'M/d/yyyy, h:mm a' }}\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Sub Status\">\r\n      <nz-tag [nzColor]=\"getSubStatusColor(worklistItem.subStatus?.subStatus || '')\">\r\n        {{ worklistItem.subStatus?.subStatus || 'N/A' }}\r\n      </nz-tag>\r\n    </nz-descriptions-item>\r\n    <nz-descriptions-item nzTitle=\"Sub Status Date\">\r\n      {{ worklistItem.subStatus?.subStatusDateTime | date:'M/d/yyyy, h:mm a' }}\r\n    </nz-descriptions-item>\r\n  </nz-descriptions>\r\n</div>\r\n\r\n<div *ngIf=\"!worklistItem\" class=\"no-status-data\">\r\n  <nz-empty nzNotFoundContent=\"No workflow status available\"></nz-empty>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { PredefinedFilter } from '../../../models/predefined-filter.model';\r\n\r\n/**\r\n * OralChemoFilterBarComponent - Filter Bar for Oral Chemotherapy Worklist\r\n * \r\n * This component provides filtering capabilities for the oral chemotherapy worklist.\r\n * It will contain various filter controls such as predefined filters, search functionality,\r\n * and other filtering options specific to oral chemotherapy orders.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Display predefined filter tabs for different worklist views\r\n * - Provide global search functionality across worklist items\r\n * - Handle days-based filtering (e.g., last 7 days, 30 days, all)\r\n * - Manage assignment-based filtering (my assignments vs all)\r\n * - Provide refresh and reset functionality\r\n * - Emit filter change events to parent component\r\n * \r\n * ARCHITECTURE INTEGRATION:\r\n * - Receives predefined filters from parent component\r\n * - Communicates filter changes via event emitters\r\n * - Uses signals for reactive state management\r\n * - Integrates with ColumnConfigService for filter configuration\r\n * \r\n * DATA FLOW:\r\n * 1. Receives predefined filters and current state from parent\r\n * 2. Displays filter controls in the UI\r\n * 3. Captures user interactions and filter changes\r\n * 4. Emits events to parent component for data filtering\r\n * 5. Maintains local state for UI interactions\r\n * \r\n * SIGNAL INTEGRATION:\r\n * - Uses signals for reactive filter state management\r\n * - Automatic UI updates when filter state changes\r\n * - Efficient change detection with minimal performance overhead\r\n * \r\n * USER WORKFLOW:\r\n * - Users can select predefined filter tabs to change worklist view\r\n * - Global search allows filtering across all visible items\r\n * - Days filter helps focus on recent or specific time periods\r\n * - Assignment toggle shows personal vs all assignments\r\n * - Refresh button reloads data from the service\r\n * \r\n * FUTURE ENHANCEMENTS:\r\n * - Additional filter controls will be added as requirements evolve\r\n * - Advanced filtering options for specific oral chemotherapy criteria\r\n * - Saved filter presets for common user workflows\r\n * - Integration with user preferences for default filter settings\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-filter-bar',\r\n  templateUrl: './oral-chemo-filter-bar.component.html',\r\n  styleUrls: ['./oral-chemo-filter-bar.component.scss']\r\n})\r\nexport class OralChemoFilterBarComponent {\r\n  /**\r\n   * Array of predefined filters available for this worklist\r\n   */\r\n  @Input() predefinedFilters: PredefinedFilter[] = [];\r\n\r\n  /**\r\n   * The currently active predefined filter\r\n   */\r\n  @Input() activePredefinedFilter: PredefinedFilter | null = null;\r\n\r\n  /**\r\n   * Current days filter value\r\n   */\r\n  @Input() currentDaysFilter: number | 'all' = 'all';\r\n\r\n  /**\r\n   * Whether to show only current user's assignments\r\n   */\r\n  @Input() showMyAssignmentsOnly: boolean = false;\r\n\r\n  /**\r\n   * Loading state for refresh operations\r\n   */\r\n  @Input() isLoading: boolean = false;\r\n\r\n  /**\r\n   * Event emitted when a predefined filter is selected\r\n   */\r\n  @Output() predefinedFilterSelect = new EventEmitter<PredefinedFilter | null>();\r\n\r\n  /**\r\n   * Event emitted when the global search term changes\r\n   */\r\n  @Output() globalSearch = new EventEmitter<string>();\r\n\r\n  /**\r\n   * Event emitted when the days filter changes\r\n   */\r\n  @Output() daysFilterChange = new EventEmitter<number | 'all'>();\r\n\r\n  /**\r\n   * Event emitted when the assignment filter toggle changes\r\n   */\r\n  @Output() assignmentToggle = new EventEmitter<boolean>();\r\n\r\n  /**\r\n   * Event emitted when refresh data is requested\r\n   */\r\n  @Output() refreshData = new EventEmitter<void>();\r\n\r\n  /**\r\n   * Event emitted when column widths should be reset\r\n   */\r\n  @Output() columnWidthsReset = new EventEmitter<void>();\r\n\r\n  /**\r\n   * Current global search term\r\n   */\r\n  globalSearchTerm: string = '';\r\n\r\n  /**\r\n   * Handles predefined filter selection\r\n   * @param filter - The selected predefined filter or null for \"All\"\r\n   */\r\n  onPredefinedFilterSelect(filter: PredefinedFilter | null): void {\r\n    this.activePredefinedFilter = filter;\r\n    this.predefinedFilterSelect.emit(filter);\r\n  }\r\n\r\n  /**\r\n   * Handles global search input changes\r\n   * @param searchTerm - The search term entered by the user\r\n   */\r\n  onGlobalSearch(searchTerm: string): void {\r\n    this.globalSearchTerm = searchTerm;\r\n    this.globalSearch.emit(searchTerm);\r\n  }\r\n\r\n  /**\r\n   * Handles days filter selection\r\n   * @param days - The selected days filter value\r\n   */\r\n  onDaysFilterChange(days: number | 'all'): void {\r\n    this.currentDaysFilter = days;\r\n    this.daysFilterChange.emit(days);\r\n  }\r\n\r\n  /**\r\n   * Handles assignment filter toggle\r\n   * @param showMyAssignmentsOnly - Whether to show only current user's assignments\r\n   */\r\n  onAssignmentToggle(showMyAssignmentsOnly: boolean): void {\r\n    this.showMyAssignmentsOnly = showMyAssignmentsOnly;\r\n    this.assignmentToggle.emit(showMyAssignmentsOnly);\r\n  }\r\n\r\n  /**\r\n   * Handles refresh data request\r\n   */\r\n  onRefreshData(): void {\r\n    this.refreshData.emit();\r\n  }\r\n\r\n  /**\r\n   * Handles column widths reset request\r\n   */\r\n  onColumnWidthsReset(): void {\r\n    this.columnWidthsReset.emit();\r\n  }\r\n\r\n  /**\r\n   * Clears the global search input\r\n   */\r\n  clearGlobalSearch(): void {\r\n    this.globalSearchTerm = '';\r\n    this.globalSearch.emit('');\r\n  }\r\n}\r\n","<!-- Oral Chemotherapy Filter Bar Component -->\r\n<div class=\"oral-chemo-filter-bar\">\r\n  <!-- Placeholder content - filter options will be added later -->\r\n  <div class=\"filter-bar-content\">\r\n    <p>Oral Chemotherapy Filter Bar - Filter options will be implemented here</p>\r\n  </div>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\n\r\n/**\r\n * ItemInfoComponent - Oral Chemotherapy Order Description with Cerner Action Link\r\n * \r\n * This component displays the order description as a clickable link that opens\r\n * the order details in PowerChart using the Cerner VIEWORDER action.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Displays order description as a clickable link\r\n * - Handles click events to open order details via Cerner action\r\n * - Validates required data before executing Cerner action\r\n * - Provides consistent styling with prior auth implementation\r\n * \r\n * INTEGRATION:\r\n * - Uses CernerActionService to execute VIEWORDER action\r\n * - Requires orderId, personId, and encntrId for proper functionality\r\n * - Integrates with oral chemo worklist table for order management\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-item-info',\r\n  templateUrl: './item-info.component.html',\r\n  styleUrls: ['./item-info.component.scss']\r\n})\r\nexport class OralChemoItemInfoComponent {\r\n  @Input() item!: any; // Oral chemo worklist item\r\n\r\n  constructor(private cernerAction: CernerActionService) {}\r\n\r\n  /**\r\n   * Opens order details using the VIEWORDER CernerAction\r\n   * This method uses the DiscernObjectFactory to open the Order Info Viewer\r\n   * @param selectedItem The selected oral chemo worklist item\r\n   */\r\n  openItemDetails(selectedItem: any): void {\r\n    // Initiate order details view for the selected oral chemo item\r\n    \r\n    // Validate that orderId is present before proceeding with Cerner action\r\n    if (!selectedItem.orderId) {\r\n      // Unable to open order details without a valid order ID\r\n      console.warn('Cannot open order details: orderId is missing');\r\n      return;\r\n    }\r\n\r\n    // Execute Cerner VIEWORDER action to display order details in PowerChart\r\n    this.cernerAction.CernerAction('VIEWORDER', {\r\n      orderId: selectedItem.orderId,\r\n      personId: selectedItem.personId,\r\n      encntrId: selectedItem.encntrId\r\n    });\r\n  }\r\n}\r\n","<div *ngIf=\"item\">\r\n  <div>\r\n    <a href=\"javascript:void(0)\" (click)=\"openItemDetails(item)\"><strong>{{ item.itemDescription || item.orderDescription || 'N/A' }}</strong></a>\r\n  </div>\r\n  <!-- Future expansion: Additional item details can be added here -->\r\n  <!-- Examples: item type, priority, cost, etc. -->\r\n</div>\r\n","import { Component, OnInit, OnDestroy, OnChanges, SimpleChanges, ViewChild, Input, Output, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, signal, computed, effect } from '@angular/core';\r\nimport { ColumnItem } from '../../../models/column-item.model';\r\nimport { PredefinedFilter } from '../../../models/predefined-filter.model';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\nimport { ItemHighlightingService } from '../../../services/item-highlighting.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { NzTableComponent } from 'ng-zorro-antd/table';\r\n\r\n/**\r\n * OralChemoWorklistComponent - Oral Chemotherapy Worklist Data Table\r\n * \r\n * This component displays the main data table for oral chemotherapy worklist items,\r\n * providing a comprehensive view of all pending oral chemotherapy orders with interactive\r\n * features for item management, filtering, and detailed tracking.\r\n * \r\n * COMPONENT ARCHITECTURE:\r\n * - Uses Angular Signals for reactive state management\r\n * - Implements OnPush change detection strategy for optimal performance\r\n * - Integrates with NG-Zorro Ant Design table component for rich UI features\r\n * - Supports expandable rows for additional item details\r\n * - Features resizable columns and advanced filtering\r\n * \r\n * SIGNAL-BASED STATE MANAGEMENT:\r\n * - _expandedIds: Tracks which table rows are expanded\r\n * - _loadingItems: Manages loading states for individual items\r\n * - Computed signals provide derived state for template consumption\r\n * \r\n * KEY FEATURES:\r\n * - Real-time data updates via signal reactivity\r\n * - Interactive status updates and item management\r\n * - Expandable row details with patient and order information\r\n * - Dynamic column configuration and sorting\r\n * - Integrated feedback system for user input\r\n * - Responsive design for various screen sizes\r\n * \r\n * DATA FLOW:\r\n * 1. Receives filtered worklist items from parent component\r\n * 2. Displays items in sortable, filterable table format\r\n * 3. Handles user interactions (expand, select, status updates)\r\n * 4. Triggers item updates and refreshes data as needed\r\n * 5. Provides feedback collection for continuous improvement\r\n * \r\n * PERFORMANCE OPTIMIZATIONS:\r\n * - OnPush change detection reduces unnecessary re-renders\r\n * - Signals provide fine-grained reactivity without full component updates\r\n * - Optimized row expansion tracking using Set data structure\r\n * \r\n * INTEGRATION POINTS:\r\n * - ColumnConfigService: Dynamic column configuration for oral-chemotherapy\r\n * - ItemHighlightingService: Row highlighting based on configuration rules\r\n * - UserPreferencesService: Filter state persistence\r\n * - Various cell components: Specialized rendering for different data types\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-worklist',\r\n  templateUrl: './oral-chemo-worklist.component.html',\r\n  styleUrls: ['./oral-chemo-worklist.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class OralChemoWorklistComponent implements OnInit, OnDestroy, OnChanges {\r\n  /**\r\n   * Reference to the NG-ZORRO table instance for programmatic filter control\r\n   */\r\n  @ViewChild('worklistTable', { static: false }) worklistTable!: NzTableComponent<any>;\r\n  \r\n  /**\r\n   * The currently active predefined filter from parent component\r\n   */\r\n  @Input() activePredefinedFilter: PredefinedFilter | null = null;\r\n  \r\n  /**\r\n   * The worklist items to display, provided by the parent component\r\n   */\r\n  @Input() worklistItems: any[] = [];\r\n  \r\n  /**\r\n   * Loading state for the entire table, provided by the parent component\r\n   */\r\n  @Input() loading = false;\r\n\r\n  /**\r\n   * Selected item for milestone details\r\n   */\r\n  selectedItem: any = null;\r\n\r\n  /**\r\n   * Visibility state for milestone details drawer\r\n   */\r\n  milestoneDetailsVisible = false;\r\n  \r\n  // === SIGNALS IMPLEMENTATION ===\r\n  \r\n  /**\r\n   * Signal tracking which rows are expanded in the table\r\n   * Provides better performance than traditional Set operations\r\n   */\r\n  private _expandedIds = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Signal tracking which items are currently loading\r\n   * Used to show loading indicators on individual rows\r\n   */\r\n  private _loadingItems = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Flag to prevent filter restoration when switching predefined filters\r\n   */\r\n  private _preventingFilterRestoration = false;\r\n  \r\n  /**\r\n   * Flag to track if we're in the middle of a data refresh operation\r\n   */\r\n  private _isDataRefreshing = false;\r\n  \r\n  /**\r\n   * Local storage for filter selections to persist across data updates\r\n   */\r\n  filterSelections: { [columnMeaning: string]: string[] } = {};\r\n  \r\n  // === PRIVATE SIGNALS FOR STATE MANAGEMENT ===\r\n  \r\n  /**\r\n   * Signal to track when column filters have been updated and are ready for visual application\r\n   */\r\n  private _columnFiltersReady = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal to track when predefined filter application is in progress\r\n   */\r\n  private _applyingPredefinedFilter = signal<boolean>(false);\r\n  private _lastAppliedFilterId: string | null = null;\r\n  private _lastAppliedFilterTime = 0;\r\n  \r\n  // === READ-ONLY SIGNALS FOR EXTERNAL ACCESS ===\r\n  \r\n  /**\r\n   * Read-only access to expanded row IDs\r\n   */\r\n  readonly expandedIds = this._expandedIds.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to loading items set\r\n   */\r\n  readonly loadingItems = this._loadingItems.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to column filters ready state\r\n   */\r\n  readonly columnFiltersReady = this._columnFiltersReady.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to predefined filter application state\r\n   */\r\n  readonly applyingPredefinedFilter = this._applyingPredefinedFilter.asReadonly();\r\n  \r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n  \r\n  /**\r\n   * Computed signal that returns the current column configuration for oral-chemotherapy\r\n   * Automatically updates when column configuration changes\r\n   */\r\n  readonly listOfColumns = computed(() => \r\n    this.columnConfig.getColumns('oral-chemotherapy')\r\n  );\r\n  \r\n  /**\r\n   * Computed helper functions for template use\r\n   */\r\n  readonly isItemExpanded = computed(() => \r\n    (id: number) => this._expandedIds().has(id)\r\n  );\r\n  \r\n  readonly isItemLoading = computed(() => \r\n    (id: number) => this._loadingItems().has(id)\r\n  );\r\n\r\n  /**\r\n   * Get CSS classes for highlighting a worklist item row based on configuration rules\r\n   * \r\n   * This method leverages the ItemHighlightingService to determine which CSS classes\r\n   * should be applied to a table row based on the compass configuration's itemHighlight\r\n   * rules. The highlighting system supports various criteria matching (text, number, date)\r\n   * and generates CSS class names by combining the highlight type and class.\r\n   * \r\n   * @param item The worklist item to get highlight classes for\r\n   * @returns String of space-separated CSS classes to apply to the row\r\n   */\r\n  getRowHighlightClasses(item: any): string {\r\n    return this.itemHighlighting.getRowHighlightClasses(item);\r\n  }\r\n  \r\n  // === LIFECYCLE AND CLEANUP ===\r\n  \r\n  /**\r\n   * Subject for handling component destruction and subscription cleanup\r\n   */\r\n  private destroy$ = new Subject<void>();\r\n  \r\n  // Add a local columns array for the table\r\n  columns: ColumnItem[] = [];\r\n\r\n  constructor(\r\n    private columnConfig: ColumnConfigService,\r\n    private itemHighlighting: ItemHighlightingService,\r\n    private userPreferences: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    // Set up reactive effect to automatically apply visual filters when column filters are ready\r\n    effect(() => {\r\n      const filtersReady = this._columnFiltersReady();\r\n      const applyingFilter = this._applyingPredefinedFilter();\r\n      const activeFilter = this.activePredefinedFilter;\r\n      \r\n      // Only apply visual filters if:\r\n      // 1. Column filters are ready\r\n      // 2. We're not currently applying a filter (to prevent race conditions)\r\n      // 3. We have an active predefined filter\r\n      // 4. We haven't applied this same filter recently (within 2 seconds)\r\n      const now = Date.now();\r\n      const sameFilterRecently = this._lastAppliedFilterId === activeFilter?.id && \r\n                               (now - this._lastAppliedFilterTime) < 2000;\r\n      \r\n      if (filtersReady && !applyingFilter && activeFilter && !sameFilterRecently) {\r\n        this._applyingPredefinedFilter.set(true);\r\n        this._lastAppliedFilterId = activeFilter.id;\r\n        this._lastAppliedFilterTime = now;\r\n        \r\n        // Apply visual filters immediately since column filters are ready\r\n        this.applyVisualFilters(activeFilter);\r\n        \r\n        // Reset the applying flag after a longer delay to prevent rapid re-triggering\r\n        setTimeout(() => {\r\n          this._applyingPredefinedFilter.set(false);\r\n        }, 1000);\r\n      }\r\n    }, { allowSignalWrites: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Load saved column widths\r\n    this.columnConfig.loadColumnWidths();\r\n    // Initialize columns on component init\r\n    this.columns = this.columnConfig.getColumns('oral-chemotherapy');\r\n  }\r\n  \r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // Apply predefined filters when they change\r\n    if (changes['activePredefinedFilter']) {\r\n      // Set prevention flag when switching predefined filters\r\n      this._preventingFilterRestoration = true;\r\n      this._isDataRefreshing = true;\r\n      \r\n      // Clear existing filter selections immediately\r\n      this.clearPredefinedFilterSelections();\r\n      \r\n      // Mark that we're waiting for column filters to be ready\r\n      this._columnFiltersReady.set(false);\r\n      \r\n      // Reset the flags after a brief delay to allow data processing\r\n      setTimeout(() => {\r\n        this._preventingFilterRestoration = false;\r\n        this._isDataRefreshing = false;\r\n        \r\n        // Signal that column filters should now be ready\r\n        this._columnFiltersReady.set(true);\r\n      }, 300);\r\n    }\r\n    \r\n    if (changes['worklistItems'] && !changes['worklistItems'].firstChange) {\r\n      // Only restore filters if we're not preventing restoration\r\n      if (!this._preventingFilterRestoration && !this._isDataRefreshing) {\r\n        setTimeout(() => {\r\n          if (!this._preventingFilterRestoration && !this._isDataRefreshing) {\r\n            this.restoreTableFilters();\r\n          }\r\n        }, 300);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle row expansion/collapse events for detailed item views\r\n   * \r\n   * @param id - The unique identifier of the worklist item\r\n   * @param checked - True to expand the row, false to collapse it\r\n   */\r\n  onExpandChange(id: number, checked: boolean): void {\r\n    const currentExpanded = new Set(this._expandedIds());\r\n    if (checked) {\r\n      currentExpanded.add(id);\r\n    } else {\r\n      currentExpanded.delete(id);\r\n    }\r\n    this._expandedIds.set(currentExpanded);\r\n  }\r\n\r\n  /**\r\n   * Update the workflow status of an oral chemotherapy item\r\n   * \r\n   * @param item - The oral chemotherapy item to update\r\n   * @param status - The new workflow status to assign\r\n   */\r\n  updateStatus(item: any, status: string): void {\r\n    // Placeholder for future service integration\r\n    // This will be implemented when the oral chemotherapy service is created\r\n  }\r\n\r\n  /**\r\n   * Update the priority level of an oral chemotherapy item\r\n   * \r\n   * @param item - The oral chemotherapy item to update\r\n   * @param priority - The new priority level\r\n   */\r\n  updatePriority(item: any, priority: string): void {\r\n    // Placeholder for future service integration\r\n  }\r\n\r\n  /**\r\n   * Get the appropriate CSS class for status display\r\n   * \r\n   * @param status - The status to map to a CSS class\r\n   * @returns The CSS class name corresponding to the status\r\n   */\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'status-complete';\r\n      case 'In Progress':\r\n        return 'status-in-progress';\r\n      case 'Pending':\r\n        return 'status-pending';\r\n      case 'Ordered':\r\n        return 'status-ordered';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh a specific worklist item from the server\r\n   * Uses signals to track loading state and update item data\r\n   */\r\n  refreshWorklistItem(item: any): void {\r\n    this.refreshWorklistItemById(item.id || item.compass_worklist_id);\r\n  }\r\n\r\n  /**\r\n   * Refresh a specific worklist item by ID with loading state\r\n   */\r\n  refreshWorklistItemById(itemId: number): void {\r\n    // Add item to loading set using signals\r\n    const currentLoading = new Set(this._loadingItems());\r\n    currentLoading.add(itemId);\r\n    this._loadingItems.set(currentLoading);\r\n    \r\n    // Placeholder for future service integration\r\n    // This will be implemented when the oral chemotherapy service is created\r\n    setTimeout(() => {\r\n      // Remove item from loading set\r\n      const newLoading = new Set(this._loadingItems());\r\n      newLoading.delete(itemId);\r\n      this._loadingItems.set(newLoading);\r\n    }, 1000);\r\n  }\r\n\r\n  /**\r\n   * Get cell value for display in table\r\n   * \r\n   * @param item - The worklist item\r\n   * @param columnName - The column name\r\n   * @returns The value to display in the cell\r\n   */\r\n  getCellValue(item: any, columnName: string): any {\r\n    switch (columnName) {\r\n      case 'Patient Name':\r\n        return item.patientName || item.patient?.name || 'N/A';\r\n      case 'Order Description':\r\n        return item.orderDescription || item.itemDescription || 'N/A';\r\n      case 'Workflow Status':\r\n        return item.workflowStatus?.status || item.status || 'N/A';\r\n      case 'Ordering Location':\r\n        return item.orderingLocation || 'N/A';\r\n      case 'Ordering Provider':\r\n        return item.orderingProvider || 'N/A';\r\n      case 'Scheduling Location':\r\n        return item.schedulingLocation || 'N/A';\r\n      case 'Schedule Status':\r\n        return item.schedule?.state || item.scheduleStatus || 'N/A';\r\n      case 'Order Status':\r\n        return item.subStatus?.subStatus || item.orderStatus || 'N/A';\r\n      case 'Priority':\r\n        return item.priority || 'Routine';\r\n      case 'Order Date':\r\n        if (item.origOrderDtTm || item.orderDate) {\r\n          const date = new Date(item.origOrderDtTm || item.orderDate);\r\n          const day = date.getDate().toString().padStart(2, '0');\r\n          const month = date.toLocaleString('en-US', { month: 'short' });\r\n          const year = date.getFullYear();\r\n          return `${day}-${month}-${year}`;\r\n        }\r\n        return '';\r\n      case 'EDOS Date':\r\n        if (item.edosDate) {\r\n          const date = new Date(item.edosDate);\r\n          const day = date.getDate().toString().padStart(2, '0');\r\n          const month = date.toLocaleString('en-US', { month: 'short' });\r\n          const year = date.getFullYear();\r\n          return `${day}-${month}-${year}`;\r\n        }\r\n        return '';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle column resize events\r\n   */\r\n  onColumnResize(event: { columnKey: string, width: number }): void {\r\n    if (event.columnKey === 'workflow' || event.columnKey === 'actions') {\r\n      // Handle special columns that are not in the column configuration\r\n      localStorage.setItem(`compass_oral_chemo_${event.columnKey}_width`, event.width.toString());\r\n    } else {\r\n      // Update column width in the configuration service\r\n      this.columnConfig.updateColumnWidth('oral-chemotherapy', event.columnKey, event.width);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get saved width for workflow and actions columns\r\n   */\r\n  getFixedColumnWidth(columnKey: string): number | undefined {\r\n    const saved = localStorage.getItem(`compass_oral_chemo_${columnKey}_width`);\r\n    return saved ? parseInt(saved) : undefined;\r\n  }\r\n\r\n  /**\r\n   * Reset column widths to default\r\n   */\r\n  resetColumnWidths(): void {\r\n    this.columnConfig.resetColumnWidths('oral-chemotherapy');\r\n    this.columnConfig.loadColumnWidths();\r\n  }\r\n\r\n  /**\r\n   * Handler for individual column filter changes\r\n   */\r\n  onColumnFilterChange(columnKey: string, selectedValues: string[] | null): void {\r\n    if (selectedValues && selectedValues.length > 0) {\r\n      this.filterSelections[columnKey] = selectedValues;\r\n    } else {\r\n      delete this.filterSelections[columnKey];\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handler for NG-Zorro table filter changes\r\n   */\r\n  onTableFilterChange(filters: any): void {\r\n    // Handle different filter payload formats\r\n    if (Array.isArray(filters)) {\r\n      filters.forEach((f: any) => {\r\n        if (f.key && Array.isArray(f.value)) {\r\n          this.filterSelections[f.key] = f.value;\r\n        }\r\n      });\r\n    } else if (filters && typeof filters === 'object') {\r\n      if (filters.detail && Array.isArray(filters.detail)) {\r\n        filters.detail.forEach((f: any) => {\r\n          if (f.key && Array.isArray(f.value)) {\r\n            this.filterSelections[f.key] = f.value;\r\n          }\r\n        });\r\n      } else if (!filters.detail && !filters.type) {\r\n        Object.keys(filters).forEach(key => {\r\n          if (Array.isArray(filters[key])) {\r\n            this.filterSelections[key] = filters[key];\r\n          }\r\n        });\r\n      }\r\n    }\r\n    \r\n    // Sync the current filter state with the UserPreferencesService\r\n    this.userPreferences.setCurrentFilterState('oral-chemotherapy', this.filterSelections);\r\n  }\r\n\r\n  /**\r\n   * Public method to clear all column filters\r\n   */\r\n  clearAllColumnFilters(): void {\r\n    this._preventingFilterRestoration = true;\r\n    this._isDataRefreshing = true;\r\n    \r\n    this.filterSelections = {};\r\n    \r\n    // Clear all column filter selections\r\n    const columns = this.columnConfig.getColumns('oral-chemotherapy');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.columnConfig.triggerUpdate();\r\n    this.cdr.detectChanges();\r\n    \r\n    setTimeout(() => {\r\n      this._preventingFilterRestoration = false;\r\n      this._isDataRefreshing = false;\r\n    }, 2000);\r\n  }\r\n\r\n  /**\r\n   * Clear filter selections that were set by predefined filters\r\n   */\r\n  private clearPredefinedFilterSelections(): void {\r\n    this.filterSelections = {};\r\n    \r\n    const columns = this.columnConfig.getColumns('oral-chemotherapy');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Programmatically restore table filters using NG-ZORRO's table API\r\n   */\r\n  restoreTableFilters(): void {\r\n    const hasFilters = Object.keys(this.filterSelections).some(key => \r\n      this.filterSelections[key] && this.filterSelections[key].length > 0\r\n    );\r\n    \r\n    if (!hasFilters) {\r\n      return;\r\n    }\r\n    \r\n    const columns = this.columnConfig.getColumns('oral-chemotherapy');\r\n    \r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        const selected = this.filterSelections[col.meaning] || [];\r\n        \r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n        \r\n        if (selected.length > 0) {\r\n          for (const opt of col.listOfFilter) {\r\n            if (selected.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Apply visual filters to the table columns\r\n   */\r\n  private applyVisualFilters(filter: PredefinedFilter): void {\r\n    const filters = filter.filters;\r\n    if (!filters) return;\r\n    \r\n    this.filterSelections = {};\r\n    \r\n    const columns = this.columnConfig.getColumns('oral-chemotherapy');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n    \r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        if (col.meaning === 'ORAL_CHEMO_WORKFLOW_STATUS' && filters.workflowStatus) {\r\n          for (const opt of col.listOfFilter) {\r\n            if (filters.workflowStatus.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (col.meaning === 'ORAL_CHEMO_SCHEDULE_STATUS' && filters.schedulingStatus) {\r\n          for (const opt of col.listOfFilter) {\r\n            if (filters.schedulingStatus.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Open milestone details drawer for the selected item\r\n   */\r\n  openMilestoneDetails(item: any): void {\r\n    this.selectedItem = item;\r\n    this.milestoneDetailsVisible = true;\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Handle milestone details visibility change\r\n   */\r\n  onMilestoneDetailsVisibleChange(visible: boolean): void {\r\n    this.milestoneDetailsVisible = visible;\r\n    if (!visible) {\r\n      this.selectedItem = null;\r\n    }\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Handle item refresh from milestone details\r\n   */\r\n  onItemRefreshed(updatedItem: any): void {\r\n    // Find and update the item in the worklist\r\n    const index = this.worklistItems.findIndex(item => \r\n      item.compass_worklist_id === updatedItem.compass_worklist_id\r\n    );\r\n    if (index !== -1) {\r\n      this.worklistItems[index] = updatedItem;\r\n      this.cdr.detectChanges();\r\n    }\r\n  }\r\n}\r\n","<nz-table\r\n  #worklistTable=\"nzTable\"\r\n  [nzData]=\"worklistItems\"\r\n  [nzBordered]=\"true\"\r\n  [nzPageSize]=\"8\"\r\n  [nzShowPagination]=\"true\"\r\n  [nzLoading]=\"loading\"\r\n  (nzFilterChange)=\"onTableFilterChange($event)\"\r\n>\r\n  <thead>\r\n    <tr>\r\n      <ng-container *ngFor=\"let column of listOfColumns()\">\r\n        <th\r\n          *ngIf=\"column.display && !column.filterable\"\r\n          [nzSortOrder]=\"column.sortOrder\"\r\n          [nzSortFn]=\"column.sortFn\"\r\n          [nzSortDirections]=\"column.sortDirections\"\r\n          [nzFilterMultiple]=\"column.filterMultiple\"\r\n          [style.width.px]=\"column.width\"\r\n          appResizableColumn\r\n          [columnKey]=\"column.meaning\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"500\"\r\n          (columnResize)=\"onColumnResize($event)\"\r\n        >\r\n          {{ column.name }}\r\n        </th>\r\n        <th\r\n          *ngIf=\"column.display && column.filterable\"\r\n          [nzColumnKey]=\"column.meaning\"\r\n          [nzSortOrder]=\"column.sortOrder\"\r\n          [nzSortFn]=\"column.sortFn\"\r\n          [nzSortDirections]=\"column.sortDirections\"\r\n          [nzFilterMultiple]=\"column.filterMultiple\"\r\n          [nzFilters]=\"column.listOfFilter\"\r\n          [nzFilterFn]=\"column.filterFn\"\r\n          (nzFilterChange)=\"onColumnFilterChange(column.meaning, $event)\"\r\n          [style.width.px]=\"column.width\"\r\n          appResizableColumn\r\n          [columnKey]=\"column.meaning\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"500\"\r\n          (columnResize)=\"onColumnResize($event)\"\r\n        >\r\n          {{ column.name }}\r\n        </th>\r\n      </ng-container>\r\n      <th \r\n        appResizableColumn \r\n        columnKey=\"workflow\" \r\n        [minWidth]=\"150\" \r\n        [maxWidth]=\"300\" \r\n        [style.width.px]=\"getFixedColumnWidth('workflow')\"\r\n        (columnResize)=\"onColumnResize($event)\">\r\n        Workflow\r\n      </th>\r\n      <th \r\n        appResizableColumn \r\n        columnKey=\"actions\" \r\n        [minWidth]=\"120\" \r\n        [maxWidth]=\"200\" \r\n        [style.width.px]=\"getFixedColumnWidth('actions')\"\r\n        (columnResize)=\"onColumnResize($event)\">\r\n        Actions\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <!-- Apply row highlighting based on compass configuration rules -->\r\n    <tr *ngFor=\"let item of worklistTable.data\" \r\n        [class.loading]=\"isItemLoading()(item.id || item.compass_worklist_id)\"\r\n        [class]=\"getRowHighlightClasses(item)\">\r\n      <ng-container *ngFor=\"let column of listOfColumns()\">\r\n        <td *ngIf=\"column.display\">\r\n          <ng-container *ngIf=\"column.meaning === 'ORAL_CHEMO_PATIENT'; else orderDescCell\">\r\n            <!-- Patient info cell with clickable chart opening functionality -->\r\n            <app-oral-chemo-patient-info [item]=\"item\"></app-oral-chemo-patient-info>\r\n          </ng-container>\r\n          <ng-template #orderDescCell>\r\n            <ng-container *ngIf=\"column.meaning === 'ORAL_CHEMO_ORDER_DESC'; else defaultCell\">\r\n              <app-oral-chemo-item-info [item]=\"item\"></app-oral-chemo-item-info>\r\n            </ng-container>\r\n            <ng-template #defaultCell>\r\n              {{ getCellValue(item, column.name) }}\r\n            </ng-template>\r\n          </ng-template>\r\n        </td>\r\n      </ng-container>\r\n      <td>\r\n        <!-- Workflow cell - placeholder for future workflow components -->\r\n        <div class=\"workflow-cell\">\r\n          <nz-tag [nzColor]=\"getStatusClass(getCellValue(item, 'Workflow Status'))\">\r\n            {{ getCellValue(item, 'Workflow Status') }}\r\n          </nz-tag>\r\n        </div>\r\n      </td>\r\n      <td>\r\n        <nz-space>\r\n          <button nz-button nzType=\"primary\" nzSize=\"small\" (click)=\"openMilestoneDetails(item)\" *nzSpaceItem>\r\n            <span nz-icon nzType=\"eye\" nzTheme=\"outline\"></span>\r\n            Details\r\n          </button>\r\n          <button nz-button nzType=\"default\" nzSize=\"small\" (click)=\"refreshWorklistItem(item)\" *nzSpaceItem [disabled]=\"isItemLoading()(item.id || item.compass_worklist_id)\">\r\n            <span nz-icon nzType=\"reload\" nzTheme=\"outline\" [nzSpin]=\"isItemLoading()(item.id || item.compass_worklist_id)\"></span>\r\n          </button>\r\n        </nz-space>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</nz-table>\r\n\r\n<!-- Milestone Details Drawer -->\r\n<app-oral-chemo-milestone-details\r\n  [worklistItem]=\"selectedItem\"\r\n  [visible]=\"milestoneDetailsVisible\"\r\n  (visibleChange)=\"onMilestoneDetailsVisibleChange($event)\"\r\n  (itemRefreshed)=\"onItemRefreshed($event)\">\r\n</app-oral-chemo-milestone-details>\r\n\r\n","import { Component, Input } from '@angular/core';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\nimport { mPageService } from '@clinicaloffice/clinical-office-mpage-core';\r\n\r\n/**\r\n * PatientInfoComponent - Oral Chemotherapy Patient Information with Cerner Action Link\r\n * \r\n * This component displays the patient name as a clickable link that opens\r\n * the patient chart in PowerChart using the Cerner VIEWPATIENT action.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Displays patient name as a clickable link\r\n * - Handles click events to open patient chart via Cerner action\r\n * - Validates required data before executing Cerner action\r\n * - Provides consistent styling with prior auth implementation\r\n * \r\n * INTEGRATION:\r\n * - Uses CernerActionService to execute VIEWPATIENT action\r\n * - Requires personId and encntrId for proper functionality\r\n * - Integrates with oral chemo worklist table for patient management\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemo-patient-info',\r\n  templateUrl: './patient-info.component.html',\r\n  styleUrls: ['./patient-info.component.scss']\r\n})\r\nexport class OralChemoPatientInfoComponent {\r\n  @Input() item!: any; // Oral chemo worklist item\r\n\r\n  constructor(private cernerAction: CernerActionService, private mPage: mPageService) {}\r\n\r\n  /**\r\n   * Opens patient chart using the OPENCHART CernerAction\r\n   * This method uses the DiscernObjectFactory to open the Patient Chart\r\n   * @param selectedItem The selected oral chemo worklist item\r\n   */\r\n  openPatientChart(selectedItem: any): void {\r\n    this.mPage.putLog('openChart function called', JSON.stringify(selectedItem));\r\n    // Log chart opening action for audit trail\r\n    if (selectedItem) {\r\n      this.cernerAction.CernerAction('OPENCHART', {\r\n        personId: selectedItem.personId,\r\n        encntrId: selectedItem.encntrId\r\n      });\r\n    }\r\n  }\r\n}","<div class=\"patient-info\">\r\n  <a \r\n    href=\"javascript:void(0)\" \r\n    (click)=\"openPatientChart(item)\"\r\n    class=\"patient-link\"\r\n    [title]=\"'Click to open patient chart for ' + (item?.patient?.name || 'Unknown Patient')\"\r\n  >\r\n    <div class=\"patient-name\">{{ item?.patient?.name || 'Unknown Patient' }}</div>\r\n  </a>\r\n</div>","import { Component, Input, Output, EventEmitter, ViewChild, ChangeDetectorRef, computed, signal } from '@angular/core';\r\nimport { ColumnConfigService } from '../../services/column-config.service';\r\nimport { ColumnItem } from '../../models/column-item.model';\r\nimport { PredefinedFilter } from '../../models/predefined-filter.model';\r\nimport { OralChemotherapyService } from '../../services/oral-chemotherapy.service';\r\n\r\n/**\r\n * OralChemotherapyComponent - Oral Chemotherapy Worklist Management\r\n * \r\n * This is the main container component for the Oral Chemotherapy tab, orchestrating\r\n * the display and management of oral chemotherapy orders that require clerk processing.\r\n * It coordinates between the filter bar and worklist table to provide a comprehensive\r\n * workflow management interface.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Serves as the primary container for oral chemotherapy functionality\r\n * - Manages communication between filter bar and worklist table components\r\n * - Handles initial data loading and refresh operations\r\n * - Coordinates sidebar state management for layout optimization\r\n * - Provides centralized error handling and user feedback\r\n * \r\n * ARCHITECTURE INTEGRATION:\r\n * - Consumes signals from OralChemotherapyService for reactive data updates\r\n * - Delegates column management to ColumnConfigService\r\n * - Coordinates with parent components for sidebar state management\r\n * - Uses child components for specialized functionality (filters, table)\r\n * \r\n * DATA FLOW:\r\n * 1. Initializes worklist data from OralChemotherapyService\r\n * 2. Provides filter controls via filter bar component\r\n * 3. Displays filtered results via worklist table component\r\n * 4. Handles user interactions and data refresh requests\r\n * 5. Manages loading states and error conditions\r\n * \r\n * SIGNAL INTEGRATION:\r\n * - Uses computed signals from OralChemotherapyService for filtered data\r\n * - Reactive updates eliminate manual subscription management\r\n * - Automatic re-rendering when underlying data changes\r\n * - Efficient change detection with minimal performance overhead\r\n * \r\n * USER WORKFLOW:\r\n * - Clerks access this tab to view pending oral chemotherapy orders\r\n * - Filter controls help focus on relevant work items\r\n * - Table provides detailed item information and action capabilities\r\n * - Progress tracking enables monitoring and updates\r\n * - Feedback system captures user input for continuous improvement\r\n * \r\n * LAYOUT MANAGEMENT:\r\n * - Responds to sidebar collapse/expand state for optimal space usage\r\n * - Coordinates with parent layout for consistent user experience\r\n * - Emits sidebar toggle events for layout state management\r\n * - Maintains responsive design across different screen sizes\r\n */\r\n@Component({\r\n  selector: 'app-oral-chemotherapy',\r\n  templateUrl: './oral-chemotherapy.component.html',\r\n  styleUrls: ['./oral-chemotherapy.component.scss']\r\n})\r\nexport class OralChemotherapyComponent {\r\n  @Input() SideBarIsCollapsed!: boolean;\r\n  @Output() sideBarToggle = new EventEmitter<void>();\r\n    \r\n  listOfColumns: ColumnItem[];\r\n\r\n  /**\r\n   * The current days filter value.\r\n   */\r\n  currentDaysFilter: number | 'all' = 'all';\r\n\r\n  /**\r\n   * The current global search term for filtering the worklist - using signal for reactivity\r\n   */\r\n  private _globalSearchTerm = signal<string>('');\r\n  \r\n  /**\r\n   * The currently active predefined filter\r\n   */\r\n  activePredefinedFilter: PredefinedFilter | null = null;\r\n\r\n  /**\r\n   * Reactive computed signal for filtered worklist items\r\n   * This automatically updates when the service data changes or the global search term changes\r\n   */\r\n  filteredWorklistItems = computed(() => {\r\n    const items = this.worklistService.filteredItems();\r\n    const search = this._globalSearchTerm().trim().toLowerCase();\r\n    if (!search) return items;\r\n    \r\n    return items.filter(item => {\r\n      // Patient Name\r\n      const patientName = item.patient?.name?.toLowerCase() || '';\r\n      // FIN\r\n      const fin = item.patient?.fin?.toLowerCase() || '';\r\n      // MRN\r\n      const mrn = item.patient?.mrn?.toLowerCase() || '';\r\n      // Order Description\r\n      const orderDesc = item.itemDescription?.toLowerCase() || '';\r\n      // Order ID\r\n      const orderId = item.orderId?.toString().toLowerCase() || '';\r\n      // Add more fields here as needed\r\n      return (\r\n        patientName.includes(search) ||\r\n        fin.includes(search) ||\r\n        mrn.includes(search) ||\r\n        orderDesc.includes(search) ||\r\n        orderId.includes(search)\r\n      );\r\n    });\r\n  });\r\n\r\n  /**\r\n   * Handler for the global search event from the filter bar.\r\n   * Updates the search term and triggers filtering.\r\n   */\r\n  onGlobalSearch(term: string): void {\r\n    this._globalSearchTerm.set(term);\r\n  }\r\n\r\n\r\n\r\n  constructor(\r\n    private columnConfig: ColumnConfigService, \r\n    private worklistService: OralChemotherapyService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    this.listOfColumns = this.columnConfig.getColumns('oral-chemotherapy');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Component initialization - setup filters and load initial worklist data\r\n    // Initialize the current filter value from the service\r\n    this.currentDaysFilter = this.worklistService.getCurrentDaysFilter();\r\n    \r\n    // CRITICAL: Set up the predefined filter IMMEDIATELY and SYNCHRONOUSLY\r\n    // This must happen before any async operations to prevent race conditions\r\n    // Get the default predefined filter from the centralized configuration\r\n    this.activePredefinedFilter = this.columnConfig.getDefaultPredefinedFilter('oral-chemotherapy');\r\n    \r\n    if (!this.activePredefinedFilter) {\r\n      // Fallback if no default filter is configured\r\n      // No default predefined filter found, using fallback\r\n      this.activePredefinedFilter = {\r\n        id: 'work-items',\r\n        label: 'Work Items',\r\n        route: 'oral-chemotherapy',\r\n        filters: {\r\n          workflowStatus: ['Ordered'],\r\n          schedulingStatus: ['Request', '']\r\n        },\r\n        isDefault: true,\r\n        order: 0\r\n      };\r\n    }\r\n    \r\n    // Apply the predefined filter to the service IMMEDIATELY - this is synchronous\r\n    this.worklistService.updatePredefinedFilter(this.activePredefinedFilter);\r\n    \r\n    // Manually trigger change detection to ensure UI updates after filter is set\r\n    this.cdr.detectChanges();\r\n    \r\n    // Now load worklist data - the filter is guaranteed to be set before any async operations\r\n    this.loadWorklistData().catch((error) => {\r\n      // Error loading worklist data\r\n    });\r\n\r\n    // Note: No need to subscribe to itemDetailUpdated$ here anymore since filteredWorklistItems \r\n    // is now a computed signal that automatically reacts to service signal changes\r\n  }\r\n\r\n  /**\r\n   * Load worklist data from the service\r\n   * Returns a Promise that resolves when data loading is complete\r\n   */\r\n  loadWorklistData(): Promise<void> {\r\n    // Fetch worklist data from the service\r\n    // The service will handle progressive loading and the component will react automatically\r\n    return new Promise<void>((resolve, reject) => {\r\n      this.worklistService.refreshWorklist().subscribe({\r\n        next: () => {\r\n          // Data loading completed - the reactive signals will handle updates\r\n          \r\n          // Manually trigger change detection after data loads to ensure UI updates\r\n          this.cdr.detectChanges();\r\n          \r\n          resolve();\r\n        },\r\n        error: (error) => {\r\n          // Handle worklist loading errors - could show user notification\r\n          // Error loading worklist data\r\n          reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handles the days filter change event\r\n   */\r\n  onDaysFilterChange(days: number | 'all'): void {\r\n    // Handle user-initiated days filter change\r\n    this.currentDaysFilter = days;\r\n    \r\n    // Update the service state - this will automatically update the filteredItems signal\r\n    this.worklistService.updateDaysFilter(days);\r\n  }\r\n\r\n  onSideBarToggle() {\r\n    this.sideBarToggle.emit();\r\n  }\r\n\r\n  /**\r\n   * Handler for column widths reset event from the filter bar.\r\n   */\r\n  onColumnWidthsReset(): void {\r\n    // The reset is handled in the filter bar component\r\n    // This method exists for completeness if needed in the future\r\n  }\r\n\r\n  /**\r\n   * Handler for refresh data event from the filter bar.\r\n   * Reloads the worklist data from the service.\r\n   */\r\n  onRefreshData(): void {\r\n    // Handle user-initiated data refresh request\r\n    this.loadWorklistData().catch((error) => {\r\n      // Error refreshing worklist data\r\n    });\r\n    // Don't call restoreTableFilters here - it will be called by ngOnChanges when data updates\r\n  }\r\n  \r\n  /**\r\n   * Handles predefined filter selection from the filter bar\r\n   */\r\n  onPredefinedFilterSelect(filter: PredefinedFilter | null): void {\r\n    // Update the component state\r\n    this.activePredefinedFilter = filter;\r\n    \r\n    // Update the service with the selected predefined filter\r\n    if (filter) {\r\n      this.worklistService.updatePredefinedFilter(filter);\r\n      // If the filter includes a days filter, update the current days filter\r\n      if (filter.filters.daysFilter !== undefined) {\r\n        this.currentDaysFilter = filter.filters.daysFilter;\r\n      }\r\n    } else {\r\n      this.worklistService.clearPredefinedFilter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the assignment filter toggle from the filter bar\r\n   * @param showMyAssignmentsOnly - true to show only current user's assignments, false to show all\r\n   */\r\n  onAssignmentToggle(showMyAssignmentsOnly: boolean): void {\r\n    // Update the service with the assignment filter state\r\n    this.worklistService.updateAssignmentFilter(showMyAssignmentsOnly);\r\n  }\r\n\r\n  /**\r\n   * Handles clearing column filters when switching between predefined filter tabs\r\n   * This ensures users see the expected predefined filter results without user-applied filters interfering\r\n   */\r\n  onClearColumnFilters(): void {\r\n    // Clear column filters in the worklist table component\r\n    // This will be implemented when the worklist table component is added\r\n  }\r\n  \r\n  /**\r\n   * Getter for the loading state from the service\r\n   * Used in template to show loading spinner\r\n   */\r\n  get isLoading(): boolean {\r\n    return this.worklistService.loading();\r\n  }\r\n}","<div class=\"compass-content-container\">\r\n  <div class=\"compass-content-main\">\r\n    <!-- Oral Chemotherapy Filter Bar Component -->\r\n    <app-oral-chemo-filter-bar\r\n      [predefinedFilters]=\"[]\"\r\n      [activePredefinedFilter]=\"activePredefinedFilter\"\r\n      [currentDaysFilter]=\"currentDaysFilter\"\r\n      [showMyAssignmentsOnly]=\"false\"\r\n      [isLoading]=\"isLoading\"\r\n      (predefinedFilterSelect)=\"onPredefinedFilterSelect($event)\"\r\n      (globalSearch)=\"onGlobalSearch($event)\"\r\n      (daysFilterChange)=\"onDaysFilterChange($event)\"\r\n      (assignmentToggle)=\"onAssignmentToggle($event)\"\r\n      (refreshData)=\"onRefreshData()\"\r\n      (columnWidthsReset)=\"onColumnWidthsReset()\">\r\n    </app-oral-chemo-filter-bar>\r\n    \r\n    <!-- Oral Chemotherapy Worklist Table Component -->\r\n    <app-oral-chemo-worklist\r\n      [worklistItems]=\"filteredWorklistItems()\"\r\n      [loading]=\"isLoading\"\r\n      [activePredefinedFilter]=\"activePredefinedFilter\">\r\n    </app-oral-chemo-worklist>\r\n  </div>\r\n</div>","import { Component, OnInit, OnChanges, Input, Output, EventEmitter, ChangeDetectorRef, effect } from '@angular/core';\r\nimport { CustomWorklist, CustomWorklistCreate } from '../../../models/custom-worklist.model';\r\nimport { FilterCriteria } from '../../../models/predefined-filter.model';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\nimport { CustomWorklistService } from '../../../services/custom-worklist.service';\r\nimport { PriorAuthService } from '../../../services/prior-auth.service';\r\n\r\n/**\r\n * CustomWorklistWizardComponent\r\n *\r\n * Modal wizard for creating and editing custom worklists.\r\n * Provides step-by-step interface for users to define filter criteria.\r\n */\r\n@Component({\r\n  selector: 'app-custom-worklist-wizard',\r\n  templateUrl: './custom-worklist-wizard.component.html',\r\n  styleUrls: ['./custom-worklist-wizard.component.scss']\r\n})\r\nexport class CustomWorklistWizardComponent implements OnInit, OnChanges {\r\n\r\n  /**\r\n   * Existing worklist to edit (null for new worklist)\r\n   */\r\n  @Input() editWorklist: CustomWorklist | null = null;\r\n\r\n  /**\r\n   * Current subroute (incoming/outgoing)\r\n   */\r\n  @Input() subroute: string = 'incoming';\r\n\r\n  /**\r\n   * Emits when the modal is closed\r\n   */\r\n  @Output() closeModal = new EventEmitter<void>();\r\n\r\n  /**\r\n   * Emits when a worklist is created or updated\r\n   */\r\n  @Output() worklistSaved = new EventEmitter<CustomWorklist>();\r\n\r\n  // Wizard state\r\n  currentStep: number = 0;\r\n  isEditMode: boolean = false;\r\n\r\n  // Form data\r\n  worklistName: string = '';\r\n  selectedWorkflowStatuses: string[] = [];\r\n  selectedSchedulingLocations: string[] = [];\r\n  selectedOrderingLocations: string[] = [];\r\n  selectedPriorities: string[] = [];\r\n  setAsDefault: boolean = false;\r\n\r\n  // Available options (loaded from compass configuration)\r\n  availableWorkflowStatuses: string[] = [];\r\n  availableSchedulingLocations: string[] = [];\r\n  availableOrderingLocations: string[] = [];\r\n  availablePriorities: string[] = [];\r\n\r\n  // Mapping between ordering location display labels and backend item values\r\n  // Key: display label (e.g., \"Lakeside Primary Care\")\r\n  // Value: backend item value (e.g., \"Lake Prim Care\")\r\n  private orderingLocationLabelToItemMap: Map<string, string> = new Map();\r\n  private orderingLocationItemToLabelMap: Map<string, string> = new Map();\r\n\r\n\r\n  constructor(\r\n    private columnConfigService: ColumnConfigService,\r\n    private customWorklistService: CustomWorklistService,\r\n    private priorAuthService: PriorAuthService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    // Watch for configuration loading and retry loading options when available\r\n    effect(() => {\r\n      const configLoaded = this.columnConfigService.configurationLoaded();\r\n      if (configLoaded) {\r\n        this.loadAvailableOptions();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadAvailableOptions();\r\n\r\n    // If editing, populate form with existing data\r\n    if (this.editWorklist) {\r\n      this.isEditMode = true;\r\n      this.populateFormFromWorklist(this.editWorklist);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Called when the modal becomes visible\r\n   */\r\n  ngOnChanges(): void {\r\n    this.loadAvailableOptions();\r\n  }\r\n\r\n  /**\r\n   * Load available filter options from compass configuration\r\n   */\r\n  private loadAvailableOptions(): void {\r\n    // Wait for configuration to be loaded\r\n    if (!this.columnConfigService.configurationLoaded()) {\r\n      console.log('CustomWorklistWizard: Configuration not yet loaded, will retry');\r\n      return;\r\n    }\r\n\r\n    const config = this.columnConfigService.compassConfiguration();\r\n    if (!config) {\r\n      console.log('CustomWorklistWizard: No configuration available');\r\n      return;\r\n    }\r\n\r\n    // Debug logging\r\n    console.log('CustomWorklistWizard: Loading available options from configuration');\r\n    console.log('CustomWorklistWizard: Configuration:', config);\r\n\r\n    // Extract available values from configuration data elements\r\n    this.loadWorkflowStatusesFromConfig(config);\r\n    this.loadLocationOptionsFromConfig(config);\r\n    this.loadPriorityOptionsFromConfig(config);\r\n    \r\n    // Debug logging for available options\r\n    console.log('CustomWorklistWizard: Available workflow statuses:', this.availableWorkflowStatuses);\r\n    console.log('CustomWorklistWizard: Available scheduling locations:', this.availableSchedulingLocations);\r\n    console.log('CustomWorklistWizard: Available ordering locations:', this.availableOrderingLocations);\r\n    console.log('CustomWorklistWizard: Available priorities:', this.availablePriorities);\r\n    \r\n    // Trigger change detection to ensure UI updates\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n  /**\r\n   * Load workflow status options from compass configuration\r\n   */\r\n  private loadWorkflowStatusesFromConfig(config: any): void {\r\n    const workflowStatusSet = new Set<string>();\r\n    \r\n    // Find the GLIDIAN workflow\r\n    const glidianWorkflow = config.workflows?.find((w: any) => w.meaning === 'GLIDIAN');\r\n    if (glidianWorkflow?.dataElements) {\r\n      glidianWorkflow.dataElements.forEach((element: any) => {\r\n        if (element.meaning === 'WORKFLOW_STATUS_ID' && element.display) {\r\n          workflowStatusSet.add(element.display);\r\n        }\r\n      });\r\n    }\r\n    \r\n    this.availableWorkflowStatuses = Array.from(workflowStatusSet).sort();\r\n  }\r\n\r\n  /**\r\n   * Load location options from compass configuration\r\n   */\r\n  private loadLocationOptionsFromConfig(config: any): void {\r\n    const schedulingLocationSet = new Set<string>();\r\n    const orderingLocationSet = new Set<string>();\r\n\r\n    // Clear the mapping\r\n    this.orderingLocationLabelToItemMap.clear();\r\n    this.orderingLocationItemToLabelMap.clear();\r\n\r\n    // Find the GLIDIAN workflow\r\n    const glidianWorkflow = config.workflows?.find((w: any) => w.meaning === 'GLIDIAN');\r\n    if (glidianWorkflow?.filterSets) {\r\n      glidianWorkflow.filterSets.forEach((filterSet: any) => {\r\n        if (filterSet.type === 'LocationOption') {\r\n          // Extract location values from filter sets\r\n          filterSet.filters?.forEach((filter: any) => {\r\n            if (filter.dataElement === 'schedulingLocation') {\r\n              filter.options?.forEach((option: any) => {\r\n                if (option.item) {\r\n                  schedulingLocationSet.add(option.item);\r\n                }\r\n              });\r\n            } else if (filter.dataElement === 'orderingLocation') {\r\n              // For ordering locations, use the filterSet label for display\r\n              // but maintain a mapping to the backend item value\r\n              if (filterSet.label && filter.options && filter.options.length > 0) {\r\n                const itemValue = filter.options[0].item;\r\n                const displayLabel = filterSet.label;\r\n\r\n                // Add label to dropdown (what user sees)\r\n                orderingLocationSet.add(displayLabel);\r\n\r\n                // Build bidirectional mapping\r\n                this.orderingLocationLabelToItemMap.set(displayLabel, itemValue);\r\n                this.orderingLocationItemToLabelMap.set(itemValue, displayLabel);\r\n              }\r\n            }\r\n          });\r\n        }\r\n      });\r\n    }\r\n\r\n    // If no configuration data is available, provide some default options\r\n    if (schedulingLocationSet.size === 0) {\r\n      schedulingLocationSet.add('CHDC South');\r\n      schedulingLocationSet.add('CHDC North');\r\n      schedulingLocationSet.add('Main Campus');\r\n    }\r\n    if (orderingLocationSet.size === 0) {\r\n      orderingLocationSet.add('Southern Medical Group');\r\n      orderingLocationSet.add('Internal Medicine');\r\n      orderingLocationSet.add('Cardiology');\r\n    }\r\n\r\n    this.availableSchedulingLocations = Array.from(schedulingLocationSet).sort();\r\n    this.availableOrderingLocations = Array.from(orderingLocationSet).sort();\r\n  }\r\n\r\n  /**\r\n   * Load priority options from compass configuration\r\n   */\r\n  private loadPriorityOptionsFromConfig(config: any): void {\r\n    const prioritySet = new Set<string>();\r\n    \r\n    // Find the GLIDIAN workflow\r\n    const glidianWorkflow = config.workflows?.find((w: any) => w.meaning === 'GLIDIAN');\r\n    if (glidianWorkflow?.dataElements) {\r\n      glidianWorkflow.dataElements.forEach((element: any) => {\r\n        if (element.meaning === 'PRIORITY_VALUE' && element.display) {\r\n          prioritySet.add(element.display);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // If no configuration data is available, provide some default priority options\r\n    if (prioritySet.size === 0) {\r\n      prioritySet.add('ASAP');\r\n      prioritySet.add('Routine');\r\n      prioritySet.add('Stat');\r\n      prioritySet.add('Today');\r\n    }\r\n    \r\n    this.availablePriorities = Array.from(prioritySet).sort();\r\n  }\r\n\r\n  /**\r\n   * Populate form fields from existing worklist (for edit mode)\r\n   */\r\n  private populateFormFromWorklist(worklist: CustomWorklist): void {\r\n    this.worklistName = worklist.name;\r\n    this.selectedWorkflowStatuses = worklist.filters.workflowStatus || [];\r\n    this.selectedSchedulingLocations = worklist.filters.schedulingLocation || [];\r\n\r\n    // Handle both old item values (e.g., \"Lake Prim Care\") and new labels (e.g., \"Lakeside Primary Care\")\r\n    // If the stored value is an old item value, convert it to the label for display\r\n    // If it's already a label, the map lookup returns undefined and we keep the original value\r\n    this.selectedOrderingLocations = (worklist.filters.orderingLocation || []).map(value => {\r\n      return this.orderingLocationItemToLabelMap.get(value) || value;\r\n    });\r\n\r\n    this.selectedPriorities = worklist.filters.priority || [];\r\n    this.setAsDefault = worklist.isDefault;\r\n  }\r\n\r\n  /**\r\n   * Move to next wizard step\r\n   */\r\n  nextStep(): void {\r\n    if (this.currentStep < 2) {\r\n      this.currentStep++;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Move to previous wizard step\r\n   */\r\n  previousStep(): void {\r\n    if (this.currentStep > 0) {\r\n      this.currentStep--;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if current step is valid\r\n   */\r\n  isStepValid(): boolean {\r\n    switch (this.currentStep) {\r\n      case 0:\r\n        // Step 1: Name is required\r\n        return this.worklistName.trim().length > 0;\r\n      case 1:\r\n        // Step 2: At least one filter must be selected\r\n        return this.hasAnyFiltersSelected();\r\n      case 2:\r\n        // Step 3: Review step is always valid\r\n        return true;\r\n      default:\r\n        return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if any filters are selected\r\n   */\r\n  hasAnyFiltersSelected(): boolean {\r\n    return (\r\n      this.selectedWorkflowStatuses.length > 0 ||\r\n      this.selectedSchedulingLocations.length > 0 ||\r\n      this.selectedOrderingLocations.length > 0 ||\r\n      this.selectedPriorities.length > 0\r\n    );\r\n  }\r\n\r\n\r\n\r\n  /**\r\n   * Build filter criteria from form data\r\n   */\r\n  private buildFilterCriteria(): FilterCriteria {\r\n    const filters: FilterCriteria = {};\r\n\r\n    if (this.selectedWorkflowStatuses.length > 0) {\r\n      filters.workflowStatus = this.selectedWorkflowStatuses;\r\n    }\r\n    if (this.selectedSchedulingLocations.length > 0) {\r\n      filters.schedulingLocation = this.selectedSchedulingLocations;\r\n    }\r\n    if (this.selectedOrderingLocations.length > 0) {\r\n      // Send display labels to backend (e.g., \"Lakeside Primary Care\")\r\n      // Backend will use these labels to discover specific locations\r\n      filters.orderingLocation = this.selectedOrderingLocations;\r\n    }\r\n    if (this.selectedPriorities.length > 0) {\r\n      filters.priority = this.selectedPriorities;\r\n    }\r\n\r\n    return filters;\r\n  }\r\n\r\n  /**\r\n   * Save the worklist (create or update)\r\n   */\r\n  saveWorklist(): void {\r\n    if (!this.isStepValid()) {\r\n      return;\r\n    }\r\n\r\n    const worklistData: CustomWorklistCreate = {\r\n      name: this.worklistName.trim(),\r\n      route: 'prior-auth',\r\n      subroute: this.subroute,\r\n      filters: this.buildFilterCriteria(),\r\n      isDefault: this.setAsDefault\r\n    };\r\n\r\n    let savedWorklist: CustomWorklist;\r\n\r\n    if (this.isEditMode && this.editWorklist) {\r\n      // Update existing worklist\r\n      this.customWorklistService.updateWorklist(this.editWorklist.id, worklistData);\r\n      // Get the updated worklist after the update\r\n      const updatedWorklist = this.customWorklistService.getWorklistById(this.editWorklist.id);\r\n      if (!updatedWorklist) {\r\n        console.error('Failed to retrieve updated worklist');\r\n        return;\r\n      }\r\n      savedWorklist = updatedWorklist;\r\n    } else {\r\n      // Create new worklist\r\n      savedWorklist = this.customWorklistService.createWorklist(worklistData);\r\n    }\r\n\r\n    // Emit saved worklist\r\n    this.worklistSaved.emit(savedWorklist);\r\n\r\n    // Close modal and reset form\r\n    this.close();\r\n  }\r\n\r\n  /**\r\n   * Close the modal and reset form\r\n   */\r\n  close(): void {\r\n    this.resetForm();\r\n    this.closeModal.emit();\r\n  }\r\n\r\n  /**\r\n   * Reset form to initial state\r\n   */\r\n  private resetForm(): void {\r\n    this.currentStep = 0;\r\n    this.isEditMode = false;\r\n    this.worklistName = '';\r\n    this.selectedWorkflowStatuses = [];\r\n    this.selectedSchedulingLocations = [];\r\n    this.selectedOrderingLocations = [];\r\n    this.selectedPriorities = [];\r\n    this.setAsDefault = false;\r\n  }\r\n\r\n  /**\r\n   * Get summary text for selected filters\r\n   */\r\n  getFilterSummary(): string {\r\n    const parts: string[] = [];\r\n\r\n    if (this.selectedWorkflowStatuses.length > 0) {\r\n      parts.push(`${this.selectedWorkflowStatuses.length} workflow status(es)`);\r\n    }\r\n    if (this.selectedSchedulingLocations.length > 0) {\r\n      parts.push(`${this.selectedSchedulingLocations.length} scheduling location(s)`);\r\n    }\r\n    if (this.selectedOrderingLocations.length > 0) {\r\n      parts.push(`${this.selectedOrderingLocations.length} ordering location(s)`);\r\n    }\r\n    if (this.selectedPriorities.length > 0) {\r\n      parts.push(`${this.selectedPriorities.length} priorit(ies)`);\r\n    }\r\n\r\n    return parts.length > 0 ? parts.join(', ') : 'No filters selected';\r\n  }\r\n}\r\n","<div class=\"custom-worklist-wizard-container\">\r\n  <!-- Header -->\r\n  <div class=\"wizard-header\">\r\n    <h2>{{ isEditMode ? 'Edit Custom Worklist' : 'Create Custom Worklist' }}</h2>\r\n    <button nz-button nzType=\"text\" nzSize=\"default\" (click)=\"close()\" class=\"close-button\">\r\n      <span nz-icon nzType=\"close\" nzTheme=\"outline\"></span>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"wizard-content\">\r\n    <!-- Wizard Steps -->\r\n    <nz-steps [nzCurrent]=\"currentStep\" nzSize=\"small\" class=\"wizard-steps\">\r\n      <nz-step nzTitle=\"Name\"></nz-step>\r\n      <nz-step nzTitle=\"Filters\"></nz-step>\r\n      <nz-step nzTitle=\"Review\"></nz-step>\r\n    </nz-steps>\r\n\r\n    <!-- Step 1: Name the worklist -->\r\n    <div *ngIf=\"currentStep === 0\" class=\"wizard-step\">\r\n      <h4>Name Your Custom Worklist</h4>\r\n      <p class=\"step-description\">Give your worklist a descriptive name so you can easily identify it later.</p>\r\n\r\n      <nz-form-item>\r\n        <nz-form-label [nzSpan]=\"24\" nzRequired>Worklist Name</nz-form-label>\r\n        <nz-form-control [nzSpan]=\"24\">\r\n          <input\r\n            nz-input\r\n            [(ngModel)]=\"worklistName\"\r\n            placeholder=\"e.g., High Priority Orders\"\r\n            maxlength=\"100\"\r\n            autocomplete=\"off\"\r\n          />\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n\r\n      <nz-form-item>\r\n        <nz-form-control [nzSpan]=\"24\">\r\n          <label nz-checkbox [(ngModel)]=\"setAsDefault\">\r\n            Set as default worklist (loads automatically)\r\n          </label>\r\n        </nz-form-control>\r\n      </nz-form-item>\r\n    </div>\r\n\r\n    <!-- Step 2: Select filters -->\r\n    <div *ngIf=\"currentStep === 1\" class=\"wizard-step\">\r\n      <h4>Define Filter Criteria</h4>\r\n      <p class=\"step-description\">Select one or more filters to define what items appear in your worklist.</p>\r\n\r\n      <div class=\"filter-grid\">\r\n        <div class=\"filter-section\">\r\n          <h5>Workflow Status</h5>\r\n          <nz-select\r\n            nzMode=\"multiple\"\r\n            nzPlaceHolder=\"Select workflow statuses\"\r\n            [(ngModel)]=\"selectedWorkflowStatuses\"\r\n            [nzShowSearch]=\"true\"\r\n            style=\"width: 100%;\">\r\n            <nz-option\r\n              *ngFor=\"let status of availableWorkflowStatuses\"\r\n              [nzLabel]=\"status\"\r\n              [nzValue]=\"status\">\r\n            </nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n\r\n        <div class=\"filter-section\">\r\n          <h5>Scheduling Location</h5>\r\n          <nz-select\r\n            nzMode=\"multiple\"\r\n            nzPlaceHolder=\"Select scheduling locations\"\r\n            [(ngModel)]=\"selectedSchedulingLocations\"\r\n            [nzShowSearch]=\"true\"\r\n            style=\"width: 100%;\">\r\n            <nz-option\r\n              *ngFor=\"let location of availableSchedulingLocations\"\r\n              [nzLabel]=\"location\"\r\n              [nzValue]=\"location\">\r\n            </nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <div class=\"filter-section\">\r\n          <h5>Ordering Location</h5>\r\n          <nz-select\r\n            nzMode=\"multiple\"\r\n            nzPlaceHolder=\"Select ordering locations\"\r\n            [(ngModel)]=\"selectedOrderingLocations\"\r\n            [nzShowSearch]=\"true\"\r\n            style=\"width: 100%;\">\r\n            <nz-option\r\n              *ngFor=\"let location of availableOrderingLocations\"\r\n              [nzLabel]=\"location\"\r\n              [nzValue]=\"location\">\r\n            </nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n        <div class=\"filter-section\">\r\n          <h5>Priority</h5>\r\n          <nz-select\r\n            nzMode=\"multiple\"\r\n            nzPlaceHolder=\"Select priorities\"\r\n            [(ngModel)]=\"selectedPriorities\"\r\n            [nzShowSearch]=\"true\"\r\n            style=\"width: 100%;\">\r\n            <nz-option\r\n              *ngFor=\"let priority of availablePriorities\"\r\n              [nzLabel]=\"priority\"\r\n              [nzValue]=\"priority\">\r\n            </nz-option>\r\n          </nz-select>\r\n        </div>\r\n\r\n      </div>\r\n\r\n      <div *ngIf=\"!hasAnyFiltersSelected()\" class=\"warning-message\">\r\n        <i nz-icon nzType=\"warning\" nzTheme=\"outline\"></i>\r\n        Please select at least one filter\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Step 3: Review -->\r\n    <div *ngIf=\"currentStep === 2\" class=\"wizard-step\">\r\n      <h4>Review Your Custom Worklist</h4>\r\n      <p class=\"step-description\">Review the worklist configuration before saving.</p>\r\n\r\n      <div class=\"review-section\">\r\n        <div class=\"review-item\">\r\n          <label>Worklist Name:</label>\r\n          <span class=\"review-value\">{{ worklistName }}</span>\r\n        </div>\r\n\r\n        <div class=\"review-item\">\r\n          <label>Default Worklist:</label>\r\n          <span class=\"review-value\">{{ setAsDefault ? 'Yes' : 'No' }}</span>\r\n        </div>\r\n\r\n        <div class=\"review-item\">\r\n          <label>Filters Applied:</label>\r\n          <span class=\"review-value\">{{ getFilterSummary() }}</span>\r\n        </div>\r\n\r\n        <div class=\"review-item\" *ngIf=\"selectedWorkflowStatuses.length > 0\">\r\n          <label>Workflow Statuses:</label>\r\n          <div class=\"chip-container\">\r\n            <nz-tag *ngFor=\"let status of selectedWorkflowStatuses\" nzColor=\"blue\">\r\n              {{ status }}\r\n            </nz-tag>\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div class=\"review-item\" *ngIf=\"selectedSchedulingLocations.length > 0\">\r\n          <label>Scheduling Locations:</label>\r\n          <div class=\"chip-container\">\r\n            <nz-tag *ngFor=\"let location of selectedSchedulingLocations\" nzColor=\"purple\">\r\n              {{ location }}\r\n            </nz-tag>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"review-item\" *ngIf=\"selectedOrderingLocations.length > 0\">\r\n          <label>Ordering Locations:</label>\r\n          <div class=\"chip-container\">\r\n            <nz-tag *ngFor=\"let location of selectedOrderingLocations\" nzColor=\"orange\">\r\n              {{ location }}\r\n            </nz-tag>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"review-item\" *ngIf=\"selectedPriorities.length > 0\">\r\n          <label>Priorities:</label>\r\n          <div class=\"chip-container\">\r\n            <nz-tag *ngFor=\"let priority of selectedPriorities\" nzColor=\"red\">\r\n              {{ priority }}\r\n            </nz-tag>\r\n          </div>\r\n        </div>\r\n\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Footer with Navigation Buttons -->\r\n    <div class=\"wizard-footer\">\r\n      <button nz-button nzType=\"default\" nzSize=\"default\" (click)=\"close()\">Cancel</button>\r\n      <div class=\"navigation-buttons\">\r\n        <button\r\n          *ngIf=\"currentStep > 0\"\r\n          nz-button\r\n          nzType=\"default\"\r\n          nzSize=\"default\"\r\n          (click)=\"previousStep()\">\r\n          <i nz-icon nzType=\"left\" nzTheme=\"outline\"></i>\r\n          Previous\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep < 2\"\r\n          nz-button\r\n          nzType=\"primary\"\r\n          nzSize=\"default\"\r\n          [disabled]=\"!isStepValid()\"\r\n          (click)=\"nextStep()\">\r\n          Next\r\n          <i nz-icon nzType=\"right\" nzTheme=\"outline\"></i>\r\n        </button>\r\n        <button\r\n          *ngIf=\"currentStep === 2\"\r\n          nz-button\r\n          nzType=\"primary\"\r\n          nzSize=\"default\"\r\n          [disabled]=\"!isStepValid()\"\r\n          (click)=\"saveWorklist()\">\r\n          <i nz-icon nzType=\"check\" nzTheme=\"outline\"></i>\r\n          {{ isEditMode ? 'Update Worklist' : 'Create Worklist' }}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthItemCodes } from '../../../../models/prior-auth.model';\r\n\r\ninterface CodeGroup {\r\n  type: string;\r\n  codes: PriorAuthItemCodes[];\r\n}\r\n\r\n/**\r\n * Component for displaying diagnosis and procedure codes in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-codes',\r\n  templateUrl: './codes.component.html',\r\n  styleUrls: ['./codes.component.scss']\r\n})\r\nexport class CodesComponent {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n\r\n  /**\r\n   * Get codes grouped by type\r\n   */\r\n  getCodesByType(): CodeGroup[] {\r\n    if (!this.worklistItem?.codeList || this.worklistItem.codeList.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    const codeGroups: { [key: string]: PriorAuthItemCodes[] } = {};\r\n    \r\n    this.worklistItem.codeList.forEach(code => {\r\n      if (!codeGroups[code.type]) {\r\n        codeGroups[code.type] = [];\r\n      }\r\n      codeGroups[code.type].push(code);\r\n    });\r\n\r\n    return Object.keys(codeGroups).map(type => ({\r\n      type: type,\r\n      codes: codeGroups[type]\r\n    }));\r\n  }\r\n} ","<nz-descriptions nzTitle=\"Diagnosis & Procedure Codes\" [nzColumn]=\"1\" nzBordered>\r\n  <nz-descriptions-item>\r\n    <div *ngIf=\"worklistItem && worklistItem.codeList && worklistItem.codeList.length > 0; else noCodes\">\r\n      <div *ngFor=\"let codeGroup of getCodesByType()\" class=\"code-group\">\r\n        <strong>{{ codeGroup.type }}:</strong>\r\n        <span *ngFor=\"let code of codeGroup.codes; let last = last\">\r\n          {{ code.identifier }}\r\n          <!-- Only show parenthesis if code.display is not blank -->\r\n          <ng-container *ngIf=\"code.display && code.display.trim() !== ''\">({{ code.display }})</ng-container>\r\n          <span *ngIf=\"!last\">, </span>\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <ng-template #noCodes>\r\n      <span class=\"no-codes\">No codes available</span>\r\n    </ng-template>\r\n  </nz-descriptions-item>\r\n</nz-descriptions> ","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges, ChangeDetectorRef, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { PriorAuthItem, PriorAuthComment } from '../../../../models/prior-auth.model';\r\nimport { PriorAuthService } from '../../../../services/prior-auth.service';\r\nimport { UserPreferencesService } from '../../../../services/user-preferences.service';\r\n\r\n/**\r\n * Component for displaying and managing comments in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-comments',\r\n  templateUrl: './comments.component.html',\r\n  styleUrls: ['./comments.component.scss']\r\n})\r\nexport class CommentsComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n  @Input() visible = false;\r\n  @Output() commentsCountChanged = new EventEmitter<number>();\r\n\r\n  private destroy$ = new Subject<void>();\r\n  private commentsSubscription: Subscription | null = null;\r\n\r\n  /**\r\n   * List of comments for the current worklist item\r\n   */\r\n  comments: PriorAuthComment[] = [];\r\n  /**\r\n   * Loading state for comments\r\n   */\r\n  isCommentsLoading = false;\r\n  /**\r\n   * New comment text for the add comment form\r\n   */\r\n  newCommentText = '';\r\n  /**\r\n   * Comment currently being edited (null if none)\r\n   */\r\n  editingComment: PriorAuthComment | null = null;\r\n  /**\r\n   * Text for the comment being edited\r\n   */\r\n  editingCommentText = '';\r\n  /**\r\n   * Loading state for comment update\r\n   */\r\n  isUpdatingComment = false;\r\n  /**\r\n   * Track the last loaded worklist item ID to prevent duplicate loads\r\n   */\r\n  private lastLoadedWorklistId: number | null = null;\r\n\r\n  constructor(\r\n    private worklistService: PriorAuthService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    if (this.worklistItem && this.visible) {\r\n      this.loadComments();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    const worklistItemChanged = changes['worklistItem'] && !changes['worklistItem'].firstChange;\r\n    const visibleChanged = changes['visible'] && !changes['visible'].firstChange;\r\n    \r\n    // Reset lastLoadedWorklistId if worklist item changed to a different one\r\n    if (worklistItemChanged && this.worklistItem && \r\n        changes['worklistItem'].previousValue?.compass_worklist_id !== this.worklistItem.compass_worklist_id) {\r\n      this.lastLoadedWorklistId = null;\r\n    }\r\n    \r\n    if (this.worklistItem && this.visible) {\r\n      if (worklistItemChanged || visibleChanged) {\r\n        this.loadComments();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Loads comments for the current worklist item using PriorAuthService\r\n   */\r\n    ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    if (this.commentsSubscription) {\r\n      this.commentsSubscription.unsubscribe();\r\n    }\r\n  }\r\n\r\n  loadComments(): void {\r\n    if (!this.worklistItem) return;\r\n\r\n    this.isCommentsLoading = true;\r\n    this.worklistService.getWorklistComments(this.worklistItem.compass_worklist_id);\r\n    \r\n    if (this.commentsSubscription) {\r\n      this.commentsSubscription.unsubscribe();\r\n    }\r\n    \r\n    this.commentsSubscription = this.worklistService.comments$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (comments: PriorAuthComment[]) => {\r\n          this.comments = comments;\r\n          this.isCommentsLoading = false;\r\n          this.commentsCountChanged.emit(comments.length);\r\n          this.cdr.detectChanges();\r\n        },\r\n        error: () => {\r\n          this.isCommentsLoading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  addComment(): void {\r\n    if (!this.worklistItem || !this.newCommentText.trim()) return;\r\n    this.isCommentsLoading = true;\r\n    this.worklistService.addWorklistComment(this.worklistItem.compass_worklist_id, this.newCommentText.trim())\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: () => {\r\n          this.newCommentText = '';\r\n          // No need to call loadComments() here, the stream will update automatically\r\n        },\r\n        error: () => {\r\n          this.isCommentsLoading = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Check if the current user can edit a comment (based on authorId matching current userId)\r\n   */\r\n  canEditComment(comment: PriorAuthComment): boolean {\r\n    const currentUser = this.userPreferencesService.getUserData();\r\n    return currentUser?.userId === comment.authorId;\r\n  }\r\n\r\n  /**\r\n   * Start editing a comment\r\n   */\r\n  startEditingComment(comment: PriorAuthComment): void {\r\n    this.editingComment = comment;\r\n    this.editingCommentText = comment.commentText;\r\n  }\r\n\r\n  /**\r\n   * Cancel editing a comment\r\n   */\r\n  cancelEditingComment(): void {\r\n    this.editingComment = null;\r\n    this.editingCommentText = '';\r\n  }\r\n\r\n  /**\r\n   * Update an existing comment\r\n   */\r\n  updateComment(): void {\r\n    if (!this.worklistItem || !this.editingComment || !this.editingCommentText.trim()) return;\r\n    \r\n    this.isUpdatingComment = true;\r\n    this.worklistService.updateWorklistComment(\r\n      this.worklistItem.compass_worklist_id, \r\n      this.editingComment.commentId, \r\n      this.editingCommentText.trim()\r\n    ).subscribe({\r\n      next: (updatedComment) => {\r\n        this.editingComment = null;\r\n        this.editingCommentText = '';\r\n        this.isUpdatingComment = false;\r\n        this.lastLoadedWorklistId = null; // Reset to force reload\r\n        this.loadComments(); // Reload comments to show updated data\r\n      },\r\n      error: () => {\r\n        this.isUpdatingComment = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Check if a comment is currently being edited\r\n   */\r\n  isCommentBeingEdited(comment: PriorAuthComment): boolean {\r\n    return this.editingComment?.commentId === comment.commentId;\r\n  }\r\n} ","<!-- Comments Section -->\r\n<div class=\"comments-section\" style=\"margin-top: 16px;\">\r\n  <div class=\"comments-container\">\r\n    <!-- Existing Comments -->\r\n    <div *ngIf=\"comments.length > 0\" class=\"comments-list\">\r\n      <div *ngFor=\"let comment of comments\" class=\"comment-item\">\r\n        <!-- Comment Text with Edit Button (Prominent) -->\r\n        <div *ngIf=\"!isCommentBeingEdited(comment)\" class=\"comment-text-container\">\r\n          <div class=\"comment-text\">\r\n            {{ comment.commentText }}\r\n          </div>\r\n          <button \r\n            *ngIf=\"canEditComment(comment)\"\r\n            nz-button \r\n            nzType=\"text\" \r\n            nzSize=\"small\"\r\n            (click)=\"startEditingComment(comment)\"\r\n            class=\"edit-comment-btn\"\r\n          >\r\n            <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n          </button>\r\n        </div>\r\n        \r\n        <!-- Edit Form (Prominent) -->\r\n        <div *ngIf=\"isCommentBeingEdited(comment)\" class=\"comment-edit-form\">\r\n          <nz-input-group [nzCompact]=\"true\">\r\n            <input \r\n              nz-input \r\n              [(ngModel)]=\"editingCommentText\" \r\n              placeholder=\"Edit comment...\"\r\n              (keyup.enter)=\"updateComment()\"\r\n              (keyup.escape)=\"cancelEditingComment()\"\r\n              style=\"flex: 1;\"\r\n            />\r\n            <button \r\n              nz-button \r\n              nzType=\"primary\" \r\n              nzSize=\"small\"\r\n              (click)=\"updateComment()\"\r\n              [disabled]=\"isUpdatingComment\"\r\n            >\r\n              <span nz-icon nzType=\"check\" nzTheme=\"outline\"></span>\r\n            </button>\r\n            <button \r\n              nz-button \r\n              nzType=\"default\" \r\n              nzSize=\"small\"\r\n              (click)=\"cancelEditingComment()\"\r\n            >\r\n              <span nz-icon nzType=\"close\" nzTheme=\"outline\"></span>\r\n            </button>\r\n          </nz-input-group>\r\n        </div>\r\n        \r\n        <!-- Comment Meta (Subtle) -->\r\n        <div class=\"comment-meta\">\r\n          <span class=\"comment-author\">{{ comment.author }}</span>\r\n          <span class=\"comment-date\">{{ comment.createdDateTime | date:'M/d/yy h:mm a' }}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <!-- Add New Comment Section -->\r\n    <div class=\"add-comment-section\" style=\"margin-top: 16px;\">\r\n      <nz-input-group [nzCompact]=\"true\">\r\n        <input \r\n          nz-input \r\n          [(ngModel)]=\"newCommentText\" \r\n          placeholder=\"Add a comment...\"\r\n          (keyup.enter)=\"addComment()\"\r\n          style=\"flex: 1;\"\r\n        />\r\n        <button \r\n          nz-button \r\n          nzType=\"primary\" \r\n          nzSize=\"small\"\r\n          (click)=\"addComment()\"\r\n          [disabled]=\"!newCommentText.trim() || isCommentsLoading\"\r\n          style=\"border-radius: 0;\"\r\n        >\r\n          <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\r\n          Add Comment\r\n        </button>\r\n      </nz-input-group>\r\n    </div>\r\n  </div>\r\n</div> ","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { PriorAuthItem, MilestoneUpdateRequest } from '../../../../models/prior-auth.model';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\nimport { MessagingService } from '../../../../services/messaging.service';\r\nimport { PriorAuthService } from '../../../../services/prior-auth.service';\r\n\r\n/**\r\n * Component for displaying item details and order actions in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-item-details',\r\n  templateUrl: './item-details.component.html',\r\n  styleUrls: ['./item-details.component.scss']\r\n})\r\nexport class ItemDetailsComponent {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n  @Output() itemRefreshed = new EventEmitter<PriorAuthItem>();\r\n\r\n  isLoading = false;\r\n  isMovingToReady = false;\r\n\r\n  constructor(\r\n    private cernerActionService: CernerActionService,\r\n    private messagingService: MessagingService,\r\n    private worklistService: PriorAuthService\r\n  ) {}\r\n\r\n  /**\r\n   * Get priority color for tags\r\n   */\r\n  getPriorityColor(priority: string): string {\r\n    switch (priority?.toLowerCase()) {\r\n      case 'high':\r\n        return 'red';\r\n      case 'normal':\r\n        return 'blue';\r\n      case 'low':\r\n        return 'green';\r\n      default:\r\n        return 'default';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Modify the order using CernerActionService\r\n   * Builds the required object and calls the MODIFY_ORDER action\r\n   */\r\n  async modifyOrder(): Promise<void> {\r\n    if (!this.worklistItem) {\r\n      this.messagingService.error('No worklist item available for order modification');\r\n      return;\r\n    }\r\n\r\n    if (!this.worklistItem.orderId || this.worklistItem.orderId <= 0) {\r\n      this.messagingService.error('No valid order ID available for modification');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Build the data object for the CernerAction service\r\n      const actionData = {\r\n        orderId: this.worklistItem.orderId,\r\n        personId: this.worklistItem.personId,\r\n        encntrId: this.worklistItem.encntrId || 0,\r\n        // Optional parameters with defaults\r\n        enablePowerPlans: false,\r\n        defaultDisplay: 32, // Default to order profile\r\n        silentSign: false   // Default to normal operation\r\n      };\r\n\r\n      // Call the CernerAction service\r\n      await this.cernerActionService.CernerAction('MODIFY_ORDER', actionData);\r\n      \r\n      this.messagingService.success('Opening order modification window...');\r\n      \r\n    } catch (error) {\r\n      this.messagingService.error('Failed to open order modification window');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cancel the order using CernerActionService\r\n   * Builds the required object and calls the CANCEL_ORDER action\r\n   */\r\n  async cancelOrder(): Promise<void> {\r\n    if (!this.worklistItem) {\r\n      this.messagingService.error('No worklist item available for order cancellation');\r\n      return;\r\n    }\r\n\r\n    if (!this.worklistItem.orderId || this.worklistItem.orderId <= 0) {\r\n      this.messagingService.error('No valid order ID available for cancellation');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Build the data object for the CernerAction service\r\n      const actionData = {\r\n        orderId: this.worklistItem.orderId,\r\n        personId: this.worklistItem.personId,\r\n        encntrId: this.worklistItem.encntrId || 0,\r\n        // Optional parameters with defaults\r\n        enablePowerPlans: false,\r\n        defaultDisplay: 32, // Default to order profile\r\n        silentSign: false   // Default to normal operation\r\n      };\r\n\r\n      // Call the CernerAction service\r\n      await this.cernerActionService.CernerAction('CANCEL_ORDER', actionData);\r\n      \r\n      this.messagingService.success('Opening order cancellation window...');\r\n      \r\n    } catch (error) {\r\n      this.messagingService.error('Failed to open order cancellation window');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Cancel and reorder using CernerActionService\r\n   * Builds the required object and calls the CANCEL_REORDER action\r\n   */\r\n  async cancelReorder(): Promise<void> {\r\n    if (!this.worklistItem) {\r\n      this.messagingService.error('No worklist item available for cancel and reorder');\r\n      return;\r\n    }\r\n\r\n    if (!this.worklistItem.orderId || this.worklistItem.orderId <= 0) {\r\n      this.messagingService.error('No valid order ID available for cancel and reorder');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Build the data object for the CernerAction service\r\n      const actionData = {\r\n        orderId: this.worklistItem.orderId,\r\n        personId: this.worklistItem.personId,\r\n        encntrId: this.worklistItem.encntrId || 0,\r\n        // Optional parameters with defaults\r\n        enablePowerPlans: false,\r\n        defaultDisplay: 32, // Default to order profile\r\n        silentSign: false   // Default to normal operation\r\n      };\r\n\r\n      // Call the CernerAction service\r\n      await this.cernerActionService.CernerAction('CANCEL_REORDER', actionData);\r\n      \r\n      this.messagingService.success('Opening cancel and reorder window...');\r\n      \r\n    } catch (error) {\r\n      this.messagingService.error('Failed to open cancel and reorder window');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reprocess COMPASS for the current worklist item by calling the backend service.\r\n   * Sends requestType 'reprocessCompass' and the compass_worklist_id as requestId.\r\n   */\r\n  reprocessCompass(): void {\r\n    if (!this.worklistItem) return;\r\n    const worklistId = this.worklistItem.compass_worklist_id;\r\n    this.isLoading = true;\r\n    this.worklistService.reprocessCompass(worklistId).subscribe({\r\n      next: (result) => {\r\n        this.messagingService.success('COMPASS reprocessing triggered successfully.');\r\n        // Emit event to refresh the worklist item after reprocessing\r\n        this.itemRefreshed.emit(this.worklistItem!);\r\n      },\r\n      error: (err) => {\r\n        this.messagingService.error('Failed to reprocess COMPASS.');\r\n      },\r\n      complete: () => {\r\n        this.isLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Move the worklist item to Ready to Schedule status\r\n   * Sets the GLIDIAN milestone to Not Applicable status\r\n   */\r\n  moveToReadyToSchedule(): void {\r\n    if (!this.worklistItem || !this.worklistItem.milestones) {\r\n      this.messagingService.error('No worklist item or milestones available');\r\n      return;\r\n    }\r\n\r\n    // Find the GLIDIAN milestone\r\n    const glidianMilestone = this.worklistItem.milestones.find(m => m.meaning === 'GLIDIAN');\r\n\r\n    if (!glidianMilestone) {\r\n      this.messagingService.error('GLIDIAN milestone not found for this item.');\r\n      return;\r\n    }\r\n\r\n    this.isMovingToReady = true;\r\n\r\n    // Prepare the request data for milestone update\r\n    const requestData: MilestoneUpdateRequest = {\r\n      compassMilestoneId: glidianMilestone.milestoneId,\r\n      status: 'Not Applicable',\r\n      statusDateTime: new Date(),\r\n      completedDate: new Date(),\r\n      actionMeaning: 'Moved to Ready to Schedule',\r\n      milestoneData: glidianMilestone.milestoneData || []\r\n    };\r\n\r\n    // Call the updateMilestone service\r\n    this.worklistService.updateMilestone(requestData, this.worklistItem.compass_worklist_id)\r\n      .subscribe({\r\n        next: (response) => {\r\n          this.isMovingToReady = false;\r\n          if (response.success) {\r\n            const patientName = this.worklistItem?.patient?.name || 'Unknown Patient';\r\n            this.messagingService.success(`GLIDIAN milestone set to Not Applicable for ${patientName}. Item ready to schedule.`);\r\n          } else {\r\n            this.messagingService.error(`Failed to update GLIDIAN milestone: ${response.message || 'Unknown error'}. Please refresh and try again.`);\r\n          }\r\n        },\r\n        error: (error) => {\r\n          this.isMovingToReady = false;\r\n          this.messagingService.error('Failed to update GLIDIAN milestone. Please refresh and try again.');\r\n        }\r\n      });\r\n  }\r\n} ","<nz-descriptions nzTitle=\"\" [nzColumn]=\"2\" nzBordered>\r\n  <nz-descriptions-item nzTitle=\"Item Description\">\r\n    <strong>{{ worklistItem?.itemDescription }}</strong>\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Order ID\">\r\n    {{ worklistItem?.orderId || 'N/A' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Workflow Type\">\r\n    {{ worklistItem?.workflowType }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Priority\">\r\n    <nz-tag [nzColor]=\"getPriorityColor(worklistItem?.priority || '')\">\r\n      {{ worklistItem?.priority }}\r\n    </nz-tag>\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Ordering Location\">\r\n    {{ worklistItem?.orderingLocation }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Ordering Provider\">\r\n    {{ worklistItem?.orderingProvider }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Scheduling Location\">\r\n    {{ worklistItem?.schedulingLocation }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Order Date\">\r\n    {{ worklistItem?.origOrderDtTm | date:'short' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"EDOS\">\r\n    {{ worklistItem?.edosDate | date:'short' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Last Updated\">\r\n    {{ worklistItem?.workflowUpdateDateTime | date:'short' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Order Actions\" nzSpan=\"2\">\r\n    <div class=\"order-actions-container\">\r\n      <button \r\n        *ngIf=\"worklistItem && worklistItem.orderId && worklistItem.orderId > 0 && worklistItem.encntrId && worklistItem.encntrId > 0\"\r\n        nz-button \r\n        nzType=\"primary\" \r\n        nzSize=\"small\"\r\n        (click)=\"modifyOrder()\"\r\n        nz-tooltip\r\n        nzTooltipTitle=\"Modify Order\"\r\n        class=\"modify-order-btn\"\r\n      >\r\n        <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n        Modify Order\r\n      </button>\r\n      <button \r\n        *ngIf=\"worklistItem && worklistItem.orderId && worklistItem.orderId > 0 && worklistItem.encntrId && worklistItem.encntrId > 0\"\r\n        nz-button \r\n        nzType=\"default\" \r\n        nzDanger\r\n        nzSize=\"small\"\r\n        (click)=\"cancelOrder()\"\r\n        nz-tooltip\r\n        nzTooltipTitle=\"Cancel Order\"\r\n        class=\"cancel-order-btn\"\r\n      >\r\n        <span nz-icon nzType=\"close-circle\" nzTheme=\"outline\"></span>\r\n        Cancel Order\r\n      </button>\r\n      <button \r\n        *ngIf=\"worklistItem && worklistItem.orderId && worklistItem.orderId > 0 && worklistItem.encntrId && worklistItem.encntrId > 0\"\r\n        nz-button \r\n        nzType=\"default\" \r\n        nzSize=\"small\"\r\n        (click)=\"cancelReorder()\"\r\n        nz-tooltip\r\n        nzTooltipTitle=\"Cancel and Reorder\"\r\n        class=\"cancel-reorder-btn\"\r\n      >\r\n        <span nz-icon nzType=\"redo\" nzTheme=\"outline\"></span>\r\n        Cancel & Reorder\r\n      </button>\r\n    </div>\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"COMPASS Actions\" nzSpan=\"2\">\r\n    <div class=\"compass-actions-container\">\r\n      <button\r\n        nz-button\r\n        nzType=\"default\"\r\n        nzSize=\"small\"\r\n        (click)=\"reprocessCompass()\"\r\n        nz-tooltip\r\n        nzTooltipTitle=\"Reprocess COMPASS for this item\"\r\n        class=\"reprocess-compass-btn\"\r\n        [disabled]=\"isLoading\"\r\n      >\r\n        <span nz-icon nzType=\"sync\" nzTheme=\"outline\" [nzSpin]=\"isLoading\"></span>\r\n        Reprocess COMPASS\r\n      </button>\r\n      <button\r\n        nz-button\r\n        nzType=\"primary\"\r\n        nzSize=\"small\"\r\n        (click)=\"moveToReadyToSchedule()\"\r\n        nz-tooltip\r\n        nzTooltipTitle=\"Move to Ready to Schedule status\"\r\n        class=\"ready-to-schedule-btn\"\r\n        [disabled]=\"isMovingToReady\"\r\n      >\r\n        <span nz-icon nzType=\"check-circle\" nzTheme=\"outline\" [nzSpin]=\"isMovingToReady\"></span>\r\n        Ready to Schedule\r\n      </button>\r\n    </div>\r\n  </nz-descriptions-item>\r\n</nz-descriptions> ","import { Component, Input, Output, EventEmitter, OnInit, OnChanges, SimpleChanges, ChangeDetectorRef, ChangeDetectionStrategy } from '@angular/core';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { PriorAuthItem, PriorAuthMilestone, PriorAuthItemCodes, PriorAuthAction, PriorAuthComment } from '../../../models/prior-auth.model';\r\nimport { PriorAuthService } from '../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../services/messaging.service';\r\nimport { CernerActionService } from '../../../services/cerner-action.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { FeedbackFormComponent, FeedbackData } from '../../feedback-form/feedback-form.component';\r\n\r\ninterface CodeGroup {\r\n  type: string;\r\n  codes: PriorAuthItemCodes[];\r\n}\r\n\r\n/**\r\n * Interface for timeline items that can be either milestones or actions\r\n */\r\ninterface TimelineItem {\r\n  id: number;\r\n  type: 'milestone' | 'action';\r\n  name: string;\r\n  description?: string;\r\n  status: string;\r\n  dateTime: Date;\r\n  milestoneId?: number; // For actions that belong to a milestone\r\n  meaning?: string;\r\n  milestoneData?: any[];\r\n  required?: boolean; // Added for milestones\r\n  actionBy?: string; // The user who performed the action (for actions only)\r\n}\r\n\r\n@Component({\r\n  selector: 'app-milestone-details',\r\n  templateUrl: './milestone-details.component.html',\r\n  styleUrls: ['./milestone-details.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class MilestoneDetailsComponent implements OnInit, OnChanges {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n  @Input() visible = false;\r\n  @Output() visibleChange = new EventEmitter<boolean>();\r\n  /**\r\n   * Emits when the worklist item is refreshed so the parent can update the table row.\r\n   */\r\n  @Output() itemRefreshed = new EventEmitter<PriorAuthItem>();\r\n  \r\n  isLoading = false;\r\n  drawerWidth = 1000;\r\n  isRefreshing = false;\r\n  \r\n  // Track copying state\r\n  isCopying = false;\r\n  \r\n  // Track comments count for badge display\r\n  commentsCount = 0;\r\n  \r\n  // Track if comments panel should be expanded\r\n  commentsPanelExpanded = false;\r\n\r\n  // New properties to manage panel states\r\n  panelStates = {\r\n    patientInfo: true,\r\n    comments: false,\r\n    itemDetails: true,\r\n    codes: true,\r\n    workflowStatus: true,\r\n    payors: true,\r\n    userAssignment: false,\r\n    documentSelection: false,\r\n    milestoneHistory: false,\r\n    supportInfo: false\r\n  };\r\n  \r\n  constructor(\r\n    private worklistService: PriorAuthService,\r\n    private modalService: NzModalService,\r\n    private messagingService: MessagingService,\r\n    private cernerActionService: CernerActionService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef // Inject ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Component initialization\r\n  }\r\n\r\n  // New methods to expand/collapse all\r\n  expandAll(): void {\r\n    this.setAllPanelStates(true);\r\n  }\r\n\r\n  collapseAll(): void {\r\n    this.setAllPanelStates(false);\r\n  }\r\n\r\n  private setAllPanelStates(state: boolean): void {\r\n    this.panelStates = {\r\n      patientInfo: state,\r\n      comments: state,\r\n      itemDetails: state,\r\n      codes: state,\r\n      workflowStatus: state,\r\n      payors: state,\r\n      userAssignment: state,\r\n      documentSelection: state,\r\n      milestoneHistory: state,\r\n      supportInfo: state\r\n    };\r\n    // Special handling for comments panel badge\r\n    this.commentsPanelExpanded = state;\r\n    this.cdr.detectChanges();\r\n  }\r\n  \r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // Handle worklistItem changes\r\n    if (changes['worklistItem'] && changes['worklistItem'].currentValue) {\r\n      const item = changes['worklistItem'].currentValue;\r\n      // console.log(`[MilestoneDetails] Loading item ${item.compass_worklist_id}`);\r\n      // console.time(`MilestoneDetails-ItemLoad-${item.compass_worklist_id}`);\r\n      \r\n      // Log data sizes for debugging\r\n      // console.log(`[MilestoneDetails] Item data sizes for ${item.compass_worklist_id}:`, {\r\n        // milestones: item.milestones?.length || 0,\r\n        // actions: item.actions?.length || 0,\r\n        // codeList: item.codeList?.length || 0,\r\n        // payors: item.payors?.length || 0,\r\n        // // Log any arrays or objects that might be large\r\n        // milestonesDataSize: JSON.stringify(item.milestones || []).length,\r\n        // actionsDataSize: JSON.stringify(item.actions || []).length,\r\n        // totalDataSize: JSON.stringify(item).length\r\n      // });\r\n      \r\n      // Auto-expand User Assignment panel if there's an assigned user\r\n      if (item.assignedTo || item.assignedName) {\r\n        this.panelStates.userAssignment = true;\r\n      }\r\n      \r\n      // Use setTimeout to measure after render\r\n      setTimeout(() => {\r\n        // console.timeEnd(`MilestoneDetails-ItemLoad-${item.compass_worklist_id}`);\r\n      }, 0);\r\n    }\r\n    \r\n    if (changes['visible']) {\r\n      // console.log(`[MilestoneDetails] Visibility changed to: ${changes['visible'].currentValue}`);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle comments count change from the comments component\r\n   */\r\n  onCommentsCountChanged(count: number): void {\r\n    this.commentsCount = count;\r\n    \r\n    // Automatically expand comments panel if there are comments\r\n    if (count > 0 && !this.commentsPanelExpanded) {\r\n      this.commentsPanelExpanded = true;\r\n      this.panelStates.comments = true;\r\n    } else if (count === 0) {\r\n        this.panelStates.comments = false;\r\n    }\r\n    \r\n    this.cdr.detectChanges(); // Force UI update for badge\r\n  }\r\n\r\n  /**\r\n   * Handle document updates from the document selection component\r\n   */\r\n  onDocumentsUpdated(): void {\r\n    // Refresh the current worklist item to get updated document information\r\n    if (this.worklistItem) {\r\n      this.refreshCurrentItem();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle document list refreshes from the document selection component\r\n   */\r\n  onDocumentsRefreshed(): void {\r\n    // The document list was refreshed (date/search changes), \r\n    // but we don't need to refresh the entire worklist item\r\n    // Just ensure the UI is updated\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n\r\n  onDrawerWidthChange(width: number): void {\r\n    // Add logging to detect performance issues with slider\r\n    if (this.worklistItem) {\r\n      // console.log(`[MilestoneDetails] Drawer width changing for item ${this.worklistItem.compass_worklist_id}: ${width}px`);\r\n    }\r\n    this.drawerWidth = width;\r\n    \r\n    // Force change detection to see if this helps with slider responsiveness\r\n    this.cdr.detectChanges();\r\n  }\r\n\r\n\r\n  \r\n  \r\n  close(): void {\r\n    this.visible = false;\r\n    this.visibleChange.emit(false);\r\n  }\r\n\r\n  /**\r\n   * Open feedback modal for the current item\r\n   */\r\n  openFeedbackModal(): void {\r\n    if (!this.worklistItem) return;\r\n\r\n    const modalRef = this.modalService.create({\r\n      nzTitle: 'Submit Feedback',\r\n      nzContent: FeedbackFormComponent,\r\n      nzWidth: 500,\r\n      nzData: {\r\n        itemReference: this.worklistItem.itemDescription || 'N/A',\r\n        itemType: 'Prior Authorization',\r\n        itemMeaning: \"WORKLISTITEM\",\r\n        itemId: this.worklistItem.compass_worklist_id,\r\n        item: this.worklistItem\r\n      },\r\n      nzFooter: null,\r\n      nzClosable: true,\r\n      nzMaskClosable: false\r\n    });\r\n\r\n    // Handle feedback submission\r\n    modalRef.afterClose.subscribe((result: FeedbackData | undefined) => {\r\n      if (result) {\r\n        // Feedback was successfully submitted for the current worklist item\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Refresh the current worklist item by ID\r\n   */\r\n  refreshCurrentItem(): void {\r\n    if (!this.worklistItem) return;\r\n    this.isRefreshing = true;\r\n    // Initiate refresh of the current worklist item data\r\n    this.worklistService.getPriorAuthItemById(this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (updatedItem) => {\r\n        if (updatedItem) {\r\n          // Update the current item with the latest data from the server\r\n          this.worklistItem = updatedItem;\r\n          this.itemRefreshed.emit(updatedItem); // Notify parent\r\n        }\r\n      },\r\n      error: (err) => {\r\n        // Handle error during item refresh - could show user notification\r\n      },\r\n      complete: () => {\r\n        // Item refresh operation completed\r\n        this.isRefreshing = false;\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Copy the entire worklist item data to clipboard as JSON\r\n   */\r\n  async copyItemDataToClipboard(): Promise<void> {\r\n    // console.log('[MilestoneDetailsComponent] copyItemDataToClipboard called');\r\n    // console.log('[MilestoneDetailsComponent] worklistItem:', this.worklistItem);\r\n    \r\n    if (!this.worklistItem) {\r\n      // console.warn('[MilestoneDetailsComponent] No worklist item available for copying');\r\n      return;\r\n    }\r\n    \r\n    this.isCopying = true;\r\n    // console.log('[MilestoneDetailsComponent] Copying started, isCopying:', this.isCopying);\r\n    \r\n    try {\r\n      // Create a clean copy of the worklist item data\r\n      const itemData = {\r\n        compass_worklist_id: this.worklistItem.compass_worklist_id,\r\n        personId: this.worklistItem.personId,\r\n        encntrId: this.worklistItem.encntrId,\r\n        orderId: this.worklistItem.orderId,\r\n        workflow_id: this.worklistItem.workflow_id,\r\n        itemDescription: this.worklistItem.itemDescription,\r\n        workflowType: this.worklistItem.workflowType,\r\n        priority: this.worklistItem.priority,\r\n        orderingLocation: this.worklistItem.orderingLocation,\r\n        orderingProvider: this.worklistItem.orderingProvider,\r\n        schedulingLocation: this.worklistItem.schedulingLocation,\r\n        origOrderDtTm: this.worklistItem.origOrderDtTm,\r\n        edosDate: this.worklistItem.edosDate,\r\n        workflowUpdateDateTime: this.worklistItem.workflowUpdateDateTime,\r\n        workflowUpdateCount: this.worklistItem.workflowUpdateCount,\r\n        dataRefreshDtTm: this.worklistItem.dataRefreshDtTm,\r\n        patient: this.worklistItem.patient,\r\n        workflowStatus: this.worklistItem.workflowStatus,\r\n        subStatus: this.worklistItem.subStatus,\r\n        schedule: this.worklistItem.schedule,\r\n        codeList: this.worklistItem.codeList,\r\n        payors: this.worklistItem.payors,\r\n        milestones: this.worklistItem.milestones,\r\n        actions: this.worklistItem.actions,\r\n        // Add any additional fields that might be useful for troubleshooting\r\n        _exportedAt: new Date().toISOString(),\r\n        _exportedBy: 'Milestone Details Component'\r\n      };\r\n      \r\n      // console.log('[MilestoneDetailsComponent] Item data prepared:', itemData);\r\n      \r\n      // Convert to formatted JSON string\r\n      const jsonString = JSON.stringify(itemData, null, 2);\r\n      // console.log('[MilestoneDetailsComponent] JSON string created, length:', jsonString.length);\r\n      \r\n      // Copy to clipboard\r\n      await navigator.clipboard.writeText(jsonString);\r\n      // console.log('[MilestoneDetailsComponent] Data copied to clipboard successfully');\r\n      \r\n      // Show success message\r\n      this.messagingService.success('Item data copied to clipboard successfully');\r\n      \r\n    } catch (error) {\r\n      // console.error('[MilestoneDetailsComponent] Failed to copy item data to clipboard:', error);\r\n      this.messagingService.error('Failed to copy item data to clipboard');\r\n    } finally {\r\n      this.isCopying = false;\r\n      // console.log('[MilestoneDetailsComponent] Copying finished, isCopying:', this.isCopying);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<nz-drawer\r\n  [nzVisible]=\"visible\"\r\n  [nzWidth]=\"drawerWidth\"\r\n  [nzClosable]=\"true\"\r\n  [nzMaskClosable]=\"true\"\r\n  (nzOnClose)=\"close()\"\r\n  [nzTitle]=\"drawerTitle\"\r\n>\r\n  <ng-template #drawerTitle>\r\n    <div *ngIf=\"worklistItem\" class=\"drawer-header\">\r\n      <div class=\"drawer-title-content\">\r\n        <span>{{ worklistItem.patient?.name }} - {{ worklistItem.itemDescription }}</span>\r\n        <div class=\"drawer-subtitle\">\r\n          <span class=\"id-display\">ID: {{ worklistItem.compass_worklist_id }}</span>\r\n          <span *ngIf=\"worklistItem.dataRefreshDtTm\" class=\"refresh-display\">\r\n            Refreshed: {{ worklistItem.dataRefreshDtTm | date:'M/d/yy, h:mm:ss a' }}\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div class=\"drawer-actions\">\r\n        <!-- Collapse All Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"collapseAll()\"\r\n        >\r\n          <span nz-icon nzType=\"minus-square\" nzTheme=\"outline\"></span>\r\n        </button>\r\n\r\n        <!-- Expand All Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"expandAll()\"\r\n        >\r\n          <span nz-icon nzType=\"plus-square\" nzTheme=\"outline\"></span>\r\n        </button>\r\n\r\n        <!-- Refresh Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\" \r\n          nzSize=\"small\"\r\n          (click)=\"refreshCurrentItem()\"\r\n          [disabled]=\"isRefreshing\"\r\n        >\r\n          <span nz-icon nzType=\"reload\" nzTheme=\"outline\" [nzSpin]=\"isRefreshing\"></span>\r\n        </button>\r\n\r\n        <!-- Feedback Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"primary\" \r\n          nzSize=\"small\"\r\n          (click)=\"openFeedbackModal()\"\r\n        >\r\n          <span nz-icon nzType=\"message\" nzTheme=\"outline\"></span>\r\n          Feedback\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </ng-template>\r\n  \r\n  <ng-container *nzDrawerContent>\r\n    <div style=\"margin-bottom: 0px;\">\r\n      <!--label>Drawer Width: {{ drawerWidth }}px</label-->\r\n      <nz-slider\r\n        [ngModel]=\"drawerWidth\"\r\n        [nzMin]=\"100\"\r\n        [nzMax]=\"2000\"\r\n        (ngModelChange)=\"onDrawerWidthChange($event)\">\r\n      </nz-slider>\r\n    </div>\r\n    <div *ngIf=\"worklistItem\">\r\n      <nz-collapse [nzAccordion]=\"false\" [nzBordered]=\"true\">\r\n        <!-- Patient Information Component -->\r\n        <nz-collapse-panel nzHeader=\"Patient Information\" [(nzActive)]=\"panelStates.patientInfo\">\r\n          <app-patient-information [worklistItem]=\"worklistItem\"></app-patient-information>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Comments Component -->\r\n        <nz-collapse-panel [nzHeader]=\"commentsPanelHeader\" [(nzActive)]=\"panelStates.comments\">\r\n          <ng-template #commentsPanelHeader>\r\n            Comments\r\n            <nz-badge *ngIf=\"commentsCount > 0\" [nzCount]=\"commentsCount\" style=\"margin-left: 8px;\"></nz-badge>\r\n          </ng-template>\r\n          <app-comments \r\n            [worklistItem]=\"worklistItem\" \r\n            [visible]=\"visible\" \r\n            (commentsCountChanged)=\"onCommentsCountChanged($event)\"\r\n          ></app-comments>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Item Details Component -->\r\n        <nz-collapse-panel nzHeader=\"Item Details\" [(nzActive)]=\"panelStates.itemDetails\">\r\n          <app-item-details [worklistItem]=\"worklistItem\" (itemRefreshed)=\"refreshCurrentItem()\"></app-item-details>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Codes Component -->\r\n        <nz-collapse-panel nzHeader=\"Codes\" [(nzActive)]=\"panelStates.codes\">\r\n          <app-codes [worklistItem]=\"worklistItem\"></app-codes>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Workflow Status Component -->\r\n        <nz-collapse-panel nzHeader=\"Workflow Status\" [(nzActive)]=\"panelStates.workflowStatus\">\r\n          <app-workflow-status [worklistItem]=\"worklistItem\"></app-workflow-status>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Payors Component -->\r\n        <nz-collapse-panel nzHeader=\"Payors\" [(nzActive)]=\"panelStates.payors\">\r\n          <app-payors [worklistItem]=\"worklistItem\"></app-payors>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- User Assignment Component -->\r\n        <nz-collapse-panel nzHeader=\"User Assignment\" [(nzActive)]=\"panelStates.userAssignment\">\r\n          <app-user-assignment [item]=\"worklistItem\"></app-user-assignment>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Document Selection Component -->\r\n        <nz-collapse-panel nzHeader=\"Document Selection\" [(nzActive)]=\"panelStates.documentSelection\">\r\n          <app-document-selection \r\n            *ngIf=\"worklistItem?.milestones?.[0]\"\r\n            [worklistItem]=\"worklistItem\" \r\n            [milestone]=\"worklistItem.milestones[0]\"\r\n            (documentsUpdated)=\"onDocumentsUpdated()\"\r\n            (documentsRefreshed)=\"onDocumentsRefreshed()\">\r\n          </app-document-selection>\r\n          <div *ngIf=\"!worklistItem?.milestones?.[0]\" style=\"text-align: center; padding: 20px; color: #999;\">\r\n            No milestone available for document selection\r\n          </div>\r\n        </nz-collapse-panel>\r\n        \r\n        <!-- Milestone & Action History Component -->\r\n        <nz-collapse-panel nzHeader=\"Milestone & Action History\" [(nzActive)]=\"panelStates.milestoneHistory\">\r\n          <app-milestone-timeline [worklistItem]=\"worklistItem\" [isLoading]=\"isLoading\"></app-milestone-timeline>\r\n        </nz-collapse-panel>\r\n      </nz-collapse>\r\n      \r\n      <!-- Support Information Section -->\r\n      <div class=\"support-section\" style=\"margin-top: 16px;\">\r\n        <nz-collapse>\r\n          <nz-collapse-panel [nzHeader]=\"panelHeader\" [(nzActive)]=\"panelStates.supportInfo\">\r\n            <ng-template #panelHeader>\r\n              <div class=\"support-header\">\r\n                <span>Support Information</span>\r\n                <button \r\n                  nz-button \r\n                  nzType=\"default\" \r\n                  nzSize=\"small\"\r\n                  (click)=\"copyItemDataToClipboard(); $event.stopPropagation()\"\r\n                  nz-tooltip\r\n                  nzTooltipTitle=\"Copy Item Data to Clipboard\"\r\n                  [disabled]=\"isCopying\"\r\n                  class=\"copy-data-btn\"\r\n                  style=\"border: 2px solid red; background-color: yellow;\"\r\n                >\r\n                  <span nz-icon nzType=\"copy\" nzTheme=\"outline\" [nzSpin]=\"isCopying\"></span>\r\n                  Copy Data\r\n                </button>\r\n              </div>\r\n            </ng-template>\r\n            <nz-descriptions nzTitle=\"Internal IDs for Troubleshooting\" [nzColumn]=\"2\" nzBordered>\r\n              <nz-descriptions-item nzTitle=\"Compass Worklist ID\">\r\n                {{ worklistItem.compass_worklist_id }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Person ID\">\r\n                {{ worklistItem.personId }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Encounter ID\">\r\n                {{ worklistItem.encntrId }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Order ID\">\r\n                {{ worklistItem.orderId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Workflow ID\">\r\n                {{ worklistItem.workflow_id }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule Event ID\">\r\n                {{ worklistItem.schedule?.eventId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule ID\">\r\n                {{ worklistItem.schedule?.scheduleId || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Schedule Status\">\r\n                {{ worklistItem.schedule?.state || 'N/A' }}\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Milestone IDs\">\r\n                <div *ngIf=\"worklistItem.milestones && worklistItem.milestones.length > 0; else noMilestones\">\r\n                  <div *ngFor=\"let milestone of worklistItem.milestones\" class=\"id-list-item\">\r\n                    {{ milestone.milestoneId }} ({{ milestone.name }})\r\n                  </div>\r\n                </div>\r\n                <ng-template #noMilestones>\r\n                  <span class=\"no-data\">No milestones</span>\r\n                </ng-template>\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Action IDs\">\r\n                <div *ngIf=\"worklistItem.actions && worklistItem.actions.length > 0; else noActions\">\r\n                  <div *ngFor=\"let action of worklistItem.actions\" class=\"id-list-item\">\r\n                    {{ action.actionId }} ({{ action.name }})\r\n                  </div>\r\n                </div>\r\n                <ng-template #noActions>\r\n                  <span class=\"no-data\">No actions</span>\r\n                </ng-template>\r\n              </nz-descriptions-item>\r\n              <nz-descriptions-item nzTitle=\"Data Refresh Date\">\r\n                {{ worklistItem.dataRefreshDtTm | date:'short' }}\r\n              </nz-descriptions-item>\r\n            </nz-descriptions>\r\n          </nz-collapse-panel>\r\n        </nz-collapse>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-drawer>\r\n","import { Component, Input, OnInit, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthMilestone, PriorAuthAction } from '../../../../models/prior-auth.model';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { PriorAuthService } from '../../../../services/prior-auth.service';\r\n\r\n/**\r\n * Interface for timeline items that can be either milestones or actions\r\n */\r\ninterface TimelineItem {\r\n  id: number;\r\n  type: 'milestone' | 'action';\r\n  name: string;\r\n  description?: string;\r\n  status: string;\r\n  dateTime: Date;\r\n  milestoneId?: number; // For actions that belong to a milestone\r\n  meaning?: string;\r\n  milestoneData?: any[];\r\n  required?: boolean; // Added for milestones\r\n  actionBy?: string; // The user who performed the action (for actions only)\r\n}\r\n\r\n/**\r\n * Component for displaying milestone and action timeline in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-milestone-timeline',\r\n  templateUrl: './milestone-timeline.component.html',\r\n  styleUrls: ['./milestone-timeline.component.scss']\r\n})\r\nexport class MilestoneTimelineComponent implements OnInit, OnChanges {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n  @Input() isLoading = false;\r\n\r\n  timelineItems: TimelineItem[] = [];\r\n  displayedTimelineItems: TimelineItem[] = [];\r\n  \r\n  // Track which milestones have expanded action lists\r\n  expandedMilestones = new Set<number>();\r\n  \r\n  // Number of actions to show initially\r\n  readonly INITIAL_ACTIONS_COUNT = 4;\r\n  \r\n  // Pagination controls\r\n  readonly ITEMS_PER_PAGE = 50;\r\n  currentPage = 1;\r\n  totalPages = 1;\r\n  showPagination = false;\r\n\r\n  constructor(\r\n    private modalService: NzModalService,\r\n    private priorAuthService: PriorAuthService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    if (this.worklistItem) {\r\n      this.buildTimeline();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['worklistItem'] && this.worklistItem) {\r\n      this.buildTimeline();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Build a grouped timeline: for each milestone (in sequence), add the milestone, then its actions (sorted by actionId). Standalone actions at the end.\r\n   */\r\n  buildTimeline(): void {\r\n    if (!this.worklistItem) return;\r\n    \r\n    // Add performance logging\r\n    console.log(`[MilestoneTimeline] Building timeline for item ${this.worklistItem.compass_worklist_id}`);\r\n    console.time(`Timeline-Build-${this.worklistItem.compass_worklist_id}`);\r\n\r\n    this.timelineItems = [];\r\n\r\n    const meaningOrder = ['EDOS', 'MEDNEC', 'GLIDIAN', 'SCHEDULE'];\r\n    const milestones = (this.worklistItem.milestones || []).slice().sort((a, b) => {\r\n      const aIndex = meaningOrder.indexOf(a.meaning || '');\r\n      const bIndex = meaningOrder.indexOf(b.meaning || '');\r\n      return aIndex - bIndex;\r\n    });\r\n    const actions = (this.worklistItem.actions || []).slice();\r\n\r\n    // For each milestone, add milestone then its actions\r\n    milestones.forEach(milestone => {\r\n      this.timelineItems.push({\r\n        id: milestone.milestoneId,\r\n        type: 'milestone',\r\n        name: milestone.name,\r\n        description: `Milestone: ${milestone.name}`,\r\n        status: milestone.status,\r\n        dateTime: milestone.statusDateTime || new Date(),\r\n        meaning: milestone.meaning,\r\n        milestoneData: milestone.milestoneData,\r\n        required: milestone.requiredInd\r\n      });\r\n      // Add actions for this milestone, sorted by actionId\r\n      actions\r\n        .filter(action => action.milestoneId === milestone.milestoneId)\r\n        .sort((a, b) => a.actionId - b.actionId)\r\n        .forEach(action => {\r\n          this.timelineItems.push({\r\n            id: action.actionId,\r\n            type: 'action',\r\n            name: action.name,\r\n            description: action.description,\r\n            status: action.status,\r\n            dateTime: action.actionDtTm,\r\n            milestoneId: action.milestoneId,\r\n            actionBy: action.actionBy\r\n          });\r\n        });\r\n    });\r\n\r\n    // Add standalone actions (milestoneId === 0) at the end, sorted by actionId\r\n    actions\r\n      .filter(action => action.milestoneId === 0)\r\n      .sort((a, b) => a.actionId - b.actionId)\r\n      .forEach(action => {\r\n        this.timelineItems.push({\r\n          id: action.actionId,\r\n          type: 'action',\r\n          name: action.name,\r\n          description: action.description,\r\n          status: action.status,\r\n          dateTime: action.actionDtTm,\r\n          milestoneId: action.milestoneId,\r\n          actionBy: action.actionBy\r\n        });\r\n      });\r\n    \r\n    // Log timeline build completion with more detail\r\n    console.log(`[MilestoneTimeline] Timeline built with ${this.timelineItems.length} items`, {\r\n      milestones: milestones.length,\r\n      totalActions: actions.length,\r\n      standaloneActions: actions.filter(a => a.milestoneId === 0).length,\r\n      actionsByMilestone: milestones.map(m => ({\r\n        milestone: m.name,\r\n        actionCount: actions.filter(a => a.milestoneId === m.milestoneId).length\r\n      }))\r\n    });\r\n    \r\n    // Add warning for large timelines\r\n    if (this.timelineItems.length > 100) {\r\n      console.warn(`[MilestoneTimeline] WARNING: Large timeline with ${this.timelineItems.length} items may cause performance issues`);\r\n    }\r\n    \r\n    // Set up pagination\r\n    this.totalPages = Math.ceil(this.timelineItems.length / this.ITEMS_PER_PAGE);\r\n    this.showPagination = this.timelineItems.length > this.ITEMS_PER_PAGE;\r\n    this.currentPage = 1;\r\n    this.updateDisplayedItems();\r\n    \r\n    console.timeEnd(`Timeline-Build-${this.worklistItem.compass_worklist_id}`);\r\n  }\r\n\r\n  /**\r\n   * Update displayed items based on current page\r\n   */\r\n  updateDisplayedItems(): void {\r\n    const startIndex = (this.currentPage - 1) * this.ITEMS_PER_PAGE;\r\n    const endIndex = startIndex + this.ITEMS_PER_PAGE;\r\n    this.displayedTimelineItems = this.timelineItems.slice(startIndex, endIndex);\r\n    \r\n    console.log(`[MilestoneTimeline] Displaying items ${startIndex + 1} to ${Math.min(endIndex, this.timelineItems.length)} of ${this.timelineItems.length}`);\r\n  }\r\n  \r\n  /**\r\n   * Navigate to a specific page\r\n   */\r\n  goToPage(page: number): void {\r\n    if (page >= 1 && page <= this.totalPages) {\r\n      this.currentPage = page;\r\n      this.updateDisplayedItems();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Navigate to previous page\r\n   */\r\n  previousPage(): void {\r\n    if (this.currentPage > 1) {\r\n      this.currentPage--;\r\n      this.updateDisplayedItems();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Navigate to next page\r\n   */\r\n  nextPage(): void {\r\n    if (this.currentPage < this.totalPages) {\r\n      this.currentPage++;\r\n      this.updateDisplayedItems();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get color for timeline item based on status\r\n   */\r\n  getTimelineItemColor(item: TimelineItem): 'red' | 'green' | 'blue' | 'grey' | 'gray' {\r\n    if (item.type === 'milestone') {\r\n      switch (item.status) {\r\n        case 'Complete':\r\n          return 'green';\r\n        case 'In Progress':\r\n        case 'Open':\r\n          return 'blue';\r\n        case 'Pending':\r\n          return 'grey';\r\n        default:\r\n          return 'blue';\r\n      }\r\n    } else {\r\n      // Actions\r\n      switch (item.status) {\r\n        case 'Complete':\r\n          return 'green';\r\n        case 'In Progress':\r\n          return 'blue';\r\n        case 'Pending':\r\n          return 'grey';\r\n        default:\r\n          return 'blue';\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS color value for icon based on timeline item\r\n   */\r\n  getIconColor(item: TimelineItem): string {\r\n    const color = this.getTimelineItemColor(item);\r\n    switch (color) {\r\n      case 'green':\r\n        return '#52c41a';\r\n      case 'blue':\r\n        return '#1890ff';\r\n      case 'red':\r\n        return '#ff4d4f';\r\n      case 'grey':\r\n      case 'gray':\r\n        return '#8c8c8c';\r\n      default:\r\n        return '#1890ff';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for table row based on item type\r\n   */\r\n  getRowClass(item: TimelineItem): string {\r\n    if (item.type === 'milestone') {\r\n      return 'milestone-row';\r\n    } else if (item.milestoneId === 0) {\r\n      return 'standalone-action-row';\r\n    } else {\r\n      return 'action-row';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for status tag\r\n   */\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'status-complete';\r\n      case 'In Progress':\r\n      case 'Open':\r\n        return 'status-in-progress';\r\n      case 'Pending':\r\n        return 'status-pending';\r\n      default:\r\n        return 'status-default';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get milestone items (for backward compatibility)\r\n   */\r\n  get milestoneItems(): TimelineItem[] {\r\n    return this.displayedTimelineItems.filter(item => item.type === 'milestone');\r\n  }\r\n\r\n  /**\r\n   * Get action items for the actions table - sorted in reverse chronological order\r\n   */\r\n  get actionItems(): TimelineItem[] {\r\n    return this.displayedTimelineItems\r\n      .filter(item => item.type === 'action')\r\n      .sort((a, b) => new Date(b.dateTime).getTime() - new Date(a.dateTime).getTime());\r\n  }\r\n\r\n  /**\r\n   * Get actions for a specific milestone\r\n   */\r\n  getActionsForMilestone(milestoneId: number): TimelineItem[] {\r\n    return this.timelineItems.filter(item => \r\n      item.type === 'action' && item.milestoneId === milestoneId\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get standalone actions\r\n   */\r\n  get standaloneActions(): TimelineItem[] {\r\n    return this.timelineItems.filter(item => \r\n      item.type === 'action' && item.milestoneId === 0\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get CSS class for action table row based on item type\r\n   */\r\n  getActionRowClass(item: TimelineItem): string {\r\n    if (item.milestoneId === 0) {\r\n      return 'standalone-action-row';\r\n    } else {\r\n      return 'action-row';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get visible actions for a milestone (for backward compatibility)\r\n   */\r\n  getVisibleActionsForMilestone(milestoneId: number): TimelineItem[] {\r\n    const actions = this.getActionsForMilestone(milestoneId);\r\n    if (this.isMilestoneExpanded(milestoneId)) {\r\n      return actions;\r\n    }\r\n    return actions.slice(0, this.INITIAL_ACTIONS_COUNT);\r\n  }\r\n\r\n  /**\r\n   * Check if milestone has more actions than initially shown\r\n   */\r\n  hasMoreActions(milestoneId: number): boolean {\r\n    const actions = this.getActionsForMilestone(milestoneId);\r\n    return actions.length > this.INITIAL_ACTIONS_COUNT;\r\n  }\r\n\r\n  /**\r\n   * Check if milestone actions are expanded\r\n   */\r\n  isMilestoneExpanded(milestoneId: number): boolean {\r\n    return this.expandedMilestones.has(milestoneId);\r\n  }\r\n\r\n  /**\r\n   * Toggle milestone actions expansion\r\n   */\r\n  toggleMilestoneActions(milestoneId: number): void {\r\n    if (this.expandedMilestones.has(milestoneId)) {\r\n      this.expandedMilestones.delete(milestoneId);\r\n    } else {\r\n      this.expandedMilestones.add(milestoneId);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get count of hidden actions for a milestone\r\n   */\r\n  getHiddenActionsCount(milestoneId: number): number {\r\n    const actions = this.getActionsForMilestone(milestoneId);\r\n    return Math.max(0, actions.length - this.INITIAL_ACTIONS_COUNT);\r\n  }\r\n\r\n  /**\r\n   * View action data in a modal\r\n   * Retrieves the DATA_VC field from the CUST_COMPASS_ACTION table and displays it\r\n   * @param actionId - The action ID to retrieve data for\r\n   * @param event - The click event to prevent propagation\r\n   */\r\n  viewActionData(actionId: number, event: Event): void {\r\n    event.stopPropagation();\r\n\r\n    // Call the service to get action data\r\n    this.priorAuthService.getActionData(actionId).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          // Display the data in a modal\r\n          this.modalService.create({\r\n            nzTitle: `Action Data (ID: ${actionId})`,\r\n            nzContent: this.formatActionDataForDisplay(response.actionData, response.parsedData),\r\n            nzWidth: '800px',\r\n            nzFooter: null,\r\n            nzMaskClosable: true\r\n          });\r\n        } else {\r\n          // Show error message\r\n          this.modalService.error({\r\n            nzTitle: 'No Data Available',\r\n            nzContent: response.message || 'No additional data available for this action.',\r\n            nzOkText: 'Close'\r\n          });\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // Handle error\r\n        this.modalService.error({\r\n          nzTitle: 'Error',\r\n          nzContent: 'Failed to retrieve action data. Please try again.',\r\n          nzOkText: 'Close'\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Format action data for display in the modal\r\n   * @param rawData - The raw data string from the database\r\n   * @param parsedData - The parsed JSON data (if successful)\r\n   * @returns HTML string for display\r\n   */\r\n  private formatActionDataForDisplay(rawData: string, parsedData: any): string {\r\n    if (!rawData) {\r\n      return '<p style=\"color: #999; font-style: italic;\">No additional data available for this action.</p>';\r\n    }\r\n\r\n    let html = '<div style=\"font-family: monospace;\">';\r\n\r\n    // If we have parsed JSON data, display it nicely formatted\r\n    if (parsedData && typeof parsedData === 'object') {\r\n      html += '<h4>Parsed JSON Data:</h4>';\r\n      html += `<pre style=\"background: #f5f5f5; padding: 12px; border-radius: 4px; overflow-x: auto; max-height: 500px;\">${JSON.stringify(parsedData, null, 2)}</pre>`;\r\n    } else {\r\n      // Otherwise, just display the raw data\r\n      html += '<h4>Raw Data:</h4>';\r\n      html += `<pre style=\"background: #f5f5f5; padding: 12px; border-radius: 4px; overflow-x: auto; max-height: 500px;\">${this.escapeHtml(rawData)}</pre>`;\r\n    }\r\n\r\n    html += '</div>';\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Escape HTML to prevent XSS attacks\r\n   * @param text - The text to escape\r\n   * @returns Escaped HTML string\r\n   */\r\n  private escapeHtml(text: string): string {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n  }\r\n} ","<!-- Milestone & Action History Tables -->\r\n<div class=\"milestone-history-section\" style=\"margin-top: 16px;\">\r\n  <h3>Milestone & Action History</h3>\r\n  \r\n  <!-- Pagination Info and Controls -->\r\n  <div *ngIf=\"showPagination\" class=\"pagination-section\" style=\"margin-bottom: 16px;\">\r\n    <nz-alert\r\n      nzType=\"warning\"\r\n      nzShowIcon\r\n      [nzMessage]=\"paginationMessage\">\r\n      <ng-template #paginationMessage>\r\n        Large dataset detected: {{ timelineItems.length }} total items. \r\n        Showing page {{ currentPage }} of {{ totalPages }} ({{ displayedTimelineItems.length }} items per page).\r\n      </ng-template>\r\n    </nz-alert>\r\n    \r\n    <div style=\"margin-top: 8px; text-align: center;\">\r\n      <nz-pagination\r\n        [(nzPageIndex)]=\"currentPage\"\r\n        [nzTotal]=\"timelineItems.length\"\r\n        [nzPageSize]=\"ITEMS_PER_PAGE\"\r\n        [nzShowSizeChanger]=\"false\"\r\n        (nzPageIndexChange)=\"goToPage($event)\"\r\n      ></nz-pagination>\r\n    </div>\r\n  </div>\r\n  \r\n  <nz-spin [nzSpinning]=\"isLoading\">\r\n    \r\n    <!-- Milestones Table -->\r\n    <div *ngIf=\"milestoneItems.length > 0\" class=\"table-section\">\r\n      <h4>Milestones</h4>\r\n      <nz-table \r\n        #milestonesTable \r\n        [nzData]=\"milestoneItems\" \r\n        [nzPageSize]=\"20\"\r\n        [nzShowPagination]=\"false\"\r\n        [nzScroll]=\"{ x: '100%' }\"\r\n        class=\"milestones-table\"\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th nzWidth=\"120px\">Type</th>\r\n            <th nzWidth=\"200px\">Name</th>\r\n            <th nzWidth=\"120px\">Status</th>\r\n            <th nzWidth=\"150px\">Date/Time</th>\r\n            <th>Description</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let item of milestoneItems\">\r\n            <!-- Type -->\r\n            <td>\r\n              <div class=\"type-cell\">\r\n                <span nz-icon nzType=\"flag\" nzTheme=\"outline\" [style.color]=\"getIconColor(item)\"></span>\r\n                <span class=\"type-label\">Milestone</span>\r\n              </div>\r\n            </td>\r\n            \r\n            <!-- Name -->\r\n            <td>\r\n              <div class=\"name-cell\">\r\n                <strong>{{ item.name }}</strong>\r\n                <div class=\"milestone-meta\">\r\n                  <nz-tag *ngIf=\"item.meaning\" nzSize=\"small\">{{ item.meaning }}</nz-tag>\r\n                  <nz-tag *ngIf=\"item.required === false\" nzColor=\"orange\" nzSize=\"small\">Not Required</nz-tag>\r\n                  <nz-tag *ngIf=\"item.required === true\" nzColor=\"green\" nzSize=\"small\">Required</nz-tag>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            \r\n            <!-- Status -->\r\n            <td>\r\n              <nz-tag [ngClass]=\"getStatusClass(item.status)\">\r\n                {{ item.status }}\r\n              </nz-tag>\r\n            </td>\r\n            \r\n            <!-- Date/Time -->\r\n            <td>\r\n              <span class=\"date-time\">{{ item.dateTime | date:'M/d/yy h:mm a' }}</span>\r\n            </td>\r\n            \r\n            <!-- Description -->\r\n            <td>\r\n              <div class=\"description-cell\">\r\n                <span *ngIf=\"item.description\">{{ item.description }}</span>\r\n                <span *ngIf=\"!item.description\">-</span>\r\n                \r\n                <!-- Milestone Data (if available) -->\r\n                <div *ngIf=\"item.milestoneData && item.milestoneData.length > 0\" class=\"milestone-data\">\r\n                  <details>\r\n                    <summary>Milestone Data ({{ item.milestoneData.length }})</summary>\r\n                    <div class=\"data-list\">\r\n                      <div *ngFor=\"let data of item.milestoneData\" class=\"data-item\">\r\n                        <span class=\"data-label\">{{ data.name }}:</span>\r\n                        <span class=\"data-value\">\r\n                          <ng-container *ngIf=\"data.valueText; else dateOrCode\">\r\n                            {{ data.valueText }}\r\n                          </ng-container>\r\n                          <ng-template #dateOrCode>\r\n                            <ng-container *ngIf=\"data.valueDate; else codeValue\">\r\n                              {{ data.valueDate | date:'short' }}\r\n                            </ng-container>\r\n                            <ng-template #codeValue>\r\n                              {{ data.valueCd }}\r\n                            </ng-template>\r\n                          </ng-template>\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </details>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </nz-table>\r\n    </div>\r\n    \r\n    <!-- Actions Table -->\r\n    <div *ngIf=\"actionItems.length > 0\" class=\"table-section\" style=\"margin-top: 24px;\">\r\n      <h4>Action History</h4>\r\n      <nz-table \r\n        #actionsTable \r\n        [nzData]=\"actionItems\" \r\n        [nzPageSize]=\"30\"\r\n        [nzShowPagination]=\"false\"\r\n        [nzScroll]=\"{ x: '100%' }\"\r\n        class=\"actions-table\"\r\n      >\r\n        <thead>\r\n          <tr>\r\n            <th nzWidth=\"120px\">Type</th>\r\n            <th nzWidth=\"200px\">Name</th>\r\n            <th nzWidth=\"120px\">Status</th>\r\n            <th nzWidth=\"150px\">Date/Time</th>\r\n            <th nzWidth=\"120px\">User</th>\r\n            <th>Description</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor=\"let item of actionItems\" [ngClass]=\"getActionRowClass(item)\">\r\n            <!-- Type -->\r\n            <td>\r\n              <div class=\"type-cell\">\r\n                <span nz-icon nzType=\"check-circle\" nzTheme=\"outline\" [style.color]=\"getIconColor(item)\"></span>\r\n                <span class=\"type-label\">Action</span>\r\n                <nz-tag *ngIf=\"item.milestoneId === 0\" nzColor=\"orange\" nzSize=\"small\">S</nz-tag>\r\n              </div>\r\n            </td>\r\n            \r\n            <!-- Name -->\r\n            <td>\r\n              <div class=\"name-cell\">\r\n                <strong>{{ item.name }}</strong>\r\n              </div>\r\n            </td>\r\n            \r\n            <!-- Status -->\r\n            <td>\r\n              <nz-tag [ngClass]=\"getStatusClass(item.status)\">\r\n                {{ item.status }}\r\n              </nz-tag>\r\n            </td>\r\n            \r\n            <!-- Date/Time -->\r\n            <td>\r\n              <span class=\"date-time\">{{ item.dateTime | date:'M/d/yy h:mm a' }}</span>\r\n            </td>\r\n            \r\n            <!-- User -->\r\n            <td>\r\n              <span *ngIf=\"item.actionBy\" class=\"user-name\">{{ item.actionBy }}</span>\r\n              <span *ngIf=\"!item.actionBy\" class=\"no-user\">-</span>\r\n            </td>\r\n            \r\n            <!-- Description -->\r\n            <td>\r\n              <div class=\"description-cell\">\r\n                <span *ngIf=\"item.description\">{{ item.description }}</span>\r\n                <span *ngIf=\"!item.description\">-</span>\r\n\r\n                <!-- View Data Button for actions with data -->\r\n                <div *ngIf=\"item.type === 'action'\" style=\"margin-top: 8px;\">\r\n                  <button\r\n                    nz-button\r\n                    nzType=\"link\"\r\n                    nzSize=\"small\"\r\n                    (click)=\"viewActionData(item.id, $event)\"\r\n                    nz-tooltip\r\n                    nzTooltipTitle=\"View detailed action data (if available)\"\r\n                  >\r\n                    <span nz-icon nzType=\"file-text\" nzTheme=\"outline\"></span>\r\n                    View Data\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </tbody>\r\n      </nz-table>\r\n    </div>\r\n    \r\n    <!-- No Data Message -->\r\n    <div *ngIf=\"timelineItems.length === 0\" class=\"no-data-message\">\r\n      <nz-empty nzNotFoundImage=\"simple\" [nzNotFoundContent]=\"'No milestone or action history available'\"></nz-empty>\r\n    </div>\r\n  </nz-spin>\r\n  \r\n  <!-- Bottom Pagination Controls -->\r\n  <div *ngIf=\"showPagination\" style=\"margin-top: 16px; text-align: center;\">\r\n    <nz-pagination\r\n      [(nzPageIndex)]=\"currentPage\"\r\n      [nzTotal]=\"timelineItems.length\"\r\n      [nzPageSize]=\"ITEMS_PER_PAGE\"\r\n      [nzShowSizeChanger]=\"false\"\r\n      (nzPageIndexChange)=\"goToPage($event)\"\r\n    ></nz-pagination>\r\n  </div>\r\n</div> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\n\r\n/**\r\n * Component for displaying patient information in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-patient-information',\r\n  templateUrl: './patient-information.component.html',\r\n  styleUrls: ['./patient-information.component.scss']\r\n})\r\nexport class PatientInformationComponent {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n} ","<nz-descriptions nzTitle=\"\" [nzColumn]=\"2\" nzBordered>\r\n  <nz-descriptions-item nzTitle=\"Patient Name\">\r\n    {{ worklistItem?.patient?.name }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Date of Birth\">\r\n    {{ worklistItem?.patient?.dateOfBirth | date:'shortDate' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"FIN\">\r\n    {{ worklistItem?.patient?.fin }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"MRN\">\r\n    {{ worklistItem?.patient?.mrn }}\r\n  </nz-descriptions-item>\r\n</nz-descriptions> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\n\r\n/**\r\n * Component for displaying payor/insurance information in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-payors',\r\n  templateUrl: './payors.component.html',\r\n  styleUrls: ['./payors.component.scss']\r\n})\r\nexport class PayorsComponent {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n} ","<nz-descriptions nzTitle=\"Insurance Plans\" [nzColumn]=\"1\" nzBordered>\r\n  <nz-descriptions-item>\r\n    <div *ngFor=\"let payor of worklistItem?.payors\">\r\n      <!-- Plan name and type in one tag -->\r\n      <nz-tag nzColor=\"blue\">\r\n        {{ payor.planName }}\r\n        <ng-container *ngIf=\"payor.planType && payor.planType.trim() !== ''\">\r\n          ({{ payor.planType }})\r\n        </ng-container>\r\n      </nz-tag>\r\n      <!-- Glidian ID in separate tag -->\r\n      <nz-tag *ngIf=\"payor.glidianPayerId && payor.glidianPayerId.trim() !== ''\">\r\n        Glidian ID: {{ payor.glidianPayerId }}\r\n      </nz-tag>\r\n      <small *ngIf=\"payor.effectiveDate\">\r\n        Effective: {{ payor.effectiveDate | date:'shortDate' }}\r\n      </small>\r\n      <small *ngIf=\"payor.endDate\">\r\n        - {{ payor.endDate | date:'shortDate' }}\r\n      </small>\r\n    </div>\r\n  </nz-descriptions-item>\r\n</nz-descriptions> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\n\r\n/**\r\n * Component for displaying workflow status information in the milestone details drawer\r\n */\r\n@Component({\r\n  selector: 'app-workflow-status',\r\n  templateUrl: './workflow-status.component.html',\r\n  styleUrls: ['./workflow-status.component.scss']\r\n})\r\nexport class WorkflowStatusComponent {\r\n  @Input() worklistItem: PriorAuthItem | null = null;\r\n} ","<nz-descriptions nzTitle=\"\" [nzColumn]=\"2\" nzBordered>\r\n  <nz-descriptions-item nzTitle=\"Workflow Status\">\r\n    <nz-tag [ngClass]=\"{'tag-pending': worklistItem?.workflowStatus?.status === 'Pending', \r\n                      'tag-in-progress': worklistItem?.workflowStatus?.status === 'In Progress',\r\n                      'tag-complete': worklistItem?.workflowStatus?.status === 'Complete'}\">\r\n      {{ worklistItem?.workflowStatus?.status }}\r\n    </nz-tag>\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Item Status\">\r\n    {{ worklistItem?.subStatus?.subStatus }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Status Date\">\r\n    {{ worklistItem?.workflowStatus?.statusDateTime | date:'short' }}\r\n  </nz-descriptions-item>\r\n  <nz-descriptions-item nzTitle=\"Update Count\">\r\n    {{ worklistItem?.workflowUpdateCount }}\r\n  </nz-descriptions-item>\r\n</nz-descriptions> ","import { Component, Output, EventEmitter, OnInit, effect, signal, computed } from '@angular/core';\r\nimport { SidebarStateService } from '../../../services/sidebar-state.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\nimport { PriorAuthService } from '../../../services/prior-auth.service';\r\nimport { CustomWorklistService } from '../../../services/custom-worklist.service';\r\nimport { PredefinedFilter } from '../../../models/predefined-filter.model';\r\nimport { CustomWorklist } from '../../../models/custom-worklist.model';\r\n\r\n@Component({\r\n  selector: 'app-prior-auth-filter-bar',\r\n  templateUrl: './prior-auth-filter-bar.component.html',\r\n  styleUrls: ['./prior-auth-filter-bar.component.scss']\r\n})\r\nexport class PriorAuthFilterBarComponent implements OnInit {\r\n  @Output() columnWidthsReset = new EventEmitter<void>();\r\n  @Output() daysFilterChange = new EventEmitter<number | 'all'>();\r\n  @Output() refreshData = new EventEmitter<void>();\r\n  @Output() clearData = new EventEmitter<void>();\r\n  /**\r\n   * Emits the global search string to the parent component for filtering.\r\n   */\r\n  @Output() globalSearch = new EventEmitter<string>();\r\n  /**\r\n   * Emits when a predefined filter tab is selected\r\n   */\r\n  @Output() predefinedFilterSelect = new EventEmitter<PredefinedFilter | null>();\r\n  /**\r\n   * Emits when column filters should be cleared\r\n   */\r\n  @Output() clearColumnFilters = new EventEmitter<void>();\r\n  /**\r\n   * Emits when the assignment filter toggle is changed\r\n   */\r\n  @Output() assignmentToggle = new EventEmitter<boolean>();\r\n  /**\r\n   * Emits when the wizard view should be shown\r\n   */\r\n  @Output() showWizardView = new EventEmitter<{ editWorklist: CustomWorklist | null; subroute: string }>();\r\n\r\n  // Loading state from PriorAuthService using signals\r\n  get isLoading() {\r\n    return this.priorAuthService.loading();\r\n  }\r\n  \r\n  // Processing count from PriorAuthService using signals\r\n  get processingCount() {\r\n    return this.priorAuthService.processingCount();\r\n  }\r\n\r\n  // Filter counts from PriorAuthService using signals\r\n  get filterCounts() {\r\n    return this.priorAuthService.predefinedFilterCounts();\r\n  }\r\n\r\n  /**\r\n   * Gets the count for a specific predefined filter\r\n   */\r\n  getFilterCount(filterId: string): number {\r\n    const count = this.filterCounts[filterId] || 0;\r\n    return count;\r\n  }\r\n\r\n  /**\r\n   * Gets the tab title with badge count for a filter\r\n   */\r\n  getTabTitle(filter: PredefinedFilter): string {\r\n    const count = this.getFilterCount(filter.id);\r\n    return count > 0 ? `${filter.label} (${count})` : filter.label;\r\n  }\r\n\r\n  /**\r\n   * Check if test order button should be visible (not in P0665 domain and curdomain is defined)\r\n   */\r\n  get showTestOrderButton(): boolean {\r\n    const userData = this.userPreferences.getUserData();\r\n    const curdomain = userData?.curdomain;\r\n    return curdomain !== undefined && curdomain !== null && curdomain !== 'P0665';\r\n  }\r\n\r\n  /**\r\n   * Create test orders using CCL script\r\n   */\r\n  onCreateTestOrders(): void {\r\n    this.priorAuthService.createTestOrders().subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          // Test orders created successfully - wait 2 seconds before refreshing to allow system time to create the order\r\n          setTimeout(() => {\r\n            this.refreshData.emit(); // Refresh the data to show new test orders\r\n          }, 2000);\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // Error creating test orders\r\n      }\r\n    });\r\n  }\r\n\r\n  constructor(\r\n    public sidebarState: SidebarStateService,\r\n    public userPreferences: UserPreferencesService,\r\n    private columnConfig: ColumnConfigService,\r\n    private priorAuthService: PriorAuthService,\r\n    public customWorklistService: CustomWorklistService\r\n  ) {\r\n    // Effect to handle configuration loading and set default filter\r\n    effect(() => {\r\n      const configLoaded = this.columnConfig.configurationLoaded();\r\n      if (configLoaded && !this.selectedPredefinedFilter && !this.selectedCustomWorklist) {\r\n        this.initializeDefaultFilter();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  // Days filter options for the segmented control\r\n  readonly daysOptions: { label: string; value: number | 'all' }[] = [\r\n    { label: '30', value: 30 },\r\n    { label: '60', value: 60 },\r\n    { label: '90', value: 90 },\r\n    { label: '180', value: 180 },\r\n    { label: 'All', value: 'all' }\r\n  ];\r\n\r\n  // Subroute options for the segmented control\r\n  readonly subrouteOptions: { label: string; value: string }[] = [\r\n    { label: 'Incoming', value: 'incoming' },\r\n    { label: 'Outgoing', value: 'outgoing' }\r\n  ];\r\n\r\n  // Current subroute selection (incoming/outgoing) - using signal for reactive updates\r\n  private _currentSubroute = signal<string>('incoming');\r\n  currentSubrouteIndex: number = 0; // Track the selected index for nz-segmented (0 = incoming, 1 = outgoing)\r\n  \r\n  // Readonly accessor for current subroute\r\n  get currentSubroute(): string {\r\n    return this._currentSubroute();\r\n  }\r\n\r\n  // Predefined filter tabs from centralized configuration - using computed for reactive updates\r\n  readonly predefinedFilters = computed((): PredefinedFilter[] => {\r\n    // Only return filters if configuration has been loaded\r\n    if (!this.columnConfig.configurationLoaded()) {\r\n      return [];\r\n    }\r\n\r\n    // Check if using new version (custom worklists) or old version (predefined filters)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    // If using new version, hide predefined filter tabs\r\n    if (useNewVersion) {\r\n      return [];\r\n    }\r\n\r\n    // If using old version, show predefined filter tabs from configuration\r\n    const filters = this.columnConfig.getPredefinedFilters('prior-auth', this._currentSubroute());\r\n    return filters;\r\n  });\r\n\r\n  // Predefined filters for count display in custom worklist view - using computed for reactive updates\r\n  readonly predefinedFiltersForCounts = computed((): PredefinedFilter[] => {\r\n    // Only return filters if configuration has been loaded\r\n    if (!this.columnConfig.configurationLoaded()) {\r\n      return [];\r\n    }\r\n\r\n    // Check if using new version (custom worklists)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    // Only show counts in new version mode\r\n    if (!useNewVersion) {\r\n      return [];\r\n    }\r\n\r\n    // Get predefined filters for current subroute to show counts\r\n    const filters = this.columnConfig.getPredefinedFilters('prior-auth', this._currentSubroute());\r\n    return filters;\r\n  });\r\n\r\n  // Location dropdown options depend on subroute; expose label/value for UI - using computed for reactive updates\r\n  readonly locationOptions = computed(() => {\r\n    // Only return options if configuration has been loaded\r\n    if (!this.columnConfig.configurationLoaded()) {\r\n      return [];\r\n    }\r\n    return this.columnConfig\r\n      .getLocationOptions('prior-auth', this._currentSubroute())\r\n      .map(opt => ({ label: opt.label, value: opt.value }));\r\n  });\r\n\r\n  // Currently selected location value (config-driven); default to 'all'\r\n  currentLocationValue: string = 'all';\r\n\r\n  // Currently selected predefined filter - will be set after configuration loads\r\n  selectedPredefinedFilter: PredefinedFilter | null = null;\r\n\r\n  // Currently selected tab index for nz-tabset\r\n  private _selectedTabIndex: number = 0;\r\n\r\n  /**\r\n   * Toggle state for showing only current user's assignments\r\n   */\r\n  showMyAssignmentsOnly: boolean = false;\r\n\r\n  // === Custom Worklist Properties ===\r\n\r\n  /**\r\n   * Currently selected custom worklist\r\n   */\r\n  selectedCustomWorklist: CustomWorklist | null = null;\r\n\r\n  /**\r\n   * Computed signal that returns custom worklists for current subroute\r\n   */\r\n  readonly customWorklists = computed(() => {\r\n    return this.customWorklistService.getWorklistsForRoute('prior-auth', this._currentSubroute());\r\n  });\r\n  \r\n  get selectedTabIndex(): number {\r\n    return this._selectedTabIndex;\r\n  }\r\n  \r\n  set selectedTabIndex(value: number) {\r\n    this._selectedTabIndex = value;\r\n  }\r\n  \r\n  ngOnInit(): void {\r\n    // Configuration loading is handled by the effect in constructor\r\n    // If configuration is already loaded, initialize immediately\r\n    if (this.columnConfig.configurationLoaded() && !this.selectedPredefinedFilter) {\r\n      this.initializeDefaultFilter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Initialize the default filter once configuration is loaded\r\n   */\r\n  private initializeDefaultFilter(): void {\r\n    // Check if using old version (predefined filters)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    if (!useNewVersion) {\r\n      // Old version: Set default predefined filter based on configuration\r\n      if (this.columnConfig.configurationLoaded()) {\r\n        const defaultFilter = this.columnConfig.getDefaultPredefinedFilter('prior-auth', this.currentSubroute);\r\n        if (defaultFilter) {\r\n          this.selectedPredefinedFilter = defaultFilter;\r\n          this._selectedTabIndex = this.predefinedFilters().findIndex(f => f.id === defaultFilter.id);\r\n          this.emitCombinedSelection(defaultFilter);\r\n        }\r\n      }\r\n    } else {\r\n      // New version: Check for default custom worklist and set it in the dropdown\r\n      this.selectedPredefinedFilter = null;\r\n      this._selectedTabIndex = 0;\r\n\r\n      // Get default custom worklist for current route/subroute\r\n      const defaultCustomWorklist = this.customWorklistService.defaultWorklistForRoute()('prior-auth', this.currentSubroute)\r\n        || this.customWorklistService.defaultWorklistForRoute()('prior-auth');\r\n\r\n      if (defaultCustomWorklist) {\r\n        // Set the selected custom worklist to reflect in dropdown\r\n        this.selectedCustomWorklist = defaultCustomWorklist;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles subroute change (incoming/outgoing)\r\n   * @param index The selected subroute index\r\n   */\r\n  onSubrouteChange(index: number): void {\r\n    this.currentSubrouteIndex = index;\r\n    const selectedOption = this.subrouteOptions[index];\r\n    if (selectedOption) {\r\n      // Update the subroute signal - this will trigger reactive updates\r\n      this._currentSubroute.set(selectedOption.value);\r\n      // Reset location selection when switching subroutes\r\n      this.currentLocationValue = 'all';\r\n\r\n      // Check if using old version (predefined filters)\r\n      const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n      if (!useNewVersion) {\r\n        // Old version: Initialize default predefined filter for new subroute\r\n        if (this.columnConfig.configurationLoaded()) {\r\n          const defaultFilter = this.columnConfig.getDefaultPredefinedFilter('prior-auth', this.currentSubroute);\r\n          if (defaultFilter) {\r\n            this.selectedPredefinedFilter = defaultFilter;\r\n            this._selectedTabIndex = this.predefinedFilters().findIndex(f => f.id === defaultFilter.id);\r\n            this.emitCombinedSelection(defaultFilter);\r\n          }\r\n        }\r\n      } else {\r\n        // New version: Check for default custom worklist and set it in the dropdown\r\n        this.selectedPredefinedFilter = null;\r\n        this._selectedTabIndex = 0;\r\n\r\n        // Get default custom worklist for current route/subroute\r\n        const defaultCustomWorklist = this.customWorklistService.defaultWorklistForRoute()('prior-auth', this.currentSubroute)\r\n          || this.customWorklistService.defaultWorklistForRoute()('prior-auth');\r\n\r\n        if (defaultCustomWorklist) {\r\n          // Set the selected custom worklist to reflect in dropdown\r\n          this.selectedCustomWorklist = defaultCustomWorklist;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the change event from the days filter segmented control.\r\n   * Maps the emitted index to the correct value for legacy NG-ZORRO behavior.\r\n   */\r\n  onDaysFilterChange(index: number): void {\r\n    const selected = this.daysOptions[index];\r\n    if (selected) {\r\n      // Emit the selected days filter value to parent component for data filtering\r\n      this.daysFilterChange.emit(selected.value);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles input from the global search box and emits the value.\r\n   */\r\n  onGlobalSearch(value: string): void {\r\n    this.globalSearch.emit(value);\r\n  }\r\n\r\n  /**\r\n   * Reset column widths to default\r\n   */\r\n  resetColumnWidths(): void {\r\n    this.columnConfig.resetColumnWidths('prior-auth');\r\n    this.columnWidthsReset.emit();\r\n    // No page reload!\r\n  }\r\n\r\n  /**\r\n   * Refresh the worklist data\r\n   */\r\n  onRefreshData(): void {\r\n    // User clicked refresh button - emit event to trigger data reload in parent component\r\n    this.refreshData.emit();\r\n  }\r\n\r\n  /**\r\n   * Handles selection of a predefined filter tab\r\n   * Clears user-applied column filters when switching between tabs\r\n   */\r\n  onPredefinedFilterSelect(filter: PredefinedFilter): void {\r\n    // Store the previous filter to check if we're actually switching\r\n    const previousFilter = this.selectedPredefinedFilter;\r\n\r\n    // Update the selected filter\r\n    this.selectedPredefinedFilter = filter;\r\n    this._selectedTabIndex = this.predefinedFilters().findIndex(f => f.id === filter.id);\r\n\r\n    // Clear column filters when switching between predefined filter tabs\r\n    // This ensures users see the expected predefined filter results\r\n    if (previousFilter && previousFilter.id !== filter.id) {\r\n      this.clearColumnFilters.emit();\r\n    }\r\n\r\n    // Emit the filter selection\r\n    this.emitCombinedSelection(filter);\r\n  }\r\n\r\n  /**\r\n   * Clears the active predefined filter\r\n   */\r\n  clearPredefinedFilter(): void {\r\n    this.selectedPredefinedFilter = null;\r\n    this.predefinedFilterSelect.emit(null);\r\n  }\r\n\r\n  /**\r\n   * Handles the assignment filter toggle\r\n   * Toggles between showing all assignments and only current user's assignments\r\n   */\r\n  onAssignmentToggle(): void {\r\n    this.showMyAssignmentsOnly = !this.showMyAssignmentsOnly;\r\n    this.assignmentToggle.emit(this.showMyAssignmentsOnly);\r\n  }\r\n\r\n  /**\r\n   * Handles location dropdown change and re-emits the combined selection\r\n   */\r\n  onLocationChange(value: string): void {\r\n    this.currentLocationValue = value;\r\n    if (this.selectedPredefinedFilter) {\r\n      this.emitCombinedSelection(this.selectedPredefinedFilter);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Helper to merge the active predefined filter with the current location filter\r\n   * and emit a single PredefinedFilter object to consumers.\r\n   */\r\n  private emitCombinedSelection(baseFilter: PredefinedFilter): void {\r\n    const combined = this.columnConfig.getCombinedCriteria(\r\n      'prior-auth',\r\n      this.currentSubroute,\r\n      baseFilter,\r\n      this.currentLocationValue\r\n    );\r\n    const merged: PredefinedFilter = { ...baseFilter, filters: combined };\r\n    this.predefinedFilterSelect.emit(merged);\r\n  }\r\n\r\n  // === Custom Worklist Methods ===\r\n\r\n  /**\r\n   * Handle custom worklist selection from dropdown\r\n   */\r\n  onCustomWorklistSelect(worklistId: string | null): void {\r\n    if (worklistId === null) {\r\n      this.selectedCustomWorklist = null;\r\n      this.selectedPredefinedFilter = null;\r\n      return;\r\n    }\r\n\r\n    const worklist = this.customWorklistService.getWorklistById(worklistId);\r\n    if (worklist) {\r\n      this.selectedCustomWorklist = worklist;\r\n      this.selectedPredefinedFilter = null;\r\n\r\n      // Convert custom worklist to predefined filter and emit\r\n      const filter = this.customWorklistService.toPredefinedFilter(worklist);\r\n      this.predefinedFilterSelect.emit(filter);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open wizard to create new custom worklist\r\n   */\r\n  openCreateWorklistWizard(): void {\r\n    this.showWizardView.emit({\r\n      editWorklist: null,\r\n      subroute: this.currentSubroute\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Open wizard to edit existing custom worklist\r\n   */\r\n  openEditWorklistWizard(worklist: CustomWorklist): void {\r\n    this.showWizardView.emit({\r\n      editWorklist: worklist,\r\n      subroute: this.currentSubroute\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Delete a custom worklist\r\n   */\r\n  deleteCustomWorklist(worklist: CustomWorklist): void {\r\n    this.customWorklistService.deleteWorklist(worklist.id);\r\n\r\n    // If this was the selected worklist, clear selection\r\n    if (this.selectedCustomWorklist?.id === worklist.id) {\r\n      this.selectedCustomWorklist = null;\r\n      this.initializeDefaultFilter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle worklist saved from wizard\r\n   * This method is called from the parent component after wizard saves\r\n   */\r\n  selectCustomWorklist(worklist: CustomWorklist): void {\r\n    // Only select the worklist if it's marked as default\r\n    if (worklist.isDefault) {\r\n      this.selectedCustomWorklist = worklist;\r\n      this.selectedPredefinedFilter = null;\r\n\r\n      // Convert to predefined filter and emit\r\n      const filter = this.customWorklistService.toPredefinedFilter(worklist);\r\n      this.predefinedFilterSelect.emit(filter);\r\n    } else {\r\n      // If not default, just clear any existing selection and let the default filter take over\r\n      this.selectedCustomWorklist = null;\r\n      this.initializeDefaultFilter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle version toggle change\r\n   * Switches between new version (custom worklist filtering) and old version (predefined filter bar)\r\n   * @param useNew true to use new version, false to use old version\r\n   */\r\n  onVersionToggle(useNew: boolean): void {\r\n    // Update user preference\r\n    this.userPreferences.setUseNewVersion(useNew);\r\n\r\n    if (useNew) {\r\n      // Toggling TO new version: Clear everything and reset to initial state\r\n      // User will need to select a custom worklist to load data\r\n      this.selectedCustomWorklist = null;\r\n      this.selectedPredefinedFilter = null;\r\n\r\n      // Emit event to clear the data table\r\n      this.clearData.emit();\r\n    } else {\r\n      // Toggling TO old version: Load all data for frontend filtering\r\n      // Clear custom worklist selection\r\n      this.selectedCustomWorklist = null;\r\n\r\n      // Get and set the default predefined filter BEFORE refreshing data\r\n      const defaultFilter = this.columnConfig.getDefaultPredefinedFilter('prior-auth', this.currentSubroute);\r\n      if (defaultFilter) {\r\n        this.selectedPredefinedFilter = defaultFilter;\r\n        this._selectedTabIndex = this.predefinedFilters().findIndex(f => f.id === defaultFilter.id);\r\n        // Emit the predefined filter selection to parent component\r\n        this.predefinedFilterSelect.emit(defaultFilter);\r\n      }\r\n\r\n      // Trigger data refresh - filter is already set so it will be applied when data loads\r\n      this.refreshData.emit();\r\n    }\r\n  }\r\n}","<div>\r\n  <!-- Custom Worklist Controls - Always visible -->\r\n  <div class=\"custom-worklist-controls\" style=\"background: #f8f9fa; padding: 12px; margin-bottom: 10px; border: 1px solid #e9ecef; border-radius: 6px;\">\r\n    <nz-space direction=\"horizontal\" size=\"small\" nzAlign=\"center\" style=\"width: 100%; justify-content: space-between;\">\r\n      <!-- Left side: Worklist selection and actions -->\r\n      <nz-space *nzSpaceItem direction=\"horizontal\" size=\"small\" nzAlign=\"center\">\r\n        <nz-select *nzSpaceItem\r\n        nzSize=\"small\"\r\n        class=\"custom-worklist-select\"\r\n        [ngModel]=\"selectedCustomWorklist?.id\"\r\n        (ngModelChange)=\"onCustomWorklistSelect($event)\"\r\n        [nzDropdownMatchSelectWidth]=\"false\"\r\n        nzPlaceHolder=\"Select a worklist\"\r\n        nzAllowClear\r\n        [nzShowSearch]=\"true\"\r\n        [nzDisabled]=\"!userPreferences.useNewVersion()\"\r\n        style=\"min-width: 200px;\">\r\n        <nz-option\r\n          *ngFor=\"let worklist of customWorklists()\"\r\n          [nzLabel]=\"worklist.name\"\r\n          [nzValue]=\"worklist.id\">\r\n        </nz-option>\r\n      </nz-select>\r\n\r\n      <button *nzSpaceItem\r\n        nz-button\r\n        nzType=\"primary\"\r\n        nzSize=\"small\"\r\n        nzShape=\"circle\"\r\n        nz-tooltip=\"Create New Worklist\"\r\n        (click)=\"openCreateWorklistWizard()\"\r\n        [disabled]=\"!userPreferences.useNewVersion()\"\r\n        style=\"background-color: #1890ff; border-color: #1890ff; min-width: 32px; min-height: 32px;\">\r\n        <span nz-icon nzType=\"plus\" nzTheme=\"outline\" style=\"color: white; font-size: 16px;\"></span>\r\n      </button>\r\n\r\n      <ng-container *ngIf=\"selectedCustomWorklist\">\r\n        <button *nzSpaceItem\r\n          nz-button\r\n          nzType=\"default\"\r\n          nzSize=\"small\"\r\n          nzShape=\"circle\"\r\n          nz-tooltip=\"Edit Worklist\"\r\n          (click)=\"openEditWorklistWizard(selectedCustomWorklist)\"\r\n          [disabled]=\"!userPreferences.useNewVersion()\">\r\n          <span nz-icon nzType=\"edit\" nzTheme=\"outline\"></span>\r\n        </button>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"selectedCustomWorklist\">\r\n        <button *nzSpaceItem\r\n          nz-button\r\n          nzType=\"default\"\r\n          nzDanger\r\n          nzSize=\"small\"\r\n          nzShape=\"circle\"\r\n          nz-tooltip=\"Delete Worklist\"\r\n          nz-popconfirm\r\n          nzPopconfirmTitle=\"Are you sure you want to delete this worklist?\"\r\n          (nzOnConfirm)=\"deleteCustomWorklist(selectedCustomWorklist)\"\r\n          [disabled]=\"!userPreferences.useNewVersion()\">\r\n          <span nz-icon nzType=\"delete\" nzTheme=\"outline\"></span>\r\n        </button>\r\n      </ng-container>\r\n      </nz-space>\r\n\r\n      <!-- Middle: Predefined Filter Counts - Show when using new version -->\r\n      <nz-space *nzSpaceItem direction=\"horizontal\" size=\"small\" nzAlign=\"center\" style=\"flex: 1; justify-content: center;\">\r\n        <ng-container *ngFor=\"let filter of predefinedFiltersForCounts()\">\r\n          <nz-tag *nzSpaceItem\r\n            [class.zero-count]=\"getFilterCount(filter.id) === 0\"\r\n            class=\"filter-count-tag\"\r\n            [nzColor]=\"'default'\"\r\n            style=\"margin: 0 2px; padding: 4px 8px; font-size: 12px; border-radius: 4px; cursor: default;\">\r\n            <span style=\"font-weight: 500;\">{{ filter.label }}:</span>\r\n            <span style=\"font-weight: 700; margin-left: 4px; color: #1890ff;\">{{ getFilterCount(filter.id) }}</span>\r\n          </nz-tag>\r\n        </ng-container>\r\n      </nz-space>\r\n\r\n      <!-- Right side: Version toggle -->\r\n      <nz-space *nzSpaceItem direction=\"horizontal\" size=\"small\" nzAlign=\"center\">\r\n        <span *nzSpaceItem style=\"font-size: 13px; color: #595959; font-weight: 500;\">Use New Version:</span>\r\n        <nz-switch *nzSpaceItem\r\n          [ngModel]=\"userPreferences.useNewVersion()\"\r\n          (ngModelChange)=\"onVersionToggle($event)\"\r\n          nzSize=\"small\"\r\n          [nzCheckedChildren]=\"checkedTemplate\"\r\n          [nzUnCheckedChildren]=\"uncheckedTemplate\">\r\n        </nz-switch>\r\n        <ng-template #checkedTemplate><span nz-icon nzType=\"check\"></span></ng-template>\r\n        <ng-template #uncheckedTemplate><span nz-icon nzType=\"close\"></span></ng-template>\r\n      </nz-space>\r\n    </nz-space>\r\n  </div>\r\n\r\n  <!-- Predefined Filter Tabs Row with Subroute Selection -->\r\n  <div nz-row nzAlign=\"middle\" nzJustify=\"space-between\" class=\"predefined-filters-row\" *ngIf=\"predefinedFilters().length > 0\">\r\n    <div nz-col nzFlex=\"auto\">\r\n      <nz-tabset\r\n        [(nzSelectedIndex)]=\"selectedTabIndex\"\r\n        nzType=\"card\"\r\n        nzSize=\"small\"\r\n        class=\"predefined-filter-tabs\">\r\n\r\n        <!-- Predefined Filter Tabs -->\r\n        <nz-tab *ngFor=\"let filter of predefinedFilters(); let i = index\"\r\n          [nzTitle]=\"getTabTitle(filter)\"\r\n          (nzClick)=\"onPredefinedFilterSelect(filter)\">\r\n          <div>Content for {{ filter.label }}</div>\r\n        </nz-tab>\r\n      </nz-tabset>\r\n    </div>\r\n    <div nz-col nzFlex=\"none\" class=\"subroute-selection-col\">\r\n      <nz-space direction=\"horizontal\" size=\"small\" align=\"center\">\r\n        <nz-select *nzSpaceItem\r\n          nzSize=\"small\"\r\n          class=\"location-select\"\r\n          [ngModel]=\"currentLocationValue\"\r\n          (ngModelChange)=\"onLocationChange($event)\"\r\n          [nzDropdownMatchSelectWidth]=\"false\"\r\n          nzPlaceHolder=\"Location\">\r\n          <nz-option *ngFor=\"let opt of locationOptions()\" [nzLabel]=\"opt.label\" [nzValue]=\"opt.value\"></nz-option>\r\n        </nz-select>\r\n        <!-- Subroute selector (Incoming/Outgoing) -->\r\n        <nz-segmented *nzSpaceItem\r\n          [nzOptions]=\"subrouteOptions\"\r\n          (nzValueChange)=\"onSubrouteChange($event)\"\r\n          class=\"subroute-segmented\">\r\n        </nz-segmented>\r\n      </nz-space>\r\n    </div>\r\n  </div>\r\n  \r\n  <!-- Original Filter Bar Row -->\r\n  <div nz-row nzAlign=\"middle\" nzJustify=\"end\" nzGutter=\"[0,0]\" class=\"filter-controls-row\">\r\n    <div nz-col nzFlex=\"75px\" #userPreferenceButtons>\r\n      <nz-space direction=\"horizontal\" size=\"small\">\r\n        <button *nzSpaceItem nz-button nzType=\"default\" nzShape=\"circle\" nzIcon=\"filter\"\r\n          (click)=\"this.sidebarState.toggle()\">\r\n          <span nz-icon nzType=\"appstore\" nzTheme=\"outline\"></span>\r\n        </button>\r\n        <button *nzSpaceItem nz-button nzType=\"default\" nzShape=\"circle\" aria-label=\"Save Preferences\" (click)=\"this.userPreferences.saveUserPreferences()\">\r\n          <span nz-icon nzType=\"save\" nzTheme=\"outline\"></span>\r\n        </button>\r\n        <button *nzSpaceItem nz-button nzType=\"default\" nzShape=\"circle\" aria-label=\"Reset Column Widths\" (click)=\"resetColumnWidths()\">\r\n          <span nz-icon nzType=\"undo\" nzTheme=\"outline\"></span>\r\n        </button>\r\n      </nz-space>\r\n    </div>\r\n    <div nz-col nzFlex=\"auto\" class=\"fill-rest-col\">\r\n      <nz-space direction=\"horizontal\" size=\"small\">\r\n        <button *nzSpaceItem \r\n          nz-button \r\n          [nzType]=\"showMyAssignmentsOnly ? 'primary' : 'default'\" \r\n          nzShape=\"round\" \r\n          size=\"small\"\r\n          (click)=\"onAssignmentToggle()\"\r\n          class=\"assignment-toggle-button\">\r\n          <span nz-icon nzType=\"user\" nzTheme=\"outline\"></span>\r\n          {{ showMyAssignmentsOnly ? 'My Assignments' : 'All Assignments' }}\r\n        </button>\r\n        <nz-segmented *nzSpaceItem [nzOptions]=\"daysOptions\" (nzValueChange)=\"onDaysFilterChange($event)\"></nz-segmented>\r\n        <input *nzSpaceItem #globalSearchInput nz-input placeholder=\"Global Search\" style=\"width: 220px;\" (input)=\"onGlobalSearch(globalSearchInput.value)\" />\r\n        <button *nzSpaceItem nz-button nzType=\"default\" nzShape=\"circle\" aria-label=\"Refresh Data\" (click)=\"onRefreshData()\" class=\"refresh-button\">\r\n          <span nz-icon nzType=\"reload\" nzTheme=\"outline\" [nzSpin]=\"isLoading\"></span>\r\n          <span *ngIf=\"processingCount > 0\" class=\"processing-badge\">{{ processingCount }}</span>\r\n        </button>\r\n        <ng-container *ngIf=\"showTestOrderButton\">\r\n          <button *nzSpaceItem \r\n            nz-button \r\n            nzType=\"primary\" \r\n            nzShape=\"circle\" \r\n            aria-label=\"Create Test Orders\" \r\n            (click)=\"onCreateTestOrders()\"\r\n            class=\"test-order-button\">\r\n            <span nz-icon nzType=\"plus\" nzTheme=\"outline\"></span>\r\n          </button>\r\n        </ng-container>\r\n      </nz-space>\r\n    </div>\r\n  </div>\r\n</div>","import { Component, Input } from '@angular/core';\r\nimport { ColumnItem } from '../../../models/column-item.model';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NzCheckboxModule } from 'ng-zorro-antd/checkbox';\r\n\r\n@Component({\r\n  selector: 'app-prior-auth-sider',\r\n  templateUrl: './prior-auth-sider.component.html',\r\n  styleUrls: ['./prior-auth-sider.component.scss']\r\n})\r\nexport class PriorAuthSiderComponent {\r\n  @Input() columns: ColumnItem[] = [];\r\n  selectedColumns: ColumnItem[] = [];\r\n\r\n  constructor(\r\n    private columnConfig: ColumnConfigService,\r\n    private userPreferences: UserPreferencesService\r\n  ) {}\r\n\r\n  ngOnChanges(): void {\r\n    this.selectedColumns = this.columns.filter(column => column.display);\r\n  }\r\n\r\n  /**\r\n   * Handle changes to column display when user toggles switches\r\n   * This method ensures the ColumnConfigService signal is updated and syncs with UserPreferencesService\r\n   */\r\n  onColumnDisplayChange(column: ColumnItem, display: boolean): void {\r\n    // Update the column display property\r\n    column.display = display;\r\n    \r\n    // Trigger the ColumnConfigService signal update for reactive UI changes\r\n    this.columnConfig.triggerUpdate();\r\n    \r\n    // Sync the updated columns back to UserPreferencesService so they get saved\r\n    const currentRoute = this.columns[0]?.route || 'prior-auth';\r\n    const routeColumns = this.columns.filter(col => col.route === currentRoute);\r\n    this.userPreferences.updateColumns(routeColumns);\r\n  }\r\n\r\n  /**\r\n   * Handle drag and drop reordering of columns\r\n   * Updates column order in the ColumnConfigService and syncs with UserPreferencesService\r\n   */\r\n  onColumnDrop(event: CdkDragDrop<ColumnItem[]>): void {\r\n    if (event.previousIndex !== event.currentIndex) {\r\n      // Move item in local array for immediate UI feedback\r\n      moveItemInArray(this.columns, event.previousIndex, event.currentIndex);\r\n      \r\n      // Update the service with the new order\r\n      const route = this.columns[0]?.route || 'prior-auth';\r\n      this.columnConfig.moveColumn(route, event.previousIndex, event.currentIndex);\r\n      \r\n      // Sync the updated columns back to UserPreferencesService so they get saved\r\n      const routeColumns = this.columns.filter(col => col.route === route);\r\n      this.userPreferences.updateColumns(routeColumns);\r\n    }\r\n  }\r\n}\r\n","<div class=\"prior-auth-sider\">\r\n  <nz-card nzTitle=\"Column Configuration\">\r\n    <nz-table\r\n      [nzData]=\"columns\"\r\n      [nzBordered]=\"true\"\r\n      [nzSize]=\"'small'\"\r\n      [nzShowPagination]=\"false\"\r\n      class=\"column-toggle-table draggable-table\"\r\n    >\r\n      <thead>\r\n        <tr>\r\n          <th style=\"width: 30px; text-align: center;\">Order</th>\r\n          <th style=\"text-align: left;\">Column</th>\r\n          <th style=\"text-align: center; width: 80px;\">Show</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody \r\n        cdkDropList \r\n        (cdkDropListDropped)=\"onColumnDrop($event)\"\r\n        class=\"draggable-tbody\"\r\n      >\r\n        <tr \r\n          *ngFor=\"let column of columns; let i = index\" \r\n          cdkDrag\r\n          class=\"draggable-row\"\r\n          [class.disabled-row]=\"!column.display\"\r\n        >\r\n          <td style=\"text-align: center; padding: 4px;\">\r\n            <span \r\n              cdkDragHandle \r\n              class=\"drag-handle\"\r\n              nz-icon \r\n              nzType=\"holder\" \r\n              nzTheme=\"outline\">\r\n            </span>\r\n          </td>\r\n          <td style=\"padding: 8px;\">\r\n            <span [class.disabled-text]=\"!column.display\">{{ column.name }}</span>\r\n          </td>\r\n          <td style=\"text-align: center; padding: 4px;\">\r\n            <nz-switch \r\n              [ngModel]=\"column.display\" \r\n              (ngModelChange)=\"onColumnDisplayChange(column, $event)\"\r\n              nzSize=\"small\">\r\n            </nz-switch>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </nz-card>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter, ViewChild, ChangeDetectorRef, computed, signal, AfterViewInit, effect } from '@angular/core';\r\nimport { ColumnConfigService } from '../../services/column-config.service';\r\nimport { ColumnItem } from '../../models/column-item.model';\r\nimport { PriorAuthService } from '../../services/prior-auth.service';\r\nimport { PriorAuthItem } from '../../models/prior-auth.model';\r\nimport { PredefinedFilter } from '../../models/predefined-filter.model';\r\nimport { CustomWorklist } from '../../models/custom-worklist.model';\r\nimport { WorklistTableComponent } from './worklist-table/worklist-table.component';\r\nimport { PriorAuthFilterBarComponent } from './prior-auth-filter-bar/prior-auth-filter-bar.component';\r\nimport { TimerService } from '../../services/timer.service';\r\nimport { CustomWorklistService } from '../../services/custom-worklist.service';\r\nimport { UserPreferencesService } from '../../services/user-preferences.service';\r\n\r\n/**\r\n * PriorAuthComponent - Prior Authorization Worklist Management\r\n * \r\n * This is the main container component for the Prior Authorization tab, orchestrating\r\n * the display and management of authorization requests that require clerk processing.\r\n * It coordinates between the filter bar and worklist table to provide a comprehensive\r\n * workflow management interface.\r\n * \r\n * COMPONENT RESPONSIBILITIES:\r\n * - Serves as the primary container for prior authorization functionality\r\n * - Manages communication between filter bar and worklist table components\r\n * - Handles initial data loading and refresh operations\r\n * - Coordinates sidebar state management for layout optimization\r\n * - Provides centralized error handling and user feedback\r\n * \r\n * ARCHITECTURE INTEGRATION:\r\n * - Consumes signals from PriorAuthService for reactive data updates\r\n * - Delegates column management to ColumnConfigService\r\n * - Coordinates with parent components for sidebar state management\r\n * - Uses child components for specialized functionality (filters, table)\r\n * \r\n * DATA FLOW:\r\n * 1. Initializes worklist data from PriorAuthService\r\n * 2. Provides filter controls via PriorAuthFilterBarComponent\r\n * 3. Displays filtered results via WorklistTableComponent\r\n * 4. Handles user interactions and data refresh requests\r\n * 5. Manages loading states and error conditions\r\n * \r\n * SIGNAL INTEGRATION:\r\n * - Uses computed signals from PriorAuthService for filtered data\r\n * - Reactive updates eliminate manual subscription management\r\n * - Automatic re-rendering when underlying data changes\r\n * - Efficient change detection with minimal performance overhead\r\n * \r\n * USER WORKFLOW:\r\n * - Clerks access this tab to view pending authorization requests\r\n * - Filter controls help focus on relevant work items\r\n * - Table provides detailed item information and action capabilities\r\n * - Milestone tracking enables progress monitoring and updates\r\n * - Feedback system captures user input for continuous improvement\r\n * \r\n * LAYOUT MANAGEMENT:\r\n * - Responds to sidebar collapse/expand state for optimal space usage\r\n * - Coordinates with parent layout for consistent user experience\r\n * - Emits sidebar toggle events for layout state management\r\n * - Maintains responsive design across different screen sizes\r\n */\r\n@Component({\r\n  selector: 'app-prior-auth',\r\n  templateUrl: './prior-auth.component.html',\r\n  styleUrls: ['./prior-auth.component.scss']\r\n})\r\nexport class PriorAuthComponent {\r\n  @Input() SideBarIsCollapsed!: boolean;\r\n  @Output() sideBarToggle = new EventEmitter<void>();\r\n  @ViewChild(WorklistTableComponent) worklistTable!: WorklistTableComponent;\r\n  @ViewChild(PriorAuthFilterBarComponent) filterBar!: PriorAuthFilterBarComponent;\r\n  listOfColumns: ColumnItem[];\r\n\r\n  /**\r\n   * The current days filter value.\r\n   */\r\n  currentDaysFilter: number | 'all' = 'all';\r\n\r\n  /**\r\n   * The current global search term for filtering the worklist - using signal for reactivity\r\n   */\r\n  private _globalSearchTerm = signal<string>('');\r\n  \r\n  /**\r\n   * The currently active predefined filter\r\n   */\r\n  activePredefinedFilter: PredefinedFilter | null = null;\r\n\r\n  /**\r\n   * Flag to show/hide the custom worklist wizard view\r\n   */\r\n  showingWizard: boolean = false;\r\n\r\n  /**\r\n   * The worklist being edited (null for new worklist)\r\n   */\r\n  editingWorklist: CustomWorklist | null = null;\r\n\r\n  /**\r\n   * Current subroute for wizard (incoming/outgoing)\r\n   */\r\n  currentSubroute: string = 'incoming';\r\n\r\n  /**\r\n   * Handler for the global search event from the filter bar.\r\n   * Updates the search term and triggers filtering.\r\n   */\r\n  onGlobalSearch(term: string): void {\r\n    this._globalSearchTerm.set(term);\r\n  }\r\n\r\n  /**\r\n   * Reactive computed signal for filtered worklist items\r\n   * This automatically updates when the service data changes or the global search term changes\r\n   */\r\n  filteredWorklistItems = computed(() => {\r\n    const items = this.worklistService.filteredItems();\r\n    // console.log(`[PriorAuthComponent] Service returned ${items.length} filtered items`);\r\n    const search = this._globalSearchTerm().trim().toLowerCase();\r\n    if (!search) return items;\r\n    return items.filter(item => {\r\n      // Patient Name\r\n      const patientName = item.patient?.name?.toLowerCase() || '';\r\n      // FIN\r\n      const fin = item.patient?.fin?.toLowerCase() || '';\r\n      // MRN\r\n      const mrn = item.patient?.mrn?.toLowerCase() || '';\r\n      // Order Description\r\n      const orderDesc = item.itemDescription?.toLowerCase() || '';\r\n      // Glidian Record ID (not displayed in columns, but searchable)\r\n      const glidianRecordId = item.glidianData?.recordId?.toLowerCase() || '';\r\n      // All Glidian IDs from milestone data (searchable)\r\n      const allGlidianIds = this.getAllGlidianIdsForItem(item).map(id => id.toLowerCase()).join(' ');\r\n      // Order ID\r\n      const orderId = item.orderId?.toString().toLowerCase() || '';\r\n      // Add more fields here as needed\r\n      return (\r\n        patientName.includes(search) ||\r\n        fin.includes(search) ||\r\n        mrn.includes(search) ||\r\n        orderDesc.includes(search) ||\r\n        glidianRecordId.includes(search) ||\r\n        allGlidianIds.includes(search) ||\r\n        orderId.includes(search)\r\n      );\r\n    });\r\n  });\r\n\r\n  /**\r\n   * Get all Glidian IDs from milestone data for a worklist item\r\n   */\r\n  private getAllGlidianIdsForItem(item: PriorAuthItem): string[] {\r\n    const glidianIds: string[] = [];\r\n    \r\n    if (item.milestones) {\r\n      for (const milestone of item.milestones) {\r\n        if (milestone.milestoneData) {\r\n          for (const data of milestone.milestoneData) {\r\n            if (data.type === 'RECORD_ID' && data.valueText && data.valueText.trim() !== '') {\r\n              glidianIds.push(data.valueText);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return glidianIds;\r\n  }\r\n\r\n  constructor(\r\n    private columnConfig: ColumnConfigService,\r\n    private worklistService: PriorAuthService,\r\n    private cdr: ChangeDetectorRef,\r\n    private timerService: TimerService,\r\n    private customWorklistService: CustomWorklistService,\r\n    private userPreferences: UserPreferencesService\r\n  ) {\r\n    this.listOfColumns = this.columnConfig.getColumns('prior-auth');\r\n\r\n    // Watch for processing count to stop frontend timer when all progressive loading completes\r\n    effect(() => {\r\n      const processingCount = this.worklistService.processingCount();\r\n      const loading = this.worklistService.loading();\r\n\r\n\r\n      // Stop timer when main loading is complete AND no items are being processed\r\n      // This ensures we capture the complete loading cycle including progressive updates\r\n      if (!loading && processingCount === 0) {\r\n        setTimeout(() => {\r\n          this.timerService.stopFrontendTimer();\r\n        }, 0);\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Component initialization - setup filters and conditionally load data\r\n    // Initialize the current filter value from the service\r\n    this.currentDaysFilter = this.worklistService.getCurrentDaysFilter();\r\n\r\n    // Check if using new version (custom worklist filtering) or old version (predefined filters)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    if (useNewVersion) {\r\n      // NEW VERSION MODE: Wait for user to select a custom worklist before loading data\r\n      // Check if there's a default custom worklist for the prior-auth route\r\n      const defaultCustomWorklist = this.customWorklistService.defaultWorklistForRoute()('prior-auth', 'incoming')\r\n        || this.customWorklistService.defaultWorklistForRoute()('prior-auth');\r\n\r\n      if (defaultCustomWorklist) {\r\n        // If a default custom worklist exists, use it and auto-load data\r\n        const customFilter = this.customWorklistService.toPredefinedFilter(defaultCustomWorklist);\r\n        this.activePredefinedFilter = customFilter;\r\n        this.worklistService.updatePredefinedFilter(customFilter);\r\n\r\n        // Manually trigger change detection to ensure UI updates after filter is set\r\n        this.cdr.detectChanges();\r\n\r\n        // Load worklist data since we have a default custom worklist\r\n        this.loadWorklistData().catch((error) => {\r\n          // Error loading worklist data\r\n        });\r\n      } else {\r\n        // No default custom worklist - user will need to select a worklist to load data\r\n        this.activePredefinedFilter = null;\r\n        this.cdr.detectChanges();\r\n      }\r\n    } else {\r\n      // OLD VERSION MODE: Load ALL data immediately (no filter applied by backend)\r\n      // The predefined filter tabs will filter the data on the frontend\r\n\r\n      // Get the default predefined filter for the current subroute\r\n      const defaultFilter = this.columnConfig.getDefaultPredefinedFilter('prior-auth', 'incoming');\r\n\r\n      if (defaultFilter) {\r\n        // Set the default filter in both component and service\r\n        this.activePredefinedFilter = defaultFilter;\r\n        this.worklistService.updatePredefinedFilter(defaultFilter);\r\n\r\n        // If the filter includes a days filter, update the current days filter\r\n        if (defaultFilter.filters.daysFilter !== undefined) {\r\n          this.currentDaysFilter = defaultFilter.filters.daysFilter;\r\n        }\r\n      } else {\r\n        this.activePredefinedFilter = null;\r\n      }\r\n\r\n      this.cdr.detectChanges();\r\n\r\n      // Load all data without filters - predefined filters will be applied on frontend\r\n      this.loadWorklistData().catch((error) => {\r\n        // Error loading worklist data\r\n      });\r\n    }\r\n\r\n    // Note: No need to subscribe to itemDetailUpdated$ here anymore since filteredWorklistItems\r\n    // is now a computed signal that automatically reacts to service signal changes\r\n  }\r\n\r\n  /**\r\n   * Called after the view has been initialized\r\n   */\r\n  ngAfterViewInit(): void {\r\n    // View initialization complete - no timer operations here\r\n    // Timer is managed in loadWorklistData() method\r\n  }\r\n\r\n  /**\r\n   * Load worklist data from the service\r\n   * Returns a Promise that resolves when data loading is complete\r\n   */\r\n  loadWorklistData(): Promise<void> {\r\n    // Fetch worklist data from the service\r\n    // The service will handle progressive loading and the component will react automatically\r\n    return new Promise<void>((resolve, reject) => {\r\n      this.worklistService.refreshWorklist().subscribe({\r\n        next: () => {\r\n          // Data loading completed - the reactive signals will handle updates\r\n          // console.log('[PriorAuthComponent] Worklist data loaded successfully');\r\n          \r\n          // Manually trigger change detection after data loads to ensure UI updates\r\n          this.cdr.detectChanges();\r\n          // console.log('[PriorAuthComponent] Change detection triggered after data load');\r\n          \r\n          resolve();\r\n        },\r\n        error: (error) => {\r\n          // Handle worklist loading errors - could show user notification\r\n          // Error loading worklist data\r\n          reject(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handles the days filter change event\r\n   */\r\n  onDaysFilterChange(days: number | 'all'): void {\r\n    // Handle user-initiated days filter change\r\n    this.currentDaysFilter = days;\r\n    \r\n    // Update the service state - this will automatically update the filteredItems signal\r\n    this.worklistService.updateDaysFilter(days);\r\n  }\r\n\r\n  onSideBarToggle() {\r\n    this.sideBarToggle.emit();\r\n  }\r\n\r\n  /**\r\n   * Handler for column widths reset event from the filter bar.\r\n   */\r\n  onColumnWidthsReset(): void {\r\n    // The reset is handled in the filter bar component\r\n    // This method exists for completeness if needed in the future\r\n  }\r\n\r\n  /**\r\n   * Handler for refresh data event from the filter bar.\r\n   * Reloads the worklist data from the service.\r\n   */\r\n  onRefreshData(): void {\r\n    // Handle user-initiated data refresh request\r\n    this.loadWorklistData().catch((error) => {\r\n      // Error refreshing worklist data\r\n    });\r\n    // Don't call restoreTableFilters here - it will be called by ngOnChanges when data updates\r\n  }\r\n\r\n  /**\r\n   * Handler for clear data event from the filter bar.\r\n   * Clears all worklist data and filters (used when toggling to new version mode).\r\n   */\r\n  onClearData(): void {\r\n    // Clear the predefined filter\r\n    this.worklistService.clearPredefinedFilter();\r\n    // Clear all worklist data from the table\r\n    this.worklistService.clearWorklistData();\r\n    // Clear the active predefined filter in the component\r\n    this.activePredefinedFilter = null;\r\n  }\r\n  \r\n  /**\r\n   * Handles predefined filter selection from the filter bar\r\n   */\r\n  onPredefinedFilterSelect(filter: PredefinedFilter | null): void {\r\n    // Update the component state\r\n    this.activePredefinedFilter = filter;\r\n\r\n    // Check if using new version (custom worklist filtering) or old version (predefined filters)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    // Update the service with the selected predefined filter\r\n    if (filter) {\r\n      this.worklistService.updatePredefinedFilter(filter);\r\n      // If the filter includes a days filter, update the current days filter\r\n      if (filter.filters.daysFilter !== undefined) {\r\n        this.currentDaysFilter = filter.filters.daysFilter;\r\n      }\r\n\r\n      // NEW VERSION: Trigger data load with backend filtering\r\n      // OLD VERSION: Only update filter signal, data already loaded, filteredItems will react\r\n      if (useNewVersion) {\r\n        // Trigger data load when user selects a worklist (backend filtering)\r\n        this.loadWorklistData().catch((error) => {\r\n          // Error loading worklist data\r\n        });\r\n      }\r\n      // In old version mode, the filteredItems computed signal will automatically\r\n      // apply the filter to the already-loaded data without a backend call\r\n    } else {\r\n      this.worklistService.clearPredefinedFilter();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles the assignment filter toggle from the filter bar\r\n   * @param showMyAssignmentsOnly - true to show only current user's assignments, false to show all\r\n   */\r\n  onAssignmentToggle(showMyAssignmentsOnly: boolean): void {\r\n    // Update the service with the assignment filter state\r\n    this.worklistService.updateAssignmentFilter(showMyAssignmentsOnly);\r\n  }\r\n\r\n  /**\r\n   * Handles clearing column filters when switching between predefined filter tabs\r\n   * This ensures users see the expected predefined filter results without user-applied filters interfering\r\n   */\r\n  onClearColumnFilters(): void {\r\n    // Clear column filters in the worklist table component\r\n    if (this.worklistTable) {\r\n      // Clear the filter selections in the table component\r\n      this.worklistTable.clearAllColumnFilters();\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Getter for the loading state from the service\r\n   * Used in template to show loading spinner\r\n   */\r\n  get isLoading(): boolean {\r\n    const loading = this.worklistService.loading();\r\n    return loading;\r\n  }\r\n\r\n  /**\r\n   * Handler for showing the wizard view\r\n   * Receives wizard configuration from the filter bar\r\n   */\r\n  onShowWizardView(config: { editWorklist: CustomWorklist | null; subroute: string }): void {\r\n    this.editingWorklist = config.editWorklist;\r\n    this.currentSubroute = config.subroute;\r\n    this.showingWizard = true;\r\n  }\r\n\r\n  /**\r\n   * Handler for closing the wizard view\r\n   * Returns to the worklist table view\r\n   */\r\n  onCloseWizard(): void {\r\n    this.showingWizard = false;\r\n    this.editingWorklist = null;\r\n  }\r\n\r\n  /**\r\n   * Handler for when a worklist is saved from the wizard\r\n   * Closes the wizard and returns to table view\r\n   */\r\n  onWorklistSaved(worklist: CustomWorklist): void {\r\n    this.showingWizard = false;\r\n    this.editingWorklist = null;\r\n\r\n    // Tell the filter bar to select the newly created/updated worklist\r\n    if (this.filterBar) {\r\n      this.filterBar.selectCustomWorklist(worklist);\r\n    }\r\n  }\r\n}","<div class=\"prior-auth-container\" nz-row [nzGutter]=\"[0, 8]\">\r\n  <div nz-col [nzSpan]=\"24\">\r\n    <app-prior-auth-filter-bar\r\n      (sideBarToggle)=\"onSideBarToggle()\"\r\n      (columnWidthsReset)=\"onColumnWidthsReset()\"\r\n      (daysFilterChange)=\"onDaysFilterChange($event)\"\r\n      (refreshData)=\"onRefreshData()\"\r\n      (clearData)=\"onClearData()\"\r\n      (globalSearch)=\"onGlobalSearch($event)\"\r\n      (predefinedFilterSelect)=\"onPredefinedFilterSelect($event)\"\r\n      (clearColumnFilters)=\"onClearColumnFilters()\"\r\n      (assignmentToggle)=\"onAssignmentToggle($event)\"\r\n      (showWizardView)=\"onShowWizardView($event)\"\r\n    >\r\n    </app-prior-auth-filter-bar>\r\n  </div>\r\n\r\n  <!-- Worklist Table View -->\r\n  <div nz-col [nzSpan]=\"24\" *ngIf=\"!showingWizard\">\r\n    <app-worklist-table\r\n      [worklistItems]=\"filteredWorklistItems()\"\r\n      [loading]=\"isLoading\"\r\n      [activePredefinedFilter]=\"activePredefinedFilter\">\r\n    </app-worklist-table>\r\n  </div>\r\n\r\n  <!-- Custom Worklist Wizard View -->\r\n  <div nz-col [nzSpan]=\"24\" *ngIf=\"showingWizard\">\r\n    <app-custom-worklist-wizard\r\n      [editWorklist]=\"editingWorklist\"\r\n      [subroute]=\"currentSubroute\"\r\n      (closeModal)=\"onCloseWizard()\"\r\n      (worklistSaved)=\"onWorklistSaved($event)\">\r\n    </app-custom-worklist-wizard>\r\n  </div>\r\n</div>","import { Component, Input, OnInit, ChangeDetectorRef } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthMilestone, MilestoneUpdateRequest } from '../../../../../models/prior-auth.model';\r\nimport { PriorAuthService } from '../../../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../../../services/messaging.service';\r\n\r\n@Component({\r\n  selector: 'app-earliest-date-milestone',\r\n  templateUrl: './earliest-date-milestone.component.html',\r\n  styleUrls: ['./earliest-date-milestone.component.scss']\r\n})\r\nexport class EarliestDateMilestoneComponent implements OnInit {\r\n  @Input() milestone!: PriorAuthMilestone;\r\n  @Input() worklistItem!: PriorAuthItem;\r\n  isButtonChecked = false;\r\n  selectedDate: Date | null = null;\r\n  isDateError = false;\r\n  isHovering = false; // Track hover state for undo functionality\r\n  hasDateChanged = false; // Track if the date has been changed from original EDOS value (from worklistItem.edosDate)\r\n  \r\n  constructor(\r\n    private priorAuthService: PriorAuthService,\r\n    private messagingService: MessagingService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Initialize with EDOS date from worklist item (same source as the column)\r\n    this.selectedDate = this.getEDOSValueDate() ?? null;\r\n    this.hasDateChanged = false; // Initially no change since we're setting to current EDOS value\r\n    \r\n    // Set button as checked if milestone status is already Complete\r\n    if (this.milestone.status === 'Complete') {\r\n      this.isButtonChecked = true;\r\n    }\r\n  }\r\n\r\n  // Handle mouse enter event for hover state\r\n  onMouseEnter(): void {\r\n    this.isHovering = true;\r\n  }\r\n\r\n  // Handle mouse leave event for hover state\r\n  onMouseLeave(): void {\r\n    this.isHovering = false;\r\n  }\r\n\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'milestone-complete';\r\n      case 'In Progress':\r\n        return 'milestone-in-progress';\r\n      case 'Pending':\r\n        return 'milestone-pending';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  onDateChange(date: Date): void {\r\n    // Prevent date changes if scheduled\r\n    if (this.isScheduled()) {\r\n      this.messagingService.warning('EDOS date cannot be modified when the item is scheduled');\r\n      return;\r\n    }\r\n\r\n    this.selectedDate = date;\r\n    \r\n    // Compare the selected date with the current EDOS value date (from worklistItem.edosDate) to determine if it's changed\r\n    const currentEDOSDate = this.getEDOSValueDate();\r\n    \r\n    // Helper function to normalize dates for comparison (ignore time components)\r\n    const normalizeDateForComparison = (dateValue: Date | null): string | null => {\r\n      if (!dateValue) return null;\r\n      // Create a new date object and set time to midnight for consistent comparison\r\n      const normalizedDate = new Date(dateValue);\r\n      normalizedDate.setHours(0, 0, 0, 0);\r\n      return normalizedDate.toISOString().split('T')[0]; // Get YYYY-MM-DD format\r\n    };\r\n    \r\n    // Compare normalized dates\r\n    const currentDateNormalized = normalizeDateForComparison(currentEDOSDate);\r\n    const selectedDateNormalized = normalizeDateForComparison(this.selectedDate);\r\n    \r\n    // Determine if the date has changed\r\n    this.hasDateChanged = currentDateNormalized !== selectedDateNormalized;\r\n    \r\n    // Log for debugging - now using worklistItem.edosDate as the source\r\n    console.log('Date change comparison:', {\r\n      currentEDOSDate: currentEDOSDate,\r\n      selectedDate: this.selectedDate,\r\n      currentDateNormalized: currentDateNormalized,\r\n      selectedDateNormalized: selectedDateNormalized,\r\n      hasDateChanged: this.hasDateChanged\r\n    });\r\n    \r\n    if (this.isButtonChecked) {\r\n      this.isButtonChecked = false;\r\n    }\r\n    if (this.selectedDate === null) {\r\n      this.isDateError = true;\r\n    } else {\r\n      this.isDateError = false;\r\n    }\r\n  }\r\n\r\n  onEODCheckClick(): void {\r\n    // Prevent action if scheduled\r\n    if (this.isScheduled()) {\r\n      this.messagingService.warning('EDOS cannot be modified when the item is scheduled');\r\n      return;\r\n    }\r\n\r\n    // If milestone is already complete and we're hovering (showing X), handle undo\r\n    if (this.isButtonChecked && this.isHovering) {\r\n      this.undoMilestone();\r\n      return;\r\n    }\r\n\r\n    // Ensure we have a valid date before proceeding with completion\r\n    if (!this.selectedDate) {\r\n      this.messagingService.error('Please select a valid date before updating the milestone');\r\n      return;\r\n    }\r\n\r\n    this.isButtonChecked = true;\r\n    \r\n    // Log for debugging\r\n    console.log('Milestone update - hasDateChanged:', this.hasDateChanged);\r\n    console.log('Milestone update - valueID will be:', this.hasDateChanged ? 1.0 : 0.0);\r\n    \r\n    // Prepare the request data for milestone update\r\n    const requestData: MilestoneUpdateRequest = {\r\n      compassMilestoneId: this.milestone.milestoneId,\r\n      status: 'Complete',\r\n      statusDateTime: new Date(),\r\n      completedDate: new Date(),\r\n      actionMeaning: 'Confirmed EDOS',\r\n      milestoneData: [\r\n        {\r\n          name: 'EDOS',\r\n          type: 'EDOS',\r\n          lastUpdateDateTime: new Date(),\r\n          valueDate: this.selectedDate,\r\n          valueCd: 1, // Assuming 1 for complete status\r\n          valueText: 'Earliest Date of Service confirmed',\r\n          valueID: this.hasDateChanged ? 1.0 : 0.0 // 1 if date changed, 0 if no change\r\n        }\r\n      ]\r\n    };\r\n\r\n    // Call the updateMilestone service\r\n    this.priorAuthService.updateMilestone(requestData, this.worklistItem.compass_worklist_id)\r\n      .subscribe({\r\n        next: (response) => {\r\n          // Process milestone update response from backend service\r\n          if (response.success) {\r\n            const patientName = this.worklistItem.patient?.name || 'Unknown Patient';\r\n            const milestoneName = this.milestone.name || 'Earliest Date';\r\n            this.messagingService.success(`${milestoneName} milestone confirmed for ${patientName}. Please refresh to see changes.`);\r\n            // Do NOT update this.milestone or the worklist item here!\r\n          } else {\r\n            // Revert the button state on failure\r\n            this.isButtonChecked = false;\r\n          }\r\n        },\r\n        error: (error) => {\r\n          // Handle milestone update failure - service call error occurred\r\n          // Revert the button state on error\r\n          this.isButtonChecked = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  // Handle undo functionality to set milestone back to Open status\r\n  private undoMilestone(): void {\r\n    // Prevent undo if scheduled\r\n    if (this.isScheduled()) {\r\n      this.messagingService.warning('EDOS cannot be modified when the item is scheduled');\r\n      return;\r\n    }\r\n\r\n    // Prepare the request data for milestone undo\r\n    const requestData: MilestoneUpdateRequest = {\r\n      compassMilestoneId: this.milestone.milestoneId,\r\n      status: 'Open',\r\n      statusDateTime: new Date(),\r\n      completedDate: undefined, // Clear completed date when reverting to Open\r\n      actionMeaning: 'Unconfirmed EDOS',\r\n      milestoneData: [\r\n        {\r\n          name: 'EDOS',\r\n          type: 'EDOS',\r\n          lastUpdateDateTime: new Date(),\r\n          valueDate: this.selectedDate!,\r\n          valueCd: 0, // Assuming 0 for open status\r\n          valueText: 'Earliest Date of Service - Open',\r\n          valueID: this.hasDateChanged ? 1.0 : 0.0 // 1 if date changed, 0 if no change\r\n        }\r\n      ]\r\n    };\r\n\r\n    // Call the updateMilestone service to revert status\r\n    this.priorAuthService.updateMilestone(requestData, this.worklistItem.compass_worklist_id)\r\n      .subscribe({\r\n        next: (response) => {\r\n          // Process milestone update response from backend service\r\n          \r\n          if (response.success) {\r\n            // Update the local milestone data on success\r\n            this.milestone.status = 'Open';\r\n            this.milestone.statusDateTime = new Date();\r\n            this.milestone.completedDate = undefined;\r\n            this.isButtonChecked = false;\r\n            this.isHovering = false; // Reset hover state to immediately show unchecked state\r\n            this.cdr.detectChanges(); // Force change detection to update the view immediately\r\n          } else {\r\n            // Keep the button state on failure\r\n            this.messagingService.error('Failed to revert milestone status');\r\n          }\r\n        },\r\n        error: (error) => {\r\n          // Handle milestone update failure - service call error occurred\r\n          this.messagingService.error('Failed to revert milestone status');\r\n        }\r\n      });\r\n  }\r\n\r\n  getEDOSValueDate(): Date | null {\r\n    // Use the same EDOS data source as the worklist column\r\n    if (!this.worklistItem.edosDate) {\r\n      return null;\r\n    }\r\n    \r\n    // Handle both Date objects and date strings from JSON serialization\r\n    if (this.worklistItem.edosDate instanceof Date) {\r\n      return this.worklistItem.edosDate;\r\n    } else {\r\n      // Convert string to Date object\r\n      const dateValue = new Date(this.worklistItem.edosDate);\r\n      // Check if the date is valid\r\n      return isNaN(dateValue.getTime()) ? null : dateValue;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns true if the scheduling status is \"Scheduled\"\r\n   * Used to disable EDOS functionality when item is already scheduled\r\n   */\r\n  isScheduled(): boolean {\r\n    return this.worklistItem?.schedule?.state === 'Scheduled';\r\n  }\r\n\r\n  /**\r\n   * Returns true if the EDOS components should be disabled\r\n   * Combines scheduling status and existing error conditions\r\n   */\r\n  isEdosDisabled(): boolean {\r\n    return this.isScheduled() || this.isDateError;\r\n  }\r\n\r\n  /**\r\n   * Get user-friendly message for disabled state\r\n   */\r\n  getDisabledMessage(): string {\r\n    if (this.isScheduled()) {\r\n      return 'EDOS functionality is disabled when the item is scheduled';\r\n    }\r\n    if (this.isDateError) {\r\n      return 'Please select a valid date';\r\n    }\r\n    return '';\r\n  }\r\n\r\n  /**\r\n   * Check if undo functionality should be available\r\n   */\r\n  canUndoMilestone(): boolean {\r\n    return this.isButtonChecked && this.isHovering && !this.isScheduled();\r\n  }\r\n} ","<div>\r\n  <nz-row [nzGutter]=\"[2, 2]\" nzJustify=\"start\" nzAlign=\"middle\">\r\n    <nz-col nzFlex=\"auto\" class=\"date-section\">\r\n      <nz-date-picker \r\n        [nzSize]=\"'small'\"\r\n        [ngModel]=\"selectedDate\"\r\n        (ngModelChange)=\"onDateChange($event)\"\r\n        [nzStatus]=\"!selectedDate ? 'error' : ''\"\r\n        [nzDisabled]=\"isScheduled()\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"isScheduled() ? 'EDOS cannot be modified when item is scheduled' : ''\">\r\n      </nz-date-picker>\r\n      <button \r\n        nz-button \r\n        nzType=\"default\" \r\n        nzSize=\"small\"\r\n        [ngClass]=\"{\r\n          'check-button-saved': isButtonChecked && !isHovering,\r\n          'check-button-undo': isButtonChecked && isHovering,\r\n          'check-button-disabled': isScheduled()\r\n        }\"\r\n        (click)=\"onEODCheckClick()\"\r\n        (mouseenter)=\"onMouseEnter()\"\r\n        (mouseleave)=\"onMouseLeave()\"\r\n        [disabled]=\"isEdosDisabled()\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"isScheduled() ? 'EDOS cannot be confirmed when item is scheduled' : ''\">\r\n        <span nz-icon [nzType]=\"isButtonChecked && isHovering ? 'close' : 'check'\"></span>\r\n      </button>\r\n    </nz-col>\r\n  </nz-row>\r\n</div> ","import { Component, Input, Output, EventEmitter, OnInit, OnDestroy, OnChanges, ChangeDetectorRef } from '@angular/core';\r\nimport { DocumentRow } from '../../../../../../../models/document.model';\r\nimport { PriorAuthService } from '../../../../../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../../../../../services/messaging.service';\r\nimport { CernerActionService } from '../../../../../../../services/cerner-action.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { DomSanitizer, SafeHtml, SafeResourceUrl } from '@angular/platform-browser';\r\n\r\n@Component({\r\n  selector: 'app-document-preview-drawer',\r\n  templateUrl: './document-preview-drawer.component.html',\r\n  styleUrls: ['./document-preview-drawer.component.scss']\r\n})\r\nexport class DocumentPreviewDrawerComponent implements OnInit, OnDestroy, OnChanges {\r\n  /** Whether the drawer is visible */\r\n  @Input() visible = false;\r\n  /** Document to preview */\r\n  @Input() document: DocumentRow | null = null;\r\n  /** Worklist item for API calls */\r\n  @Input() worklistItem: any = null;\r\n  /** Available documents list to check if document is already attached */\r\n  @Input() availableDocuments: DocumentRow[] = [];\r\n  /** Attached documents list to check if document is already attached */\r\n  @Input() attachedDocuments: DocumentRow[] = [];\r\n\r\n  /** Event emitted when drawer should be closed */\r\n  @Output() close = new EventEmitter<void>();\r\n  /** Event emitted when a document is attached */\r\n  @Output() documentAttached = new EventEmitter<void>();\r\n  /** Event emitted when a document should be selected in the list */\r\n  @Output() documentSelected = new EventEmitter<DocumentRow>();\r\n\r\n  /** Loading state */\r\n  isPreviewLoading = false;\r\n  /** Document content for display */\r\n  previewDocumentContent: SafeHtml | null = null;\r\n  /** Document URL for iframe display */\r\n  previewDocumentUrl: SafeResourceUrl | null = null;\r\n  /** Document title for display */\r\n  previewDocumentTitle = '';\r\n  /** Loading state for saving attachment */\r\n  isSavingAttachment = false;\r\n\r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private priorAuthService: PriorAuthService,\r\n    private messagingService: MessagingService,\r\n    private cernerActionService: CernerActionService,\r\n    private sanitizer: DomSanitizer,\r\n    private cdr: ChangeDetectorRef\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Watch for document changes\r\n    if (this.document) {\r\n      this.loadDocumentPreview();\r\n    }\r\n    \r\n    // Listen for messages from iframe buttons\r\n    window.addEventListener('message', this.handleIframeMessage.bind(this));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n    \r\n    // Clean up message listener\r\n    window.removeEventListener('message', this.handleIframeMessage.bind(this));\r\n  }\r\n\r\n  ngOnChanges(): void {\r\n    if (this.document && this.visible) {\r\n      this.loadDocumentPreview();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load document preview content\r\n   */\r\n  private loadDocumentPreview(): void {\r\n    if (!this.document || !this.worklistItem) {\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof this.document.eventId === 'string' && this.document.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot preview documents with temporary IDs');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof this.document.eventId === 'string' ? parseInt(this.document.eventId, 10) : this.document.eventId;\r\n\r\n    // Show loading state\r\n    this.isPreviewLoading = true;\r\n    this.previewDocumentTitle = this.document.title;\r\n    this.previewDocumentContent = null;\r\n\r\n    this.priorAuthService.getDocumentPreview(\r\n      eventId,\r\n      this.worklistItem.personId,\r\n      this.worklistItem.encntrId\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response: any) => {\r\n          this.isPreviewLoading = false;\r\n\r\n          if (response.success && response.documentHtml) {\r\n            // Create a data URL for iframe display\r\n            // Ensure the HTML has proper DOCTYPE and structure\r\n            let htmlContent = response.documentHtml;\r\n            if (!htmlContent.includes('<!DOCTYPE')) {\r\n              htmlContent = '<!DOCTYPE html><html><head><meta charset=\"utf-8\"><title>Document Preview</title></head><body>' + htmlContent + '</body></html>';\r\n            }\r\n            const dataUrl = 'data:text/html;charset=utf-8,' + encodeURIComponent(htmlContent);\r\n            this.previewDocumentUrl = this.sanitizer.bypassSecurityTrustResourceUrl(dataUrl);\r\n            this.cdr.detectChanges();\r\n          } else if (response.success === false) {\r\n            const errorMessage = response.message || 'Unable to load document preview';\r\n            \r\n            // Check if this is the specific \"No document content found\" error\r\n            const isNoContentError = errorMessage.includes('No document content found for this event ID');\r\n            \r\n            let displayMessage = errorMessage;\r\n            let displayTitle = 'Error Loading Document';\r\n            \r\n            if (isNoContentError) {\r\n              displayTitle = 'Document Cannot Be Rendered';\r\n              displayMessage = 'This document can\\'t be rendered in this view.';\r\n            }\r\n            \r\n            let errorHtml = `\r\n              <!DOCTYPE html>\r\n              <html>\r\n              <head>\r\n                <meta charset=\"utf-8\">\r\n                <title>Error</title>\r\n                <style>\r\n                  body { font-family: Arial, sans-serif; padding: 20px; color: #d32f2f; }\r\n                  h3 { color: #d32f2f; }\r\n                  .button-container { margin-top: 20px; }\r\n                  .view-button { \r\n                    display: inline-block; \r\n                    margin: 5px 10px 5px 0; \r\n                    padding: 8px 16px; \r\n                    background-color: #1890ff; \r\n                    color: white; \r\n                    text-decoration: none; \r\n                    border-radius: 4px; \r\n                    border: none; \r\n                    cursor: pointer;\r\n                    font-size: 14px;\r\n                  }\r\n                  .view-button:hover { background-color: #40a9ff; }\r\n                  .view-button:disabled { \r\n                    background-color: #d9d9d9; \r\n                    color: #999; \r\n                    cursor: not-allowed; \r\n                  }\r\n                </style>\r\n              </head>\r\n              <body>\r\n                <h3>${displayTitle}</h3>\r\n                <p>${displayMessage}</p>\r\n            `;\r\n            \r\n            if (isNoContentError) {\r\n              errorHtml += `\r\n                <div class=\"button-container\">\r\n                  <button class=\"view-button\" onclick=\"parent.postMessage({action: 'viewInCerner'}, '*')\" \r\n                          ${!this.document || !this.canViewInCerner(this.document) ? 'disabled' : ''}>\r\n                    📄 View Document\r\n                  </button>\r\n                  <button class=\"view-button\" onclick=\"parent.postMessage({action: 'viewInCernerProcedure'}, '*')\" \r\n                          ${!this.document || !this.canViewInCernerProcedure(this.document) ? 'disabled' : ''}>\r\n                    🏥 View Procedure\r\n                  </button>\r\n                </div>\r\n              `;\r\n            }\r\n            \r\n            errorHtml += `\r\n              </body>\r\n              </html>\r\n            `;\r\n            const errorDataUrl = 'data:text/html;charset=utf-8,' + encodeURIComponent(errorHtml);\r\n            this.previewDocumentUrl = this.sanitizer.bypassSecurityTrustResourceUrl(errorDataUrl);\r\n            this.cdr.detectChanges();\r\n          } else {\r\n            const noContentHtml = `\r\n              <!DOCTYPE html>\r\n              <html>\r\n              <head>\r\n                <meta charset=\"utf-8\">\r\n                <title>No Content</title>\r\n                <style>\r\n                  body { font-family: Arial, sans-serif; padding: 20px; color: #666; }\r\n                  h3 { color: #666; }\r\n                </style>\r\n              </head>\r\n              <body>\r\n                <h3>No Content Available</h3>\r\n                <p>This document does not have preview content available.</p>\r\n              </body>\r\n              </html>\r\n            `;\r\n            const noContentDataUrl = 'data:text/html;charset=utf-8,' + encodeURIComponent(noContentHtml);\r\n            this.previewDocumentUrl = this.sanitizer.bypassSecurityTrustResourceUrl(noContentDataUrl);\r\n            this.cdr.detectChanges();\r\n          }\r\n        },\r\n        error: (error: any) => {\r\n          this.isPreviewLoading = false;\r\n          this.messagingService.error('Failed to load document preview');\r\n\r\n          const errorHtml = `\r\n            <!DOCTYPE html>\r\n            <html>\r\n            <head>\r\n              <meta charset=\"utf-8\">\r\n              <title>Error</title>\r\n              <style>\r\n                body { font-family: Arial, sans-serif; padding: 20px; color: #d32f2f; }\r\n                h3 { color: #d32f2f; }\r\n              </style>\r\n            </head>\r\n            <body>\r\n              <h3>Error Loading Document</h3>\r\n              <p>Failed to load document preview</p>\r\n            </body>\r\n            </html>\r\n          `;\r\n          const errorDataUrl = 'data:text/html;charset=utf-8,' + encodeURIComponent(errorHtml);\r\n          this.previewDocumentUrl = this.sanitizer.bypassSecurityTrustResourceUrl(errorDataUrl);\r\n          this.cdr.detectChanges();\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Check if the current document can be saved as attachment\r\n   */\r\n  canSaveAsAttachment(): boolean {\r\n    if (!this.document || !this.worklistItem?.compass_worklist_id) {\r\n      return false;\r\n    }\r\n\r\n    // Check if document is already attached\r\n    const isAlreadyAttached = this.attachedDocuments.some(doc => doc.eventId === this.document?.eventId);\r\n    if (isAlreadyAttached) {\r\n      return false;\r\n    }\r\n\r\n    // Check if document is available for attachment\r\n    const isAvailable = this.availableDocuments.some(doc => doc.eventId === this.document?.eventId);\r\n    return isAvailable;\r\n  }\r\n\r\n  /**\r\n   * Check if the current document can be selected\r\n   */\r\n  canSelectDocument(): boolean {\r\n    if (!this.document) {\r\n      return false;\r\n    }\r\n\r\n    // Check if document is available for selection (in available documents list)\r\n    const isAvailable = this.availableDocuments.some(doc => doc.eventId === this.document?.eventId);\r\n    return isAvailable;\r\n  }\r\n\r\n  /**\r\n   * Select the current document in the document list\r\n   */\r\n  selectDocument(): void {\r\n    if (!this.document) {\r\n      this.messagingService.error('No document available to select');\r\n      return;\r\n    }\r\n\r\n    if (!this.canSelectDocument()) {\r\n      this.messagingService.info('Document cannot be selected (not available in document list)');\r\n      return;\r\n    }\r\n\r\n    // Emit the document selection event\r\n    this.documentSelected.emit(this.document);\r\n    this.messagingService.success(`Document \"${this.document.title}\" selected`);\r\n  }\r\n\r\n  /**\r\n   * Save the current document as an attachment\r\n   */\r\n  saveAsAttachment(): void {\r\n    if (!this.document || !this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No document or worklist item available');\r\n      return;\r\n    }\r\n\r\n    if (!this.canSaveAsAttachment()) {\r\n      this.messagingService.info('Document cannot be attached (already attached or not available)');\r\n      return;\r\n    }\r\n\r\n    this.isSavingAttachment = true;\r\n\r\n    // Prepare the new document for attachment\r\n    const documentToAttach = {\r\n      event_id: this.convertEventIdForBackend(this.document.eventId),\r\n      title: this.document.title\r\n    };\r\n\r\n    // Include all currently attached documents to preserve them\r\n    const existingAttachedDocuments = this.attachedDocuments.map(doc => ({\r\n      event_id: this.convertEventIdForBackend(doc.eventId),\r\n      title: doc.title\r\n    }));\r\n\r\n    // Combine existing attached documents with the new one\r\n    const allDocuments = [...existingAttachedDocuments, documentToAttach];\r\n\r\n    // Call the attachment service with all documents\r\n    this.priorAuthService.attachDocumentsToGlidianMilestone(\r\n      this.worklistItem.compass_worklist_id,\r\n      allDocuments\r\n    ).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe({\r\n      next: (response) => {\r\n        this.messagingService.success(`Document \"${this.document?.title}\" attached successfully`);\r\n        this.isSavingAttachment = false;\r\n        this.documentAttached.emit();\r\n        // Close the preview drawer after successful attachment\r\n        this.closeDrawer();\r\n      },\r\n      error: (error) => {\r\n        this.messagingService.error('Failed to attach document');\r\n        this.isSavingAttachment = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Convert event ID for backend compatibility\r\n   */\r\n  private convertEventIdForBackend(eventId: string | number): number {\r\n    if (typeof eventId === 'string' && eventId.startsWith('temp_')) {\r\n      // Handle temporary IDs - extract the numeric part\r\n      const numericPart = eventId.replace('temp_', '');\r\n      return parseInt(numericPart, 10) || 0;\r\n    }\r\n    return typeof eventId === 'number' ? eventId : parseInt(eventId.toString(), 10);\r\n  }\r\n\r\n  /**\r\n   * Close the drawer\r\n   */\r\n  closeDrawer(): void {\r\n    this.previewDocumentUrl = null;\r\n    this.previewDocumentContent = null;\r\n    this.close.emit();\r\n  }\r\n\r\n  onIframeLoad(): void {\r\n    // iframe loaded successfully\r\n  }\r\n\r\n  onIframeError(): void {\r\n    // iframe failed to load\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Document Viewer\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in Cerner Document Viewer\r\n   */\r\n  canViewInCerner(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Document Viewer\r\n    const supportedEventTypes = ['MDOC', 'DOC', 'RAD'];\r\n    return supportedEventTypes.includes(doc.eventType);\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Procedure Viewer\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in Cerner Procedure Viewer\r\n   */\r\n  canViewInCernerProcedure(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Procedure Viewer\r\n    return doc.eventType === 'PROCEDURE';\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in any Cerner viewer (Document or Procedure)\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in any Cerner viewer\r\n   */\r\n  canViewInCernerAny(doc: DocumentRow): boolean {\r\n    return this.canViewInCerner(doc) || this.canViewInCernerProcedure(doc);\r\n  }\r\n\r\n  /**\r\n   * View document in Cerner Document Viewer\r\n   */\r\n  viewInCerner(): void {\r\n    if (!this.document || !this.worklistItem?.personId) {\r\n      this.messagingService.error('No document or person ID available for document viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCerner(this.document)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof this.document.eventId === 'string' && this.document.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view documents with temporary IDs in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof this.document.eventId === 'string' ? parseInt(this.document.eventId, 10) : this.document.eventId;\r\n\r\n    // Call the Cerner Document Viewer action\r\n    this.cernerActionService.CernerAction('DOC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${this.document?.title}\" in Cerner Document Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open document in Cerner Document Viewer');\r\n      console.error('Cerner Document Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View procedure in Cerner Procedure Viewer\r\n   */\r\n  viewInCernerProcedure(): void {\r\n    if (!this.document || !this.worklistItem?.personId) {\r\n      this.messagingService.error('No document or person ID available for procedure viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCernerProcedure(this.document)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof this.document.eventId === 'string' && this.document.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view procedures with temporary IDs in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof this.document.eventId === 'string' ? parseInt(this.document.eventId, 10) : this.document.eventId;\r\n\r\n    // Call the Cerner Procedure Viewer action\r\n    this.cernerActionService.CernerAction('PROC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${this.document?.title}\" in Cerner Procedure Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open procedure in Cerner Procedure Viewer');\r\n      console.error('Cerner Procedure Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View document/procedure in the appropriate Cerner viewer\r\n   */\r\n  viewInCernerAppropriate(): void {\r\n    if (this.canViewInCerner(this.document!)) {\r\n      this.viewInCerner();\r\n    } else if (this.canViewInCernerProcedure(this.document!)) {\r\n      this.viewInCernerProcedure();\r\n    } else {\r\n      this.messagingService.warning('This document type cannot be viewed in any Cerner viewer');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle messages from iframe buttons\r\n   */\r\n  private handleIframeMessage(event: MessageEvent): void {\r\n    if (event.data && event.data.action) {\r\n      switch (event.data.action) {\r\n        case 'viewInCerner':\r\n          this.viewInCerner();\r\n          break;\r\n        case 'viewInCernerProcedure':\r\n          this.viewInCernerProcedure();\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n","<!-- Document Preview Drawer with Backdrop -->\r\n<div *ngIf=\"visible\" style=\"position: fixed; top: 0; left: 0; width: 100%; height: 100vh; z-index: 2000; display: flex;\">\r\n  <!-- Backdrop -->\r\n  <div style=\"flex: 1; background: rgba(0, 0, 0, 0.45);\" (click)=\"closeDrawer()\"></div>\r\n  <!-- Drawer Content -->\r\n  <div style=\"width: 60%; height: 100vh; background: white; border-left: 1px solid #ddd; padding: 20px; overflow-y: auto;\">\r\n  <div style=\"display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px solid #f0f0f0; padding-bottom: 16px;\">\r\n    <h2 style=\"margin: 0; font-size: 18px; font-weight: 600; color: #262626;\">Document Preview: {{ previewDocumentTitle }}</h2>\r\n    <div style=\"display: flex; gap: 8px;\">\r\n      <button \r\n        nz-button\r\n        nzType=\"default\"\r\n        nzSize=\"default\"\r\n        (click)=\"viewInCerner()\" \r\n        [disabled]=\"!document || !canViewInCerner(document)\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"document && canViewInCerner(document) ? 'View this document in Cerner Document Viewer' : 'This document type cannot be viewed in Cerner Document Viewer'\">\r\n        <span nz-icon nzType=\"file-text\"></span>\r\n        View Doc\r\n      </button>\r\n      <button \r\n        nz-button\r\n        nzType=\"default\"\r\n        nzSize=\"default\"\r\n        (click)=\"viewInCernerProcedure()\" \r\n        [disabled]=\"!document || !canViewInCernerProcedure(document)\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"document && canViewInCernerProcedure(document) ? 'View this procedure in Cerner Procedure Viewer' : 'This document type cannot be viewed in Cerner Procedure Viewer'\">\r\n        <span nz-icon nzType=\"medicine-box\"></span>\r\n        View Proc\r\n      </button>\r\n      <button \r\n        nz-button\r\n        nzType=\"default\"\r\n        nzSize=\"default\"\r\n        (click)=\"selectDocument()\" \r\n        [disabled]=\"!canSelectDocument()\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"canSelectDocument() ? 'Select this document in the document list' : 'Document not available for selection'\">\r\n        <span nz-icon nzType=\"check\"></span>\r\n        Select\r\n      </button>\r\n      <button \r\n        nz-button\r\n        nzType=\"primary\"\r\n        nzSize=\"default\"\r\n        (click)=\"saveAsAttachment()\" \r\n        [disabled]=\"!canSaveAsAttachment() || isSavingAttachment\"\r\n        [nzLoading]=\"isSavingAttachment\"\r\n        nz-tooltip\r\n        [nzTooltipTitle]=\"canSaveAsAttachment() ? 'Add this document to attached documents' : 'Document already attached or not available'\">\r\n        <span nz-icon nzType=\"save\" *ngIf=\"!isSavingAttachment\"></span>\r\n        {{ isSavingAttachment ? 'Saving...' : 'Save as Attachment' }}\r\n      </button>\r\n      <button \r\n        nz-button\r\n        nzType=\"default\"\r\n        nzSize=\"default\"\r\n        (click)=\"closeDrawer()\">\r\n        <span nz-icon nzType=\"close\"></span>\r\n        Close\r\n      </button>\r\n    </div>\r\n  </div>\r\n  \r\n  \r\n  \r\n  <!-- Loading State -->\r\n  <div *ngIf=\"isPreviewLoading\" style=\"text-align: center; padding: 50px;\">\r\n    <nz-spin nzSimple [nzSize]=\"'large'\"></nz-spin>\r\n    <p style=\"margin-top: 16px; color: #595959;\">Loading document preview...</p>\r\n  </div>\r\n  \r\n  <!-- Document Preview Content - Iframe -->\r\n  <div *ngIf=\"!isPreviewLoading && previewDocumentUrl\" \r\n       class=\"document-preview-container\"\r\n       style=\"background: #fff; min-height: 400px; padding: 0;\">\r\n    <iframe \r\n      [src]=\"previewDocumentUrl\"\r\n      style=\"width: 100%; height: calc(100vh - 200px); border: none;\"\r\n      title=\"Document Preview\"\r\n      (load)=\"onIframeLoad()\"\r\n      (error)=\"onIframeError()\">\r\n    </iframe>\r\n  </div>\r\n  \r\n  <!-- Fallback content if previewDocumentUrl is not set -->\r\n  <div *ngIf=\"!isPreviewLoading && !previewDocumentUrl\" \r\n       style=\"padding: 20px; text-align: center; color: #666;\">\r\n    <h3>No Content Available</h3>\r\n    <p>Document preview content is not available.</p>\r\n  </div>\r\n  </div>\r\n</div>\r\n","import { Component, Input, OnInit, OnDestroy, AfterViewInit, Output, EventEmitter } from '@angular/core';\r\nimport { PriorAuthMilestone, PriorAuthItem } from '../../../../../../models/prior-auth.model';\r\nimport { DocumentRow } from '../../../../../../models/document.model';\r\nimport { PriorAuthService } from '../../../../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../../../../services/messaging.service';\r\nimport { CernerActionService } from '../../../../../../services/cerner-action.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\n\r\n/**\r\n * Document Selection Component\r\n * Allows users to view available documents and attach them to a milestone\r\n */\r\n@Component({\r\n  selector: 'app-document-selection',\r\n  templateUrl: './document-selection.component.html',\r\n  styleUrls: ['./document-selection.component.scss']\r\n})\r\nexport class DocumentSelectionComponent implements OnInit, OnDestroy, AfterViewInit {\r\n  /** Worklist item for this document selection */\r\n  @Input() worklistItem!: PriorAuthItem;\r\n  /** Milestone for this document selection */\r\n  @Input() milestone?: PriorAuthMilestone;\r\n\r\n  /** Output event to notify parent when documents are updated */\r\n  @Output() documentsUpdated = new EventEmitter<void>();\r\n\r\n  /** Output event to notify parent when document list is refreshed (date/search changes) */\r\n  @Output() documentsRefreshed = new EventEmitter<void>();\r\n\r\n  /** Available documents from the document browser */\r\n  availableDocuments: DocumentRow[] = [];\r\n  /** Currently attached documents */\r\n  attachedDocuments: DocumentRow[] = [];\r\n  /** Selected documents for attachment */\r\n  selectedDocuments: Set<number | string> = new Set();\r\n  /** Loading state for fetching documents */\r\n  isLoadingDocuments = false;\r\n  /** Loading state for saving attachments */\r\n  isSavingAttachments = false;\r\n  /** Date range filters */\r\n  beginDate: Date | null = null;\r\n  endDate: Date | null = null;\r\n  /** Date range for the picker component */\r\n  dateRange: [Date, Date] | null = null;\r\n  /** Search filter */\r\n  searchText = '';\r\n  /** Filtered documents for display */\r\n  filteredDocuments: DocumentRow[] = [];\r\n  /** Document preview drawer visibility */\r\n  previewModalVisible = false;\r\n  /** Currently selected document for preview */\r\n  selectedDocumentForPreview: DocumentRow | null = null;\r\n  /** Currently highlighted row for preview */\r\n  highlightedRowId: string | number | null = null;\r\n  \r\n  private destroy$ = new Subject<void>();\r\n\r\n  constructor(\r\n    private priorAuthService: PriorAuthService,\r\n    private messagingService: MessagingService,\r\n    private cernerActionService: CernerActionService,\r\n    private modalService: NzModalService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Set default date range: end today and begin one month ago\r\n    this.endDate = new Date();\r\n    this.beginDate = new Date();\r\n    this.beginDate.setMonth(this.beginDate.getMonth() - 1);\r\n    \r\n    // Set the date range for the picker component\r\n    this.dateRange = [this.beginDate, this.endDate];\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    // Use requestAnimationFrame to ensure the view is fully rendered\r\n    // before loading documents to avoid ExpressionChangedAfterItHasBeenCheckedError\r\n    requestAnimationFrame(() => {\r\n      this.loadDocuments();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * Load available documents for this milestone\r\n   */\r\n  loadDocuments(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No compass worklist ID available');\r\n      return;\r\n    }\r\n\r\n    console.log('=== DocumentSelectionComponent.loadDocuments Debug ===');\r\n    console.log('worklistItem:', this.worklistItem);\r\n    console.log('compass_worklist_id:', this.worklistItem.compass_worklist_id);\r\n    console.log('beginDate:', this.beginDate);\r\n    console.log('endDate:', this.endDate);\r\n\r\n    this.isLoadingDocuments = true;\r\n    \r\n    // Convert dates to ISO strings if provided\r\n    const beginDateStr = this.beginDate ? this.beginDate.toISOString() : undefined;\r\n    const endDateStr = this.endDate ? this.endDate.toISOString() : undefined;\r\n\r\n    console.log('Date strings being sent:');\r\n    console.log('beginDateStr:', beginDateStr);\r\n    console.log('endDateStr:', endDateStr);\r\n\r\n    this.priorAuthService.getDocumentsForWorklist(\r\n      this.worklistItem.compass_worklist_id,\r\n      beginDateStr,\r\n      endDateStr\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          console.log('=== Response received in component ===');\r\n          console.log('Full response:', response);\r\n          console.log('Response success:', response.success);\r\n          console.log('Response documents:', response.documents);\r\n          console.log('Response attachedDocuments:', response.attachedDocuments);\r\n          \r\n          if (response.success) {\r\n            // Process available documents\r\n            this.availableDocuments = (response.documents || []).map((doc: any) => ({\r\n              eventId: doc.eventId, // Backend sends \"eventId\", not \"event_id\"\r\n              title: doc.title,\r\n              author: doc.author,\r\n              effectiveDate: doc.effectiveDate, // Backend sends \"effectiveDate\", not \"effective_date\"\r\n              type: doc.type,\r\n              source: doc.source,\r\n              eventType: doc.eventType, // Include eventType for Cerner Document Viewer compatibility\r\n              isAttached: doc.attachedInd === 1,\r\n              isSelected: false\r\n            }));\r\n\r\n            // Process attached documents\r\n            // Note: We map the effectiveDate from the available documents list to ensure consistency\r\n            // between attached and available document displays\r\n            this.attachedDocuments = (response.attachedDocuments || []).map((doc: any, index: number) => {\r\n              // Check if we have duplicate eventIds and create a unique identifier\r\n              let uniqueId = doc.eventId;\r\n              if (doc.eventId === -2147483648 || doc.eventId === undefined) {\r\n                // Use a combination of title and index as fallback unique identifier\r\n                uniqueId = `temp_${index}_${doc.title?.replace(/[^a-zA-Z0-9]/g, '')}`;\r\n                console.warn(`⚠️ Using fallback unique ID for document \"${doc.title}\": ${uniqueId}`);\r\n              }\r\n              \r\n              // Try to find the matching document in the available documents list to get the correct effectiveDate\r\n              const matchingAvailableDoc = this.availableDocuments.find(availableDoc => \r\n                availableDoc.title === doc.title && \r\n                availableDoc.author === doc.author &&\r\n                availableDoc.type === doc.type\r\n              );\r\n              \r\n              // Use the effectiveDate from the available document if found, otherwise fall back to attachDtTm\r\n              const effectiveDate = matchingAvailableDoc?.effectiveDate || doc.attachDtTm;\r\n              \r\n              return {\r\n                eventId: uniqueId,\r\n                title: doc.title,\r\n                author: doc.author || 'N/A', // Now comes enriched from service\r\n                effectiveDate: effectiveDate, // Use effectiveDate from available documents when possible\r\n                type: doc.type || 'Document', // Now comes enriched from service\r\n                source: doc.source || 'Clinical',\r\n                isAttached: true,\r\n                isSelected: false,\r\n                originalEventId: doc.eventId // Keep original for debugging\r\n              };\r\n            });\r\n\r\n            console.log('Processed availableDocuments:', this.availableDocuments);\r\n            console.log('Processed attachedDocuments:', this.attachedDocuments);\r\n            console.log('Initial selectedDocuments size:', this.selectedDocuments.size);\r\n            console.log('Initial selectedDocuments contents:', Array.from(this.selectedDocuments));\r\n            \r\n            // Debug: Check eventId values from backend\r\n            console.log('=== Backend EventId Debug ===');\r\n            console.log('Raw attachedDocuments from backend:', response.attachedDocuments);\r\n            console.log('Raw documents from backend:', response.documents);\r\n            if (response.attachedDocuments && response.attachedDocuments.length > 0) {\r\n              console.log('Attached documents eventIds:', response.attachedDocuments.map((doc: any) => doc.eventId));\r\n            }\r\n            console.log('=== End Backend EventId Debug ===');\r\n\r\n            // Update filter\r\n            this.applyFilter();\r\n            \r\n            // Notify parent component that documents were refreshed\r\n            this.documentsRefreshed.emit();\r\n          } else {\r\n            console.error('Response indicates failure:', response);\r\n            this.messagingService.error('Failed to load documents');\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.error('=== Error in component subscription ===');\r\n          console.error('Error object:', error);\r\n          console.error('Error message:', error.message);\r\n          if (error instanceof Error) {\r\n            console.error('Error stack:', error.stack);\r\n          }\r\n          this.messagingService.error('Error loading documents');\r\n        },\r\n        complete: () => {\r\n          // Ensure loading state is always reset when the observable completes\r\n          this.isLoadingDocuments = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Apply search and date filters to documents\r\n   */\r\n  applyFilter(): void {\r\n    this.filteredDocuments = this.availableDocuments.filter(doc => {\r\n      // Exclude documents that are already attached\r\n      if (doc.isAttached) {\r\n        return false;\r\n      }\r\n      \r\n      // Search filter\r\n      if (this.searchText) {\r\n        const searchLower = this.searchText.toLowerCase();\r\n        const matchesSearch = \r\n          doc.title.toLowerCase().includes(searchLower) ||\r\n          doc.author.toLowerCase().includes(searchLower) ||\r\n          doc.type.toLowerCase().includes(searchLower);\r\n        if (!matchesSearch) return false;\r\n      }\r\n\r\n      // Date filter (if dates are set for filtering display)\r\n      // Note: Date filtering is primarily done on the backend\r\n      \r\n      return true;\r\n    });\r\n    \r\n    // Ensure loading state is false when filtering (in case it was stuck)\r\n    if (this.isLoadingDocuments) {\r\n      this.isLoadingDocuments = false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Toggle document selection\r\n   */\r\n  toggleDocumentSelection(doc: DocumentRow, checked: boolean): void {\r\n    console.log('=== toggleDocumentSelection Debug ===');\r\n    console.log('Document:', doc);\r\n    console.log('Checked value:', checked);\r\n    console.log('Before - selectedDocuments size:', this.selectedDocuments.size);\r\n    console.log('Before - selectedDocuments contents:', Array.from(this.selectedDocuments));\r\n    \r\n    // Use the checkbox checked state to determine selection for both attached and available documents\r\n    if (checked) {\r\n      this.selectedDocuments.add(doc.eventId);\r\n      console.log('Adding document to selection');\r\n    } else {\r\n      this.selectedDocuments.delete(doc.eventId);\r\n      console.log('Removing document from selection');\r\n    }\r\n    \r\n    doc.isSelected = this.selectedDocuments.has(doc.eventId);\r\n    console.log('After - selectedDocuments size:', this.selectedDocuments.size);\r\n    console.log('After - selectedDocuments contents:', Array.from(this.selectedDocuments));\r\n    console.log('Document isSelected property:', doc.isSelected);\r\n    console.log('=== End toggleDocumentSelection Debug ===');\r\n  }\r\n\r\n  /**\r\n   * Check if any documents are selected\r\n   */\r\n  hasSelectedDocuments(): boolean {\r\n    return this.selectedDocuments.size > 0;\r\n  }\r\n\r\n  /**\r\n   * Check if any attached documents are selected for removal\r\n   * This should only return true when attached documents are selected\r\n   */\r\n  hasSelectedAttachmentsForRemoval(): boolean {\r\n    return this.attachedDocuments.some(doc => this.selectedDocuments.has(doc.eventId));\r\n  }\r\n\r\n  /**\r\n   * Check if any available documents are selected for attachment\r\n   * This should only return true when available documents are selected\r\n   */\r\n  hasSelectedAvailableDocuments(): boolean {\r\n    return this.availableDocuments.some(doc => this.selectedDocuments.has(doc.eventId));\r\n  }\r\n\r\n  /**\r\n   * Get the count of selected attached documents for removal\r\n   * This should only count attached documents that are selected\r\n   */\r\n  getSelectedAttachmentsCount(): number {\r\n    return this.attachedDocuments.filter(doc => this.selectedDocuments.has(doc.eventId)).length;\r\n  }\r\n\r\n  /**\r\n   * Get the count of selected available documents for attachment\r\n   * This should only count available documents that are selected\r\n   */\r\n  getSelectedAvailableDocumentsCount(): number {\r\n    return this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId)).length;\r\n  }\r\n\r\n  /**\r\n   * Debug method to log current selection state\r\n   */\r\n  debugSelectionState(): void {\r\n    console.log('=== Debug Selection State ===');\r\n    console.log('selectedDocuments size:', this.selectedDocuments.size);\r\n    console.log('selectedDocuments contents:', Array.from(this.selectedDocuments));\r\n    console.log('attachedDocuments:', this.attachedDocuments.map(doc => ({\r\n      eventId: doc.eventId,\r\n      title: doc.title,\r\n      isSelected: doc.isSelected\r\n    })));\r\n    console.log('availableDocuments:', this.availableDocuments.map(doc => ({\r\n      eventId: doc.eventId,\r\n      title: doc.title,\r\n      isSelected: doc.isSelected\r\n    })));\r\n    \r\n    // Show separate selection counts\r\n    console.log('Selected Attachments for Removal:', this.getSelectedAttachmentsCount());\r\n    console.log('Selected Available Documents for Attachment:', this.getSelectedAvailableDocumentsCount());\r\n    \r\n    // Check for duplicate eventIds\r\n    const attachedEventIds = this.attachedDocuments.map(doc => doc.eventId);\r\n    const duplicateEventIds = attachedEventIds.filter((id, index) => attachedEventIds.indexOf(id) !== index);\r\n    if (duplicateEventIds.length > 0) {\r\n      console.warn('⚠️ DUPLICATE EVENT IDs DETECTED:', duplicateEventIds);\r\n      console.warn('This will cause selection issues!');\r\n    }\r\n    \r\n    // Check if all attached documents have the same eventId\r\n    const uniqueEventIds = new Set(attachedEventIds);\r\n    if (uniqueEventIds.size === 1 && this.attachedDocuments.length > 1) {\r\n      console.error('❌ ALL ATTACHED DOCUMENTS HAVE THE SAME EVENT ID:', Array.from(uniqueEventIds)[0]);\r\n      console.error('This is why all checkboxes appear selected when only one is clicked!');\r\n    }\r\n    \r\n    console.log('=== End Debug Selection State ===');\r\n  }\r\n\r\n  /**\r\n   * Convert fallback string IDs back to numbers for backend communication\r\n   * This is needed because the backend expects numeric event_ids\r\n   */\r\n  private convertEventIdForBackend(eventId: number | string): number {\r\n    if (typeof eventId === 'string' && eventId.startsWith('temp_')) {\r\n      // For fallback IDs, we can't send them to the backend\r\n      // Return a placeholder or throw an error\r\n      console.warn(`Cannot send fallback ID to backend: ${eventId}`);\r\n      return -1; // Placeholder value\r\n    }\r\n    return typeof eventId === 'string' ? parseInt(eventId, 10) : eventId;\r\n  }\r\n\r\n  /**\r\n   * Check if any documents are using fallback IDs\r\n   */\r\n  hasFallbackIds(): boolean {\r\n    return this.attachedDocuments.some(doc => \r\n      typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Save selected documents as attachments\r\n   */\r\n  saveAttachments(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No compass worklist ID available');\r\n      return;\r\n    }\r\n\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected');\r\n      return;\r\n    }\r\n\r\n    this.isSavingAttachments = true;\r\n\r\n    // Build the documents array for attachment - only include available documents that are selected\r\n    const documentsToAttach = Array.from(this.selectedDocuments)\r\n      .filter(eventId => {\r\n        const doc = this.availableDocuments.find(d => d.eventId === eventId);\r\n        return doc && !doc.isAttached; // Only include documents that are available and not already attached\r\n      })\r\n      .map(eventId => {\r\n        const doc = this.availableDocuments.find(d => d.eventId === eventId);\r\n        return {\r\n          event_id: this.convertEventIdForBackend(eventId),\r\n          title: doc?.title || 'Unknown Document'\r\n        };\r\n      });\r\n\r\n    // Also include currently attached documents that weren't deselected\r\n    const stillAttached = this.attachedDocuments\r\n      .filter(doc => !this.selectedDocuments.has(doc.eventId))\r\n      .map(doc => ({\r\n        event_id: this.convertEventIdForBackend(doc.eventId),\r\n        title: doc.title\r\n      }));\r\n\r\n    const allDocuments = [...documentsToAttach, ...stillAttached];\r\n\r\n    this.priorAuthService.attachDocumentsToGlidianMilestone(\r\n      this.worklistItem.compass_worklist_id,\r\n      allDocuments\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success) {\r\n            this.messagingService.success('Documents attached successfully');\r\n            // Clear selections\r\n            this.selectedDocuments.clear();\r\n            // Reload documents to show updated state\r\n            this.loadDocuments();\r\n            // Notify parent component that documents were updated\r\n            this.documentsUpdated.emit();\r\n          } else {\r\n            this.messagingService.error(response.message || 'Failed to attach documents');\r\n          }\r\n          this.isSavingAttachments = false;\r\n        },\r\n        error: () => {\r\n          this.messagingService.error('Error attaching documents');\r\n          this.isSavingAttachments = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Remove selected attached documents\r\n   */\r\n  removeSelectedAttachments(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No compass worklist ID available');\r\n      return;\r\n    }\r\n\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected for removal');\r\n      return;\r\n    }\r\n\r\n    this.isSavingAttachments = true;\r\n\r\n    // Get currently attached documents that are NOT selected for removal\r\n    const stillAttached = this.attachedDocuments\r\n      .filter(doc => !this.selectedDocuments.has(doc.eventId))\r\n      .map(doc => ({\r\n        event_id: this.convertEventIdForBackend(doc.eventId),\r\n        title: doc.title\r\n      }));\r\n\r\n    // Save with only the documents that should remain attached\r\n    this.priorAuthService.attachDocumentsToGlidianMilestone(\r\n      this.worklistItem.compass_worklist_id,\r\n      stillAttached\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success) {\r\n            this.messagingService.success('Selected attachments removed successfully');\r\n            // Clear selections\r\n            this.selectedDocuments.clear();\r\n            // Reload documents to show updated state\r\n            this.loadDocuments();\r\n            // Notify parent component that documents were updated\r\n            this.documentsUpdated.emit();\r\n          } else {\r\n            this.messagingService.error(response.message || 'Failed to remove selected attachments');\r\n          }\r\n          this.isSavingAttachments = false;\r\n        },\r\n        error: () => {\r\n          this.messagingService.error('Error removing selected attachments');\r\n          this.isSavingAttachments = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Remove all attached documents\r\n   */\r\n  removeAllAttachments(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No compass worklist ID available');\r\n      return;\r\n    }\r\n\r\n    this.isSavingAttachments = true;\r\n\r\n    // Save with empty documents array to remove all attachments\r\n    this.priorAuthService.attachDocumentsToGlidianMilestone(\r\n      this.worklistItem.compass_worklist_id,\r\n      []\r\n    ).pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          if (response.success) {\r\n            this.messagingService.success('All attachments removed');\r\n            // Reload documents to show updated state\r\n            this.loadDocuments();\r\n            // Notify parent component that documents were updated\r\n            this.documentsUpdated.emit();\r\n          } else {\r\n            this.messagingService.error(response.message || 'Failed to remove attachments');\r\n          }\r\n          this.isSavingAttachments = false;\r\n        },\r\n        error: () => {\r\n          this.messagingService.error('Error removing attachments');\r\n          this.isSavingAttachments = false;\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Handle date range change\r\n   */\r\n  onDateRangeChange(dates: (Date | null)[]): void {\r\n    if (dates && dates.length === 2 && dates[0] && dates[1]) {\r\n      this.beginDate = dates[0];\r\n      this.endDate = dates[1];\r\n      this.dateRange = [dates[0], dates[1]];\r\n      this.loadDocuments();\r\n    } else if (!dates || dates.length === 0 || (dates.length === 2 && !dates[0] && !dates[1])) {\r\n      // Handle when dates are cleared manually\r\n      this.beginDate = null;\r\n      this.endDate = null;\r\n      this.dateRange = null;\r\n      this.loadDocuments();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear date filters\r\n   */\r\n  clearDateFilter(): void {\r\n    this.beginDate = null;\r\n    this.endDate = null;\r\n    this.dateRange = null;\r\n    this.loadDocuments();\r\n  }\r\n\r\n  /**\r\n   * Set date range to cover all possible dates (1900-2100)\r\n   */\r\n  setAllDates(): void {\r\n    // Set start date to January 1, 1900\r\n    this.beginDate = new Date(1900, 0, 1); // Month is 0-indexed, so 0 = January\r\n    \r\n    // Set end date to December 31, 2100\r\n    this.endDate = new Date(2100, 11, 31); // Month is 0-indexed, so 11 = December\r\n    \r\n    // Update the date range for the picker component\r\n    this.dateRange = [this.beginDate, this.endDate];\r\n    \r\n    // Load documents with the new date range\r\n    this.loadDocuments();\r\n  }\r\n\r\n  /**\r\n   * Sorting functions for the available documents table\r\n   */\r\n  sortByDate = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.effectiveDate && !b.effectiveDate) return 0;\r\n    if (!a.effectiveDate) return 1;\r\n    if (!b.effectiveDate) return -1;\r\n    \r\n    // Convert string dates to Date objects for comparison\r\n    const dateA = new Date(a.effectiveDate);\r\n    const dateB = new Date(b.effectiveDate);\r\n    \r\n    // Check if dates are valid\r\n    if (isNaN(dateA.getTime()) && isNaN(dateB.getTime())) return 0;\r\n    if (isNaN(dateA.getTime())) return 1;\r\n    if (isNaN(dateB.getTime())) return -1;\r\n    \r\n    return dateA.getTime() - dateB.getTime();\r\n  };\r\n\r\n  sortByType = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.type && !b.type) return 0;\r\n    if (!a.type) return 1;\r\n    if (!b.type) return -1;\r\n    return a.type.localeCompare(b.type);\r\n  };\r\n\r\n  sortByTitle = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.title && !b.title) return 0;\r\n    if (!a.title) return 1;\r\n    if (!b.title) return -1;\r\n    return a.title.localeCompare(b.title);\r\n  };\r\n\r\n  sortByAuthor = (a: DocumentRow, b: DocumentRow): number => {\r\n    if (!a.author && !b.author) return 0;\r\n    if (!a.author) return 1;\r\n    if (!b.author) return -1;\r\n    return a.author.localeCompare(b.author);\r\n  };\r\n\r\n  /**\r\n   * Check if the current date range represents \"all dates\" (1900-2100)\r\n   */\r\n  isAllDatesSelected(): boolean {\r\n    if (!this.beginDate || !this.endDate) {\r\n      return false;\r\n    }\r\n    \r\n    const startDate = new Date(1900, 0, 1);\r\n    const endDate = new Date(2100, 11, 31);\r\n    \r\n    return this.beginDate.getTime() === startDate.getTime() && \r\n           this.endDate.getTime() === endDate.getTime();\r\n  }\r\n\r\n  /**\r\n   * Preview a document in a drawer\r\n   * @param doc - The document to preview\r\n   */\r\n  previewDocument(doc: DocumentRow): void {\r\n    console.log('=== PREVIEW DOCUMENT CALLED ===');\r\n    console.log('Document:', doc);\r\n    console.log('WorklistItem:', this.worklistItem);\r\n    \r\n    if (!this.worklistItem) {\r\n      this.messagingService.error('No worklist item available');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot preview documents with temporary IDs');\r\n      return;\r\n    }\r\n\r\n    // Set the selected document, highlight the row, and show the drawer\r\n    this.selectedDocumentForPreview = doc;\r\n    this.highlightedRowId = doc.eventId;\r\n    this.previewModalVisible = true;\r\n    \r\n    console.log('Selected document set:', this.selectedDocumentForPreview);\r\n    console.log('Highlighted row ID:', this.highlightedRowId);\r\n    console.log('Preview modal visible:', this.previewModalVisible);\r\n    console.log('=== END PREVIEW DOCUMENT ===');\r\n  }\r\n\r\n  /**\r\n   * Close the preview drawer\r\n   */\r\n  closePreviewModal(): void {\r\n    this.previewModalVisible = false;\r\n    this.selectedDocumentForPreview = null;\r\n    this.highlightedRowId = null;\r\n  }\r\n\r\n  /**\r\n   * Handle when a document is attached from the preview drawer\r\n   */\r\n  onDocumentAttached(): void {\r\n    console.log('Document attached from preview drawer, refreshing documents...');\r\n    // Refresh the documents to update the attached documents list\r\n    this.loadDocuments();\r\n    // Emit the documents updated event to notify parent components\r\n    this.documentsUpdated.emit();\r\n  }\r\n\r\n  /**\r\n   * Handle when a document is selected from the preview drawer\r\n   */\r\n  onDocumentSelected(document: DocumentRow): void {\r\n    console.log('Document selected from preview drawer:', document);\r\n    // Add the document to the selected documents set\r\n    this.selectedDocuments.add(document.eventId);\r\n    // Show success message\r\n    this.messagingService.success(`Document \"${document.title}\" selected`);\r\n  }\r\n\r\n  /**\r\n   * Check if a document row should be highlighted\r\n   * @param doc - The document to check\r\n   * @returns true if the row should be highlighted\r\n   */\r\n  isRowHighlighted(doc: DocumentRow): boolean {\r\n    return this.highlightedRowId === doc.eventId;\r\n  }\r\n\r\n  /**\r\n   * Check if an event ID is valid for viewing in Cerner\r\n   * @param eventId - The event ID to check\r\n   * @returns true if the event ID is valid\r\n   */\r\n  isValidEventId(eventId: number | string): boolean {\r\n    return !(!eventId || eventId === 0 || eventId === '0' || eventId === 0.0 || eventId === '0.0');\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Document Viewer\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in Cerner Document Viewer\r\n   */\r\n  canViewInCerner(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Don't show view buttons for invalid event IDs\r\n    if (!this.isValidEventId(doc.eventId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Document Viewer\r\n    const supportedEventTypes = ['MDOC', 'DOC', 'RAD'];\r\n    return supportedEventTypes.includes(doc.eventType);\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in Cerner Procedure Viewer\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in Cerner Procedure Viewer\r\n   */\r\n  canViewInCernerProcedure(doc: DocumentRow): boolean {\r\n    if (!doc.eventType) {\r\n      return false;\r\n    }\r\n    \r\n    // Don't show view buttons for invalid event IDs\r\n    if (!this.isValidEventId(doc.eventId)) {\r\n      return false;\r\n    }\r\n    \r\n    // Check if eventType matches supported types for Cerner Procedure Viewer\r\n    return doc.eventType === 'PROCEDURE';\r\n  }\r\n\r\n  /**\r\n   * Check if a document can be viewed in any Cerner viewer (Document or Procedure)\r\n   * @param doc - The document to check\r\n   * @returns true if the document can be viewed in any Cerner viewer\r\n   */\r\n  canViewInCernerAny(doc: DocumentRow): boolean {\r\n    return this.canViewInCerner(doc) || this.canViewInCernerProcedure(doc);\r\n  }\r\n\r\n  /**\r\n   * View document in Cerner Document Viewer\r\n   * @param doc - The document to view\r\n   */\r\n  viewInCerner(doc: DocumentRow): void {\r\n    if (!this.worklistItem?.personId) {\r\n      this.messagingService.error('No person ID available for document viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCerner(doc)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view documents with temporary IDs in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId;\r\n\r\n    // Call the Cerner Document Viewer action\r\n    this.cernerActionService.CernerAction('DOC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${doc.title}\" in Cerner Document Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open document in Cerner Document Viewer');\r\n      console.error('Cerner Document Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View procedure in Cerner Procedure Viewer\r\n   * @param doc - The procedure to view\r\n   */\r\n  viewInCernerProcedure(doc: DocumentRow): void {\r\n    if (!this.worklistItem?.personId) {\r\n      this.messagingService.error('No person ID available for procedure viewing');\r\n      return;\r\n    }\r\n\r\n    if (!this.canViewInCernerProcedure(doc)) {\r\n      this.messagingService.warning('This document type cannot be viewed in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    // Check if this is a fallback ID\r\n    if (typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')) {\r\n      this.messagingService.warning('Cannot view procedures with temporary IDs in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    const eventId = typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId;\r\n\r\n    // Call the Cerner Procedure Viewer action\r\n    this.cernerActionService.CernerAction('PROC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventId: eventId\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening \"${doc.title}\" in Cerner Procedure Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open procedure in Cerner Procedure Viewer');\r\n      console.error('Cerner Procedure Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View document/procedure in the appropriate Cerner viewer\r\n   * @param doc - The document/procedure to view\r\n   */\r\n  viewInCernerAppropriate(doc: DocumentRow): void {\r\n    if (this.canViewInCerner(doc)) {\r\n      this.viewInCerner(doc);\r\n    } else if (this.canViewInCernerProcedure(doc)) {\r\n      this.viewInCernerProcedure(doc);\r\n    } else {\r\n      this.messagingService.warning('This document type cannot be viewed in any Cerner viewer');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * View multiple documents in Cerner Document Viewer\r\n   * @param documents - Array of documents to view\r\n   */\r\n  viewMultipleInCerner(documents: DocumentRow[]): void {\r\n    if (!this.worklistItem?.personId) {\r\n      this.messagingService.error('No person ID available for document viewing');\r\n      return;\r\n    }\r\n\r\n    // Filter documents that can be viewed in Cerner Document Viewer\r\n    const viewableDocs = documents.filter(doc => this.canViewInCerner(doc));\r\n    \r\n    if (viewableDocs.length === 0) {\r\n      this.messagingService.warning('No documents can be viewed in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    if (viewableDocs.length !== documents.length) {\r\n      this.messagingService.warning(`${documents.length - viewableDocs.length} document(s) cannot be viewed in Cerner Document Viewer and will be skipped`);\r\n    }\r\n\r\n    // Extract event IDs, filtering out fallback IDs\r\n    const eventIds = viewableDocs\r\n      .filter(doc => !(typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')))\r\n      .map(doc => typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId);\r\n\r\n    if (eventIds.length === 0) {\r\n      this.messagingService.warning('No valid documents to view in Cerner Document Viewer');\r\n      return;\r\n    }\r\n\r\n    // Call the Cerner Document Viewer action with multiple documents\r\n    this.cernerActionService.CernerAction('DOC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventIds: eventIds\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening ${eventIds.length} document(s) in Cerner Document Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open documents in Cerner Document Viewer');\r\n      console.error('Cerner Document Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View multiple procedures in Cerner Procedure Viewer\r\n   * @param documents - Array of procedures to view\r\n   */\r\n  viewMultipleInCernerProcedure(documents: DocumentRow[]): void {\r\n    if (!this.worklistItem?.personId) {\r\n      this.messagingService.error('No person ID available for procedure viewing');\r\n      return;\r\n    }\r\n\r\n    // Filter documents that can be viewed in Cerner Procedure Viewer\r\n    const viewableDocs = documents.filter(doc => this.canViewInCernerProcedure(doc));\r\n    \r\n    if (viewableDocs.length === 0) {\r\n      this.messagingService.warning('No procedures can be viewed in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    if (viewableDocs.length !== documents.length) {\r\n      this.messagingService.warning(`${documents.length - viewableDocs.length} document(s) cannot be viewed in Cerner Procedure Viewer and will be skipped`);\r\n    }\r\n\r\n    // Extract event IDs, filtering out fallback IDs\r\n    const eventIds = viewableDocs\r\n      .filter(doc => !(typeof doc.eventId === 'string' && doc.eventId.startsWith('temp_')))\r\n      .map(doc => typeof doc.eventId === 'string' ? parseInt(doc.eventId, 10) : doc.eventId);\r\n\r\n    if (eventIds.length === 0) {\r\n      this.messagingService.warning('No valid procedures to view in Cerner Procedure Viewer');\r\n      return;\r\n    }\r\n\r\n    // Call the Cerner Procedure Viewer action with multiple procedures\r\n    this.cernerActionService.CernerAction('PROC_VIEWER', {\r\n      personId: this.worklistItem.personId,\r\n      eventIds: eventIds\r\n    }).then(() => {\r\n      this.messagingService.success(`Opening ${eventIds.length} procedure(s) in Cerner Procedure Viewer`);\r\n    }).catch((error) => {\r\n      this.messagingService.error('Failed to open procedures in Cerner Procedure Viewer');\r\n      console.error('Cerner Procedure Viewer error:', error);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * View multiple documents/procedures in appropriate Cerner viewers\r\n   * @param documents - Array of documents/procedures to view\r\n   */\r\n  viewMultipleInCernerAppropriate(documents: DocumentRow[]): void {\r\n    if (!this.worklistItem?.personId) {\r\n      this.messagingService.error('No person ID available for viewing');\r\n      return;\r\n    }\r\n\r\n    // Separate documents and procedures\r\n    const documentsToView = documents.filter(doc => this.canViewInCerner(doc));\r\n    const proceduresToView = documents.filter(doc => this.canViewInCernerProcedure(doc));\r\n    \r\n    if (documentsToView.length === 0 && proceduresToView.length === 0) {\r\n      this.messagingService.warning('No documents or procedures can be viewed in Cerner viewers');\r\n      return;\r\n    }\r\n\r\n    // View documents if any\r\n    if (documentsToView.length > 0) {\r\n      this.viewMultipleInCerner(documentsToView);\r\n    }\r\n\r\n    // View procedures if any (with a small delay to avoid conflicts)\r\n    if (proceduresToView.length > 0) {\r\n      setTimeout(() => {\r\n        this.viewMultipleInCernerProcedure(proceduresToView);\r\n      }, 500);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * View selected documents in Cerner Document Viewer\r\n   */\r\n  viewSelectedInCerner(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected for viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents from both available and attached lists\r\n    const selectedDocs = [\r\n      ...this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId)),\r\n      ...this.attachedDocuments.filter(doc => this.selectedDocuments.has(doc.eventId))\r\n    ];\r\n\r\n    this.viewMultipleInCerner(selectedDocs);\r\n  }\r\n\r\n  /**\r\n   * View selected procedures in Cerner Procedure Viewer\r\n   */\r\n  viewSelectedInCernerProcedure(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No procedures selected for viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents from both available and attached lists\r\n    const selectedDocs = [\r\n      ...this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId)),\r\n      ...this.attachedDocuments.filter(doc => this.selectedDocuments.has(doc.eventId))\r\n    ];\r\n\r\n    this.viewMultipleInCernerProcedure(selectedDocs);\r\n  }\r\n\r\n  /**\r\n   * View selected documents/procedures in appropriate Cerner viewers\r\n   */\r\n  viewSelectedInCernerAppropriate(): void {\r\n    if (this.selectedDocuments.size === 0) {\r\n      this.messagingService.info('No documents selected for viewing');\r\n      return;\r\n    }\r\n\r\n    // Get selected documents from both available and attached lists\r\n    const selectedDocs = [\r\n      ...this.availableDocuments.filter(doc => this.selectedDocuments.has(doc.eventId)),\r\n      ...this.attachedDocuments.filter(doc => this.selectedDocuments.has(doc.eventId))\r\n    ];\r\n\r\n    this.viewMultipleInCernerAppropriate(selectedDocs);\r\n  }\r\n\r\n\r\n}","<div class=\"document-selection-container\">\r\n  <!-- Attached Documents Section -->\r\n  <div class=\"attached-section\" *ngIf=\"attachedDocuments.length > 0\">\r\n    <h4>Attached Documents ({{ attachedDocuments.length }})</h4>\r\n    \r\n    <!-- Warning for fallback IDs -->\r\n    <div *ngIf=\"hasFallbackIds()\" class=\"fallback-id-warning\" style=\"background-color: #fff2e8; border: 1px solid #ffbb96; padding: 8px; margin-bottom: 8px; border-radius: 4px;\">\r\n      <span nz-icon nzType=\"warning\" nzTheme=\"outline\" style=\"color: #fa8c16; margin-right: 8px;\"></span>\r\n      <strong>Warning:</strong> Some documents are using temporary IDs due to backend data issues. \r\n      Selection may not work properly until this is resolved.\r\n    </div>\r\n    \r\n    <nz-table \r\n      #attachedTable \r\n      [nzData]=\"attachedDocuments\"\r\n      [nzSize]=\"'small'\"\r\n      [nzShowPagination]=\"false\"\r\n      [nzScroll]=\"{ y: '150px' }\">\r\n      <thead>\r\n        <tr>\r\n          <th nzWidth=\"50px\">Select</th>\r\n          <th nzWidth=\"100px\">Date</th>\r\n          <th nzWidth=\"120px\">Type</th>\r\n          <th nzWidth=\"150px\">Title</th>\r\n          <th nzWidth=\"120px\">Author</th>\r\n          <th nzWidth=\"80px\">Source</th>\r\n          <th nzWidth=\"100px\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let doc of attachedTable.data\" \r\n            (click)=\"previewDocument(doc)\"\r\n            [class.highlighted-row]=\"isRowHighlighted(doc)\"\r\n            style=\"cursor: pointer;\">\r\n          <td (click)=\"$event.stopPropagation()\">\r\n            <label \r\n              nz-checkbox\r\n              [ngModel]=\"selectedDocuments.has(doc.eventId)\"\r\n              (ngModelChange)=\"toggleDocumentSelection(doc, $event)\"\r\n              [nzDisabled]=\"false\">\r\n            </label>\r\n          </td>\r\n          <td>{{ doc.effectiveDate | date:'short' }}</td>\r\n          <td>{{ doc.type }}</td>\r\n          <td>{{ doc.title }}</td>\r\n          <td>{{ doc.author || 'N/A' }}</td>\r\n          <td>{{ doc.source }}</td>\r\n          <td (click)=\"$event.stopPropagation()\">\r\n            <button \r\n              *ngIf=\"canViewInCerner(doc)\"\r\n              nz-button \r\n              nzType=\"link\" \r\n              nzSize=\"small\"\r\n              (click)=\"viewInCerner(doc)\"\r\n              nz-tooltip\r\n              nzTooltipTitle=\"View in Cerner Document Viewer\">\r\n              <span nz-icon nzType=\"file-text\"></span>\r\n              Doc\r\n            </button>\r\n            <button \r\n              *ngIf=\"canViewInCernerProcedure(doc)\"\r\n              nz-button \r\n              nzType=\"link\" \r\n              nzSize=\"small\"\r\n              (click)=\"viewInCernerProcedure(doc)\"\r\n              nz-tooltip\r\n              nzTooltipTitle=\"View in Cerner Procedure Viewer\"\r\n              style=\"margin-left: 4px;\">\r\n              <span nz-icon nzType=\"medicine-box\"></span>\r\n              Proc\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>\r\n    \r\n    <!-- Remove Selected Button -->\r\n    <div style=\"margin-top: 8px;\">\r\n      <button \r\n        nz-button \r\n        nzType=\"default\"\r\n        nzDanger\r\n        (click)=\"removeSelectedAttachments()\"\r\n        [disabled]=\"!hasSelectedAttachmentsForRemoval()\"\r\n        [nzLoading]=\"isSavingAttachments\">\r\n        <span nz-icon nzType=\"delete\"></span>\r\n        Remove Selected Attachments ({{ getSelectedAttachmentsCount() }})\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Available Documents Filter Controls -->\r\n  <div class=\"available-documents-controls\" style=\"margin-top: 16px;\">\r\n    <div class=\"document-actions\">\r\n      <div class=\"left-actions\">\r\n        <!-- Date Range Picker -->\r\n        <nz-range-picker\r\n          [nzPlaceHolder]=\"['Begin Date', 'End Date']\"\r\n          [(ngModel)]=\"dateRange\"\r\n          (nzOnCalendarChange)=\"onDateRangeChange($event)\"\r\n          [nzAllowClear]=\"true\"\r\n          nzClearText=\"Clear\"\r\n          style=\"width: 200px; margin-right: 8px;\">\r\n        </nz-range-picker>\r\n        \r\n        <!-- Clear Date Filter -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\"\r\n          (click)=\"clearDateFilter()\"\r\n          [disabled]=\"!beginDate && !endDate\"\r\n          style=\"margin-right: 8px;\">\r\n          Clear Dates\r\n        </button>\r\n        \r\n        <!-- All Dates Button -->\r\n        <button \r\n          nz-button \r\n          [nzType]=\"isAllDatesSelected() ? 'primary' : 'default'\"\r\n          (click)=\"setAllDates()\"\r\n          nz-tooltip\r\n          nzTooltipTitle=\"Set date range to cover all possible dates (1900-2100)\"\r\n          style=\"margin-right: 8px;\">\r\n          <span nz-icon nzType=\"calendar\"></span>\r\n          All Dates\r\n        </button>\r\n        \r\n        <!-- Refresh Button -->\r\n        <button \r\n          nz-button \r\n          nzType=\"default\"\r\n          (click)=\"loadDocuments()\"\r\n          [nzLoading]=\"isLoadingDocuments\">\r\n          <span nz-icon nzType=\"reload\"></span>\r\n          Refresh\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"right-actions\">\r\n        <!-- Search Input -->\r\n        <nz-input-group [nzPrefix]=\"searchIcon\" style=\"width: 200px; margin-right: 8px;\">\r\n          <input \r\n            nz-input \r\n            type=\"text\" \r\n            placeholder=\"Search documents...\"\r\n            [(ngModel)]=\"searchText\"\r\n            (ngModelChange)=\"applyFilter()\">\r\n        </nz-input-group>\r\n        <ng-template #searchIcon>\r\n          <span nz-icon nzType=\"search\"></span>\r\n        </ng-template>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Available Documents Section -->\r\n  <div class=\"available-section\" style=\"margin-top: 16px;\">\r\n    <h4>Available Documents ({{ filteredDocuments.length }})</h4>\r\n    \r\n    <!-- Documents Table -->\r\n    <nz-table \r\n      #documentsTable\r\n      [nzData]=\"filteredDocuments\"\r\n      [nzSize]=\"'small'\"\r\n      [nzLoading]=\"isLoadingDocuments\"\r\n      [nzScroll]=\"{ y: '300px' }\"\r\n      [nzPageSize]=\"50\">\r\n      <thead>\r\n        <tr>\r\n          <th nzWidth=\"50px\">Select</th>\r\n          <th \r\n            nzWidth=\"100px\"\r\n            nzSortOrder=\"null\" \r\n            [nzSortFn]=\"sortByDate\"\r\n            [nzSortDirections]=\"['ascend', 'descend', null]\">\r\n            Date\r\n          </th>\r\n          <th \r\n            nzWidth=\"120px\"\r\n            nzSortOrder=\"null\" \r\n            [nzSortFn]=\"sortByType\"\r\n            [nzSortDirections]=\"['ascend', 'descend', null]\">\r\n            Type\r\n          </th>\r\n          <th \r\n            nzWidth=\"150px\"\r\n            nzSortOrder=\"null\" \r\n            [nzSortFn]=\"sortByTitle\"\r\n            [nzSortDirections]=\"['ascend', 'descend', null]\">\r\n            Title\r\n          </th>\r\n          <th \r\n            nzWidth=\"120px\"\r\n            nzSortOrder=\"null\" \r\n            [nzSortFn]=\"sortByAuthor\"\r\n            [nzSortDirections]=\"['ascend', 'descend', null]\">\r\n            Author\r\n          </th>\r\n          <th nzWidth=\"80px\">Source</th>\r\n          <th nzWidth=\"100px\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let doc of documentsTable.data\" \r\n            (click)=\"previewDocument(doc)\"\r\n            [class.highlighted-row]=\"isRowHighlighted(doc)\"\r\n            style=\"cursor: pointer;\">\r\n          <td (click)=\"$event.stopPropagation()\">\r\n            <label \r\n              nz-checkbox\r\n              [ngModel]=\"selectedDocuments.has(doc.eventId)\"\r\n              (ngModelChange)=\"toggleDocumentSelection(doc, $event)\"\r\n              [nzDisabled]=\"doc.isAttached\">\r\n            </label>\r\n          </td>\r\n          <td>{{ doc.effectiveDate | date:'short' }}</td>\r\n          <td>{{ doc.type }}</td>\r\n          <td>{{ doc.title }}</td>\r\n          <td>{{ doc.author }}</td>\r\n          <td>{{ doc.source }}</td>\r\n          <td (click)=\"$event.stopPropagation()\">\r\n            <button \r\n              *ngIf=\"canViewInCerner(doc)\"\r\n              nz-button \r\n              nzType=\"link\" \r\n              nzSize=\"small\"\r\n              (click)=\"viewInCerner(doc)\"\r\n              nz-tooltip\r\n              nzTooltipTitle=\"View in Cerner Document Viewer\">\r\n              <span nz-icon nzType=\"file-text\"></span>\r\n              Doc\r\n            </button>\r\n            <button \r\n              *ngIf=\"canViewInCernerProcedure(doc)\"\r\n              nz-button \r\n              nzType=\"link\" \r\n              nzSize=\"small\"\r\n              (click)=\"viewInCernerProcedure(doc)\"\r\n              nz-tooltip\r\n              nzTooltipTitle=\"View in Cerner Procedure Viewer\"\r\n              style=\"margin-left: 4px;\">\r\n              <span nz-icon nzType=\"medicine-box\"></span>\r\n              Proc\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>\r\n  </div>\r\n\r\n  <!-- Save Actions -->\r\n  <div class=\"save-actions\" style=\"margin-top: 16px; text-align: right;\">\r\n    <button \r\n      nz-button \r\n      nzType=\"default\"\r\n      (click)=\"viewSelectedInCerner()\"\r\n      [disabled]=\"!hasSelectedDocuments()\"\r\n      style=\"margin-right: 8px;\">\r\n      <span nz-icon nzType=\"file-text\"></span>\r\n      View Docs in Cerner\r\n    </button>\r\n    \r\n    <button \r\n      nz-button \r\n      nzType=\"default\"\r\n      (click)=\"viewSelectedInCernerProcedure()\"\r\n      [disabled]=\"!hasSelectedDocuments()\"\r\n      style=\"margin-right: 8px;\">\r\n      <span nz-icon nzType=\"medicine-box\"></span>\r\n      View Procs in Cerner\r\n    </button>\r\n    \r\n    <button \r\n      nz-button \r\n      nzType=\"primary\"\r\n      (click)=\"saveAttachments()\"\r\n      [disabled]=\"!hasSelectedAvailableDocuments()\"\r\n      [nzLoading]=\"isSavingAttachments\">\r\n      <span nz-icon nzType=\"save\"></span>\r\n      Save Attachments ({{ getSelectedAvailableDocumentsCount() }})\r\n    </button>\r\n  </div>\r\n\r\n  <!-- Document Preview Drawer -->\r\n  <app-document-preview-drawer\r\n    [visible]=\"previewModalVisible\"\r\n    [document]=\"selectedDocumentForPreview\"\r\n    [worklistItem]=\"worklistItem\"\r\n    [availableDocuments]=\"availableDocuments\"\r\n    [attachedDocuments]=\"attachedDocuments\"\r\n    (close)=\"closePreviewModal()\"\r\n    (documentAttached)=\"onDocumentAttached()\"\r\n    (documentSelected)=\"onDocumentSelected($event)\">\r\n  </app-document-preview-drawer>\r\n</div>","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthMilestone, PriorAuthItem } from '../../../../../models/prior-auth.model';\r\nimport { NzModalService, NzModalRef } from 'ng-zorro-antd/modal';\r\nimport { GlidianProcessViewComponent } from './glidian-process-view.component';\r\n\r\n@Component({\r\n  selector: 'app-glidian-process-milestone',\r\n  templateUrl: './glidian-process-milestone.component.html',\r\n  styleUrls: ['./glidian-process-milestone.component.scss']\r\n})\r\nexport class GlidianProcessMilestoneComponent {\r\n  @Input() milestone!: PriorAuthMilestone;\r\n  @Input() worklistItem!: PriorAuthItem;\r\n\r\n  private currentModalRef: NzModalRef | null = null;\r\n\r\n  constructor(private modal: NzModalService) {}\r\n\r\n  getStepDetail() {\r\n    // Check for CURRENT_STEP override\r\n    const currentStep = this.milestone.milestoneData.find(md => md.type === 'CURRENT_STEP');\r\n    if (currentStep && (currentStep.valueText === 'Complete' || currentStep.valueText === 'Not Required')) {\r\n      return currentStep;\r\n    }\r\n    // Otherwise, return STATUS if present\r\n    const statusStep = this.milestone.milestoneData.find(md => md.type === 'STATUS');\r\n    if (statusStep) {\r\n      return statusStep;\r\n    }\r\n    // Fallback to CURRENT_STEP if no STATUS is found\r\n    return currentStep;\r\n  }\r\n\r\n  /**\r\n   * Returns the tag color for a given Glidian status or step.\r\n   * Handles all possible Glidian statuses as documented in cov_compass_service.prg.\r\n   * Status matching is case-insensitive for robustness.\r\n   */\r\n  getStepTagColor(step: { valueText: string }): string {\r\n    if (!step || !step.valueText) return 'default';\r\n    const status = step.valueText.trim().toUpperCase();\r\n    switch (status) {\r\n      // Preparing statuses\r\n      case 'DRAFT':\r\n        return 'processing';\r\n      case 'PREPARING':\r\n        return 'default';\r\n      case 'QUEUED':\r\n        return 'default';\r\n\r\n      // In progress statuses\r\n      case 'SUBMITTED':\r\n        return 'default';\r\n      case 'PENDING CONFIRMATION':\r\n        return 'processing';\r\n      case 'REQUEST RECEIVED':\r\n        return 'processing';\r\n      case 'REVIEW IN PROGRESS':\r\n        return 'processing';\r\n      case 'REROUTED':\r\n        return 'warning';\r\n      case 'PENDING UPDATE':\r\n        return 'warning';\r\n\r\n      // Additional Action statuses\r\n      case 'DENIED':\r\n      case 'AUTH DENIED':\r\n        return 'error';\r\n      case 'CANCELLED':\r\n        return 'error';\r\n      case 'MEMBER NOT ELIGIBLE':\r\n        return 'error';\r\n      case 'ACTION REQUIRED':\r\n        return 'warning';\r\n      case 'REJECTED':\r\n        return 'error';\r\n      case 'MORE INFO':\r\n        return 'warning';\r\n\r\n      // Completed statuses\r\n      case 'APPROVED':\r\n      case 'AUTH APPROVED':\r\n      case 'PARTIALLY APPROVED':\r\n      case 'AUTH RECIEVED': // Note: typo in 'Received' kept for compatibility\r\n        return 'success';\r\n      case 'AUTH NOT REQUIRED':\r\n        return 'default';\r\n        case 'NOT REQUIRED':\r\n          return 'default';\r\n      case 'RECEIVED':\r\n        return 'success';\r\n\r\n      // Fallback/default\r\n      default:\r\n        return 'processing';\r\n    }\r\n  }\r\n\r\n  getStepIcon(step: { valueText: string }): string {\r\n    switch (step.valueText) {\r\n      case 'Received':\r\n        return 'check-circle';\r\n      case 'Not Required':\r\n        return 'check-circle';\r\n      case 'More Info':\r\n        return 'warning';\r\n      case 'Submitted':\r\n        return 'cloud-upload';\r\n      case 'Preparing':\r\n        return 'folder-open';\r\n      case 'Rejected':\r\n        return 'close-circle';\r\n      // Added 'Queued' step: uses hourglass icon\r\n      case 'Queued':\r\n        return 'hourglass';\r\n      default:\r\n        return 'sync';\r\n    }\r\n  }\r\n\r\n  openMilestoneModal(): void {\r\n    this.currentModalRef = this.modal.create({\r\n      nzTitle: 'Glidian Milestone Details',\r\n      nzContent: GlidianProcessViewComponent,\r\n      nzData: {\r\n        milestone: this.milestone,\r\n        worklistItem: this.worklistItem\r\n      },\r\n      nzFooter: null,\r\n      nzWidth: '80%', // Use percentage width for better responsiveness\r\n      nzStyle: { maxWidth: '1400px', minWidth: '600px' } // Set min/max width constraints\r\n    });\r\n\r\n    // The modal operates on the same milestone and worklistItem references\r\n    // Any changes made in the modal will automatically be reflected in this component\r\n    // No additional handling needed since both components share the same data objects\r\n  }\r\n} ","<div class=\"milestone-content\" *ngIf=\"getStepDetail() as step\">\r\n  <nz-tag [nzColor]=\"getStepTagColor(step)\" (click)=\"openMilestoneModal()\" style=\"cursor:pointer;\">\r\n    <span nz-icon [nzType]=\"getStepIcon(step)\"></span>\r\n    <span>{{ step.valueText }}</span>\r\n  </nz-tag>\r\n</div>","import { Component, Inject, OnInit, OnDestroy } from '@angular/core';\r\nimport { PriorAuthMilestone, PriorAuthItem, PriorAuthAction } from '../../../../../models/prior-auth.model';\r\nimport { NZ_MODAL_DATA } from 'ng-zorro-antd/modal';\r\nimport { PriorAuthService } from '../../../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../../../services/messaging.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { CernerActionService } from '../../../../../services/cerner-action.service';\r\nimport { UserPreferencesService } from '../../../../../services/user-preferences.service';\r\nimport { ChangeDetectorRef } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-glidian-process-view',\r\n  templateUrl: './glidian-process-view.component.html',\r\n  styleUrls: ['./glidian-process-view.component.scss']\r\n})\r\nexport class GlidianProcessViewComponent implements OnInit, OnDestroy {\r\n  milestone: PriorAuthMilestone;\r\n  worklistItem: PriorAuthItem;\r\n  isCreatingAuth = false;\r\n  /**\r\n   * Message to display to the user for Glidian actions (e.g., success, error, or info).\r\n   * Used in the template for user feedback.\r\n   */\r\n  glidianActionMessage: string = '';\r\n  /**\r\n   * Indicates if the item is currently being refreshed for the modal footer refresh button.\r\n   */\r\n  isRefreshing = false;\r\n  hasSubmittedToGlidianThisSession = false;\r\n  private destroy$ = new Subject<void>();\r\n\r\n  // Properties for multiple Glidian ID management\r\n  selectedGlidianId: string | null = null;\r\n  isRemovingGlidianId = false;\r\n\r\n  /** Track if comments panel should be expanded */\r\n  commentsPanelExpanded = false;\r\n\r\n  // Panel states for expand/collapse functionality of all sections\r\n  panelStates = {\r\n    documentSelection: false,\r\n    milestoneHistory: false,\r\n    supportInformation: false\r\n  };\r\n\r\n  constructor(\r\n    @Inject(NZ_MODAL_DATA) public data: any,\r\n    private priorAuthService: PriorAuthService,\r\n    private messagingService: MessagingService,\r\n    private modalService: NzModalService,\r\n    private cernerActionService: CernerActionService,\r\n    private userPreferencesService: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    this.milestone = data.milestone;\r\n    this.worklistItem = data.worklistItem;\r\n  }\r\n\r\n  // Methods to expand/collapse all sections\r\n  expandAll(): void {\r\n    this.setAllPanelStates(true);\r\n  }\r\n\r\n  collapseAll(): void {\r\n    this.setAllPanelStates(false);\r\n  }\r\n\r\n  private setAllPanelStates(state: boolean): void {\r\n    this.panelStates = {\r\n      documentSelection: state,\r\n      milestoneHistory: state,\r\n      supportInformation: state\r\n    };\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Debug: Log milestone actions and resubmit logic\r\n    // console.log('[GlidianProcessViewComponent] milestoneActions:', this.milestoneActions);\r\n    const resubmitActions = this.milestoneActions.filter(\r\n      action =>\r\n        action.name?.toLowerCase().includes('submit') &&\r\n        action.name?.toLowerCase().includes('glidian') &&\r\n        action.status?.toLowerCase() === 'complete'\r\n    );\r\n    // console.log('[GlidianProcessViewComponent] resubmitActions:', resubmitActions);\r\n    // console.log('[GlidianProcessViewComponent] hasSubmittedToGlidianAction:', this.hasSubmittedToGlidianAction());\r\n    // Subscribe to item refresh events to update modal data when worklist item is refreshed\r\n    this.priorAuthService.itemRefresh$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(itemId => {\r\n        if (itemId === this.worklistItem.compass_worklist_id) {\r\n          // console.log(`[GlidianProcessViewComponent] Refreshing modal data for item ${itemId}`);\r\n          this.refreshModalData();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  /**\r\n   * Returns all actions related to this milestone for history display.\r\n   */\r\n  get milestoneActions(): PriorAuthAction[] {\r\n    if (!this.worklistItem || !this.milestone) return [];\r\n    return (this.worklistItem.actions || []).filter(a => a.milestoneId === this.milestone.milestoneId);\r\n  }\r\n\r\n  /**\r\n   * Check if the current step status is \"Queued\"\r\n   */\r\n  isQueuedStatus(): boolean {\r\n    const currentStep = this.milestone.milestoneData?.find(md => md.type === 'CURRENT_STEP');\r\n    return currentStep?.valueText === 'Queued';\r\n  }\r\n\r\n  /**\r\n   * Determines if there are Glidian actions to take for this milestone.\r\n   * Returns true if the current step is 'Queued' OR if there is a previous completed 'Submitted to Glidian' action.\r\n   */\r\n  hasGlidianActions(): boolean {\r\n    return this.isQueuedStatus() || this.hasSubmittedToGlidianAction();\r\n  }\r\n\r\n  /**\r\n   * Returns true if there is a completed 'Submitted to Glidian' action for this milestone.\r\n   * This is used to determine if the button should say 'Resubmit to Glidian'.\r\n   * Criteria: name === 'Submitted to Glidian' and status === 'Completed'.\r\n   */\r\n  hasSubmittedToGlidianAction(): boolean {\r\n    const resubmitActions = this.milestoneActions.filter(\r\n      action =>\r\n        action.name === 'Submitted to Glidian' &&\r\n        action.status === 'Completed'\r\n    );\r\n    return resubmitActions.length > 0;\r\n  }\r\n\r\n  /**\r\n   * Returns the label for the submit button based on milestone action history.\r\n   */\r\n  get submitToGlidianLabel(): string {\r\n    return this.hasSubmittedToGlidianAction() ? 'Resubmit to Glidian' : 'Submit to Glidian';\r\n  }\r\n\r\n  /**\r\n   * Refresh the modal data when the worklist item is updated\r\n   * This method fetches the latest data for the current worklist item and updates the modal\r\n   */\r\n  private refreshModalData(): void {\r\n    this.priorAuthService.getPriorAuthItemById(this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (updatedItem) => {\r\n        if (updatedItem) {\r\n          // console.log('[GlidianProcessViewComponent.refreshModalData] Updated worklist item data:', updatedItem);\r\n          \r\n          // Update the worklist item with fresh data\r\n          this.worklistItem = updatedItem;\r\n          \r\n          // Find and update the milestone data for this specific milestone\r\n          const updatedMilestone = updatedItem.milestones?.find(m => m.milestoneId === this.milestone.milestoneId);\r\n          if (updatedMilestone) {\r\n            // console.log('[GlidianProcessViewComponent.refreshModalData] Updated milestone data:', updatedMilestone);\r\n            this.milestone = updatedMilestone;\r\n          } else {\r\n            // console.warn('[GlidianProcessViewComponent.refreshModalData] Milestone not found in updated data');\r\n          }\r\n          this.hasSubmittedToGlidianThisSession = false;\r\n        } else {\r\n          // console.warn('[GlidianProcessViewComponent.refreshModalData] No updated data received');\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // console.error('[GlidianProcessViewComponent.refreshModalData] Error refreshing modal data:', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Refresh the currently open worklist item and milestone data.\r\n   * Used by the custom modal footer refresh button.\r\n   */\r\n  refreshCurrentItem(): void {\r\n    this.isRefreshing = true;\r\n    this.priorAuthService.getPriorAuthItemById(this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (updatedItem) => {\r\n        if (updatedItem) {\r\n          this.worklistItem = updatedItem;\r\n          const updatedMilestone = updatedItem.milestones?.find(m => m.milestoneId === this.milestone.milestoneId);\r\n          if (updatedMilestone) {\r\n            this.milestone = updatedMilestone;\r\n          }\r\n        }\r\n        this.isRefreshing = false;\r\n      },\r\n      error: () => {\r\n        this.isRefreshing = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Submit to Glidian for this worklist item\r\n   */\r\n  createGlidianAuth(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No worklist item ID available');\r\n      this.glidianActionMessage = 'No worklist item ID available.';\r\n      return;\r\n    }\r\n\r\n    this.isCreatingAuth = true;\r\n    this.glidianActionMessage = '';\r\n    this.hasSubmittedToGlidianThisSession = true;\r\n    \r\n    this.priorAuthService.createGlidianAuth(this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (response) => {\r\n        this.isCreatingAuth = false;\r\n        if (response.success) {\r\n          // Update local Glidian data immediately for UI responsiveness\r\n          //this.updateLocalGlidianStatus('SUBMITTED');\r\n          this.messagingService.success('Glidian authorization submitted successfully.');\r\n          this.glidianActionMessage = 'Authorization submitted to Glidian successfully.';\r\n        } else {\r\n          this.glidianActionMessage = response?.message || 'Failed to submit to Glidian.';\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.isCreatingAuth = false;\r\n        this.glidianActionMessage = 'Failed to Submit to Glidian.';\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Helper to get all Glidian IDs from milestone data\r\n   */\r\n  getGlidianIds(): string[] {\r\n    const recordIds = this.milestone.milestoneData?.filter(md => md.type === 'RECORD_ID') || [];\r\n    return recordIds.map(md => md.valueText).filter(id => id && id.trim() !== '');\r\n  }\r\n\r\n  /**\r\n   * Helper to get the primary (first) Glidian ID from milestone data\r\n   * @deprecated Use getGlidianIds() for multiple ID support\r\n   */\r\n  getGlidianId(): string | undefined {\r\n    const ids = this.getGlidianIds();\r\n    return ids.length > 0 ? ids[0] : undefined;\r\n  }\r\n\r\n  /**\r\n   * Helper to get Glidian Status from milestone data\r\n   */\r\n  getGlidianStatus(): string | undefined {\r\n    return this.milestone.milestoneData?.find(md => md.type === 'STATUS')?.valueText;\r\n  }\r\n\r\n  /**\r\n   * Helper to get Glidian Status Date from milestone data\r\n   */\r\n  getGlidianStatusDate(): Date | undefined {\r\n    return this.milestone.milestoneData?.find(md => md.type === 'STATUS')?.valueDate;\r\n  }\r\n\r\n  /**\r\n   * Helper to get Glidian Portal URL from milestone data\r\n   */\r\n  getGlidianUrl(): string | undefined {\r\n    return this.milestone.milestoneData?.find(md => md.type === 'URL')?.valueText;\r\n  }\r\n\r\n  /**\r\n   * Helper to get Current Step from milestone data\r\n   */\r\n  getCurrentStep(): string | undefined {\r\n    return this.milestone.milestoneData?.find(md => md.type === 'CURRENT_STEP')?.valueText;\r\n  }\r\n\r\n  /**\r\n   * Gets the EDOS (Earliest Date of Service) from the main worklist item, not milestone data.\r\n   */\r\n  getEdosDate(): Date | undefined {\r\n    return this.worklistItem.edosDate;\r\n  }\r\n\r\n  /**\r\n   * Returns true if the EDOS date is in the future.\r\n   * Used to disable the Submit to Glidian button if the date is not today or earlier.\r\n   */\r\n  isEdosInFuture(): boolean {\r\n    const edos = this.getEdosDate();\r\n    if (!edos) {\r\n      return false; // If no EDOS, do not disable\r\n    }\r\n    const edosDate = edos instanceof Date ? edos : new Date(edos);\r\n    if (isNaN(edosDate.getTime())) {\r\n      return false; // Invalid date, do not disable\r\n    }\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    edosDate.setHours(0, 0, 0, 0);\r\n    return edosDate > today;\r\n  }\r\n\r\n  /**\r\n   * Fetch the latest data from Glidian for the current record.\r\n   * Calls PriorAuthService.getLatestGlidianRecord and updates the UI with the result.\r\n   */\r\n  getLatestFromGlidian(): void {\r\n    if (!this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('No worklist item ID available');\r\n      this.glidianActionMessage = 'No worklist item ID available.';\r\n      return;\r\n    }\r\n    this.glidianActionMessage = '';\r\n    this.isCreatingAuth = true; // Reuse loading state for button spinner\r\n    this.priorAuthService.getLatestGlidianRecord(this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (response) => {\r\n        this.isCreatingAuth = false;\r\n        if (response.success && response.data) {\r\n          // Update local Glidian data with the latest information from server\r\n          this.updateLocalGlidianFromResponse(response.data);\r\n          this.messagingService.success('Latest Glidian record fetched successfully.');\r\n          this.glidianActionMessage = 'Latest Glidian data updated successfully.';\r\n        } else {\r\n          this.glidianActionMessage = response?.message || 'Failed to fetch latest Glidian record.';\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.isCreatingAuth = false;\r\n        this.glidianActionMessage = 'Failed to fetch latest Glidian record.';\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update local Glidian milestone status for immediate UI feedback\r\n   * This allows the UI to show changes without requiring a full refresh\r\n   */\r\n  private updateLocalGlidianStatus(newStatus: string): void {\r\n    // Update the milestone's milestoneData with the new status\r\n    const statusData = this.milestone.milestoneData.find(md => md.type === 'STATUS');\r\n    if (statusData) {\r\n      statusData.valueText = newStatus;\r\n      statusData.lastUpdateDateTime = new Date();\r\n    } else {\r\n      // Add new status data if none exists\r\n      this.milestone.milestoneData.push({\r\n        name: 'STATUS',\r\n        type: 'STATUS',\r\n        lastUpdateDateTime: new Date(),\r\n        valueDate: new Date(),\r\n        valueText: newStatus,\r\n        valueCd: 0,\r\n        valueID: 0.0\r\n      });\r\n    }\r\n\r\n    // Update the milestone status to reflect the change\r\n    this.milestone.status = 'In Progress'; // Glidian submissions are typically \"In Progress\"\r\n    this.milestone.statusDateTime = new Date();\r\n  }\r\n\r\n  /**\r\n   * Update local Glidian data from server response\r\n   * Updates both milestone data and worklist item Glidian data\r\n   */\r\n  private updateLocalGlidianFromResponse(responseData: any): void {\r\n    if (!responseData) return;\r\n\r\n    // Update milestone data if server provides status information\r\n    if (responseData.glidianStatus) {\r\n      this.updateLocalGlidianStatus(responseData.glidianStatus);\r\n    }\r\n\r\n    // Update worklist item's glidianData if provided\r\n    if (responseData.glidianData && this.worklistItem.glidianData) {\r\n      this.worklistItem.glidianData = {\r\n        ...this.worklistItem.glidianData,\r\n        ...responseData.glidianData,\r\n        latestStatusDtTm: new Date()\r\n      };\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Remove a specific Glidian ID from the milestone\r\n   */\r\n  removeGlidianId(glidianId: string): void {\r\n    if (!glidianId || !this.worklistItem?.compass_worklist_id) {\r\n      this.messagingService.error('Invalid Glidian ID or worklist item');\r\n      return;\r\n    }\r\n\r\n    this.isRemovingGlidianId = true;\r\n    this.glidianActionMessage = '';\r\n\r\n    this.priorAuthService.removeGlidianId(this.worklistItem.compass_worklist_id, glidianId).subscribe({\r\n      next: (response) => {\r\n        this.isRemovingGlidianId = false;\r\n        if (response.success) {\r\n          this.messagingService.success(`Glidian ID ${glidianId} removed successfully`);\r\n          this.glidianActionMessage = `Glidian ID ${glidianId} removed successfully`;\r\n          \r\n          // Remove the ID from local milestone data\r\n          this.removeGlidianIdFromLocalData(glidianId);\r\n          \r\n          // Clear selection if the removed ID was selected\r\n          if (this.selectedGlidianId === glidianId) {\r\n            this.selectedGlidianId = null;\r\n          }\r\n        } else {\r\n          this.glidianActionMessage = response?.message || `Failed to remove Glidian ID ${glidianId}`;\r\n        }\r\n      },\r\n      error: (error) => {\r\n        this.isRemovingGlidianId = false;\r\n        this.glidianActionMessage = `Failed to remove Glidian ID ${glidianId}`;\r\n        this.messagingService.error(`Failed to remove Glidian ID ${glidianId}`);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Remove Glidian ID from local milestone data\r\n   */\r\n  private removeGlidianIdFromLocalData(glidianId: string): void {\r\n    if (!this.milestone.milestoneData) return;\r\n\r\n    // Find and remove the milestone data entry with the specified Glidian ID\r\n    const indexToRemove = this.milestone.milestoneData.findIndex(\r\n      md => md.type === 'RECORD_ID' && md.valueText === glidianId\r\n    );\r\n\r\n    if (indexToRemove !== -1) {\r\n      this.milestone.milestoneData.splice(indexToRemove, 1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if there are multiple Glidian IDs\r\n   */\r\n  hasMultipleGlidianIds(): boolean {\r\n    return this.getGlidianIds().length > 1;\r\n  }\r\n\r\n  /**\r\n   * Get Glidian URL for a specific ID\r\n   */\r\n  getGlidianUrlForId(glidianId: string): string {\r\n    return `https://my.glidian.com/app/dashboard/${glidianId}`;\r\n  }\r\n\r\n  /**\r\n   * Track by function for Glidian ID list\r\n   */\r\n  trackByGlidianId(index: number, glidianId: string): string {\r\n    return glidianId;\r\n  }\r\n} ","<div class=\"glidian-process-view-modal\">\r\n  <!-- Expand/Collapse Controls -->\r\n  <div class=\"section-controls\" style=\"margin-bottom: 16px; text-align: right;\">\r\n    <button \r\n      nz-button \r\n      nzType=\"default\" \r\n      nzSize=\"small\"\r\n      (click)=\"collapseAll()\"\r\n      style=\"margin-right: 8px;\">\r\n      <span nz-icon nzType=\"minus-square\" nzTheme=\"outline\"></span>\r\n      Collapse All\r\n    </button>\r\n    <button \r\n      nz-button \r\n      nzType=\"default\" \r\n      nzSize=\"small\"\r\n      (click)=\"expandAll()\"\r\n      style=\"margin-right: 8px;\">\r\n      <span nz-icon nzType=\"plus-square\" nzTheme=\"outline\"></span>\r\n      Expand All\r\n    </button>\r\n    <!-- Duplicate Refresh Glidian Information button -->\r\n    <button \r\n      nz-button \r\n      nzType=\"default\" \r\n      nzSize=\"small\"\r\n      (click)=\"refreshCurrentItem()\" \r\n      [nzLoading]=\"isRefreshing\">\r\n      <span nz-icon nzType=\"reload\"></span>\r\n      Refresh Glidian Information\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"modal-header\">\r\n    <!-- Remove Submit to Glidian button from here -->\r\n  </div>\r\n  \r\n  <div class=\"milestone-details\">\r\n    <nz-descriptions nzTitle=\"Glidian Milestone Details\" nzBordered [nzColumn]=\"1\">\r\n      <nz-descriptions-item *ngIf=\"hasGlidianActions()\" nzTitle=\"Glidian Actions\">\r\n        <div style=\"display: flex; align-items: center; gap: 8px;\">\r\n          <button \r\n            *ngIf=\"submitToGlidianLabel !== 'Resubmit to Glidian' && !hasSubmittedToGlidianThisSession\"\r\n            nz-button \r\n            nzType=\"primary\" \r\n            nzSize=\"large\"\r\n            (click)=\"createGlidianAuth()\"\r\n            [disabled]=\"isCreatingAuth || isEdosInFuture()\"\r\n            nz-tooltip\r\n            [nzTooltipTitle]=\"isEdosInFuture() ? 'Cannot submit until EDOS date is today or earlier.' : 'Submit to Glidian'\"\r\n            class=\"submit-glidian-btn\"\r\n          >\r\n            <span nz-icon nzType=\"cloud-upload\" nzTheme=\"outline\" [nzSpin]=\"isCreatingAuth\"></span>\r\n            {{ submitToGlidianLabel }}\r\n          </button>\r\n          <!-- New: Get Latest from Glidian button -->\r\n          <button\r\n            *ngIf=\"getGlidianId()\"\r\n            nz-button\r\n            nzType=\"default\"\r\n            nzSize=\"large\"\r\n            (click)=\"getLatestFromGlidian()\"\r\n            nz-tooltip\r\n            nzTooltipTitle=\"Fetch the latest data from Glidian for this record.\"\r\n            class=\"get-latest-glidian-btn\"\r\n          >\r\n            <span nz-icon nzType=\"sync\" nzTheme=\"outline\"></span>\r\n            Get Latest from Glidian\r\n          </button>\r\n          <span *ngIf=\"glidianActionMessage\" class=\"glidian-action-message\" style=\"margin-left: 12px;\">{{ glidianActionMessage }}</span>\r\n        </div>\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item nzTitle=\"Milestone Status\">\r\n        {{ milestone.status }}\r\n        <span *ngIf=\"milestone.requiredInd\" class=\"milestone-required\">(Required)</span>\r\n        <span *ngIf=\"!milestone.requiredInd\" class=\"milestone-optional\">(Optional)</span>\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"getCurrentStep()\" nzTitle=\"Current Step\">\r\n        {{ getCurrentStep() }}\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"getGlidianIds().length > 0\" nzTitle=\"Glidian ID(s)\">\r\n        <div *ngIf=\"!hasMultipleGlidianIds(); else multipleIdsTemplate\">\r\n          <!-- Single ID display -->\r\n          <div class=\"single-glidian-id\">\r\n            <span class=\"glidian-id-text\">{{ getGlidianId() }}</span>\r\n            <a [href]=\"getGlidianUrl()\" target=\"_blank\" class=\"glidian-link\">\r\n              <span nz-icon nzType=\"link\" nzTheme=\"outline\"></span>\r\n            </a>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Multiple IDs template -->\r\n        <ng-template #multipleIdsTemplate>\r\n          <div class=\"multiple-glidian-ids\">\r\n            <!-- List of Glidian IDs -->\r\n            <div class=\"glidian-ids-list\">\r\n              <div \r\n                *ngFor=\"let glidianId of getGlidianIds(); trackBy: trackByGlidianId\" \r\n                class=\"glidian-id-item\"\r\n                [class.selected]=\"selectedGlidianId === glidianId\"\r\n                (click)=\"selectedGlidianId = glidianId\"\r\n              >\r\n                <div class=\"glidian-id-content\">\r\n                  <span class=\"glidian-id-text\">{{ glidianId }}</span>\r\n                  <div class=\"glidian-id-actions\">\r\n                    <a \r\n                      [href]=\"getGlidianUrlForId(glidianId)\" \r\n                      target=\"_blank\" \r\n                      class=\"glidian-link\"\r\n                      nz-tooltip\r\n                      nzTooltipTitle=\"Open in Glidian Portal\"\r\n                    >\r\n                      <span nz-icon nzType=\"link\" nzTheme=\"outline\"></span>\r\n                    </a>\r\n                    <button\r\n                      nz-button\r\n                      nzType=\"text\"\r\n                      nzSize=\"small\"\r\n                      nzDanger\r\n                      (click)=\"removeGlidianId(glidianId); $event.stopPropagation()\"\r\n                      [nzLoading]=\"isRemovingGlidianId\"\r\n                      nz-tooltip\r\n                      nzTooltipTitle=\"Remove this Glidian ID\"\r\n                      class=\"remove-glidian-btn\"\r\n                    >\r\n                      <span nz-icon nzType=\"delete\" nzTheme=\"outline\"></span>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-template>\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"getGlidianStatus()\" nzTitle=\"Glidian Status\">\r\n        {{ getGlidianStatus() }}\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"getGlidianStatusDate()\" nzTitle=\"Glidian Status Date\">\r\n        {{ getGlidianStatusDate() | date:'short' }}\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"getGlidianUrl()\" nzTitle=\"Portal URL\">\r\n        <a [href]=\"getGlidianUrl()\" target=\"_blank\">{{ getGlidianUrl() }}</a>\r\n      </nz-descriptions-item>\r\n      <nz-descriptions-item *ngIf=\"milestone.completedDate\" nzTitle=\"Completed\">\r\n        {{ milestone.completedDate | date:'short' }}\r\n      </nz-descriptions-item>\r\n    </nz-descriptions>\r\n    <div *ngIf=\"milestone.milestoneData && milestone.milestoneData.length\" style=\"margin-top: 16px;\">\r\n      <h4>Current Step Data</h4>\r\n      <ul>\r\n        <li *ngFor=\"let data of milestone.milestoneData\">\r\n          <strong>{{ data.name }}:</strong> {{ data.valueText || (data.valueDate | date:'short') }}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n  \r\n  <!-- Document Selection Section -->\r\n  <div style=\"margin-top: 16px;\">\r\n  <nz-collapse style=\"margin-top: 16px;\">\r\n    <nz-collapse-panel nzHeader=\"Document Selection\" [(nzActive)]=\"panelStates.documentSelection\">\r\n      <app-document-selection [worklistItem]=\"worklistItem\" [milestone]=\"milestone\"></app-document-selection>\r\n    </nz-collapse-panel>\r\n  </nz-collapse>\r\n  </div>\r\n\r\n  <!-- Collapsible Milestone History Section -->\r\n  <div style=\"margin-top: 16px;\">\r\n  <nz-collapse>\r\n    <nz-collapse-panel nzHeader=\"Milestone History\" [(nzActive)]=\"panelStates.milestoneHistory\" *ngIf=\"milestoneActions.length\">\r\n      <div style=\"max-height: 240px; overflow-y: auto; margin-top: 16px;\">\r\n        <table class=\"history-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>Action</th>\r\n              <th>Description</th>\r\n              <th>Status</th>\r\n              <th>Date/Time</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            <tr *ngFor=\"let action of milestoneActions\">\r\n              <td>{{ action.name }}</td>\r\n              <td>{{ action.description }}</td>\r\n              <td>{{ action.status }}</td>\r\n              <td>{{ action.actionDtTm | date:'short' }}</td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </nz-collapse-panel>\r\n  </nz-collapse>\r\n  </div>\r\n  <!-- Support Information Section -->\r\n  <div class=\"support-section\" style=\"margin-top: 16px;\">\r\n    <nz-collapse>\r\n      <nz-collapse-panel nzHeader=\"Support Information\" [(nzActive)]=\"panelStates.supportInformation\">\r\n        <nz-descriptions nzTitle=\"Internal IDs for Troubleshooting\" [nzColumn]=\"2\" nzBordered>\r\n          <nz-descriptions-item nzTitle=\"Compass Worklist ID\">\r\n            {{ worklistItem.compass_worklist_id }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Person ID\">\r\n            {{ worklistItem.personId }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Encounter ID\">\r\n            {{ worklistItem.encntrId }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Order ID\">\r\n            {{ worklistItem.orderId || 'N/A' }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Workflow ID\">\r\n            {{ worklistItem.workflow_id }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Milestone ID\">\r\n            {{ milestone.milestoneId }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Milestone Meaning\">\r\n            {{ milestone.meaning || 'N/A' }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Schedule Event ID\">\r\n            {{ worklistItem.schedule?.eventId || 'N/A' }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Schedule ID\">\r\n            {{ worklistItem.schedule?.scheduleId || 'N/A' }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Schedule Status\">\r\n            {{ worklistItem.schedule?.state || 'N/A' }}\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Action IDs\">\r\n            <div *ngIf=\"milestoneActions.length > 0; else noActions\">\r\n              <div *ngFor=\"let action of milestoneActions\" class=\"id-list-item\">\r\n                {{ action.actionId }} ({{ action.name }})\r\n              </div>\r\n            </div>\r\n            <ng-template #noActions>\r\n              <span class=\"no-data\">No actions</span>\r\n            </ng-template>\r\n          </nz-descriptions-item>\r\n          <nz-descriptions-item nzTitle=\"Data Refresh Date\">\r\n            {{ worklistItem.dataRefreshDtTm | date:'short' }}\r\n          </nz-descriptions-item>\r\n        </nz-descriptions>\r\n      </nz-collapse-panel>\r\n    </nz-collapse>\r\n  </div>\r\n  <!-- Custom Modal Footer: Refresh Button for Individual Worklist Item -->\r\n  <div *nzModalFooter>\r\n    <button nz-button nzType=\"default\" (click)=\"refreshCurrentItem()\" [nzLoading]=\"isRefreshing\">\r\n      <span nz-icon nzType=\"reload\"></span>\r\n      Refresh Glidian Information\r\n    </button>\r\n  </div>\r\n</div> ","import { Component, Input, Output, EventEmitter } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\n\r\n/**\r\n * GlidianWorkflowCellComponent\r\n * Renders milestone tags for a GLIDIAN workflowType worklist item.\r\n * Emits an event when a milestone tag is clicked to open milestone details.\r\n */\r\n@Component({\r\n  selector: 'app-glidian-workflow-cell',\r\n  templateUrl: './glidian-workflow-cell.component.html',\r\n  styleUrls: ['./glidian-workflow-cell.component.scss']\r\n})\r\nexport class GlidianWorkflowCellComponent {\r\n  /** Worklist item for this cell */\r\n  @Input() worklistItem!: PriorAuthItem;\r\n  /** Emits when a milestone tag is clicked */\r\n  @Output() openDetails = new EventEmitter<PriorAuthItem>();\r\n\r\n  /**\r\n   * Returns the CSS class for the milestone status.\r\n   * @param status Milestone status string\r\n   */\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'milestone-complete';\r\n      case 'In Progress':\r\n        return 'milestone-in-progress';\r\n      case 'Pending':\r\n        return 'milestone-pending';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the current step index for the Glidian process steps.\r\n   * 0 = Waiting for Submission, 1 = Submitted, 2 = Returned\r\n   */\r\n  getCurrentStep(item: PriorAuthItem): number {\r\n    switch (item.workflowStatus?.status) {\r\n      case 'Submitted':\r\n        return 1;\r\n      case 'Returned':\r\n        return 2;\r\n      default:\r\n        return 0;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the flex value for the milestone column based on milestone type.\r\n   * Adjust the returned values to control the width of each milestone cell.\r\n   * @param milestone The milestone object\r\n   */\r\n  getMilestoneFlex(milestone: { meaning: string }): string {\r\n    switch (milestone.meaning) {\r\n      case 'EDOS':\r\n        return '1 1 140px'; // Earliest Date: wider for date picker\r\n      case 'MEDNEC':\r\n        return '1 1 120px'; // Medical Necessity: medium\r\n      case 'GLIDIAN':\r\n        return '1 1 160px'; // Glidian Process: widest for tags/steps\r\n      case 'SCHEDULE':\r\n        return '0 1 100px'; // Scheduling Info: narrowest\r\n      default:\r\n        return '1 1 120px'; // Default flex\r\n    }\r\n  }\r\n\r\n} ","<div *ngIf=\"worklistItem\" class=\"show-milestone-borders-off\">\r\n  <nz-row [nzGutter]=\"[12, 0]\" nzJustify=\"start\" nzAlign=\"middle\">\r\n    <nz-col [nzFlex]=\"getMilestoneFlex(milestone)\" *ngFor=\"let milestone of worklistItem.milestones\">\r\n      <ng-container [ngSwitch]=\"milestone.meaning\">\r\n        <div *ngSwitchCase=\"'EDOS'\" class=\"milestone-border\">\r\n          <app-earliest-date-milestone\r\n            [milestone]=\"milestone\"\r\n            [worklistItem]=\"worklistItem\">\r\n          </app-earliest-date-milestone>\r\n        </div>\r\n        <div *ngSwitchCase=\"'MEDNEC'\" class=\"milestone-border\">\r\n          <app-medical-necessity-milestone\r\n            [milestone]=\"milestone\"\r\n            [worklistItem]=\"worklistItem\">\r\n          </app-medical-necessity-milestone>\r\n        </div>\r\n        <div *ngSwitchCase=\"'GLIDIAN'\" class=\"milestone-border\">\r\n          <app-glidian-process-milestone\r\n            [milestone]=\"milestone\"\r\n            [worklistItem]=\"worklistItem\">\r\n          </app-glidian-process-milestone>\r\n        </div>\r\n        <div *ngSwitchCase=\"'SCHEDULE'\" class=\"milestone-border\">\r\n          <app-scheduling-info-milestone\r\n            [milestone]=\"milestone\"\r\n            [worklistItem]=\"worklistItem\">\r\n          </app-scheduling-info-milestone>\r\n        </div>\r\n      </ng-container>\r\n    </nz-col>\r\n  </nz-row>\r\n</div> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthMilestone, MilestoneUpdateRequest } from '../../../../../models/prior-auth.model';\r\nimport { PriorAuthService } from '../../../../../services/prior-auth.service';\r\nimport { MessagingService } from '../../../../../services/messaging.service';\r\n\r\n@Component({\r\n  selector: 'app-medical-necessity-milestone',\r\n  templateUrl: './medical-necessity-milestone.component.html',\r\n  styleUrls: ['./medical-necessity-milestone.component.scss']\r\n})\r\nexport class MedicalNecessityMilestoneComponent {\r\n  @Input() milestone!: PriorAuthMilestone;\r\n  @Input() worklistItem!: PriorAuthItem;\r\n\r\n  constructor(private priorAuthService: PriorAuthService, private messagingService: MessagingService) {}\r\n\r\n  getStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'milestone-complete';\r\n      case 'Open':\r\n        return 'milestone-in-progress';\r\n      case 'Pending':\r\n        return 'milestone-pending';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  onStatusSwitch(checked: boolean): void {\r\n    const newStatus = checked ? 'Complete' : 'Open';\r\n    const oldStatus = this.milestone.status;\r\n    \r\n    // Update local milestone status immediately for UI responsiveness\r\n    this.milestone.status = newStatus;\r\n    \r\n    // Call the updateMilestone service to persist the change\r\n    const updateRequest: MilestoneUpdateRequest = {\r\n      compassMilestoneId: this.milestone.milestoneId,\r\n      status: newStatus,\r\n      statusDateTime: new Date(),\r\n      completedDate: checked ? new Date() : undefined,\r\n      actionMeaning: checked ? 'Confirmed Medical Necessity' : 'Unconfirmed Medical Necessity',\r\n      milestoneData: this.milestone.milestoneData\r\n    };\r\n\r\n    this.priorAuthService.updateMilestone(updateRequest, this.worklistItem.compass_worklist_id).subscribe({\r\n      next: (response) => {\r\n        if (response.success) {\r\n          const patientName = this.worklistItem.patient?.name || 'Unknown Patient';\r\n          const milestoneName = this.milestone.name || 'Medical Necessity';\r\n          const statusText = checked ? 'completed' : 'opened';\r\n          this.messagingService.success(`${milestoneName} milestone ${statusText} for ${patientName}. Please refresh to see changes.`);\r\n          // Do NOT update this.milestone or the worklist item here!\r\n        } else {\r\n          // Revert the local change if the service call failed\r\n          this.milestone.status = oldStatus;\r\n          // console.warn(`[MedicalNecessityMilestone] Failed to update milestone ${this.milestone.name} to ${newStatus}`);\r\n        }\r\n      },\r\n      error: (error) => {\r\n        // Revert the local change if the service call failed\r\n        this.milestone.status = oldStatus;\r\n        // console.error('[MedicalNecessityMilestone] Error updating milestone status:', error);\r\n      }\r\n    });\r\n  }\r\n} ","<nz-row class=\"milestone-row\" nzAlign=\"middle\" nzGutter=\"8\">\r\n  <nz-col nzFlex=\"1\">\r\n    <span class=\"milestone-title\">{{ milestone.name }}</span>\r\n  </nz-col>\r\n  <nz-col nzFlex=\"auto\" class=\"milestone-switch\">\r\n    <ng-container *ngIf=\"milestone.requiredInd; else notRequired\">\r\n      <nz-switch\r\n        [ngModel]=\"milestone.status === 'Complete'\"\r\n        (ngModelChange)=\"onStatusSwitch($event)\"\r\n        [nzSize]=\"'small'\"\r\n        [disabled]=\"!milestone.requiredInd\">\r\n      </nz-switch>\r\n    </ng-container>\r\n    <ng-template #notRequired>\r\n      <span nz-icon nzType=\"stop\" nzTheme=\"twotone\" nz-tooltip nzTooltipTitle=\"Not Required\"></span>\r\n    </ng-template>\r\n  </nz-col>\r\n</nz-row>","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthMilestone, PriorAuthItem } from 'src/app/models/prior-auth.model';\r\nimport { CernerActionService } from 'src/app/services/cerner-action.service';\r\nimport { OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-scheduling-info-milestone',\r\n  templateUrl: './scheduling-info-milestone.component.html',\r\n  styleUrls: ['./scheduling-info-milestone.component.scss']\r\n})\r\nexport class SchedulingInfoMilestoneComponent implements OnInit {\r\n  /**\r\n   * The milestone object for this cell (should have meaning 'SCHEDULE').\r\n   */\r\n  @Input() milestone!: PriorAuthMilestone;\r\n\r\n  /**\r\n   * The parent worklist item for context.\r\n   */\r\n  @Input() worklistItem!: PriorAuthItem;\r\n\r\n  /**\r\n   * schEventId and scheduleId extracted from milestoneData, if available.\r\n   */\r\n  schEventId?: number;\r\n  scheduleId?: number;\r\n\r\n  constructor(private cernerAction: CernerActionService) {}\r\n\r\n  /**\r\n   * OnInit lifecycle hook to extract scheduling IDs from worklistItem.schedule.\r\n   */\r\n  ngOnInit(): void {\r\n    // Use the schedule object from worklistItem if available\r\n    if (this.worklistItem?.schedule) {\r\n      this.schEventId = this.worklistItem.schedule.eventId;\r\n      this.scheduleId = this.worklistItem.schedule.scheduleId;\r\n      // console.log('[SchedulingInfoMilestone] Extracted schedule IDs from worklistItem.schedule:', {\r\n      //   schEventId: this.schEventId,\r\n      //   scheduleId: this.scheduleId\r\n      // });\r\n    } else {\r\n      // Fallback: attempt to extract from milestoneData if schedule object is not available\r\n      if (this.milestone && Array.isArray(this.milestone.milestoneData)) {\r\n        // Try to find by type or name (update as needed based on real data)\r\n        const schEvent = this.milestone.milestoneData.find(md => md.name?.toLowerCase().includes('event') || md.type?.toLowerCase().includes('event'));\r\n        const sched = this.milestone.milestoneData.find(md => md.name?.toLowerCase().includes('schedule') || md.type?.toLowerCase().includes('schedule'));\r\n        this.schEventId = schEvent?.valueID || schEvent?.valueCd;\r\n        this.scheduleId = sched?.valueID || sched?.valueCd;\r\n        // console.log('[SchedulingInfoMilestone] Extracted schedule IDs from milestoneData (fallback):', {\r\n        //   schEventId: this.schEventId,\r\n        //   scheduleId: this.scheduleId\r\n        // });\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handles click on the scheduling icon to show appointment history view.\r\n   * Uses CernerActionService to run APPT_HX_VIEW.\r\n   * Adds console logging for debugging.\r\n   */\r\n  async onSchedulingClick(): Promise<void> {\r\n    // console.log('[SchedulingInfoMilestone] onSchedulingClick called', {\r\n    //   schEventId: this.schEventId,\r\n    //   scheduleId: this.scheduleId,\r\n    //   worklistItemSchedule: this.worklistItem?.schedule,\r\n    //   milestone: this.milestone,\r\n    //   worklistItem: this.worklistItem\r\n    // });\r\n    if (this.schEventId && this.scheduleId !== undefined) {\r\n      // console.log('[SchedulingInfoMilestone] Running CernerAction APPT_HX_VIEW', {\r\n      //   schEventId: this.schEventId,\r\n      //   scheduleId: this.scheduleId,\r\n      //   encntrId: this.worklistItem?.encntrId,\r\n      //   personId: this.worklistItem?.personId\r\n      // });\r\n      await this.cernerAction.CernerAction('APPT_HX_VIEW', {\r\n        schEventId: this.schEventId,\r\n        scheduleId: this.scheduleId,\r\n        encntrId: this.worklistItem?.encntrId,\r\n        personId: this.worklistItem?.personId\r\n      });\r\n    } else {\r\n      // console.warn('[SchedulingInfoMilestone] Scheduling information is not available.', {\r\n      //   worklistItemSchedule: this.worklistItem?.schedule,\r\n      //   milestone: this.milestone\r\n      // });\r\n      // Optionally, show a warning or log if IDs are missing\r\n      // alert('Scheduling information is not available.');\r\n    }\r\n  }\r\n}\r\n","<button nz-button nzType=\"default\" nzShape=\"circle\" aria-label=\"Scheduling Info\" (click)=\"onSchedulingClick()\">\r\n  <span nz-icon nzType=\"schedule\" nzTheme=\"outline\" [ngClass]=\"{'scheduling-green': milestone?.status === 'In Process'}\"></span>\r\n</button>","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthItemCodes } from '../../../../models/prior-auth.model';\r\n\r\ninterface CodeGroup {\r\n  type: string;\r\n  codes: PriorAuthItemCodes[];\r\n}\r\n\r\n@Component({\r\n  selector: 'app-item-codes',\r\n  templateUrl: './item-codes.component.html',\r\n  styleUrls: ['./item-codes.component.scss']\r\n})\r\nexport class ItemCodesComponent {\r\n  @Input() item!: PriorAuthItem;\r\n\r\n  /**\r\n   * Get the codes for display\r\n   */\r\n  getCodes(): PriorAuthItemCodes[] {\r\n    return this.item?.codeList || [];\r\n  }\r\n\r\n  /**\r\n   * Get codes grouped by type\r\n   */\r\n  getCodesByType(): CodeGroup[] {\r\n    if (!this.hasCodes()) {\r\n      return [];\r\n    }\r\n\r\n    const codeGroups: { [key: string]: PriorAuthItemCodes[] } = {};\r\n    \r\n    this.item.codeList.forEach(code => {\r\n      if (!codeGroups[code.type]) {\r\n        codeGroups[code.type] = [];\r\n      }\r\n      codeGroups[code.type].push(code);\r\n    });\r\n\r\n    return Object.keys(codeGroups).map(type => ({\r\n      type: type,\r\n      codes: codeGroups[type]\r\n    }));\r\n  }\r\n\r\n  /**\r\n   * Check if there are any codes to display\r\n   */\r\n  hasCodes(): boolean {\r\n    return this.item?.codeList && this.item.codeList.length > 0;\r\n  }\r\n\r\n  /**\r\n   * Get a formatted string of all code identifiers\r\n   */\r\n  getCodeIdentifiers(): string {\r\n    if (!this.hasCodes()) {\r\n      return 'No codes';\r\n    }\r\n    return this.item.codeList.map(code => code.identifier).join(', ');\r\n  }\r\n} ","<div class=\"item-codes\">\r\n  <div *ngIf=\"hasCodes(); else noCodes\" class=\"codes-container\">\r\n    <div *ngFor=\"let codeGroup of getCodesByType(); let last = last\" class=\"code-group\">\r\n      <span class=\"code-type\">{{ codeGroup.type }}:</span>\r\n      <span *ngFor=\"let code of codeGroup.codes; let lastCode = last\" class=\"code-item\">\r\n        {{ code.identifier }}<span *ngIf=\"!lastCode\">, </span>\r\n      </span>\r\n    </div>\r\n  </div>\r\n  <ng-template #noCodes>\r\n    <span class=\"no-codes\">No codes</span>\r\n  </ng-template>\r\n</div> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\n\r\n@Component({\r\n  selector: 'app-item-info',\r\n  templateUrl: './item-info.component.html',\r\n  styleUrls: ['./item-info.component.scss']\r\n})\r\nexport class ItemInfoComponent {\r\n  @Input() item!: PriorAuthItem;\r\n\r\n  constructor(private cernerAction: CernerActionService) {}\r\n\r\n  /**\r\n   * Opens order details using the VIEWORDER CernerAction\r\n   * This method uses the DiscernObjectFactory to open the Order Info Viewer\r\n   * @param selectedItem The selected prior auth item\r\n   */\r\n  openItemDetails(selectedItem: PriorAuthItem): void {\r\n    // Initiate order details view for the selected prior auth item\r\n    \r\n    // Validate that orderId is present before proceeding with Cerner action\r\n    if (!selectedItem.orderId) {\r\n      // Unable to open order details without a valid order ID\r\n      \r\n      return;\r\n    }\r\n\r\n    // Execute Cerner VIEWORDER action to display order details in PowerChart\r\n    this.cernerAction.CernerAction('VIEWORDER', {\r\n      orderId: selectedItem.orderId,\r\n      personId: selectedItem.personId,\r\n      encntrId: selectedItem.encntrId\r\n    });\r\n  }\r\n} ","<div *ngIf=\"item\">\r\n  <div>\r\n    <a href=\"javascript:void(0)\" (click)=\"openItemDetails(item)\"><strong>{{ item.itemDescription }}</strong></a>\r\n  </div>\r\n  <!-- Future expansion: Additional item details can be added here -->\r\n  <!-- Examples: item type, priority, cost, etc. -->\r\n</div> ","import { Component, Input } from '@angular/core';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\nimport { CernerActionService } from '../../../../services/cerner-action.service';\r\nimport { mPageService } from '@clinicaloffice/clinical-office-mpage-core';\r\n\r\n@Component({\r\n  selector: 'app-patient-info',\r\n  templateUrl: './patient-info.component.html',\r\n  styleUrls: ['./patient-info.component.scss']\r\n})\r\nexport class PatientInfoComponent {\r\n  @Input() item!: PriorAuthItem;\r\n\r\n  constructor(private cernerAction: CernerActionService, private mPage: mPageService) {}\r\n\r\n  openChart(selectedItem: PriorAuthItem): void {\r\n    this.mPage.putLog('openChart function called', JSON.stringify(selectedItem));\r\n    // Log chart opening action for audit trail\r\n    if (selectedItem) {\r\n      this.cernerAction.CernerAction('OPENCHART', {\r\n        personId: selectedItem.personId,\r\n        encntrId: selectedItem.encntrId\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div *ngIf=\"item\">\r\n  <div>\r\n    <a href=\"javascript:void(0)\" (click)=\"openChart(item)\"><strong>{{ item.patient?.name }}</strong></a>\r\n  </div>\r\n  <div style=\"font-size: 10px;\">FIN: {{ item.patient?.fin }}</div>\r\n  <div style=\"font-size: 10px;\">MRN: {{ item.patient?.mrn }}</div>\r\n  <div style=\"font-size: 10px;\">DOB: {{ item.patient?.dateOfBirth | date:'shortDate' }}</div>\r\n</div>\r\n","import { Component, Input, Output, EventEmitter, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { PriorAuthItem } from '../../../../../models/prior-auth.model';\r\nimport { AdminService } from '../../../../../services/admin.service';\r\nimport { ColumnConfigService } from '../../../../../services/column-config.service';\r\n\r\nexport interface FacilityDetails {\r\n  organizationId?: number;\r\n  facilityName: string;\r\n  locationCode?: string;\r\n  npi: string;\r\n  taxId: string;\r\n  phone: string;\r\n  fax: string;\r\n  address: {\r\n    street: string;\r\n    city: string;\r\n    state: string;\r\n    zipCode: string;\r\n  };\r\n  isManualEntry?: boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-location-selection-modal',\r\n  templateUrl: './location-selection-modal.component.html',\r\n  styleUrls: ['./location-selection-modal.component.scss']\r\n})\r\nexport class LocationSelectionModalComponent implements OnInit {\r\n  @Input() isVisible = false;\r\n  @Input() item!: PriorAuthItem;\r\n  @Input() locationType: string = '';\r\n  @Output() isVisibleChange = new EventEmitter<boolean>();\r\n  @Output() locationSelected = new EventEmitter<FacilityDetails>();\r\n\r\n  selectedTab: 'list' | 'manual' = 'list';\r\n  manualEntryForm!: FormGroup;\r\n  configuredLocations: FacilityDetails[] = [];\r\n  filteredLocations: FacilityDetails[] = [];\r\n  selectedLocation: FacilityDetails | null = null;\r\n  searchTerm: string = '';\r\n  \r\n  // States for dropdowns\r\n  states = [\r\n    'AL', 'AK', 'AZ', 'AR', 'CA', 'CO', 'CT', 'DE', 'FL', 'GA',\r\n    'HI', 'ID', 'IL', 'IN', 'IA', 'KS', 'KY', 'LA', 'ME', 'MD',\r\n    'MA', 'MI', 'MN', 'MS', 'MO', 'MT', 'NE', 'NV', 'NH', 'NJ',\r\n    'NM', 'NY', 'NC', 'ND', 'OH', 'OK', 'OR', 'PA', 'RI', 'SC',\r\n    'SD', 'TN', 'TX', 'UT', 'VT', 'VA', 'WA', 'WV', 'WI', 'WY'\r\n  ];\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private adminService: AdminService,\r\n    private columnConfigService: ColumnConfigService\r\n  ) {\r\n    this.initializeForm();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadConfiguredLocations();\r\n  }\r\n\r\n  /**\r\n   * Pre-select the currently selected facility in the modal if one exists\r\n   * This helps users see what's currently selected and makes it easier to change\r\n   */\r\n  private preselectCurrentLocation(): void {\r\n    if (!this.item?.renderingInfo) {\r\n      return;\r\n    }\r\n\r\n    const renderingInfo = this.item.renderingInfo;\r\n    \r\n    // Check if a location has been previously selected\r\n    const hasOrganizationId = renderingInfo.organizationId && renderingInfo.organizationId > 0;\r\n    const isManualEntry = renderingInfo.isManualEntry === 1;\r\n    \r\n    if (hasOrganizationId || isManualEntry) {\r\n      // Look for matching facility in the configured locations\r\n      const matchingFacility = this.configuredLocations.find(location => \r\n        location.organizationId === renderingInfo.organizationId ||\r\n        (location.facilityName === renderingInfo.locationName && renderingInfo.isManualEntry === 1)\r\n      );\r\n      \r\n      if (matchingFacility) {\r\n        this.selectedLocation = matchingFacility;\r\n      } else if (isManualEntry) {\r\n        // If it's a manual entry, we should populate the manual entry form\r\n        this.selectedTab = 'manual';\r\n        this.populateManualEntryForm();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Populate the manual entry form with the currently selected facility details\r\n   */\r\n  private populateManualEntryForm(): void {\r\n    if (!this.item?.renderingInfo) {\r\n      return;\r\n    }\r\n\r\n    const renderingInfo = this.item.renderingInfo;\r\n    \r\n    this.manualEntryForm.patchValue({\r\n      facilityName: renderingInfo.locationName || '',\r\n      npi: renderingInfo.npi || '',\r\n      taxId: renderingInfo.taxId || '',\r\n      phone: renderingInfo.phone || '',\r\n      fax: renderingInfo.fax || '',\r\n      street: renderingInfo.address || '',\r\n      city: renderingInfo.city || '',\r\n      state: renderingInfo.state || '',\r\n      zipCode: renderingInfo.zipCode || ''\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get the current location display value for the modal\r\n   * Shows the actual facility name if one has been selected, otherwise shows the generic location\r\n   */\r\n  getCurrentLocationDisplay(): string {\r\n    if (!this.item?.renderingInfo) {\r\n      return this.item?.schedulingLocation || 'N/A';\r\n    }\r\n\r\n    const renderingInfo = this.item.renderingInfo;\r\n    \r\n    // Check if a location has been previously selected\r\n    const hasOrganizationId = renderingInfo.organizationId && renderingInfo.organizationId > 0;\r\n    const isManualEntry = renderingInfo.isManualEntry === 1;\r\n    \r\n    if (hasOrganizationId || isManualEntry) {\r\n      // Show the selected facility name\r\n      return renderingInfo.locationName || 'Selected Facility';\r\n    }\r\n    \r\n    // No facility selected yet, show the generic location\r\n    return this.item?.schedulingLocation || 'N/A';\r\n  }\r\n\r\n  /**\r\n   * Initialize the manual entry form with validation\r\n   */\r\n  private initializeForm(): void {\r\n    this.manualEntryForm = this.fb.group({\r\n      facilityName: ['', [Validators.required, Validators.minLength(2)]],\r\n      npi: ['', [\r\n        Validators.required,\r\n        Validators.pattern(/^\\d{10}$/) // NPI should be 10 digits\r\n      ]],\r\n      taxId: ['', [\r\n        Validators.required,\r\n        Validators.pattern(/^\\d{2}-?\\d{7}$/) // Tax ID format: XX-XXXXXXX or XXXXXXXXX\r\n      ]],\r\n      phone: ['', [\r\n        Validators.required,\r\n        Validators.pattern(/^(\\+?1[-.\\s]?)?\\(?([0-9]{3})\\)?[-.\\s]?([0-9]{3})[-.\\s]?([0-9]{4})$/) // US phone format\r\n      ]],\r\n      fax: ['', [\r\n        Validators.pattern(/^(\\+?1[-.\\s]?)?\\(?([0-9]{3})\\)?[-.\\s]?([0-9]{3})[-.\\s]?([0-9]{4})$/) // US fax format (optional)\r\n      ]],\r\n      street: ['', [Validators.required]],\r\n      city: ['', [Validators.required]],\r\n      state: ['', [Validators.required]],\r\n      zipCode: ['', [\r\n        Validators.required,\r\n        Validators.pattern(/^\\d{5}(-\\d{4})?$/) // ZIP or ZIP+4 format\r\n      ]]\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load configured locations from the service\r\n   * This combines locations from configuration and external locations\r\n   */\r\n  private loadConfiguredLocations(): void {\r\n    // Load from configuration when available\r\n    this.adminService.getCompassConfiguration().subscribe({\r\n      next: (config) => {\r\n        if (config?.schedulingLocations) {\r\n          this.configuredLocations = config.schedulingLocations;\r\n        } else {\r\n          // Initialize empty array if no configured locations\r\n          this.configuredLocations = [];\r\n        }\r\n        \r\n        // Load external locations and merge with configured locations\r\n        this.loadExternalLocations();\r\n      },\r\n      error: (error) => {\r\n        console.error('[LocationSelectionModal] Error loading configuration:', error);\r\n        // Initialize empty array on error\r\n        this.configuredLocations = [];\r\n        this.loadExternalLocations();\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load external locations from the service and merge with configured locations\r\n   */\r\n  private loadExternalLocations(): void {\r\n    // Get external locations from the column config service\r\n    const externalLocations = this.columnConfigService.externalLocations();\r\n    \r\n    if (externalLocations?.locations && externalLocations.locations.length > 0) {\r\n      // Convert external locations to FacilityDetails format\r\n      const externalFacilities: FacilityDetails[] = externalLocations.locations.map((loc: any) => ({\r\n        organizationId: loc.organizationId || 0,\r\n        facilityName: loc.locationName || '',\r\n        locationCode: loc.locationCode || '',\r\n        npi: loc.npi || '',\r\n        taxId: loc.taxId || '',\r\n        phone: loc.phone || '',\r\n        fax: loc.fax || '',\r\n        address: {\r\n          street: loc.address || '',\r\n          city: loc.city || '',\r\n          state: loc.state || '',\r\n          zipCode: loc.zipCode || ''\r\n        }\r\n      }));\r\n      \r\n      // Merge external locations with configured locations\r\n      this.configuredLocations = [...this.configuredLocations, ...externalFacilities];\r\n      this.filteredLocations = [...this.configuredLocations];\r\n    } else {\r\n      // If external locations are empty, try to load them directly from the admin service\r\n      this.adminService.getCompassOutsideLocations().subscribe({\r\n        next: (directLocations) => {\r\n          if (directLocations?.locations && directLocations.locations.length > 0) {\r\n            // Convert external locations to FacilityDetails format\r\n            const externalFacilities: FacilityDetails[] = directLocations.locations.map((loc: any) => ({\r\n              organizationId: loc.organizationId || 0,\r\n              facilityName: loc.locationName || '',\r\n              locationCode: loc.locationCode || '',\r\n              npi: loc.npi || '',\r\n              taxId: loc.taxId || '',\r\n              phone: loc.phone || '',\r\n              fax: loc.fax || '',\r\n              address: {\r\n                street: loc.address || '',\r\n                city: loc.city || '',\r\n                state: loc.state || '',\r\n                zipCode: loc.zipCode || ''\r\n              }\r\n            }));\r\n            \r\n            // Merge external locations with configured locations\r\n            this.configuredLocations = [...this.configuredLocations, ...externalFacilities];\r\n            this.filteredLocations = [...this.configuredLocations];\r\n            \r\n            // Pre-select the current location after loading\r\n            this.preselectCurrentLocation();\r\n            \r\n            // Ensure filtered locations are properly set by calling onSearchChange\r\n            this.onSearchChange(this.searchTerm || '');\r\n          }\r\n        },\r\n        error: (error) => {\r\n          console.error('[LocationSelectionModal] Error loading external locations directly:', error);\r\n        }\r\n      });\r\n    }\r\n    \r\n    // For the case where external locations were found in the signal\r\n    if (externalLocations?.locations && externalLocations.locations.length > 0) {\r\n      // After locations are loaded, pre-select the current location if one exists\r\n      this.preselectCurrentLocation();\r\n      \r\n      // Ensure filtered locations are properly set by calling onSearchChange\r\n      this.onSearchChange(this.searchTerm || '');\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Handle modal close\r\n   */\r\n  handleCancel(): void {\r\n    this.isVisible = false;\r\n    this.isVisibleChange.emit(false);\r\n    this.resetForm();\r\n  }\r\n\r\n  /**\r\n   * Handle location confirmation\r\n   */\r\n  handleOk(): void {\r\n    if (this.selectedTab === 'list' && this.selectedLocation) {\r\n      this.locationSelected.emit(this.selectedLocation);\r\n      this.handleCancel();\r\n    } else if (this.selectedTab === 'manual' && this.manualEntryForm.valid) {\r\n      const formValue = this.manualEntryForm.value;\r\n      const facilityDetails: FacilityDetails = {\r\n        facilityName: formValue.facilityName,\r\n        npi: formValue.npi,\r\n        taxId: formValue.taxId,\r\n        phone: formValue.phone,\r\n        fax: formValue.fax || '',\r\n        address: {\r\n          street: formValue.street,\r\n          city: formValue.city,\r\n          state: formValue.state,\r\n          zipCode: formValue.zipCode\r\n        },\r\n        isManualEntry: true\r\n      };\r\n      this.locationSelected.emit(facilityDetails);\r\n      this.handleCancel();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Reset form and selections\r\n   */\r\n  private resetForm(): void {\r\n    this.selectedLocation = null;\r\n    this.manualEntryForm.reset();\r\n    this.selectedTab = 'list';\r\n    this.searchTerm = '';\r\n    this.filteredLocations = [...this.configuredLocations];\r\n  }\r\n\r\n  /**\r\n   * Check if the OK button should be enabled\r\n   */\r\n  isOkButtonEnabled(): boolean {\r\n    if (this.selectedTab === 'list') {\r\n      return this.selectedLocation !== null;\r\n    } else {\r\n      return this.manualEntryForm.valid;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle location selection from list\r\n   */\r\n  selectLocation(location: FacilityDetails): void {\r\n    this.selectedLocation = location;\r\n  }\r\n\r\n  /**\r\n   * Format address for display\r\n   */\r\n  formatAddress(address: any): string {\r\n    return `${address.street}, ${address.city}, ${address.state} ${address.zipCode}`;\r\n  }\r\n\r\n  /**\r\n   * Validate NPI format (10 digits)\r\n   */\r\n  validateNPI(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    input.value = input.value.replace(/\\D/g, '').slice(0, 10);\r\n    this.manualEntryForm.patchValue({ npi: input.value });\r\n  }\r\n\r\n  /**\r\n   * Validate Tax ID format (XX-XXXXXXX)\r\n   */\r\n  validateTaxId(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    // Remove all non-digits\r\n    let value = input.value.replace(/\\D/g, '');\r\n    // Limit to 9 digits\r\n    if (value.length > 9) {\r\n      value = value.slice(0, 9);\r\n    }\r\n    // Format as XX-XXXXXXX\r\n    if (value.length >= 2) {\r\n      value = `${value.slice(0, 2)}-${value.slice(2)}`;\r\n    }\r\n    input.value = value;\r\n    this.manualEntryForm.patchValue({ taxId: value });\r\n  }\r\n\r\n  /**\r\n   * Validate phone format\r\n   */\r\n  validatePhone(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    // Remove all non-digits\r\n    let value = input.value.replace(/\\D/g, '');\r\n    // Limit to 10 digits\r\n    if (value.length > 10) {\r\n      value = value.slice(0, 10);\r\n    }\r\n    // Format as (XXX) XXX-XXXX\r\n    if (value.length >= 6) {\r\n      value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6)}`;\r\n    } else if (value.length >= 3) {\r\n      value = `(${value.slice(0, 3)}) ${value.slice(3)}`;\r\n    } else if (value.length > 0) {\r\n      value = `(${value}`;\r\n    }\r\n    input.value = value;\r\n    this.manualEntryForm.patchValue({ phone: value });\r\n  }\r\n\r\n  /**\r\n   * Validate fax format\r\n   */\r\n  validateFax(event: Event): void {\r\n    const input = event.target as HTMLInputElement;\r\n    // Remove all non-digits\r\n    let value = input.value.replace(/\\D/g, '');\r\n    // Limit to 10 digits\r\n    if (value.length > 10) {\r\n      value = value.slice(0, 10);\r\n    }\r\n    // Format as (XXX) XXX-XXXX\r\n    if (value.length >= 6) {\r\n      value = `(${value.slice(0, 3)}) ${value.slice(3, 6)}-${value.slice(6)}`;\r\n    } else if (value.length >= 3) {\r\n      value = `(${value.slice(0, 3)}) ${value.slice(3)}`;\r\n    } else if (value.length > 0) {\r\n      value = `(${value}`;\r\n    }\r\n    input.value = value;\r\n    this.manualEntryForm.patchValue({ fax: value });\r\n  }\r\n\r\n  /**\r\n   * Handle tab change event\r\n   */\r\n  onTabChange(index: number): void {\r\n    this.selectedTab = index === 0 ? 'list' : 'manual';\r\n  }\r\n\r\n  /**\r\n   * Filter locations based on search term\r\n   */\r\n  onSearchChange(searchTerm: string): void {\r\n    this.searchTerm = searchTerm;\r\n    if (!searchTerm.trim()) {\r\n      this.filteredLocations = [...this.configuredLocations];\r\n    } else {\r\n      const term = searchTerm.toLowerCase();\r\n      this.filteredLocations = this.configuredLocations.filter(location =>\r\n        location.facilityName.toLowerCase().includes(term)\r\n      );\r\n    }\r\n    \r\n    // Clear selection if selected location is not in filtered results\r\n    if (this.selectedLocation && !this.filteredLocations.includes(this.selectedLocation)) {\r\n      this.selectedLocation = null;\r\n    }\r\n  }\r\n}","<nz-modal\r\n  [(nzVisible)]=\"isVisible\"\r\n  nzTitle=\"Select Location\"\r\n  [nzWidth]=\"600\"\r\n  [nzOkText]=\"'Confirm'\"\r\n  [nzCancelText]=\"'Cancel'\"\r\n  [nzOkDisabled]=\"!isOkButtonEnabled()\"\r\n  (nzOnCancel)=\"handleCancel()\"\r\n  (nzOnOk)=\"handleOk()\"\r\n>\r\n  <ng-container *nzModalContent>\r\n    <!-- Patient and Item Info Header -->\r\n    <div class=\"modal-header-info\" *ngIf=\"item\">\r\n      <nz-descriptions [nzColumn]=\"1\" nzSize=\"small\">\r\n        <nz-descriptions-item nzTitle=\"Patient\">{{ item.patient?.name || 'N/A' }}</nz-descriptions-item>\r\n        <nz-descriptions-item nzTitle=\"Item\">{{ item.itemDescription || 'N/A' }}</nz-descriptions-item>\r\n        <nz-descriptions-item nzTitle=\"Current Location\">{{ getCurrentLocationDisplay() }}</nz-descriptions-item>\r\n      </nz-descriptions>\r\n    </div>\r\n\r\n    <nz-divider></nz-divider>\r\n\r\n    <!-- Tab Selection -->\r\n    <nz-tabset [nzSelectedIndex]=\"selectedTab === 'list' ? 0 : 1\" (nzSelectedIndexChange)=\"onTabChange($event)\">\r\n      \r\n      <!-- Configured Locations Tab -->\r\n      <nz-tab nzTitle=\"Select from List\">\r\n        <!-- Search Field -->\r\n        <div class=\"search-container\">\r\n          <nz-input-group nzPrefixIcon=\"search\">\r\n            <input \r\n              nz-input \r\n              placeholder=\"Search locations by name...\"\r\n              [(ngModel)]=\"searchTerm\"\r\n              (ngModelChange)=\"onSearchChange($event)\"\r\n            />\r\n          </nz-input-group>\r\n        </div>\r\n        \r\n        <div class=\"location-list\">\r\n          <nz-table \r\n            [nzData]=\"filteredLocations\" \r\n            [nzShowPagination]=\"false\"\r\n            [nzSize]=\"'small'\"\r\n            [nzScroll]=\"{ y: '300px' }\"\r\n            nzBordered\r\n          >\r\n            <thead>\r\n              <tr>\r\n                <th nzWidth=\"50px\">Select</th>\r\n                <th>Location Name</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              <tr *ngFor=\"let location of filteredLocations\" class=\"location-row\" (click)=\"selectLocation(location)\">\r\n                <td class=\"radio-cell\">\r\n                  <span class=\"radio-indicator\" [class.selected]=\"selectedLocation === location\">●</span>\r\n                </td>\r\n                <td class=\"location-name\">{{ location.facilityName }}</td>\r\n              </tr>\r\n            </tbody>\r\n          </nz-table>\r\n          \r\n          <nz-empty *ngIf=\"filteredLocations.length === 0\" nzNotFoundContent=\"No locations found matching your search. Please try a different search term or use manual entry.\"></nz-empty>\r\n        </div>\r\n      </nz-tab>\r\n\r\n      <!-- Manual Entry Tab -->\r\n      <nz-tab nzTitle=\"Manual Entry\">\r\n        <form nz-form [formGroup]=\"manualEntryForm\" nzLayout=\"vertical\">\r\n          \r\n          <!-- Facility Name -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>Facility Name</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Please enter a valid facility name (minimum 2 characters)\">\r\n              <input \r\n                nz-input \r\n                formControlName=\"facilityName\" \r\n                placeholder=\"Enter facility name\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- NPI -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>NPI (National Provider Identifier)</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"NPI must be exactly 10 digits\">\r\n              <input\r\n                nz-input\r\n                formControlName=\"npi\"\r\n                placeholder=\"Enter 10-digit NPI\"\r\n                maxlength=\"10\"\r\n                (input)=\"validateNPI($event)\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Tax ID -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>Tax ID</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Tax ID must be in format XX-XXXXXXX\">\r\n              <input\r\n                nz-input\r\n                formControlName=\"taxId\"\r\n                placeholder=\"Enter Tax ID (XX-XXXXXXX)\"\r\n                maxlength=\"10\"\r\n                (input)=\"validateTaxId($event)\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Contact Information Section -->\r\n          <nz-divider nzText=\"Contact Information\" nzOrientation=\"left\"></nz-divider>\r\n\r\n          <!-- Phone Number -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>Phone Number</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Please enter a valid phone number\">\r\n              <input\r\n                nz-input\r\n                formControlName=\"phone\"\r\n                placeholder=\"Enter phone number (e.g., (123) 456-7890)\"\r\n                maxlength=\"14\"\r\n                (input)=\"validatePhone($event)\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Fax Number -->\r\n          <nz-form-item>\r\n            <nz-form-label>Fax Number</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Please enter a valid fax number\">\r\n              <input\r\n                nz-input\r\n                formControlName=\"fax\"\r\n                placeholder=\"Enter fax number (e.g., (123) 456-7890)\"\r\n                maxlength=\"14\"\r\n                (input)=\"validateFax($event)\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- Address Section -->\r\n          <nz-divider nzText=\"Address Information\" nzOrientation=\"left\"></nz-divider>\r\n\r\n          <!-- Street Address -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>Street Address</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Please enter a street address\">\r\n              <input \r\n                nz-input \r\n                formControlName=\"street\" \r\n                placeholder=\"Enter street address\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n\r\n          <!-- City and State Row -->\r\n          <nz-row [nzGutter]=\"16\">\r\n            <nz-col [nzSpan]=\"12\">\r\n              <nz-form-item>\r\n                <nz-form-label nzRequired>City</nz-form-label>\r\n                <nz-form-control nzErrorTip=\"Please enter a city\">\r\n                  <input \r\n                    nz-input \r\n                    formControlName=\"city\" \r\n                    placeholder=\"Enter city\"\r\n                  />\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </nz-col>\r\n            \r\n            <nz-col [nzSpan]=\"12\">\r\n              <nz-form-item>\r\n                <nz-form-label nzRequired>State</nz-form-label>\r\n                <nz-form-control nzErrorTip=\"Please select a state\">\r\n                  <nz-select formControlName=\"state\" nzPlaceHolder=\"Select state\">\r\n                    <nz-option *ngFor=\"let state of states\" [nzValue]=\"state\" [nzLabel]=\"state\"></nz-option>\r\n                  </nz-select>\r\n                </nz-form-control>\r\n              </nz-form-item>\r\n            </nz-col>\r\n          </nz-row>\r\n\r\n          <!-- ZIP Code -->\r\n          <nz-form-item>\r\n            <nz-form-label nzRequired>ZIP Code</nz-form-label>\r\n            <nz-form-control nzErrorTip=\"Please enter a valid ZIP code (12345 or 12345-1234)\">\r\n              <input \r\n                nz-input \r\n                formControlName=\"zipCode\" \r\n                placeholder=\"Enter ZIP code\"\r\n                maxlength=\"10\"\r\n              />\r\n            </nz-form-control>\r\n          </nz-form-item>\r\n        </form>\r\n      </nz-tab>\r\n    </nz-tabset>\r\n  </ng-container>\r\n</nz-modal>","import { Component, Input, OnInit, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { PriorAuthItem, SchedulingLocationUpdateRequest } from '../../../../models/prior-auth.model';\r\nimport { FacilityDetails } from './location-selection-modal/location-selection-modal.component';\r\nimport { MessagingService } from '../../../../services/messaging.service';\r\nimport { PriorAuthService } from '../../../../services/prior-auth.service';\r\n\r\n/**\r\n * SchedulingLocationComponent - Displays the scheduling location for a prior authorization item\r\n * \r\n * This component displays the scheduling location from the worklist item.\r\n * For \"Outside Location\" or \"Clinic/Non Schedulable\" locations, it provides\r\n * an interactive modal to select or manually enter facility details.\r\n * \r\n * If a location has been previously selected (indicated by renderingInfo.organizationId > 0 \r\n * or renderingInfo.isManualEntry === 1), the component will display the selected location\r\n * and allow users to change it by clicking on it.\r\n */\r\n@Component({\r\n  selector: 'app-scheduling-location',\r\n  templateUrl: './scheduling-location.component.html',\r\n  styleUrls: ['./scheduling-location.component.scss']\r\n})\r\nexport class SchedulingLocationComponent implements OnInit, OnChanges {\r\n  @Input() item!: PriorAuthItem;\r\n  \r\n  isModalVisible = false;\r\n  selectedFacility: FacilityDetails | null = null;\r\n\r\n  constructor(\r\n    private messagingService: MessagingService,\r\n    private priorAuthService: PriorAuthService\r\n  ) {}\r\n\r\n  /**\r\n   * Initialize component and load any previously selected location from renderingInfo\r\n   */\r\n  ngOnInit(): void {\r\n    this.loadPreviouslySelectedLocation();\r\n  }\r\n\r\n  /**\r\n   * Handle changes to the item input\r\n   * Reload previously selected location if the item changes\r\n   */\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['item'] && !changes['item'].firstChange) {\r\n      this.loadPreviouslySelectedLocation();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load previously selected location from renderingInfo if available\r\n   * A location is considered previously selected if:\r\n   * - renderingInfo.organizationId > 0, OR\r\n   * - renderingInfo.isManualEntry === 1\r\n   */\r\n  private loadPreviouslySelectedLocation(): void {\r\n    if (!this.item?.renderingInfo) {\r\n      return;\r\n    }\r\n\r\n    const renderingInfo = this.item.renderingInfo;\r\n    \r\n    // Check if a location has been previously selected\r\n    const hasOrganizationId = renderingInfo.organizationId && renderingInfo.organizationId > 0;\r\n    const isManualEntry = renderingInfo.isManualEntry === 1;\r\n    \r\n    if (hasOrganizationId || isManualEntry) {\r\n      // Load the previously selected facility into selectedFacility\r\n      this.selectedFacility = {\r\n        organizationId: renderingInfo.organizationId,\r\n        facilityName: renderingInfo.locationName || 'Unknown Facility',\r\n        locationCode: renderingInfo.locFacilityCd?.toString() || '',\r\n        address: {\r\n          street: renderingInfo.address || '',\r\n          city: renderingInfo.city || '',\r\n          state: renderingInfo.state || '',\r\n          zipCode: renderingInfo.zipCode || ''\r\n        },\r\n        phone: renderingInfo.phone || '',\r\n        fax: renderingInfo.fax || '',\r\n        npi: renderingInfo.npi || '',\r\n        taxId: renderingInfo.taxId || '',\r\n        isManualEntry: renderingInfo.isManualEntry === 1\r\n      };\r\n    } else {\r\n      // No previously selected location\r\n      this.selectedFacility = null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if the scheduling location requires special handling\r\n   * @returns true if the location is \"Outside Location\" or \"Clinic/Non Schedulable\"\r\n   */\r\n  isSpecialLocation(): boolean {\r\n    const location = this.item?.schedulingLocation;\r\n    return location === 'Outside Location';\r\n  }\r\n\r\n  /**\r\n   * Get the display value for the scheduling location\r\n   * @returns the scheduling location or 'N/A' if not available\r\n   */\r\n  getDisplayValue(): string {\r\n    // If we have a selected facility, show its name instead\r\n    if (this.selectedFacility) {\r\n      return this.selectedFacility.facilityName;\r\n    }\r\n    return this.item?.schedulingLocation || 'N/A';\r\n  }\r\n\r\n  /**\r\n   * Open the location selection modal for special locations\r\n   */\r\n  openLocationModal(): void {\r\n    if (this.isSpecialLocation()) {\r\n      this.isModalVisible = true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle the location selection from the modal\r\n   */\r\n  onLocationSelected(facility: FacilityDetails): void {\r\n    this.selectedFacility = facility;\r\n\r\n    // Prepare location data for backend using standardized interface\r\n    const locationData: SchedulingLocationUpdateRequest = {\r\n      organizationId: facility.organizationId || 0,\r\n      locationName: facility.facilityName,\r\n      locationCode: facility.locationCode || '',\r\n      address: facility.address?.street || '',\r\n      city: facility.address?.city || '',\r\n      state: facility.address?.state || '',\r\n      zipCode: facility.address?.zipCode || '',\r\n      phone: facility.phone || '',\r\n      fax: facility.fax || '',\r\n      npi: facility.npi || '',\r\n      taxId: facility.taxId || '',\r\n      isManualEntry: facility.isManualEntry || false\r\n    };\r\n\r\n    // Call backend service to update scheduling location\r\n    this.priorAuthService.updateSchedulingLocation(this.item.compass_worklist_id, locationData)\r\n      .subscribe({\r\n        next: (response) => {\r\n          console.log('Scheduling location updated successfully:', response);\r\n          this.messagingService.success(`Facility \"${facility.facilityName}\" selected successfully`);\r\n\r\n          // Update the item with the new location data\r\n          this.item.schedulingLocation = facility.facilityName;\r\n\r\n          // Update or create renderingInfo to ensure data persists\r\n          if (!this.item.renderingInfo) {\r\n            this.item.renderingInfo = {\r\n              organizationId: 0,\r\n              locFacilityCd: 0,\r\n              locationName: '',\r\n              address: '',\r\n              city: '',\r\n              state: '',\r\n              zipCode: '',\r\n              phone: '',\r\n              fax: '',\r\n              npi: '',\r\n              taxId: '',\r\n              isManualEntry: 0,\r\n              useOrderingProviderInd: 0\r\n            };\r\n          }\r\n\r\n          // Update renderingInfo with the new facility data\r\n          this.item.renderingInfo.organizationId = facility.organizationId || 0;\r\n          this.item.renderingInfo.locationName = facility.facilityName;\r\n          this.item.renderingInfo.locFacilityCd = facility.locationCode ? parseInt(facility.locationCode) : 0;\r\n          this.item.renderingInfo.address = facility.address?.street || '';\r\n          this.item.renderingInfo.city = facility.address?.city || '';\r\n          this.item.renderingInfo.state = facility.address?.state || '';\r\n          this.item.renderingInfo.zipCode = facility.address?.zipCode || '';\r\n          this.item.renderingInfo.phone = facility.phone || '';\r\n          this.item.renderingInfo.fax = facility.fax || '';\r\n          this.item.renderingInfo.npi = facility.npi || '';\r\n          this.item.renderingInfo.taxId = facility.taxId || '';\r\n          this.item.renderingInfo.isManualEntry = facility.isManualEntry ? 1 : 0;\r\n        },\r\n        error: (error) => {\r\n          console.error('Error updating scheduling location:', error);\r\n          this.messagingService.error('Failed to update scheduling location');\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Get tooltip text for the location\r\n   * Provides detailed information about the facility including whether it was manually entered\r\n   */\r\n  getTooltipText(): string {\r\n    if (this.isSpecialLocation()) {\r\n      if (this.selectedFacility) {\r\n        // Build detailed tooltip for previously selected facility\r\n        let tooltip = this.selectedFacility.facilityName;\r\n        \r\n        // Add NPI if available\r\n        if (this.selectedFacility.npi) {\r\n          tooltip += ` - NPI: ${this.selectedFacility.npi}`;\r\n        }\r\n        \r\n        // Add address if available\r\n        if (this.selectedFacility.address?.city && this.selectedFacility.address?.state) {\r\n          tooltip += ` (${this.selectedFacility.address.city}, ${this.selectedFacility.address.state})`;\r\n        }\r\n        \r\n        // Add indicator if manually entered\r\n        if (this.selectedFacility.isManualEntry) {\r\n          tooltip += ' [Manual Entry]';\r\n        }\r\n        \r\n        // Add note that user can click to change\r\n        tooltip += ' - Click to change';\r\n        \r\n        return tooltip;\r\n      }\r\n      return 'Click to select a specific facility';\r\n    }\r\n    return this.getDisplayValue();\r\n  }\r\n}","<div *ngIf=\"item\" class=\"scheduling-location\">\r\n  <span \r\n    [class.special-location]=\"isSpecialLocation()\"\r\n    [class.clickable]=\"isSpecialLocation()\"\r\n    [class.has-facility]=\"selectedFacility\"\r\n    [nz-tooltip]=\"getTooltipText()\"\r\n    (click)=\"openLocationModal()\"\r\n  >\r\n    <span nz-icon \r\n          *ngIf=\"isSpecialLocation() && !selectedFacility\" \r\n          nzType=\"environment\" \r\n          nzTheme=\"outline\"\r\n          class=\"location-icon\">\r\n    </span>\r\n    <span nz-icon \r\n          *ngIf=\"isSpecialLocation() && selectedFacility\" \r\n          nzType=\"check-circle\" \r\n          nzTheme=\"fill\"\r\n          class=\"location-icon success\">\r\n    </span>\r\n    {{ getDisplayValue() }}\r\n  </span>\r\n</div>\r\n\r\n<!-- Location Selection Modal -->\r\n<app-location-selection-modal\r\n  [(isVisible)]=\"isModalVisible\"\r\n  [item]=\"item\"\r\n  [locationType]=\"item.schedulingLocation\"\r\n  (locationSelected)=\"onLocationSelected($event)\"\r\n></app-location-selection-modal>","import { Component, Input, TemplateRef, OnInit } from '@angular/core';\r\nimport { NzModalRef, NzModalService } from 'ng-zorro-antd/modal';\r\nimport { User } from '../../../../models/admin.model';\r\nimport { PriorAuthItem } from '../../../../models/prior-auth.model';\r\nimport { AdminService } from '../../../../services/admin.service';\r\nimport { MessagingService } from '../../../../services/messaging.service';\r\nimport { PriorAuthService } from '../../../../services/prior-auth.service';\r\nimport { UserPreferencesService } from '../../../../services/user-preferences.service';\r\n\r\n@Component({\r\n  selector: 'app-user-assignment',\r\n  templateUrl: './user-assignment.component.html',\r\n  styleUrls: ['./user-assignment.component.scss']\r\n})\r\nexport class UserAssignmentComponent implements OnInit {\r\n  /**\r\n   * The worklist item to display user assignment for\r\n   */\r\n  @Input() item!: PriorAuthItem;\r\n\r\n  public assignableUsers: User[] = [];\r\n  public selectedUser: string | null = null;\r\n  public isModalLoading = false;\r\n  private modal!: NzModalRef;\r\n\r\n  constructor(\r\n    private modalService: NzModalService,\r\n    private adminService: AdminService,\r\n    private priorAuthService: PriorAuthService,\r\n    private messagingService: MessagingService,\r\n    private userPreferencesService: UserPreferencesService\r\n  ) {}\r\n\r\n  /**\r\n   * Component initialization - preload assignable users for display name lookup\r\n   */\r\n  ngOnInit(): void {\r\n    // Preload assignable users so display names are available immediately\r\n    this.loadAssignableUsers(false).catch(() => {\r\n      // Silently handle errors - if user data can't be loaded, we'll fall back to usernames\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Handle user assignment button click\r\n   * If no user is assigned and current user is available, directly assign them\r\n   * Otherwise, opens a modal to select a user\r\n   */\r\n  onUserAssignmentClick(modalContent: TemplateRef<any>): void {\r\n    this.loadAssignableUsers().then(() => {\r\n      // Check if current user is available for assignment\r\n      const currentUser = this.userPreferencesService.getUserData();\r\n      const isCurrentUserAvailable = currentUser && this.assignableUsers.some(u => \r\n        u.username.toUpperCase() === currentUser.username.toUpperCase()\r\n      );\r\n      \r\n      // If no user is assigned and current user is available, directly assign them\r\n      if (!this.item.assignedTo && isCurrentUserAvailable) {\r\n        this.directlyAssignCurrentUser();\r\n        return;\r\n      }\r\n      \r\n      // Otherwise, show the modal as before\r\n      this.showAssignmentModal(modalContent);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Directly assigns the current user to the worklist item without showing modal\r\n   */\r\n  private directlyAssignCurrentUser(): void {\r\n    const currentUser = this.userPreferencesService.getUserData();\r\n    if (!currentUser) return;\r\n\r\n    this.isModalLoading = true;\r\n    this.priorAuthService.assignUserToWorklistItem(this.item.compass_worklist_id, currentUser.username).subscribe({\r\n      next: () => {\r\n        this.messagingService.success(`Successfully assigned to ${currentUser.username}`);\r\n        this.item.assignedTo = currentUser.username; // Update UI immediately\r\n        \r\n        // Update the service's signal-based data store to trigger table filter updates\r\n        // This ensures items move in/out of assignment filters immediately\r\n        this.priorAuthService.updatePriorAuthItem(this.item);\r\n        \r\n        this.isModalLoading = false;\r\n      },\r\n      error: (err) => {\r\n        this.messagingService.error('Failed to assign user.');\r\n        // console.error(err);\r\n        this.isModalLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Shows the assignment modal with the existing logic\r\n   */\r\n  private showAssignmentModal(modalContent: TemplateRef<any>): void {\r\n    // If a user is already assigned, pre-select them.\r\n    if (this.item.assignedTo) {\r\n      this.selectedUser = this.item.assignedTo;\r\n    } else {\r\n      // Otherwise, try to pre-select the current user if they are in the list.\r\n      const currentUser = this.userPreferencesService.getUserData();\r\n      if (currentUser && this.assignableUsers.some(u => u.username.toUpperCase() === currentUser.username.toUpperCase())) {\r\n        this.selectedUser = currentUser.username;\r\n      } else {\r\n        this.selectedUser = null;\r\n      }\r\n    }\r\n\r\n    this.modal = this.modalService.create({\r\n      nzTitle: 'Assign User',\r\n      nzContent: modalContent,\r\n      nzFooter: [\r\n        {\r\n          label: 'Cancel',\r\n          onClick: () => this.modal.destroy()\r\n        },\r\n        {\r\n          label: 'Remove Assignment',\r\n          type: 'default',\r\n          danger: true,\r\n          show: !!this.item.assignedTo,\r\n          onClick: () => this.removeAssignment()\r\n        },\r\n        {\r\n          label: 'Save',\r\n          type: 'primary',\r\n          loading: () => this.isModalLoading,\r\n          disabled: () => !this.selectedUser,\r\n          onClick: () => this.saveAssignment()\r\n        }\r\n      ],\r\n      nzClosable: true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetches the list of users who can be assigned to the current workflow\r\n   * @param showErrors - Whether to show error messages (default: true)\r\n   */\r\n  private loadAssignableUsers(showErrors: boolean = true): Promise<void> {\r\n    return new Promise((resolve, reject) => {\r\n      this.isModalLoading = true;\r\n      const workflowType = this.item.workflowType.toLowerCase();\r\n      if (!workflowType) {\r\n        if (showErrors) {\r\n          this.messagingService.error('Cannot determine workflow type for this item.');\r\n        }\r\n        this.isModalLoading = false;\r\n        reject();\r\n        return;\r\n      }\r\n\r\n      this.adminService.getUserAssignOptions().subscribe({\r\n        next: (response) => {\r\n          if (response && response.usersAssignable && response.usersAssignable[workflowType]) {\r\n            this.assignableUsers = response.usersAssignable[workflowType];\r\n          } else {\r\n            this.assignableUsers = [];\r\n          }\r\n          this.isModalLoading = false;\r\n          resolve();\r\n        },\r\n        error: (err) => {\r\n          if (showErrors) {\r\n            this.messagingService.error('Failed to load assignable users.');\r\n          }\r\n          // console.error(err);\r\n          this.isModalLoading = false;\r\n          reject();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Saves the selected user assignment\r\n   * Updates both the local item and the service's signal-based data store\r\n   * to ensure table filtering reflects the change immediately\r\n   */\r\n  public saveAssignment(): void {\r\n    if (!this.selectedUser) return;\r\n\r\n    this.isModalLoading = true;\r\n    this.priorAuthService.assignUserToWorklistItem(this.item.compass_worklist_id, this.selectedUser).subscribe({\r\n      next: () => {\r\n        this.messagingService.success(`Successfully assigned to ${this.selectedUser}`);\r\n        this.item.assignedTo = this.selectedUser!; // Update UI immediately\r\n        \r\n        // Update the service's signal-based data store to trigger table filter updates\r\n        // This ensures items move in/out of assignment filters immediately\r\n        this.priorAuthService.updatePriorAuthItem(this.item);\r\n        \r\n        this.isModalLoading = false;\r\n        this.modal.destroy();\r\n      },\r\n      error: (err) => {\r\n        this.messagingService.error('Failed to assign user.');\r\n        // console.error(err);\r\n        this.isModalLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Removes the current user assignment\r\n   * Updates both the local item and the service's signal-based data store\r\n   * to ensure table filtering reflects the change immediately\r\n   */\r\n  public removeAssignment(): void {\r\n    this.isModalLoading = true;\r\n    this.priorAuthService.assignUserToWorklistItem(this.item.compass_worklist_id, '').subscribe({\r\n      next: () => {\r\n        this.messagingService.success('Successfully removed assignment.');\r\n        this.item.assignedTo = ''; // Update UI immediately\r\n        \r\n        // Update the service's signal-based data store to trigger table filter updates\r\n        // This ensures items move in/out of assignment filters immediately\r\n        this.priorAuthService.updatePriorAuthItem(this.item);\r\n        \r\n        this.isModalLoading = false;\r\n        this.modal.destroy();\r\n      },\r\n      error: (err) => {\r\n        this.messagingService.error('Failed to remove assignment.');\r\n        // console.error(err);\r\n        this.isModalLoading = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Gets the display name for the assigned user\r\n   * Returns the username for table display, full name shown in tooltip\r\n   */\r\n  getDisplayName(): string {\r\n    // Display username in the table column\r\n    return this.item.assignedTo || '';\r\n  }\r\n\r\n  /**\r\n   * Gets the tooltip text for the assigned user\r\n   * Shows full name when available, with username in parentheses\r\n   */\r\n  getAssignedTooltip(): string {\r\n    if (!this.item.assignedTo) {\r\n      return 'Unassigned';\r\n    }\r\n\r\n    // First try to get full name from backend assignedName\r\n    let fullName = this.item.assignedName;\r\n    \r\n    // If not available, look up from assignable users\r\n    if (!fullName && this.assignableUsers.length > 0) {\r\n      const assignedUser = this.assignableUsers.find(user => \r\n        user.username.toLowerCase() === this.item.assignedTo!.toLowerCase()\r\n      );\r\n      if (assignedUser && assignedUser.fullName) {\r\n        fullName = assignedUser.fullName;\r\n      }\r\n    }\r\n\r\n    // Format tooltip based on what information is available\r\n    if (fullName && fullName !== this.item.assignedTo) {\r\n      return `Assigned to ${fullName} (${this.item.assignedTo})`;\r\n    } else {\r\n      return `Assigned to ${this.item.assignedTo}`;\r\n    }\r\n  }\r\n}\r\n","<!--\r\n  Displays the assigned user's icon and name.\r\n  When clicked, opens a modal to assign/reassign a user.\r\n-->\r\n<div class=\"user-assignment-container\" (click)=\"onUserAssignmentClick(modalContent)\">\r\n  <ng-container *ngIf=\"item.assignedTo; else unassignedTemplate\">\r\n    <button nz-button nzType=\"link\" nz-tooltip [nzTooltipTitle]=\"getAssignedTooltip()\" class=\"assigned-user\">\r\n      <span nz-icon nzType=\"user\"></span>\r\n      {{ getDisplayName() }}\r\n    </button>\r\n  </ng-container>\r\n  <ng-template #unassignedTemplate>\r\n    <button nz-button nzType=\"text\" nz-tooltip nzTooltipTitle=\"Assign User\" class=\"unassigned-user\">\r\n      <span nz-icon nzType=\"user-add\"></span>\r\n    </button>\r\n  </ng-template>\r\n</div>\r\n\r\n<!-- Modal Content -->\r\n<ng-template #modalContent>\r\n  <nz-spin [nzSpinning]=\"isModalLoading\">\r\n    <p>Select a user to assign to this worklist item.</p>\r\n    <nz-select\r\n      [(ngModel)]=\"selectedUser\"\r\n      nzPlaceHolder=\"Select a user\"\r\n      style=\"width: 100%;\"\r\n      nzShowSearch\r\n      nzAllowClear\r\n    >\r\n      <nz-option\r\n        *ngFor=\"let user of assignableUsers\"\r\n        [nzValue]=\"user.username\"\r\n        [nzLabel]=\"user.fullName + ' (' + user.username + ')'\"\r\n      ></nz-option>\r\n    </nz-select>\r\n  </nz-spin>\r\n</ng-template>\r\n","import { Component, OnInit, OnDestroy, OnChanges, SimpleChanges, ViewChild, Input, Output, EventEmitter, ChangeDetectionStrategy, ChangeDetectorRef, signal, computed, effect } from '@angular/core';\r\nimport { PriorAuthItem, PriorAuthMilestone } from '../../../models/prior-auth.model';\r\nimport { ColumnItem } from '../../../models/column-item.model';\r\nimport { PredefinedFilter } from '../../../models/predefined-filter.model';\r\nimport { PriorAuthService } from '../../../services/prior-auth.service';\r\nimport { MilestoneDetailsComponent } from '../milestone-details/milestone-details.component';\r\nimport { ColumnConfigService } from '../../../services/column-config.service';\r\nimport { ItemHighlightingService } from '../../../services/item-highlighting.service';\r\nimport { UserPreferencesService } from '../../../services/user-preferences.service';\r\nimport { Subject } from 'rxjs';\r\nimport { takeUntil } from 'rxjs/operators';\r\nimport { NzTableComponent } from 'ng-zorro-antd/table';\r\n\r\n/**\r\n * WorklistTableComponent - Prior Authorization Worklist Data Table\r\n * \r\n * This component displays the main data table for prior authorization worklist items,\r\n * providing a comprehensive view of all pending authorization requests with interactive\r\n * features for item management, filtering, and detailed milestone tracking.\r\n * \r\n * COMPONENT ARCHITECTURE:\r\n * - Uses Angular Signals for reactive state management\r\n * - Implements OnPush change detection strategy for optimal performance\r\n * - Integrates with NG-Zorro Ant Design table component for rich UI features\r\n * - Supports expandable rows for additional item details\r\n * - Features sliding drawer for milestone management\r\n * \r\n * SIGNAL-BASED STATE MANAGEMENT:\r\n * - _expandedIds: Tracks which table rows are expanded\r\n * - _loadingItems: Manages loading states for individual items\r\n * - _drawerVisible: Controls milestone details drawer visibility\r\n * - _selectedItem: Holds currently selected item for drawer display\r\n * - Computed signals provide derived state for template consumption\r\n * \r\n * KEY FEATURES:\r\n * - Real-time data updates via signal reactivity\r\n * - Interactive milestone status updates\r\n * - Expandable row details with patient and order information\r\n * - Sliding drawer for comprehensive milestone management\r\n * - Dynamic column configuration and sorting\r\n * - Integrated feedback system for user input\r\n * - Responsive design for various screen sizes\r\n * \r\n * DATA FLOW:\r\n * 1. Receives filtered worklist items from PriorAuthService\r\n * 2. Displays items in sortable, filterable table format\r\n * 3. Handles user interactions (expand, select, status updates)\r\n * 4. Triggers milestone updates and refreshes data as needed\r\n * 5. Provides feedback collection for continuous improvement\r\n * \r\n * PERFORMANCE OPTIMIZATIONS:\r\n * - OnPush change detection reduces unnecessary re-renders\r\n * - Signals provide fine-grained reactivity without full component updates\r\n * - Lazy loading of milestone details via drawer interaction\r\n * - Optimized row expansion tracking using Set data structure\r\n * \r\n * INTEGRATION POINTS:\r\n * - PriorAuthService: Primary data source and state management\r\n * - ColumnConfigService: Dynamic column configuration\r\n * - MessagingService: User notifications and feedback\r\n * - FeedbackService: User feedback collection and submission\r\n * - Various cell components: Specialized rendering for different data types\r\n */\r\n@Component({\r\n  selector: 'app-worklist-table',\r\n  templateUrl: './worklist-table.component.html',\r\n  styleUrls: ['./worklist-table.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class WorklistTableComponent implements OnInit, OnDestroy, OnChanges {\r\n  @ViewChild(MilestoneDetailsComponent) milestoneDetails!: MilestoneDetailsComponent;\r\n  \r\n  /**\r\n   * Reference to the NG-ZORRO table instance for programmatic filter control\r\n   */\r\n  @ViewChild('worklistTable', { static: false }) worklistTable!: NzTableComponent<any>;\r\n  \r\n  /**\r\n   * The currently active predefined filter from parent component\r\n   */\r\n  @Input() activePredefinedFilter: PredefinedFilter | null = null;\r\n  \r\n  // === SIGNALS IMPLEMENTATION ===\r\n  \r\n  /**\r\n   * Signal tracking which rows are expanded in the table\r\n   * Provides better performance than traditional Set operations\r\n   */\r\n  private _expandedIds = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Signal tracking which items are currently loading\r\n   * Used to show loading indicators on individual rows\r\n   */\r\n  private _loadingItems = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Signal tracking drawer visibility state\r\n   * Controls whether the milestone details drawer is shown\r\n   */\r\n  private _drawerVisible = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal tracking the currently selected item for drawer display\r\n   */\r\n  private _selectedItem = signal<PriorAuthItem | null>(null);\r\n\r\n  /**\r\n   * Flag to prevent filter restoration when switching predefined filters\r\n   */\r\n  private _preventingFilterRestoration = false;\r\n\r\n  /**\r\n   * Flag to track if we're in the middle of a data refresh operation\r\n   */\r\n  private _isDataRefreshing = false;\r\n\r\n  /**\r\n   * Local storage for filter selections to persist across data updates\r\n   */\r\n  filterSelections: { [columnMeaning: string]: string[] } = {};\r\n  \r\n  // === PRIVATE SIGNALS FOR STATE MANAGEMENT ===\r\n  \r\n  /**\r\n   * Signal to track when column filters have been updated and are ready for visual application\r\n   * This replaces the setTimeout-based timing mechanism\r\n   */\r\n  private _columnFiltersReady = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal to track when predefined filter application is in progress\r\n   * This prevents race conditions during filter switching\r\n   */\r\n  private _applyingPredefinedFilter = signal<boolean>(false);\r\n  private _lastAppliedFilterId: string | null = null;\r\n  private _lastAppliedFilterTime = 0;\r\n  \r\n  // === READ-ONLY SIGNALS FOR EXTERNAL ACCESS ===\r\n  \r\n  /**\r\n   * Read-only access to expanded row IDs\r\n   * Components and templates can use this to check expansion state\r\n   */\r\n  readonly expandedIds = this._expandedIds.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to loading items set\r\n   * Used to show loading spinners on specific rows\r\n   */\r\n  readonly loadingItems = this._loadingItems.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to drawer visibility state\r\n   * Controls drawer open/close state in template\r\n   */\r\n  readonly drawerVisible = this._drawerVisible.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to selected item\r\n   * Used to display item details in drawer\r\n   */\r\n  readonly selectedItem = this._selectedItem.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to column filters ready state\r\n   * Used to determine when visual filter application can proceed\r\n   */\r\n  readonly columnFiltersReady = this._columnFiltersReady.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to predefined filter application state\r\n   * Used to prevent race conditions during filter switching\r\n   */\r\n  readonly applyingPredefinedFilter = this._applyingPredefinedFilter.asReadonly();\r\n  \r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n  \r\n  /**\r\n   * Computed signal that returns the current column configuration\r\n   * Automatically updates when column configuration changes\r\n   */\r\n  readonly listOfColumns = computed(() => \r\n    this.columnConfig.getColumns('prior-auth')\r\n  );\r\n  \r\n  /**\r\n   * Computed helper functions for template use\r\n   * These provide functional access to check states without repeated calculations\r\n   */\r\n  readonly isItemExpanded = computed(() => \r\n    (id: number) => this._expandedIds().has(id)\r\n  );\r\n  \r\n  readonly isItemLoading = computed(() => \r\n    (id: number) => this._loadingItems().has(id) || this.worklistService.isItemLoadingDetails(id)\r\n  );\r\n\r\n  /**\r\n   * Get CSS classes for highlighting a worklist item row based on configuration rules\r\n   * \r\n   * This method leverages the ItemHighlightingService to determine which CSS classes\r\n   * should be applied to a table row based on the compass configuration's itemHighlight\r\n   * rules. The highlighting system supports various criteria matching (text, number, date)\r\n   * and generates CSS class names by combining the highlight type and class.\r\n   * \r\n   * EXAMPLE CONFIGURATION:\r\n   * {\r\n   *   \"type\": \"worklistitem-row\",\r\n   *   \"reference\": \"schedulingLocation\", \r\n   *   \"class\": \"highlight-yellow\",\r\n   *   \"criteria\": [{\"valueText\": \"Outside Location\", \"valueNumber\": 0, \"valueDate\": \"\"}]\r\n   * }\r\n   * \r\n   * This would generate the CSS class \"worklistitem-row-highlight-yellow\" for any\r\n   * row where the schedulingLocation field equals \"Outside Location\".\r\n   * \r\n   * @param item The worklist item to get highlight classes for\r\n   * @returns String of space-separated CSS classes to apply to the row\r\n   */\r\n  getRowHighlightClasses(item: PriorAuthItem): string {\r\n    return this.itemHighlighting.getRowHighlightClasses(item);\r\n  }\r\n  \r\n  // === LIFECYCLE AND CLEANUP ===\r\n  \r\n  /**\r\n   * Subject for handling component destruction and subscription cleanup\r\n   */\r\n  private destroy$ = new Subject<void>();\r\n  \r\n  /**\r\n   * The worklist items to display, provided by the parent component.\r\n   * This remains as an Input for compatibility with parent components\r\n   */\r\n  @Input() worklistItems: PriorAuthItem[] = [];\r\n  \r\n  /**\r\n   * Loading state for the entire table, provided by the parent component.\r\n   * Used to show loading spinner when data is being fetched\r\n   */\r\n  @Input() loading = false;\r\n  \r\n  // Add a local columns array for the table\r\n  columns: ColumnItem[] = [];\r\n\r\n  constructor(\r\n    private worklistService: PriorAuthService,\r\n    private columnConfig: ColumnConfigService,\r\n    private itemHighlighting: ItemHighlightingService,\r\n    private userPreferences: UserPreferencesService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n    // Set up reactive effect to automatically apply visual filters when column filters are ready\r\n    // This replaces the setTimeout-based timing mechanism and prevents infinite loops\r\n    effect(() => {\r\n      const filtersReady = this._columnFiltersReady();\r\n      const applyingFilter = this._applyingPredefinedFilter();\r\n      const activeFilter = this.activePredefinedFilter;\r\n      \r\n      // Only apply visual filters if:\r\n      // 1. Column filters are ready\r\n      // 2. We're not currently applying a filter (to prevent race conditions)\r\n      // 3. We have an active predefined filter\r\n      // 4. We haven't applied this same filter recently (within 2 seconds)\r\n      const now = Date.now();\r\n      const sameFilterRecently = this._lastAppliedFilterId === activeFilter?.id && \r\n                               (now - this._lastAppliedFilterTime) < 2000;\r\n      \r\n      if (filtersReady && !applyingFilter && activeFilter && !sameFilterRecently) {\r\n        // Column filters ready, applying visual filters\r\n        this._applyingPredefinedFilter.set(true);\r\n        this._lastAppliedFilterId = activeFilter.id;\r\n        this._lastAppliedFilterTime = now;\r\n        \r\n        // Apply visual filters immediately since column filters are ready\r\n        this.applyVisualFilters(activeFilter);\r\n        \r\n        // Reset the applying flag after a longer delay to prevent rapid re-triggering\r\n        setTimeout(() => {\r\n          this._applyingPredefinedFilter.set(false);\r\n          // Reset _applyingPredefinedFilter to false\r\n        }, 1000); // Increased from 500ms to 1000ms to prevent rapid re-triggering\r\n      }\r\n    }, { allowSignalWrites: true });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // Load saved column widths\r\n    this.columnConfig.loadColumnWidths();\r\n    // Initialize columns on component init\r\n    this.columns = this.columnConfig.getColumns('prior-auth');\r\n    // Remove restoreTableFilters from here to avoid toggling tableVisible on initial load\r\n    // setTimeout(() => {\r\n    //   this.restoreTableFilters();\r\n    // }, 0);\r\n\r\n    // Subscribe to automatic item refresh events from the service\r\n    // Note: The service already handles the refresh, so we just need to update the UI state\r\n    this.worklistService.itemRefresh$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(itemId => {\r\n        // console.log(`[WorklistTableComponent] Received itemRefresh event for item ${itemId}`);\r\n        // The service already refreshed the item, so we just need to update loading state\r\n        // The signals will automatically update the UI when the service updates the worklist\r\n      });\r\n\r\n    // Subscribe to item detail updates during progressive loading to update column filters\r\n    // This ensures dropdown filters reflect new values as detailed data loads for each item\r\n    this.worklistService.itemDetailUpdated$\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(() => {\r\n        // Update column filters to include any new dropdown options from the detailed data\r\n        this.columnConfig.updateColumnsSilently();\r\n        \r\n        // Trigger change detection to ensure table reflects the updated detailed data\r\n        this.cdr.detectChanges();\r\n      });\r\n  }\r\n  \r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes['loading']) {\r\n    }\r\n    \r\n    // Apply predefined filters when they change - this should happen first\r\n    if (changes['activePredefinedFilter']) {\r\n      // Predefined filter changed\r\n      \r\n      // Set prevention flag when switching predefined filters\r\n      this._preventingFilterRestoration = true;\r\n      this._isDataRefreshing = true;\r\n      // Set _preventingFilterRestoration = true and _isDataRefreshing = true\r\n      \r\n      // Clear existing filter selections immediately\r\n      this.clearPredefinedFilterSelections();\r\n      \r\n      // Mark that we're waiting for column filters to be ready\r\n      this._columnFiltersReady.set(false);\r\n      \r\n      // Reset the flags after a brief delay to allow data processing\r\n      // The actual visual filter application will be triggered by the column filter update event\r\n      setTimeout(() => {\r\n        this._preventingFilterRestoration = false;\r\n        this._isDataRefreshing = false;\r\n        // Reset _preventingFilterRestoration = false and _isDataRefreshing = false\r\n        \r\n        // Signal that column filters should now be ready\r\n        this._columnFiltersReady.set(true);\r\n      }, 300); // Increased from 100ms to 300ms to give more time for system to settle\r\n    }\r\n    \r\n    if (changes['worklistItems'] && !changes['worklistItems'].firstChange) {\r\n      // worklistItems changed, checking flags\r\n      // Only restore filters if we're not preventing restoration (e.g., during predefined filter switches)\r\n      if (!this._preventingFilterRestoration && !this._isDataRefreshing) {\r\n        // Scheduling filter restoration\r\n        // Delay to ensure table has processed the new data\r\n        setTimeout(() => {\r\n          // Double-check the flags before actually restoring filters\r\n          if (!this._preventingFilterRestoration && !this._isDataRefreshing) {\r\n            this.restoreTableFilters();\r\n          } else {\r\n            // Skipping filter restoration - flags still active\r\n          }\r\n        }, 300);\r\n      } else {\r\n        // Skipping filter restoration due to predefined filter switch or data refresh\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle row expansion/collapse events for detailed item views\r\n   * \r\n   * This method manages the expansion state of table rows, allowing users to\r\n   * view additional details for specific worklist items. It uses signals to\r\n   * ensure reactive updates throughout the component hierarchy.\r\n   * \r\n   * SIGNAL UPDATE PROCESS:\r\n   * 1. Creates a new Set from current expanded IDs to ensure immutability\r\n   * 2. Adds or removes the target ID based on the checked parameter\r\n   * 3. Updates the signal with the new Set, triggering reactive updates\r\n   * 4. Template automatically re-renders affected rows based on signal changes\r\n   * \r\n   * @param id - The unique identifier of the worklist item\r\n   * @param checked - True to expand the row, false to collapse it\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Expand row for item with ID 123\r\n   * this.onExpandChange(123, true);\r\n   * \r\n   * // Collapse row for item with ID 123\r\n   * this.onExpandChange(123, false);\r\n   * ```\r\n   */\r\n  onExpandChange(id: number, checked: boolean): void {\r\n    const currentExpanded = new Set(this._expandedIds());\r\n    if (checked) {\r\n      currentExpanded.add(id);\r\n    } else {\r\n      currentExpanded.delete(id);\r\n    }\r\n    this._expandedIds.set(currentExpanded);\r\n  }\r\n\r\n  /**\r\n   * Update the workflow status of a prior authorization item\r\n   * \r\n   * This method delegates to the PriorAuthService to update the item's workflow\r\n   * status both in local signals and potentially in the backend system. The\r\n   * update triggers automatic re-rendering of affected UI elements.\r\n   * \r\n   * @param item - The prior authorization item to update\r\n   * @param status - The new workflow status to assign\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * this.updateStatus(priorAuthItem, 'Approved');\r\n   * this.updateStatus(priorAuthItem, 'Pending Review');\r\n   * ```\r\n   */\r\n  updateStatus(item: PriorAuthItem, status: string): void {\r\n    // No-op: Updates are now only applied after refresh.\r\n    // this.worklistService.updatePriorAuthItemStatus(item.compass_worklist_id, status);\r\n    // Show message to user\r\n    // this.messagingService.success('Status updated. Please refresh to see changes.');\r\n  }\r\n\r\n  /**\r\n   * Update the priority level of a prior authorization item\r\n   * \r\n   * This method delegates to the PriorAuthService to update the item's priority\r\n   * classification, which affects how the item is displayed and sorted in the\r\n   * worklist interface.\r\n   * \r\n   * @param item - The prior authorization item to update\r\n   * @param priority - The new priority level ('ASAP', 'Next AM', 'Routine', 'Stat', 'Today')\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * this.updatePriority(priorAuthItem, 'Stat');\r\n   * this.updatePriority(priorAuthItem, 'Routine');\r\n   * ```\r\n   */\r\n  updatePriority(item: PriorAuthItem, priority: string): void {\r\n    // No-op: Updates are now only applied after refresh.\r\n    // this.worklistService.updatePriorAuthItemPriority(item.compass_worklist_id, priority);\r\n    // Show message to user\r\n    // this.messagingService.success('Priority updated. Please refresh to see changes.');\r\n  }\r\n\r\n  /**\r\n   * Update the status of a specific milestone within a prior authorization item\r\n   * \r\n   * This method handles milestone-level status updates, which are used to track\r\n   * progress through the authorization workflow. Each milestone represents a\r\n   * specific step in the authorization process.\r\n   * \r\n   * @param item - The prior authorization item containing the milestone\r\n   * @param milestoneName - The name of the milestone to update\r\n   * @param status - The new status for the milestone ('Pending', 'In Progress', 'Complete')\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * this.updateMilestone(priorAuthItem, 'Initial Review', 'Complete');\r\n   * this.updateMilestone(priorAuthItem, 'Insurance Verification', 'In Progress');\r\n   * ```\r\n   */\r\n  updateMilestone(item: PriorAuthItem, milestoneName: string, status: string): void {\r\n    // No-op: Updates are now only applied after refresh.\r\n    // this.worklistService.updatePriorAuthItemMilestone(item.compass_worklist_id, milestoneName, status);\r\n    // Show message to user\r\n    // this.messagingService.success('Milestone updated. Please refresh to see changes.');\r\n  }\r\n\r\n  /**\r\n   * Get the appropriate CSS class for milestone status display\r\n   * \r\n   * This helper method maps milestone status values to corresponding CSS classes\r\n   * for consistent visual representation throughout the interface. It ensures\r\n   * standardized styling for different milestone states.\r\n   * \r\n   * @param status - The milestone status to map to a CSS class\r\n   * @returns The CSS class name corresponding to the status\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * const cssClass = this.getMilestoneStatusClass('Complete'); // Returns 'milestone-complete'\r\n   * const cssClass = this.getMilestoneStatusClass('Pending'); // Returns 'milestone-pending'\r\n   * ```\r\n   */\r\n  getMilestoneStatusClass(status: string): string {\r\n    switch (status) {\r\n      case 'Complete':\r\n        return 'milestone-complete';\r\n      case 'In Progress':\r\n        return 'milestone-in-progress';\r\n      case 'Pending':\r\n        return 'milestone-pending';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n  \r\n  /**\r\n   * Open the milestone details drawer for comprehensive item management\r\n   * \r\n   * This method displays a sliding drawer containing detailed milestone information\r\n   * and management tools for the selected prior authorization item. It uses signals\r\n   * to manage drawer state and item selection reactively.\r\n   * \r\n   * DRAWER FUNCTIONALITY:\r\n   * - Displays complete milestone timeline with status history\r\n   * - Provides milestone update capabilities\r\n   * - Shows detailed item information and context\r\n   * - Enables feedback collection for specific items\r\n   * - Supports milestone note addition and management\r\n   * \r\n   * @param item - The prior authorization item to display in the drawer\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Open drawer for a specific item\r\n   * this.openMilestoneDetails(selectedPriorAuthItem);\r\n   * ```\r\n   */\r\n  openMilestoneDetails(item: PriorAuthItem): void {\r\n    this._selectedItem.set(item);\r\n    this._drawerVisible.set(true);\r\n  }\r\n  \r\n  /**\r\n   * Close the milestone details drawer and clear item selection\r\n   * \r\n   * This method hides the milestone details drawer and clears the currently\r\n   * selected item, returning the interface to its default state. It ensures\r\n   * proper cleanup of drawer state using signal updates.\r\n   * \r\n   * STATE CLEANUP:\r\n   * - Sets drawer visibility to false\r\n   * - Clears selected item reference\r\n   * - Triggers reactive updates in dependent components\r\n   * - Maintains clean component state for future interactions\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Close drawer when user clicks close button\r\n   * this.closeMilestoneDetails();\r\n   * ```\r\n   */\r\n  closeMilestoneDetails(): void {\r\n    this._drawerVisible.set(false);\r\n    this._selectedItem.set(null);\r\n  }\r\n  \r\n  /**\r\n   * Handle drawer visibility changes initiated by child components\r\n   * \r\n   * This method responds to drawer visibility events from child components,\r\n   * ensuring consistent state management when the drawer is closed through\r\n   * various user interactions (close button, overlay click, escape key, etc.).\r\n   * \r\n   * EVENT HANDLING:\r\n   * - Responds to child component visibility events\r\n   * - Maintains state consistency across component hierarchy\r\n   * - Provides centralized drawer state management\r\n   * - Ensures proper cleanup when drawer is closed\r\n   * \r\n   * @param visible - The new visibility state for the drawer\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Called when child component closes drawer\r\n   * this.onDrawerVisibilityChange(false);\r\n   * ```\r\n   */\r\n  onDrawerVisibilityChange(visible: boolean): void {\r\n    if (!visible) {\r\n      this.closeMilestoneDetails();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle milestone details opening request from GlidianWorkflowCellComponent\r\n   * \r\n   * This method serves as an event handler for milestone details requests\r\n   * originating from the Glidian workflow cell component. It provides a\r\n   * consistent interface for opening milestone details regardless of the\r\n   * triggering component.\r\n   * \r\n   * @param item - The prior authorization item for which to show milestone details\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Called when user clicks milestone details in workflow cell\r\n   * this.onOpenMilestoneDetails(priorAuthItem);\r\n   * ```\r\n   */\r\n  onOpenMilestoneDetails(item: PriorAuthItem): void {\r\n    // Add performance logging for problematic item\r\n    if (item.compass_worklist_id === 26182025585) {\r\n          // console.warn(`[WorklistTable] Opening milestone details for problematic item ${item.compass_worklist_id}`);\r\n    // console.log(`[WorklistTable] Item data structure:`, {\r\n        // id: item.compass_worklist_id,\r\n        // hasCircularReference: this.checkForCircularReference(item),\r\n        // dataSize: JSON.stringify(item).length,\r\n        // milestonesCount: item.milestones?.length || 0,\r\n        // actionsCount: item.actions?.length || 0,\r\n        // payorsCount: item.payors?.length || 0,\r\n        // codeListCount: item.codeList?.length || 0\r\n      // });\r\n    }\r\n    this.openMilestoneDetails(item);\r\n  }\r\n  \r\n  /**\r\n   * Check if an object has circular references\r\n   */\r\n  private checkForCircularReference(obj: any): boolean {\r\n    try {\r\n      JSON.stringify(obj);\r\n      return false;\r\n    } catch (e) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Refresh a specific worklist item from the server\r\n   * Uses signals to track loading state and update item data\r\n   */\r\n  refreshWorklistItem(item: PriorAuthItem): void {\r\n    this.refreshWorklistItemById(item.compass_worklist_id);\r\n  }\r\n\r\n  /**\r\n   * Refresh a specific worklist item by ID with loading state\r\n   * This method can be called by the service for automatic refreshes\r\n   */\r\n  refreshWorklistItemById(itemId: number): void {\r\n    // Begin refresh process for a specific worklist item\r\n    \r\n    // Add item to loading set using signals\r\n    const currentLoading = new Set(this._loadingItems());\r\n    currentLoading.add(itemId);\r\n    this._loadingItems.set(currentLoading);\r\n    \r\n    this.worklistService.getPriorAuthItemById(itemId)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (updatedItem: PriorAuthItem) => {\r\n          if (updatedItem) {\r\n            // DON'T mutate the input array - let the service handle the update\r\n            // The service will update the master data and the computed signal will refresh automatically\r\n            this.worklistService.updatePriorAuthItem(updatedItem);\r\n            // Item has been successfully updated with fresh data from server\r\n            // The parent component will receive the updated data through reactive signals\r\n          }\r\n        },\r\n        error: (err) => {\r\n          // Handle refresh error - item data remains unchanged\r\n        },\r\n        complete: () => {\r\n          // Remove item from loading set using signals\r\n          const newLoading = new Set(this._loadingItems());\r\n          newLoading.delete(itemId);\r\n          this._loadingItems.set(newLoading);\r\n          // Refresh operation completed - loading indicator will be hidden\r\n        }\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Handler for when the milestone-details drawer refreshes an item.\r\n   * Updates the service's master data so all views reflect the latest data.\r\n   */\r\n  onDrawerItemRefreshed(updatedItem: PriorAuthItem): void {\r\n    // DON'T mutate the input array - let the service handle the update\r\n    // The service will update the master data and all computed signals will refresh automatically\r\n    this.worklistService.updatePriorAuthItem(updatedItem);\r\n    // The parent component will receive the updated data through reactive signals\r\n    // This ensures data consistency across all filter tabs\r\n  }\r\n\r\n  /**\r\n   * Type guard to check if an object is a PriorAuthItem\r\n   */\r\n  private isWorklistItem(obj: any): obj is PriorAuthItem {\r\n    return obj && typeof obj.compass_worklist_id === 'number' && typeof obj.patientName === 'string';\r\n  }\r\n\r\n  getCellValue(item: PriorAuthItem, columnName: string): any {\r\n    switch (columnName) {\r\n      case 'Patient':\r\n        return item.patient?.name;\r\n      case 'Order Description':\r\n        return item.itemDescription;\r\n      case 'Ordering Location':\r\n        return item.orderingLocation;\r\n      case 'Ordering Provider':\r\n        return item.orderingProvider;\r\n      case 'Scheduling Location':\r\n        return item.schedulingLocation;\r\n      case 'Schedule Status':\r\n        return item.schedule?.state || 'N/A';\r\n      case 'Workflow Status':\r\n        return item.workflowStatus.status;\r\n      case 'Order Status':\r\n        return item.subStatus.subStatus;\r\n      case 'Priority':\r\n        return item.priority;\r\n      case 'Codes':\r\n        return item.codeList?.map((code: any) => code.identifier).join(', ') || '';\r\n      case 'Payor':\r\n        return item.payors.map((p: any) => p.planName).join(', ');\r\n      case 'EDOS Date':\r\n        return item.edosDate;\r\n      case 'Order Date':\r\n        if (item.origOrderDtTm) {\r\n          const date = new Date(item.origOrderDtTm);\r\n          const day = date.getDate().toString().padStart(2, '0');\r\n          const month = date.toLocaleString('en-US', { month: 'short' });\r\n          const year = date.getFullYear();\r\n          const hours = date.getHours().toString().padStart(2, '0');\r\n          const minutes = date.getMinutes().toString().padStart(2, '0');\r\n          return `${day}-${month}-${year}`;\r\n        }\r\n        return '';\r\n      case 'EDOS':\r\n        if (item.edosDate) {\r\n          const date = new Date(item.edosDate);\r\n          const day = date.getDate().toString().padStart(2, '0');\r\n          const month = date.toLocaleString('en-US', { month: 'short' });\r\n          const year = date.getFullYear();\r\n          const hours = date.getHours().toString().padStart(2, '0');\r\n          const minutes = date.getMinutes().toString().padStart(2, '0');\r\n          return `${day}-${month}-${year}`;\r\n        }\r\n        return '';\r\n      case 'Assigned User':\r\n        // This will be handled by the user-assignment component\r\n        return '';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Handle column resize events\r\n   */\r\n  onColumnResize(event: { columnKey: string, width: number }): void {\r\n    if (event.columnKey === 'workflow' || event.columnKey === 'actions') {\r\n      // Handle special columns that are not in the column configuration\r\n      localStorage.setItem(`compass_${event.columnKey}_width`, event.width.toString());\r\n    } else {\r\n      // Update column width in the configuration service\r\n      this.columnConfig.updateColumnWidth('prior-auth', event.columnKey, event.width);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get saved width for workflow and actions columns\r\n   */\r\n  getFixedColumnWidth(columnKey: string): number | undefined {\r\n    const saved = localStorage.getItem(`compass_${columnKey}_width`);\r\n    return saved ? parseInt(saved) : undefined;\r\n  }\r\n\r\n  /**\r\n   * Reset column widths to default\r\n   */\r\n  resetColumnWidths(): void {\r\n    this.columnConfig.resetColumnWidths('prior-auth');\r\n    this.columnConfig.loadColumnWidths();\r\n    // If you use a local columns array, update it here as well\r\n    // this.columns = this.columnConfig.getColumns('prior-auth');\r\n  }\r\n\r\n  /**\r\n   * Handler for NG-Zorro table filter changes.\r\n   * Updates the persistent filterSelections state.\r\n   * @param filters - Array of filter objects from NG-Zorro table\r\n   */\r\n  /**\r\n   * Handler for individual column filter changes\r\n   * @param columnKey The column's meaning/key\r\n   * @param selectedValues The selected filter values\r\n   */\r\n  onColumnFilterChange(columnKey: string, selectedValues: string[] | null): void {\r\n    // console.log(`[WorklistTable] Column filter change for ${columnKey}:`, selectedValues);\r\n    \r\n    if (selectedValues && selectedValues.length > 0) {\r\n      this.filterSelections[columnKey] = selectedValues;\r\n    } else {\r\n      // Remove filter if no values selected\r\n      delete this.filterSelections[columnKey];\r\n    }\r\n    \r\n    // console.log('[WorklistTable] Updated filterSelections:', this.filterSelections);\r\n  }\r\n\r\n  onTableFilterChange(filters: any): void {\r\n    // console.log('[WorklistTable] Filter change received:', filters);\r\n    // console.log('[WorklistTable] Filter change type:', typeof filters);\r\n    // console.log('[WorklistTable] Filter change keys:', filters ? Object.keys(filters) : 'null');\r\n    \r\n    // Try different approaches to extract filter data\r\n    if (Array.isArray(filters)) {\r\n      // console.log('[WorklistTable] Filters is array');\r\n      filters.forEach((f: any) => {\r\n        // console.log('[WorklistTable] Array item:', f);\r\n        if (f.key && Array.isArray(f.value)) {\r\n          // console.log(`[WorklistTable] Setting filter ${f.key} to:`, f.value);\r\n          this.filterSelections[f.key] = f.value;\r\n        }\r\n      });\r\n    } else if (filters && typeof filters === 'object') {\r\n      // console.log('[WorklistTable] Filters is object');\r\n      \r\n      // Check for detail property\r\n      if (filters.detail && Array.isArray(filters.detail)) {\r\n        // console.log('[WorklistTable] Found detail array');\r\n        filters.detail.forEach((f: any) => {\r\n          if (f.key && Array.isArray(f.value)) {\r\n            // console.log(`[WorklistTable] Setting filter ${f.key} to:`, f.value);\r\n            this.filterSelections[f.key] = f.value;\r\n          }\r\n        });\r\n      } \r\n      // Check if it's a direct key-value object\r\n      else if (!filters.detail && !filters.type) {\r\n        // console.log('[WorklistTable] Treating as key-value object');\r\n        Object.keys(filters).forEach(key => {\r\n          if (Array.isArray(filters[key])) {\r\n            // console.log(`[WorklistTable] Setting filter ${key} to:`, filters[key]);\r\n            this.filterSelections[key] = filters[key];\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      // Unexpected payload, log for debugging\r\n      // console.warn('[WorklistTable] Unexpected nzFilterChange payload:', filters);\r\n    }\r\n    \r\n    // console.log('[WorklistTable] Updated filterSelections:', this.filterSelections);\r\n    \r\n    // Sync the current filter state with the UserPreferencesService\r\n    this.userPreferences.setCurrentFilterState('prior-auth', this.filterSelections);\r\n  }\r\n\r\n  /**\r\n   * Public method to clear all column filters\r\n   * Called when switching between predefined filter tabs\r\n   */\r\n  clearAllColumnFilters(): void {\r\n    // console.log('[WorklistTable] Clearing all column filters');\r\n    \r\n    // Set flags to prevent filter restoration during predefined filter switches\r\n    this._preventingFilterRestoration = true;\r\n    this._isDataRefreshing = true;\r\n    \r\n    // Clear all filter selections\r\n    this.filterSelections = {};\r\n    \r\n    // Clear filter selections in all columns\r\n    const columns = this.columnConfig.getColumns('prior-auth');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        // Clear all selections\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Update columns to reflect the cleared state\r\n    this.columnConfig.triggerUpdate();\r\n    \r\n    // Force change detection to ensure Angular picks up the changes\r\n    this.cdr.detectChanges();\r\n    \r\n    // Reset the flags after a longer delay to allow data updates to complete\r\n    // Increased from 500ms to 2000ms to ensure data refresh completes\r\n    setTimeout(() => {\r\n      this._preventingFilterRestoration = false;\r\n      this._isDataRefreshing = false;\r\n      // console.log('[WorklistTable] Reset _preventingFilterRestoration = false and _isDataRefreshing = false (from clearAllColumnFilters)');\r\n    }, 2000);\r\n  }\r\n\r\n  /**\r\n   * Clear filter selections that were set by predefined filters.\r\n   * Preserves user-selected filters on other columns.\r\n   */\r\n  private clearPredefinedFilterSelections(): void {\r\n    // console.log('[WorklistTable] Clearing predefined filter selections');\r\n    \r\n    // Clear ALL filters when going back to \"All Items\"\r\n    this.filterSelections = {};\r\n    \r\n    // Clear all column filter selections immediately\r\n    const columns = this.columnConfig.getColumns('prior-auth');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        // Clear all selections first\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n        // console.log(`[WorklistTable] Cleared all selections for column ${col.name}`);\r\n      }\r\n    }\r\n    \r\n    // Update columns to reflect the cleared state immediately\r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n    // console.log('[WorklistTable] Cleared all column filter selections');\r\n  }\r\n\r\n  /**\r\n   * Programmatically restore table filters using NG-ZORRO's table API.\r\n   * This ensures filters persist after a refresh, including manual and predefined filters.\r\n   */\r\n  restoreTableFilters(): void {\r\n    // console.log('[WorklistTable] Starting filter restoration. Current filterSelections:', JSON.stringify(this.filterSelections));\r\n    \r\n    // Check if we have any filters to restore\r\n    const hasFilters = Object.keys(this.filterSelections).some(key => \r\n      this.filterSelections[key] && this.filterSelections[key].length > 0\r\n    );\r\n    \r\n    if (!hasFilters) {\r\n      // console.log('[WorklistTable] No filters to restore');\r\n      return;\r\n    }\r\n    \r\n    // Get fresh columns from the service\r\n    const columns = this.columnConfig.getColumns('prior-auth');\r\n    \r\n    // Update the filter options to reflect saved selections\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        const selected = this.filterSelections[col.meaning] || [];\r\n        \r\n        // Clear all selections first\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n        \r\n        // Then set the selected ones\r\n        if (selected.length > 0) {\r\n          // console.log(`[WorklistTable] Setting filter for ${col.name} (${col.meaning}):`, selected);\r\n          for (const opt of col.listOfFilter) {\r\n            if (selected.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n              // console.log(`[WorklistTable] Marking ${opt.value} as selected`);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Force columns update which should trigger table re-render\r\n    this.columnConfig.updateColumnsSilently();\r\n    \r\n    // Force change detection to ensure Angular picks up the changes\r\n    this.cdr.detectChanges();\r\n  }\r\n  \r\n  /**\r\n   * Apply predefined filters to the table columns programmatically.\r\n   * This syncs the predefined filter selections with the table's column filters.\r\n   * Now uses reactive signals instead of setTimeout for timing.\r\n   */\r\n  private applyPredefinedFilters(): void {\r\n    // console.log('[WorklistTable] Applying predefined filter:', this.activePredefinedFilter);\r\n    \r\n    if (!this.activePredefinedFilter) {\r\n      // Clear predefined filter selections if no filter is active\r\n      this.clearPredefinedFilterSelections();\r\n      return;\r\n    }\r\n    \r\n    // Handle \"All Items\" filter explicitly - it should clear predefined filters\r\n    if (this.activePredefinedFilter.id === 'all') {\r\n      // console.log('[WorklistTable] All Items filter selected, clearing filters');\r\n      this.clearPredefinedFilterSelections();\r\n      return;\r\n    }\r\n    \r\n    // Apply visual filters immediately since column filters should be ready\r\n    this.applyVisualFilters(this.activePredefinedFilter);\r\n  }\r\n\r\n  /**\r\n   * Apply visual filters to the table columns.\r\n   * This method handles the actual visual application of predefined filters.\r\n   * @param filter - The predefined filter to apply visually\r\n   */\r\n  private applyVisualFilters(filter: PredefinedFilter): void {\r\n    const filters = filter.filters;\r\n    if (!filters) return;\r\n    \r\n    // console.log('[WorklistTable] Applying visual filters for:', filter.id);\r\n    \r\n    // Clear existing filter selections completely when switching predefined filters\r\n    this.filterSelections = {};\r\n    // console.log('[WorklistTable] Cleared filterSelections');\r\n    \r\n    // Clear all column filter selections immediately\r\n    const columns = this.columnConfig.getColumns('prior-auth');\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        // Clear all selections first\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = false;\r\n        }\r\n        // console.log(`[WorklistTable] Cleared all selections for column ${col.name}`);\r\n      }\r\n    }\r\n    \r\n    // Update columns to reflect the cleared state immediately\r\n    // Use silent update to avoid triggering columnFiltersUpdated$ observable\r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n    // console.log('[WorklistTable] Updated columns after clearing');\r\n    \r\n    // Apply visual selection based on predefined filter immediately\r\n    for (const col of columns) {\r\n      if (col.filterable && col.listOfFilter) {\r\n        // Apply visual selection based on predefined filter\r\n        if (col.meaning === 'WORKFLOWSTATUS' && filters.workflowStatus) {\r\n          for (const opt of col.listOfFilter) {\r\n            if (filters.workflowStatus.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n              // console.log(`[WorklistTable] Visually selecting ${opt.value} in Workflow Status filter`);\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (col.meaning === 'SCHEDULESTATUS' && filters.schedulingStatus) {\r\n          for (const opt of col.listOfFilter) {\r\n            if (filters.schedulingStatus.includes(opt.value)) {\r\n              opt.byDefault = true;\r\n              // console.log(`[WorklistTable] Visually selecting ${opt.value} in Schedule Status filter`);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Update columns to reflect the visual state\r\n    // Use silent update to avoid triggering columnFiltersUpdated$ observable\r\n    this.columnConfig.updateColumnsSilently();\r\n    this.cdr.detectChanges();\r\n    // console.log('[WorklistTable] Visual filter application completed');\r\n  }\r\n}","<nz-table\r\n  #worklistTable=\"nzTable\"\r\n  [nzData]=\"worklistItems\"\r\n  [nzBordered]=\"true\"\r\n  [nzPageSize]=\"8\"\r\n  [nzShowPagination]=\"true\"\r\n  [nzLoading]=\"loading\"\r\n  (nzFilterChange)=\"onTableFilterChange($event)\"\r\n>\r\n  <thead>\r\n    <tr>\r\n      <ng-container *ngFor=\"let column of listOfColumns()\">\r\n        <th\r\n          *ngIf=\"column.display && !column.filterable\"\r\n          [nzSortOrder]=\"column.sortOrder\"\r\n          [nzSortFn]=\"column.sortFn\"\r\n          [nzSortDirections]=\"column.sortDirections\"\r\n          [nzFilterMultiple]=\"column.filterMultiple\"\r\n          [style.width.px]=\"column.width\"\r\n          appResizableColumn\r\n          [columnKey]=\"column.meaning\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"500\"\r\n          (columnResize)=\"onColumnResize($event)\"\r\n        >\r\n          {{ column.name }}\r\n        </th>\r\n        <th\r\n          *ngIf=\"column.display && column.filterable\"\r\n          [nzColumnKey]=\"column.meaning\"\r\n          [nzSortOrder]=\"column.sortOrder\"\r\n          [nzSortFn]=\"column.sortFn\"\r\n          [nzSortDirections]=\"column.sortDirections\"\r\n          [nzFilterMultiple]=\"column.filterMultiple\"\r\n          [nzFilters]=\"column.listOfFilter\"\r\n          [nzFilterFn]=\"column.filterFn\"\r\n          (nzFilterChange)=\"onColumnFilterChange(column.meaning, $event)\"\r\n          [style.width.px]=\"column.width\"\r\n          appResizableColumn\r\n          [columnKey]=\"column.meaning\"\r\n          [minWidth]=\"100\"\r\n          [maxWidth]=\"500\"\r\n          (columnResize)=\"onColumnResize($event)\"\r\n        >\r\n          {{ column.name }}\r\n        </th>\r\n      </ng-container>\r\n      <th \r\n        appResizableColumn \r\n        columnKey=\"workflow\" \r\n        [minWidth]=\"150\" \r\n        [maxWidth]=\"300\" \r\n        [style.width.px]=\"getFixedColumnWidth('workflow')\"\r\n        (columnResize)=\"onColumnResize($event)\">\r\n        Workflow\r\n      </th>\r\n      <th \r\n        appResizableColumn \r\n        columnKey=\"actions\" \r\n        [minWidth]=\"120\" \r\n        [maxWidth]=\"200\" \r\n        [style.width.px]=\"getFixedColumnWidth('actions')\"\r\n        (columnResize)=\"onColumnResize($event)\">\r\n        Actions\r\n      </th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <!-- Apply row highlighting based on compass configuration rules -->\r\n    <!-- The getRowHighlightClasses method returns CSS classes based on itemHighlight configuration -->\r\n    <!-- Example: worklistitem-row-highlight-yellow for Outside Location scheduling -->\r\n    <tr *ngFor=\"let item of worklistTable.data\" \r\n        [class.loading]=\"isItemLoading()(item.compass_worklist_id)\"\r\n        [class]=\"getRowHighlightClasses(item)\">\r\n                <ng-container *ngFor=\"let column of listOfColumns()\">\r\n        <td *ngIf=\"column.display\">\r\n          <ng-container *ngIf=\"column.meaning === 'PATINFO'; else itemInfoCell\">\r\n            <app-patient-info [item]=\"item\"></app-patient-info>\r\n          </ng-container>\r\n          <ng-template #itemInfoCell>\r\n            <ng-container *ngIf=\"column.meaning === 'ITEM'; else codesCell\">\r\n              <app-item-info [item]=\"item\"></app-item-info>\r\n            </ng-container>\r\n            <ng-template #codesCell>\r\n              <ng-container *ngIf=\"column.meaning === 'CODES'; else assignedUserCell\">\r\n                <app-item-codes [item]=\"item\"></app-item-codes>\r\n              </ng-container>\r\n              <ng-template #assignedUserCell>\r\n                <ng-container *ngIf=\"column.meaning === 'ASSIGNEDUSER'; else schedulingLocationCell\">\r\n                  <app-user-assignment [item]=\"item\"></app-user-assignment>\r\n                </ng-container>\r\n                <ng-template #schedulingLocationCell>\r\n                  <ng-container *ngIf=\"column.meaning === 'SCHEDULINGLOCATION'; else defaultCell\">\r\n                    <app-scheduling-location [item]=\"item\"></app-scheduling-location>\r\n                  </ng-container>\r\n                  <ng-template #defaultCell>\r\n                    {{ getCellValue(item, column.name) }}\r\n                  </ng-template>\r\n                </ng-template>\r\n              </ng-template>\r\n            </ng-template>\r\n          </ng-template>\r\n        </td>\r\n      </ng-container>\r\n      <td>\r\n        <!-- Render workflow cell based on workflowType -->\r\n        <ng-container [ngSwitch]=\"item.workflowType\">\r\n          <app-glidian-workflow-cell\r\n            *ngSwitchCase=\"'GLIDIAN'\"\r\n            [worklistItem]=\"item\">\r\n          </app-glidian-workflow-cell>\r\n          <!-- Future workflowTypes can be added here -->\r\n        </ng-container>\r\n      </td>\r\n      <td>\r\n        <nz-space>\r\n          <nz-badge [nzDot]=\"item.commentInd === 1\" *nzSpaceItem>\r\n            <button nz-button nzType=\"default\" (click)=\"onOpenMilestoneDetails(item)\" style=\"cursor: pointer;\">\r\n              <span nz-icon nzType=\"eye\"></span>\r\n            </button>\r\n          </nz-badge>\r\n          <button nz-button nzType=\"default\" (click)=\"refreshWorklistItem(item)\" style=\"cursor: pointer;\" *nzSpaceItem [disabled]=\"isItemLoading()(item.compass_worklist_id)\">\r\n            <span nz-icon nzType=\"reload\" nzTheme=\"outline\" [nzSpin]=\"isItemLoading()(item.compass_worklist_id)\"></span>\r\n          </button>\r\n        </nz-space>\r\n      </td>\r\n    </tr>\r\n  </tbody>\r\n</nz-table>\r\n\r\n<!-- Milestone Details Drawer -->\r\n<app-milestone-details\r\n  [worklistItem]=\"selectedItem()\"\r\n  [visible]=\"drawerVisible()\"\r\n  (visibleChange)=\"onDrawerVisibilityChange($event)\"\r\n  (itemRefreshed)=\"onDrawerItemRefreshed($event)\">\r\n</app-milestone-details>","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-reporting',\r\n  templateUrl: './reporting.component.html',\r\n  styleUrls: ['./reporting.component.scss']\r\n})\r\nexport class ReportingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n    // TODO: Initialize reporting functionality\r\n  }\r\n\r\n}","<nz-card nzTitle=\"Reporting\" [nzBordered]=\"false\">\r\n  <div class=\"reporting-content\">\r\n    <nz-alert \r\n      nzType=\"info\" \r\n      nzMessage=\"Reporting and Analytics\"\r\n      nzDescription=\"This section will contain reports and analytics for the COMPASS system including workflow metrics and performance data.\"\r\n      nzShowIcon>\r\n    </nz-alert>\r\n    \r\n    <div class=\"reporting-placeholder\">\r\n      <nz-empty \r\n        nzNotFoundImage=\"simple\"\r\n        nzNotFoundContent=\"Reporting features will be implemented here\">\r\n      </nz-empty>\r\n    </div>\r\n  </div>\r\n</nz-card>","import { Component, OnInit } from '@angular/core';\r\nimport { RandomUser } from '../../models/random-user.model';\r\nimport { NzTableQueryParams } from 'ng-zorro-antd/table';\r\nimport { RandomUserService } from '../../services/random-user.service';\r\n@Component({\r\n  selector: 'app-test-data',\r\n  templateUrl: './test-data.component.html',\r\n  styleUrls: ['./test-data.component.scss']\r\n})\r\n\r\nexport class TestDataComponent implements OnInit {\r\n  \r\n  constructor(private randomUserService: RandomUserService) {}\r\n  \r\n  total = 1;\r\n  listOfRandomUser: RandomUser[] = [];\r\n  loading = true;\r\n  pageSize = 10;\r\n  pageIndex = 1;\r\n  filterGender = [\r\n    { text: 'male', value: 'male' },\r\n    { text: 'female', value: 'female' }\r\n  ];\r\n\r\n  loadDataFromServer(\r\n    pageIndex: number,\r\n    pageSize: number,\r\n    sortField: string | null,\r\n    sortOrder: string | null,\r\n    filter: Array<{ key: string; value: string[] }>\r\n  ): void {\r\n    this.loading = true;\r\n    this.randomUserService.getUsers(pageIndex, pageSize, sortField, sortOrder, filter).subscribe(data => {\r\n      this.loading = false;\r\n      this.total = 200; // mock the total data here\r\n      this.listOfRandomUser = data.results;\r\n    });\r\n  }\r\n\r\n  onQueryParamsChange(params: NzTableQueryParams): void {\r\n    // Handle table query parameter changes (pagination, sorting, filtering)\r\n    const { pageSize, pageIndex, sort, filter } = params;\r\n    const currentSort = sort.find(item => item.value !== null);\r\n    const sortField = (currentSort && currentSort.key) || null;\r\n    const sortOrder = (currentSort && currentSort.value) || null;\r\n    this.loadDataFromServer(pageIndex, pageSize, sortField, sortOrder, filter);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadDataFromServer(this.pageIndex, this.pageSize, null, null, []);\r\n  }\r\n  \r\n\r\n}\r\n","<nz-table\r\n      nzShowSizeChanger\r\n      [nzData]=\"listOfRandomUser\"\r\n      [nzFrontPagination]=\"true\"\r\n      [nzShowPagination]=\"true\"\r\n      [nzLoading]=\"loading\"\r\n      [nzTotal]=\"total\"\r\n      [nzPageSize]=\"pageSize\"\r\n      [nzPageIndex]=\"pageIndex\"\r\n      [nzBordered]=\"true\"\r\n      [nzSize]=\"'small'\"\r\n      (nzQueryParams)=\"onQueryParamsChange($event)\"\r\n    >\r\n    <thead>\r\n        <tr>\r\n          <th>Picture</th>\r\n          <th nzColumnKey=\"name\" [nzSortFn]=\"true\">Name</th>\r\n          <th nzColumnKey=\"username\" [nzSortFn]=\"true\">Username</th>\r\n          <th nzColumnKey=\"gender\" [nzFilters]=\"filterGender\" [nzFilterFn]=\"true\">Gender</th>\r\n          <th nzColumnKey=\"email\" [nzSortFn]=\"true\">Email</th>\r\n          <th nzColumnKey=\"city\" [nzSortFn]=\"true\">City</th>\r\n          <th nzColumnKey=\"country\" [nzSortFn]=\"true\">Country</th>\r\n          <th nzColumnKey=\"phone\" [nzSortFn]=\"true\">Phone</th>\r\n          <th nzColumnKey=\"dob\" [nzSortFn]=\"true\">DOB</th>\r\n          <th nzColumnKey=\"nat\" [nzSortFn]=\"true\">Nat</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor=\"let data of listOfRandomUser\">\r\n          <td>\r\n            <img [src]=\"data.picture.thumbnail\" alt=\"pic\" width=\"32\" height=\"32\" />\r\n          </td>\r\n          <td>\r\n            <app-test-person-demographics [user]=\"data\"></app-test-person-demographics>\r\n          </td>\r\n          <td>{{ data.login.username }}</td>\r\n          <td>{{ data.gender }}</td>\r\n          <td>{{ data.email }}</td>\r\n          <td>{{ data.location.city }}</td>\r\n          <td>{{ data.location.country }}</td>\r\n          <td>{{ data.phone }}</td>\r\n          <td>{{ data.dob.date | date:'yyyy-MM-dd' }}</td>\r\n          <td>{{ data.nat }}</td>\r\n        </tr>\r\n      </tbody>\r\n    </nz-table>","import { Component, Input, OnInit } from '@angular/core';\r\nimport { RandomUser } from '../../../models/random-user.model';\r\nimport { TestProviderRegistryService } from '../../../services/test-provider-registry.service';\r\n\r\n@Component({\r\n  selector: 'app-test-person-demographics',\r\n  templateUrl: './test-person-demographics.component.html',\r\n  styleUrls: ['./test-person-demographics.component.scss']\r\n})\r\nexport class TestPersonDemographicsComponent implements OnInit {\r\n  /**\r\n   * The RandomUser object to display demographics for.\r\n   */\r\n  @Input() user!: RandomUser;\r\n  resultCount: number | null = null;\r\n\r\n  constructor(private providerRegistry: TestProviderRegistryService) {}\r\n\r\n  ngOnInit(): void {\r\n    if (this.user?.location?.city) {\r\n      this.providerRegistry.getResultCountByCity(this.user.location.city)\r\n        .subscribe(count => this.resultCount = count);\r\n    }\r\n  }\r\n} ","<div class=\"person-demographics\">\r\n  <strong>{{ user.name.title }} {{ user.name.first }} {{ user.name.last }}</strong><br>\r\n  <span>{{ user.gender | titlecase }}, Age: {{ user.dob.age }}</span><br>\r\n  <span>{{ user.location.city }}, {{ user.location.country }}</span><br>\r\n  <span *ngIf=\"resultCount !== null\">NPI Registry Providers in City: {{ resultCount }}</span>\r\n</div> ","import { RandomUser } from '../models/random-user.model';\r\n\r\nexport const randomUsers: RandomUser[] = [\r\n  {\r\n    gender: 'female',\r\n    email: 'sophia.wilson@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Sophia',\r\n      last: 'Wilson'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 1234,\r\n        name: 'Main St'\r\n      },\r\n      city: 'Boston',\r\n      state: 'Massachusetts',\r\n      country: 'United States',\r\n      postcode: '02108',\r\n      coordinates: {\r\n        latitude: '42.3601',\r\n        longitude: '-71.0589'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'a1b2c3d4-e5f6-7890',\r\n      username: 'sophiaw',\r\n      password: 'password123',\r\n      salt: 'abc123',\r\n      md5: 'def456',\r\n      sha1: 'ghi789',\r\n      sha256: 'jkl012'\r\n    },\r\n    dob: {\r\n      date: '1990-05-15T08:30:00Z',\r\n      age: 33\r\n    },\r\n    registered: {\r\n      date: '2015-03-20T10:15:00Z',\r\n      age: 8\r\n    },\r\n    phone: '(555) 123-4567',\r\n    cell: '(555) 987-6543',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '123-45-6789'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/1.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/1.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/1.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'james.brown@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'James',\r\n      last: 'Brown'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 5678,\r\n        name: 'Oak Ave'\r\n      },\r\n      city: 'Chicago',\r\n      state: 'Illinois',\r\n      country: 'United States',\r\n      postcode: '60601',\r\n      coordinates: {\r\n        latitude: '41.8781',\r\n        longitude: '-87.6298'\r\n      },\r\n      timezone: {\r\n        offset: '-6:00',\r\n        description: 'Central Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'b2c3d4e5-f6a7-8901',\r\n      username: 'jamesb',\r\n      password: 'password456',\r\n      salt: 'def456',\r\n      md5: 'ghi789',\r\n      sha1: 'jkl012',\r\n      sha256: 'mno345'\r\n    },\r\n    dob: {\r\n      date: '1985-08-22T14:45:00Z',\r\n      age: 38\r\n    },\r\n    registered: {\r\n      date: '2018-06-10T09:20:00Z',\r\n      age: 5\r\n    },\r\n    phone: '(555) 234-5678',\r\n    cell: '(555) 876-5432',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '234-56-7890'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/2.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/2.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/2.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'emma.davis@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Emma',\r\n      last: 'Davis'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 9012,\r\n        name: 'Pine St'\r\n      },\r\n      city: 'San Francisco',\r\n      state: 'California',\r\n      country: 'United States',\r\n      postcode: '94105',\r\n      coordinates: {\r\n        latitude: '37.7749',\r\n        longitude: '-122.4194'\r\n      },\r\n      timezone: {\r\n        offset: '-8:00',\r\n        description: 'Pacific Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'c3d4e5f6-a7b8-9012',\r\n      username: 'emmad',\r\n      password: 'password789',\r\n      salt: 'ghi789',\r\n      md5: 'jkl012',\r\n      sha1: 'mno345',\r\n      sha256: 'pqr678'\r\n    },\r\n    dob: {\r\n      date: '1992-11-30T11:20:00Z',\r\n      age: 31\r\n    },\r\n    registered: {\r\n      date: '2019-09-15T13:45:00Z',\r\n      age: 4\r\n    },\r\n    phone: '(555) 345-6789',\r\n    cell: '(555) 765-4321',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '345-67-8901'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/3.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/3.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/3.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'michael.zhang@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'Michael',\r\n      last: 'Zhang'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 3456,\r\n        name: 'Market St'\r\n      },\r\n      city: 'Seattle',\r\n      state: 'Washington',\r\n      country: 'United States',\r\n      postcode: '98101',\r\n      coordinates: {\r\n        latitude: '47.6062',\r\n        longitude: '-122.3321'\r\n      },\r\n      timezone: {\r\n        offset: '-8:00',\r\n        description: 'Pacific Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'd4e5f6a7-b8c9-0123',\r\n      username: 'michaelz',\r\n      password: 'passwordabc',\r\n      salt: 'jkl012',\r\n      md5: 'mno345',\r\n      sha1: 'pqr678',\r\n      sha256: 'stu901'\r\n    },\r\n    dob: {\r\n      date: '1988-03-12T09:15:00Z',\r\n      age: 35\r\n    },\r\n    registered: {\r\n      date: '2017-11-05T14:30:00Z',\r\n      age: 6\r\n    },\r\n    phone: '(555) 456-7890',\r\n    cell: '(555) 654-3210',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '456-78-9012'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/4.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/4.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/4.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'olivia.patel@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Olivia',\r\n      last: 'Patel'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 7890,\r\n        name: 'Broadway'\r\n      },\r\n      city: 'New York',\r\n      state: 'New York',\r\n      country: 'United States',\r\n      postcode: '10001',\r\n      coordinates: {\r\n        latitude: '40.7128',\r\n        longitude: '-74.0060'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'e5f6a7b8-c9d0-1234',\r\n      username: 'oliviap',\r\n      password: 'passworddef',\r\n      salt: 'mno345',\r\n      md5: 'pqr678',\r\n      sha1: 'stu901',\r\n      sha256: 'vwx234'\r\n    },\r\n    dob: {\r\n      date: '1995-07-25T16:45:00Z',\r\n      age: 28\r\n    },\r\n    registered: {\r\n      date: '2020-02-18T11:20:00Z',\r\n      age: 3\r\n    },\r\n    phone: '(555) 567-8901',\r\n    cell: '(555) 543-2109',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '567-89-0123'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/5.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/5.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/5.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'william.kim@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'William',\r\n      last: 'Kim'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 2345,\r\n        name: 'Michigan Ave'\r\n      },\r\n      city: 'Detroit',\r\n      state: 'Michigan',\r\n      country: 'United States',\r\n      postcode: '48201',\r\n      coordinates: {\r\n        latitude: '42.3314',\r\n        longitude: '-83.0458'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'f6a7b8c9-d0e1-2345',\r\n      username: 'williamk',\r\n      password: 'passwordghi',\r\n      salt: 'pqr678',\r\n      md5: 'stu901',\r\n      sha1: 'vwx234',\r\n      sha256: 'yza567'\r\n    },\r\n    dob: {\r\n      date: '1993-09-18T13:30:00Z',\r\n      age: 30\r\n    },\r\n    registered: {\r\n      date: '2019-05-22T15:45:00Z',\r\n      age: 4\r\n    },\r\n    phone: '(555) 678-9012',\r\n    cell: '(555) 432-1098',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '678-90-1234'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/6.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/6.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/6.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'ava.garcia@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Ava',\r\n      last: 'Garcia'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 4567,\r\n        name: 'Sunset Blvd'\r\n      },\r\n      city: 'Los Angeles',\r\n      state: 'California',\r\n      country: 'United States',\r\n      postcode: '90028',\r\n      coordinates: {\r\n        latitude: '34.0522',\r\n        longitude: '-118.2437'\r\n      },\r\n      timezone: {\r\n        offset: '-8:00',\r\n        description: 'Pacific Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'a7b8c9d0-e1f2-3456',\r\n      username: 'avag',\r\n      password: 'passwordjkl',\r\n      salt: 'stu901',\r\n      md5: 'vwx234',\r\n      sha1: 'yza567',\r\n      sha256: 'bcd890'\r\n    },\r\n    dob: {\r\n      date: '1991-12-05T10:20:00Z',\r\n      age: 32\r\n    },\r\n    registered: {\r\n      date: '2018-08-30T09:15:00Z',\r\n      age: 5\r\n    },\r\n    phone: '(555) 789-0123',\r\n    cell: '(555) 321-0987',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '789-01-2345'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/7.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/7.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/7.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'ethan.nguyen@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'Ethan',\r\n      last: 'Nguyen'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 5678,\r\n        name: 'Peachtree St'\r\n      },\r\n      city: 'Atlanta',\r\n      state: 'Georgia',\r\n      country: 'United States',\r\n      postcode: '30303',\r\n      coordinates: {\r\n        latitude: '33.7490',\r\n        longitude: '-84.3880'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'b8c9d0e1-f2a3-4567',\r\n      username: 'ethann',\r\n      password: 'passwordmno',\r\n      salt: 'vwx234',\r\n      md5: 'yza567',\r\n      sha1: 'bcd890',\r\n      sha256: 'efg123'\r\n    },\r\n    dob: {\r\n      date: '1987-06-20T14:10:00Z',\r\n      age: 36\r\n    },\r\n    registered: {\r\n      date: '2016-12-15T16:30:00Z',\r\n      age: 7\r\n    },\r\n    phone: '(555) 890-1234',\r\n    cell: '(555) 210-9876',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '890-12-3456'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/8.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/8.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/8.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'isabella.singh@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Isabella',\r\n      last: 'Singh'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 6789,\r\n        name: 'Lake Shore Dr'\r\n      },\r\n      city: 'Chicago',\r\n      state: 'Illinois',\r\n      country: 'United States',\r\n      postcode: '60611',\r\n      coordinates: {\r\n        latitude: '41.8781',\r\n        longitude: '-87.6298'\r\n      },\r\n      timezone: {\r\n        offset: '-6:00',\r\n        description: 'Central Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'c9d0e1f2-a3b4-5678',\r\n      username: 'isabellas',\r\n      password: 'passwordpqr',\r\n      salt: 'yza567',\r\n      md5: 'bcd890',\r\n      sha1: 'efg123',\r\n      sha256: 'hij456'\r\n    },\r\n    dob: {\r\n      date: '1994-04-15T11:45:00Z',\r\n      age: 29\r\n    },\r\n    registered: {\r\n      date: '2019-01-10T13:20:00Z',\r\n      age: 4\r\n    },\r\n    phone: '(555) 901-2345',\r\n    cell: '(555) 109-8765',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '901-23-4567'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/9.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/9.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/9.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'noah.lee@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'Noah',\r\n      last: 'Lee'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 8901,\r\n        name: 'Pennsylvania Ave'\r\n      },\r\n      city: 'Washington',\r\n      state: 'District of Columbia',\r\n      country: 'United States',\r\n      postcode: '20001',\r\n      coordinates: {\r\n        latitude: '38.9072',\r\n        longitude: '-77.0369'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'd0e1f2a3-b4c5-6789',\r\n      username: 'noahl',\r\n      password: 'passwordstu',\r\n      salt: 'bcd890',\r\n      md5: 'efg123',\r\n      sha1: 'hij456',\r\n      sha256: 'klm789'\r\n    },\r\n    dob: {\r\n      date: '1989-11-28T15:30:00Z',\r\n      age: 34\r\n    },\r\n    registered: {\r\n      date: '2017-07-25T10:45:00Z',\r\n      age: 6\r\n    },\r\n    phone: '(555) 012-3456',\r\n    cell: '(555) 098-7654',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '012-34-5678'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/10.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/10.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/10.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'mia.anderson@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Mia',\r\n      last: 'Anderson'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 9012,\r\n        name: 'Market St'\r\n      },\r\n      city: 'San Francisco',\r\n      state: 'California',\r\n      country: 'United States',\r\n      postcode: '94105',\r\n      coordinates: {\r\n        latitude: '37.7749',\r\n        longitude: '-122.4194'\r\n      },\r\n      timezone: {\r\n        offset: '-8:00',\r\n        description: 'Pacific Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'e1f2a3b4-c5d6-7890',\r\n      username: 'miaa',\r\n      password: 'passwordvwx',\r\n      salt: 'efg123',\r\n      md5: 'hij456',\r\n      sha1: 'klm789',\r\n      sha256: 'nop012'\r\n    },\r\n    dob: {\r\n      date: '1996-02-14T12:15:00Z',\r\n      age: 27\r\n    },\r\n    registered: {\r\n      date: '2020-09-05T14:30:00Z',\r\n      age: 3\r\n    },\r\n    phone: '(555) 123-4567',\r\n    cell: '(555) 987-6543',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '123-45-6789'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/11.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/11.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/11.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'male',\r\n    email: 'lucas.martinez@example.com',\r\n    name: {\r\n      title: 'Mr',\r\n      first: 'Lucas',\r\n      last: 'Martinez'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 3456,\r\n        name: 'Ocean Dr'\r\n      },\r\n      city: 'Miami',\r\n      state: 'Florida',\r\n      country: 'United States',\r\n      postcode: '33139',\r\n      coordinates: {\r\n        latitude: '25.7617',\r\n        longitude: '-80.1918'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'f2a3b4c5-d6e7-8901',\r\n      username: 'lucasm',\r\n      password: 'passwordyza',\r\n      salt: 'hij456',\r\n      md5: 'klm789',\r\n      sha1: 'nop012',\r\n      sha256: 'qrs345'\r\n    },\r\n    dob: {\r\n      date: '1992-08-03T09:45:00Z',\r\n      age: 31\r\n    },\r\n    registered: {\r\n      date: '2018-04-12T11:20:00Z',\r\n      age: 5\r\n    },\r\n    phone: '(555) 234-5678',\r\n    cell: '(555) 876-5432',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '234-56-7890'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/men/12.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/men/12.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/men/12.jpg'\r\n    },\r\n    nat: 'US'\r\n  },\r\n  {\r\n    gender: 'female',\r\n    email: 'amelia.taylor@example.com',\r\n    name: {\r\n      title: 'Ms',\r\n      first: 'Amelia',\r\n      last: 'Taylor'\r\n    },\r\n    location: {\r\n      street: {\r\n        number: 4567,\r\n        name: 'Beacon St'\r\n      },\r\n      city: 'Boston',\r\n      state: 'Massachusetts',\r\n      country: 'United States',\r\n      postcode: '02108',\r\n      coordinates: {\r\n        latitude: '42.3601',\r\n        longitude: '-71.0589'\r\n      },\r\n      timezone: {\r\n        offset: '-5:00',\r\n        description: 'Eastern Time'\r\n      }\r\n    },\r\n    login: {\r\n      uuid: 'a3b4c5d6-e7f8-9012',\r\n      username: 'ameliat',\r\n      password: 'passwordbcd',\r\n      salt: 'klm789',\r\n      md5: 'nop012',\r\n      sha1: 'qrs345',\r\n      sha256: 'tuv678'\r\n    },\r\n    dob: {\r\n      date: '1993-05-22T16:30:00Z',\r\n      age: 30\r\n    },\r\n    registered: {\r\n      date: '2019-11-18T15:45:00Z',\r\n      age: 4\r\n    },\r\n    phone: '(555) 345-6789',\r\n    cell: '(555) 765-4321',\r\n    id: {\r\n      name: 'SSN',\r\n      value: '345-67-8901'\r\n    },\r\n    picture: {\r\n      large: 'https://randomuser.me/api/portraits/women/13.jpg',\r\n      medium: 'https://randomuser.me/api/portraits/med/women/13.jpg',\r\n      thumbnail: 'https://randomuser.me/api/portraits/thumb/women/13.jpg'\r\n    },\r\n    nat: 'US'\r\n  }\r\n]; ","import { Directive, ElementRef, Input, OnInit, OnDestroy, Output, EventEmitter } from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appResizableColumn]'\r\n})\r\nexport class ResizableColumnDirective implements OnInit, OnDestroy {\r\n  @Input() columnKey!: string;\r\n  @Input() minWidth: number = 100;\r\n  @Input() maxWidth: number = 500;\r\n  @Output() columnResize = new EventEmitter<{ columnKey: string, width: number }>();\r\n\r\n  private resizer!: HTMLElement;\r\n  private startX = 0;\r\n  private startWidth = 0;\r\n  private isResizing = false;\r\n  private rafId: number | null = null;\r\n\r\n  constructor(private el: ElementRef) {}\r\n\r\n  ngOnInit(): void {\r\n    this.createResizer();\r\n    this.addEventListeners();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.removeEventListeners();\r\n    if (this.rafId) {\r\n      cancelAnimationFrame(this.rafId);\r\n    }\r\n    if (this.resizer && this.resizer.parentNode) {\r\n      this.resizer.parentNode.removeChild(this.resizer);\r\n    }\r\n  }\r\n\r\n  private createResizer(): void {\r\n    this.resizer = document.createElement('div');\r\n    this.resizer.className = 'column-resizer';\r\n    this.resizer.style.cssText = `\r\n      position: absolute;\r\n      top: 0;\r\n      right: 0;\r\n      width: 5px;\r\n      height: 100%;\r\n      cursor: col-resize;\r\n      background: transparent;\r\n      z-index: 10;\r\n    `;\r\n\r\n    // Make the parent element position relative\r\n    this.el.nativeElement.style.position = 'relative';\r\n    this.el.nativeElement.appendChild(this.resizer);\r\n  }\r\n\r\n  private addEventListeners(): void {\r\n    this.resizer.addEventListener('mousedown', this.onMouseDown.bind(this));\r\n    document.addEventListener('mousemove', this.onMouseMove.bind(this));\r\n    document.addEventListener('mouseup', this.onMouseUp.bind(this));\r\n  }\r\n\r\n  private removeEventListeners(): void {\r\n    this.resizer.removeEventListener('mousedown', this.onMouseDown.bind(this));\r\n    document.removeEventListener('mousemove', this.onMouseMove.bind(this));\r\n    document.removeEventListener('mouseup', this.onMouseUp.bind(this));\r\n  }\r\n\r\n  private onMouseDown(event: MouseEvent): void {\r\n    event.preventDefault();\r\n    event.stopPropagation();\r\n    \r\n    this.isResizing = true;\r\n    this.startX = event.clientX;\r\n    this.startWidth = this.el.nativeElement.offsetWidth;\r\n    \r\n    document.body.style.cursor = 'col-resize';\r\n    document.body.style.userSelect = 'none';\r\n  }\r\n\r\n  private onMouseMove(event: MouseEvent): void {\r\n    if (!this.isResizing) return;\r\n\r\n    // Cancel previous frame if still pending\r\n    if (this.rafId) {\r\n      cancelAnimationFrame(this.rafId);\r\n    }\r\n\r\n    // Use requestAnimationFrame for smoother performance\r\n    this.rafId = requestAnimationFrame(() => {\r\n      const diff = event.clientX - this.startX;\r\n      const newWidth = Math.max(this.minWidth, Math.min(this.maxWidth, this.startWidth + diff));\r\n      \r\n      this.el.nativeElement.style.width = `${newWidth}px`;\r\n      this.rafId = null;\r\n    });\r\n  }\r\n\r\n  private onMouseUp(event: MouseEvent): void {\r\n    if (!this.isResizing) return;\r\n\r\n    this.isResizing = false;\r\n    document.body.style.cursor = '';\r\n    document.body.style.userSelect = '';\r\n\r\n    const finalWidth = this.el.nativeElement.offsetWidth;\r\n    this.columnResize.emit({ columnKey: this.columnKey, width: finalWidth });\r\n  }\r\n}","import { Component } from '@angular/core';\r\nimport { environment } from '../../../environments/environment';\r\n\r\n\r\n@Component({\r\n  selector: 'app-component-version',\r\n  templateUrl: './component-version.component.html',\r\n  styleUrls: ['./component-version.component.scss']\r\n})\r\nexport class ComponentVersionComponent {\r\n\r\n  /**\r\n   * The current application version string, including branch (e.g., v0.0.87-develop)\r\n   * This is generated at build time by scripts/build-version.js\r\n   */\r\n  currentApplicationVersion = environment.appVersion;\r\n\r\n}\r\n","<!-- Displays the build version, including branch (e.g., v0.0.87-develop) -->\r\n{{currentApplicationVersion}}","import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-footer-content',\r\n  templateUrl: './footer-content.component.html',\r\n  styleUrls: ['./footer-content.component.scss']\r\n})\r\nexport class FooterContentComponent {\r\n\r\n}\r\n","<div class=\"footer-content\">\r\n  <div class=\"footer-left\">\r\n    <app-component-version></app-component-version>\r\n  </div>\r\n  <div class=\"footer-right\">\r\n    <app-performance-stats></app-performance-stats>\r\n  </div>\r\n</div>","import { Component, Input, Output, EventEmitter, OnChanges, SimpleChanges } from '@angular/core';\r\nimport { PerformanceMetrics } from '../../../services/timer.service';\r\n\r\n@Component({\r\n  selector: 'app-performance-details-modal',\r\n  templateUrl: './performance-details-modal.component.html',\r\n  styleUrls: ['./performance-details-modal.component.scss']\r\n})\r\nexport class PerformanceDetailsModalComponent implements OnChanges {\r\n  @Input() visible = false;\r\n  @Output() visibleChange = new EventEmitter<boolean>();\r\n  @Input() performanceData: PerformanceMetrics = {\r\n    backendTimeSeconds: 0,\r\n    totalBackendCallMs: 0,\r\n    serverProcessingTimeSeconds: 0,\r\n    frontendTimeMs: 0,\r\n    lastUpdated: new Date()\r\n  };\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    // Handle any changes to inputs if needed\r\n  }\r\n\r\n  /**\r\n   * Format time in milliseconds to a readable string\r\n   * @param milliseconds Time in milliseconds\r\n   * @returns Formatted time string\r\n   */\r\n  formatTime(milliseconds: number): string {\r\n    if (milliseconds < 1000) {\r\n      return `${milliseconds.toFixed(0)}ms`;\r\n    } else {\r\n      const seconds = milliseconds / 1000;\r\n      return `${seconds.toFixed(2)}s`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format time in seconds to a readable string\r\n   * @param seconds Time in seconds\r\n   * @returns Formatted time string\r\n   */\r\n  formatSeconds(seconds: number): string {\r\n    if (seconds < 1) {\r\n      return `${Math.round(seconds * 1000)}ms`;\r\n    } else {\r\n      return `${seconds.toFixed(2)}s`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Calculate network/transport delay\r\n   * @returns Network delay in milliseconds\r\n   */\r\n  getNetworkDelay(): number {\r\n    const totalMs = this.performanceData.totalBackendCallMs;\r\n    const serverMs = this.performanceData.serverProcessingTimeSeconds * 1000;\r\n    return Math.max(0, totalMs - serverMs);\r\n  }\r\n\r\n  /**\r\n   * Get performance status based on total time\r\n   * @returns Performance status string\r\n   */\r\n  getPerformanceStatus(): string {\r\n    const totalSeconds = this.performanceData.totalBackendCallMs / 1000;\r\n    if (totalSeconds < 2) {\r\n      return 'Excellent';\r\n    } else if (totalSeconds < 5) {\r\n      return 'Good';\r\n    } else if (totalSeconds < 10) {\r\n      return 'Fair';\r\n    } else {\r\n      return 'Poor';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get performance status color\r\n   * @returns CSS color class\r\n   */\r\n  getPerformanceStatusColor(): string {\r\n    const totalSeconds = this.performanceData.totalBackendCallMs / 1000;\r\n    if (totalSeconds < 2) {\r\n      return 'status-excellent';\r\n    } else if (totalSeconds < 5) {\r\n      return 'status-good';\r\n    } else if (totalSeconds < 10) {\r\n      return 'status-fair';\r\n    } else {\r\n      return 'status-poor';\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get backend percentage of total time\r\n   * @returns Percentage as number\r\n   */\r\n  getBackendPercentage(): number {\r\n    const total = this.performanceData.totalBackendCallMs + this.performanceData.frontendTimeMs;\r\n    return total > 0 ? (this.performanceData.totalBackendCallMs / total) * 100 : 0;\r\n  }\r\n\r\n  /**\r\n   * Get frontend percentage of total time\r\n   * @returns Percentage as number\r\n   */\r\n  getFrontendPercentage(): number {\r\n    const total = this.performanceData.totalBackendCallMs + this.performanceData.frontendTimeMs;\r\n    return total > 0 ? (this.performanceData.frontendTimeMs / total) * 100 : 0;\r\n  }\r\n\r\n  /**\r\n   * Calculate backend efficiency (server processing vs total time)\r\n   * @returns Efficiency percentage\r\n   */\r\n  getBackendEfficiency(): string {\r\n    if (this.performanceData.totalBackendCallMs === 0) {\r\n      return '0';\r\n    }\r\n    const serverMs = this.performanceData.serverProcessingTimeSeconds * 1000;\r\n    const efficiency = (serverMs / this.performanceData.totalBackendCallMs) * 100;\r\n    return efficiency.toFixed(1);\r\n  }\r\n\r\n  /**\r\n   * Close the modal and emit the change\r\n   */\r\n  closeModal(): void {\r\n    this.visible = false;\r\n    this.visibleChange.emit(false);\r\n  }\r\n}\r\n","<nz-modal\r\n  [(nzVisible)]=\"visible\"\r\n  nzTitle=\"Performance Details\"\r\n  [nzWidth]=\"600\"\r\n  [nzFooter]=\"null\"\r\n  (nzOnCancel)=\"closeModal()\"\r\n  (nzOnOk)=\"closeModal()\">\r\n  \r\n  <ng-container *nzModalContent>\r\n    <div class=\"performance-details\">\r\n      <div class=\"performance-summary\">\r\n        <h3>Performance Summary</h3>\r\n        <div class=\"status-indicator\">\r\n          <span class=\"status-label\">Status:</span>\r\n          <span [class]=\"getPerformanceStatusColor()\">{{ getPerformanceStatus() }}</span>\r\n        </div>\r\n        <div class=\"total-time\">\r\n          <strong>Total Load Time: {{ formatTime(performanceData.totalBackendCallMs + performanceData.frontendTimeMs) }}</strong>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"performance-breakdown\">\r\n        <h4>Backend Performance</h4>\r\n        <div class=\"metric-row\">\r\n          <span class=\"metric-label\">Total Backend Call:</span>\r\n          <span class=\"metric-value\">{{ formatTime(performanceData.totalBackendCallMs) }}</span>\r\n        </div>\r\n        <div class=\"metric-row\">\r\n          <span class=\"metric-label\">Server Processing:</span>\r\n          <span class=\"metric-value\">{{ formatSeconds(performanceData.serverProcessingTimeSeconds) }}</span>\r\n        </div>\r\n        <div class=\"metric-row\">\r\n          <span class=\"metric-label\">Network/Transport:</span>\r\n          <span class=\"metric-value\">{{ formatTime(getNetworkDelay()) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"performance-breakdown\">\r\n        <h4>Frontend Performance</h4>\r\n        <div class=\"metric-row\">\r\n          <span class=\"metric-label\">Data Processing:</span>\r\n          <span class=\"metric-value\">{{ formatTime(performanceData.frontendTimeMs) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"performance-breakdown\">\r\n        <h4>Timing Breakdown</h4>\r\n        <div class=\"timing-chart\">\r\n          <div class=\"timing-bar\">\r\n            <div class=\"timing-segment backend\" [style.width.%]=\"getBackendPercentage()\">\r\n              <span class=\"segment-label\">Backend: {{ formatTime(performanceData.totalBackendCallMs) }}</span>\r\n            </div>\r\n            <div class=\"timing-segment frontend\" [style.width.%]=\"getFrontendPercentage()\">\r\n              <span class=\"segment-label\">Frontend: {{ formatTime(performanceData.frontendTimeMs) }}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"performance-breakdown\">\r\n        <h4>Technical Details</h4>\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\">Last Updated:</span>\r\n          <span class=\"detail-value\">{{ performanceData.lastUpdated | date:'medium' }}</span>\r\n        </div>\r\n        <div class=\"detail-row\">\r\n          <span class=\"detail-label\">Backend Efficiency:</span>\r\n          <span class=\"detail-value\">{{ getBackendEfficiency() }}%</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n</nz-modal>\r\n","import { Component, OnInit, OnDestroy, effect, EffectRef } from '@angular/core';\r\nimport { TimerService, PerformanceMetrics } from '../../services/timer.service';\r\n\r\n/**\r\n * @class PerformanceStatsComponent\r\n * @description Simple one-line component that displays performance statistics in the footer.\r\n * This component shows backend and frontend timing information in a compact format.\r\n */\r\n@Component({\r\n  selector: 'app-performance-stats',\r\n  templateUrl: './performance-stats.component.html',\r\n  styleUrls: ['./performance-stats.component.scss']\r\n})\r\nexport class PerformanceStatsComponent implements OnInit, OnDestroy {\r\n\r\n  /**\r\n   * Current performance metrics from timer service\r\n   */\r\n  public performanceData: PerformanceMetrics = {\r\n    backendTimeSeconds: 0,\r\n    totalBackendCallMs: 0,\r\n    serverProcessingTimeSeconds: 0,\r\n    frontendTimeMs: 0,\r\n    lastUpdated: new Date()\r\n  };\r\n\r\n  public showDetailsModal = false;\r\n\r\n  /**\r\n   * Effect reference for performance metrics updates\r\n   */\r\n  private metricsEffect?: EffectRef;\r\n\r\n  constructor(private timerService: TimerService) {\r\n    // Set up effect to track performance metrics changes within injection context\r\n    this.metricsEffect = effect(() => {\r\n      const newData = this.timerService.performanceMetrics();\r\n      this.performanceData = newData;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Initialize the component\r\n   */\r\n  ngOnInit(): void {\r\n    // Initialize with current metrics\r\n    this.performanceData = this.timerService.performanceMetrics();\r\n  }\r\n\r\n  /**\r\n   * Clean up effects when component is destroyed\r\n   */\r\n  ngOnDestroy(): void {\r\n    if (this.metricsEffect) {\r\n      this.metricsEffect.destroy();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Format backend time for display\r\n   * @param seconds Time in seconds\r\n   * @returns Formatted time string\r\n   */\r\n      public formatBackendTime(seconds: number): string {\r\n        if (seconds < 1) {\r\n          return `${Math.round(seconds * 1000)}ms`;\r\n        } else {\r\n          return `${seconds.toFixed(2)}s`;\r\n        }\r\n      }\r\n\r\n      public formatTotalBackendTime(milliseconds: number): string {\r\n        const seconds = milliseconds / 1000;\r\n        if (seconds < 1) {\r\n          return `${milliseconds.toFixed(0)}ms`;\r\n        } else {\r\n          return `${seconds.toFixed(2)}s`;\r\n        }\r\n      }\r\n\r\n  /**\r\n   * Format frontend time for display\r\n   * @param milliseconds Time in milliseconds\r\n   * @returns Formatted time string in seconds\r\n   */\r\n  public formatFrontendTime(milliseconds: number): string {\r\n    const seconds = milliseconds / 1000;\r\n    if (seconds < 1) {\r\n      return `${seconds.toFixed(3)}s`;\r\n    } else {\r\n      return `${seconds.toFixed(2)}s`;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open the performance details modal\r\n   */\r\n  public openPerformanceDetails(): void {\r\n    this.showDetailsModal = true;\r\n  }\r\n\r\n}\r\n","<div class=\"performance-stats\">\r\n  <span class=\"stats-label\">Performance:</span>\r\n  <span class=\"stats-backend\">Backend: {{ formatTotalBackendTime(performanceData.totalBackendCallMs) }}</span>\r\n  <span class=\"stats-separator\">|</span>\r\n  <span class=\"stats-frontend\">Frontend: {{ formatFrontendTime(performanceData.frontendTimeMs) }}</span>\r\n  <button \r\n    nz-button \r\n    nzType=\"text\" \r\n    nzSize=\"small\" \r\n    class=\"details-button\"\r\n    (click)=\"openPerformanceDetails()\"\r\n    nzTooltipTitle=\"View Performance Details\">\r\n    <span nz-icon nzType=\"info-circle\" nzTheme=\"outline\"></span>\r\n  </button>\r\n</div>\r\n\r\n<app-performance-details-modal\r\n  [(visible)]=\"showDetailsModal\"\r\n  [performanceData]=\"performanceData\">\r\n</app-performance-details-modal>\r\n","import { Component, OnInit, effect } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { NzModalService } from 'ng-zorro-antd/modal';\r\nimport { UserPreferencesService } from '../services/user-preferences.service';\r\nimport { FeedbackFormComponent, FeedbackData } from '../compass-content/feedback-form/feedback-form.component';\r\nimport { NotificationModalComponent } from './notification-modal/notification-modal.component';\r\n\r\n/**\r\n * HeaderContentComponent - Application Navigation and Branding Header\r\n * \r\n * This component provides the main navigation interface for the COMPASS application,\r\n * featuring tabbed navigation between functional areas, branding elements, and\r\n * integrated feedback collection. It dynamically adapts based on user permissions\r\n * and available features.\r\n * \r\n * COMPONENT ARCHITECTURE:\r\n * - Uses Angular Signals for reactive tab state management\r\n * - Integrates with NG-Zorro tabset for consistent navigation UI\r\n * - Implements effect() for automatic tab synchronization with routing\r\n * - Provides modal-based feedback collection system\r\n * \r\n * NAVIGATION FEATURES:\r\n * - Dynamic tab rendering based on user preferences and permissions\r\n * - Automatic tab selection synchronization with Angular routing\r\n * - Visual active state indicators for current page context\r\n * - Responsive tab layout for various screen sizes\r\n * \r\n * SIGNAL-BASED TAB MANAGEMENT:\r\n * - Reactive tab configuration via UserPreferencesService signals\r\n * - Automatic selectedIndex updates when route changes\r\n * - Computed tab availability based on user permissions\r\n * - Efficient re-rendering only when tab state actually changes\r\n * \r\n * FEEDBACK INTEGRATION:\r\n * - Prominent feedback button for user input collection\r\n * - Context-aware feedback submission with current tab information\r\n * - Modal-based feedback form with structured data collection\r\n * - Integration with FeedbackService for data persistence\r\n * \r\n * USER EXPERIENCE:\r\n * - Familiar tab-based navigation paradigm\r\n * - Clear visual hierarchy with COMPASS branding\r\n * - Accessible design with keyboard navigation support\r\n * - Consistent with Cerner MPage interface conventions\r\n * \r\n * DYNAMIC CONFIGURATION:\r\n * - Tab visibility controlled by user preferences\r\n * - Support for disabled states based on feature availability\r\n * - Force rendering options for performance optimization\r\n * - Router integration for deep linking and browser navigation\r\n * \r\n * PERMISSION HANDLING:\r\n * - Renders only tabs available to current user\r\n * - Graceful handling of permission changes during session\r\n * - Default routing to available tabs when restricted tabs are accessed\r\n * - Clear visual indicators for restricted functionality\r\n */\r\n@Component({\r\n  selector: 'app-header-content',\r\n  templateUrl: './header-content.component.html',\r\n  styleUrls: ['./header-content.component.scss']\r\n})\r\nexport class HeaderContentComponent implements OnInit {\r\n  selectedIndex = 0;\r\n\r\n  // Use field initializer for effect - this runs in injection context\r\n  private tabChangeEffect = effect(() => {\r\n    // Compute selected index based on VISIBLE tabs only to keep indices aligned\r\n    const visibleTabs = this.getVisibleTabs();\r\n    const currentRoute = this.router.url;\r\n    const index = visibleTabs.findIndex(tab => tab.routerLink === currentRoute);\r\n    if (index !== -1) {\r\n      this.selectedIndex = index;\r\n    } else if (visibleTabs.length > 0) {\r\n      this.selectedIndex = 0;\r\n    }\r\n  });\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private modalService: NzModalService,\r\n    public userPreferences: UserPreferencesService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    // Initial check for selected tab\r\n    const visibleTabs = this.getVisibleTabs();\r\n    const currentRoute = this.router.url;\r\n    const index = visibleTabs.findIndex(tab => tab.routerLink === currentRoute);\r\n    if (index !== -1) {\r\n      this.selectedIndex = index;\r\n    } else if (visibleTabs.length > 0) {\r\n      this.selectedIndex = 0;\r\n    }\r\n  }\r\n\r\n  onTabChange(index: number): void {\r\n    // Navigate using the visible tabs list so index aligns with the rendered tabs\r\n    const visibleTabs = this.getVisibleTabs();\r\n    if (visibleTabs[index]) {\r\n      this.router.navigate([visibleTabs[index].routerLink]);\r\n    }\r\n  }\r\n\r\n  // Helper: only tabs that are actually rendered (not hidden)\r\n  private getVisibleTabs() {\r\n    return this.userPreferences.availableTabs().filter(tab => !tab.hidden);\r\n  }\r\n\r\n  /**\r\n   * Open feedback modal for general feedback\r\n   */\r\n  openFeedbackModal(): void {\r\n    // Get current tab information\r\n    const tabs = this.userPreferences.getTabs();\r\n    const currentTab = tabs.find(tab => tab.routerLink === this.router.url);\r\n    \r\n    const modalRef = this.modalService.create({\r\n      nzTitle: 'Submit General Feedback',\r\n      nzContent: FeedbackFormComponent,\r\n      nzWidth: 500,\r\n      nzData: {\r\n        itemReference: currentTab?.title || 'Unknown Tab',\r\n        itemType: 'General Feedback',\r\n        itemMeaning: 'GENERAL_FEEDBACK',\r\n        itemId: this.router.url,\r\n        item: null // No specific item for general feedback\r\n      },\r\n      nzFooter: null,\r\n      nzClosable: true,\r\n      nzMaskClosable: false\r\n    });\r\n\r\n    // Handle feedback submission\r\n    modalRef.afterClose.subscribe((result: FeedbackData | undefined) => {\r\n      if (result) {\r\n        // Feedback has been successfully submitted to the messaging service\r\n        // TODO: Show success message to user\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Open notification modal\r\n   */\r\n  openNotificationModal(): void {\r\n    this.modalService.create({\r\n      nzTitle: 'Notifications',\r\n      nzContent: NotificationModalComponent,\r\n      nzWidth: 600,\r\n      nzFooter: null,\r\n      nzClosable: true,\r\n      nzMaskClosable: false\r\n    });\r\n  }\r\n}\r\n","<div nz-row id=\"compass-header-content\">\r\n    <div nz-col nzFlex=\"100px\"><img width=\"200px\" src=\"assets/compass_logo_horizontal.png\" alt=\"COMPASS\" /></div>\r\n    <div nz-col nzFlex=\"auto\">\r\n        <nz-tabset nzType=\"card\" [nzSelectedIndex]=\"selectedIndex\" (nzSelectedIndexChange)=\"onTabChange($event)\">\r\n            <ng-container *ngFor=\"let tab of userPreferences.availableTabs()\">\r\n                <nz-tab *ngIf=\"!tab.hidden\"\r\n                    [nzTitle]=\"tab.title\"\r\n                    [routerLink]=\"[tab.routerLink]\"\r\n                    routerLinkActive=\"ant-tabs-tab-active\"\r\n                    [nzForceRender]=\"tab.forceRender\"\r\n                    [nzDisabled]=\"tab.disabled\">\r\n                </nz-tab>\r\n            </ng-container>\r\n        </nz-tabset>\r\n    </div>\r\n    <div nz-col nzSpan=\"3\" class=\"header-actions-container\">\r\n        <app-notification-bell \r\n            (bellClick)=\"openNotificationModal()\"\r\n            class=\"notification-bell-container\">\r\n        </app-notification-bell>\r\n        <button \r\n            nz-button \r\n            nzType=\"primary\" \r\n            nzSize=\"small\"\r\n            (click)=\"openFeedbackModal()\"\r\n            class=\"feedback-button\">\r\n            <span nz-icon nzType=\"message\" nzTheme=\"outline\"></span>\r\n            Feedback\r\n        </button>\r\n    </div>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Output, EventEmitter } from '@angular/core';\r\nimport { NotificationsService } from '../../services/notifications.service';\r\n\r\n/**\r\n * NotificationBellComponent - Simple notification indicator\r\n * \r\n * Displays a bell icon with a red dot indicator when notifications are present.\r\n * Emits click event for parent component to handle modal display.\r\n */\r\n@Component({\r\n  selector: 'app-notification-bell',\r\n  templateUrl: './notification-bell.component.html',\r\n  styleUrls: ['./notification-bell.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class NotificationBellComponent {\r\n  \r\n  @Output() bellClick = new EventEmitter<void>();\r\n  \r\n  constructor(public notificationsService: NotificationsService) {}\r\n  \r\n  onBellClick(): void {\r\n    this.bellClick.emit();\r\n  }\r\n}","<button \r\n  nz-button \r\n  nzType=\"text\"\r\n  nzSize=\"large\"\r\n  (click)=\"onBellClick()\"\r\n  class=\"notification-bell-button\"\r\n  title=\"Notifications\">\r\n  <span class=\"bell-icon-wrapper\">\r\n    <span nz-icon nzType=\"bell\" nzTheme=\"outline\"></span>\r\n    <span class=\"notification-dot\" *ngIf=\"notificationsService.hasNotifications()\"></span>\r\n  </span>\r\n</button>","import { Component, ChangeDetectionStrategy } from '@angular/core';\r\nimport { NzModalRef } from 'ng-zorro-antd/modal';\r\nimport { NotificationsService } from '../../services/notifications.service';\r\n\r\n/**\r\n * NotificationModalComponent - Simple notification display modal\r\n * \r\n * Basic modal component to display notifications.\r\n * Will be enhanced with actual notification data later.\r\n */\r\n@Component({\r\n  selector: 'app-notification-modal',\r\n  templateUrl: './notification-modal.component.html',\r\n  styleUrls: ['./notification-modal.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class NotificationModalComponent {\r\n  \r\n  constructor(\r\n    private modalRef: NzModalRef,\r\n    public notificationsService: NotificationsService\r\n  ) {}\r\n  \r\n  close(): void {\r\n    this.modalRef.close();\r\n  }\r\n}","<div class=\"notification-modal\">\r\n  <h2>Notifications</h2>\r\n  \r\n  <div class=\"notification-content\">\r\n    <p>Notifications will be displayed here.</p>\r\n  </div>\r\n  \r\n  <div class=\"modal-footer\">\r\n    <button nz-button nzType=\"primary\" (click)=\"close()\">Close</button>\r\n  </div>\r\n</div>","import { ColumnItem } from './column-item.model';\r\nimport { CustomWorklist } from './custom-worklist.model';\r\n\r\nexport interface UserPreferences {\r\n  /**\r\n   * Columns are stored as a map of route to ColumnItem[]\r\n   * e.g., { 'prior-auth': [...], 'future': [...] }\r\n   */\r\n  columns: { [route: string]: ColumnItem[] };\r\n  // Future preference fields can be added here\r\n  filters?: {\r\n    [key: string]: any;\r\n  };\r\n  displaySettings?: {\r\n    [key: string]: any;\r\n  };\r\n  /**\r\n   * Performance and loading preferences\r\n   */\r\n  performanceSettings?: {\r\n    /**\r\n     * When true, skips individual item detail loading on initial worklist load\r\n     * This improves performance for large worklists by showing basic data only\r\n     */\r\n    batchMode?: boolean;\r\n    /**\r\n     * When true, uses new custom worklist filtering with backend filtering\r\n     * When false, uses old predefined filter bar with frontend filtering\r\n     * Default: true (new version)\r\n     */\r\n    useNewVersion?: boolean;\r\n  };\r\n  /**\r\n   * User-created custom worklists\r\n   * Stored as JSON array in user preferences\r\n   */\r\n  customWorklists?: CustomWorklist[];\r\n}\r\n\r\nexport interface UserData {\r\n  userId: number;\r\n  fullName: string;\r\n  username: string;\r\n  position?: string;\r\n  curdomain?: string;\r\n  curnode?: string;\r\n  preferences: UserPreferences;\r\n  performanceSettings?: {\r\n    batchMode?: number;\r\n  };\r\n  runDtTm: Date;\r\n}\r\n\r\n// Default user preferences\r\nexport const DEFAULT_USER_PREFERENCES: UserPreferences = {\r\n  columns: {}, // Columns will be populated from ColumnConfigService per route\r\n  filters: {},\r\n  displaySettings: {},\r\n  performanceSettings: {\r\n    batchMode: false, // Default to detailed loading for better user experience\r\n    useNewVersion: true // Default to new custom worklist filtering\r\n  }\r\n}; ","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { shareReplay, tap } from 'rxjs/operators';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\n\r\n/**\r\n * AdminService\r\n * Handles admin-related backend operations, such as fetching and saving Compass Configuration JSON\r\n * and managing Corepoint Glidian credentials.\r\n *\r\n * CACHING STRATEGY:\r\n * Configuration data (getCompassConfiguration, getUserAssignOptions, getCompassOutsideLocations)\r\n * is cached using shareReplay to prevent repeated backend calls. These calls are expensive and\r\n * the data rarely changes during a session.\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AdminService {\r\n  // Cache for configuration data to prevent repeated backend calls\r\n  private compassConfigCache$: Observable<any> | null = null;\r\n  private userAssignOptionsCache$: Observable<any> | null = null;\r\n  private outsideLocationsCache$: Observable<any> | null = null;\r\n\r\n  constructor(private customService: CustomService) {}\r\n\r\n  /**\r\n   * Fetches the current Compass Configuration JSON from the backend.\r\n   * Uses the cov_compass_service with requestType 'getCompassConfiguration'.\r\n   * CACHED: Multiple subscribers will share the same backend call result.\r\n   * @returns Observable<any> - Emits the configuration JSON object.\r\n   */\r\n  getCompassConfiguration(): Observable<any> {\r\n    if (!this.compassConfigCache$) {\r\n      this.compassConfigCache$ = new Observable<any>(observer => {\r\n        this.customService.load(\r\n          {\r\n            customScript: {\r\n              script: [\r\n                {\r\n                  name: 'cov_compass_service',\r\n                  run: 'pre',\r\n                  id: 'getCompassConfiguration',\r\n                  parameters: { requestType: 'getCompassConfiguration' }\r\n                }\r\n              ],\r\n              clearPatientSource: true\r\n            }\r\n          },\r\n          [{ personId: 0, encntrId: 0 }],\r\n          () => {\r\n            const raw = this.customService.get('getCompassConfiguration');\r\n            if (raw) {\r\n              observer.next(raw);\r\n            } else {\r\n              observer.error('No configuration data returned.');\r\n            }\r\n            observer.complete();\r\n          }\r\n        );\r\n      }).pipe(\r\n        shareReplay(1) // Cache the result and share it with all subscribers\r\n      );\r\n    }\r\n    return this.compassConfigCache$;\r\n  }\r\n\r\n  /**\r\n   * Fetches external locations for scheduling from the backend.\r\n   * Uses the cov_compass_service with requestType 'getCompassOutsideLocations'.\r\n   * CACHED: Multiple subscribers will share the same backend call result.\r\n   * @returns Observable<any> - Emits the external locations JSON object.\r\n   */\r\n  getCompassOutsideLocations(): Observable<any> {\r\n    if (!this.outsideLocationsCache$) {\r\n      this.outsideLocationsCache$ = new Observable<any>(observer => {\r\n        this.customService.load(\r\n          {\r\n            customScript: {\r\n              script: [\r\n                {\r\n                  name: 'cov_compass_service',\r\n                  run: 'pre',\r\n                  id: 'getCompassOutsideLocations',\r\n                  parameters: { requestType: 'getCompassOutsideLocations' }\r\n                }\r\n              ],\r\n              clearPatientSource: true\r\n            }\r\n          },\r\n          [{ personId: 0, encntrId: 0 }],\r\n          () => {\r\n            const raw = this.customService.get('getCompassOutsideLocations');\r\n            if (raw) {\r\n              observer.next(raw);\r\n            } else {\r\n              observer.error('No external locations data returned.');\r\n            }\r\n            observer.complete();\r\n          }\r\n        );\r\n      }).pipe(\r\n        shareReplay(1) // Cache the result and share it with all subscribers\r\n      );\r\n    }\r\n    return this.outsideLocationsCache$;\r\n  }\r\n\r\n\r\n  /**\r\n   * Saves the updated Compass Configuration JSON to the backend.\r\n   * Uses the cov_compass_service with requestType 'saveCompassConfiguration'.\r\n   * @param configJson - The configuration JSON object to save\r\n   * @returns Observable<any> - Emits success response or throws error\r\n   */\r\n  saveCompassConfiguration(configJson: any): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'saveCompassConfiguration',\r\n                parameters: {\r\n                  requestType: 'saveCompassConfiguration',\r\n                  requestData: JSON.stringify(configJson)\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('saveCompassConfiguration');\r\n            // console.log('Save config response:', raw);\r\n            \r\n            // Check if response has the expected structure\r\n            if (raw && raw.reply && raw.reply.statusData) {\r\n              const status = raw.reply.statusData.status;\r\n              \r\n              if (status === 'S') {\r\n                // Success\r\n                observer.next(raw);\r\n                observer.complete();\r\n              } else if (status === 'F') {\r\n                // Failure - extract error message from subeventstatus if available\r\n                let errorMessage = 'Failed to save Compass Configuration.';\r\n                \r\n                if (raw.reply.statusData.subeventstatus && \r\n                    raw.reply.statusData.subeventstatus.length > 0) {\r\n                  const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                  if (subEvent.operationstatus) {\r\n                    errorMessage = `Save failed: ${subEvent.operationstatus}`;\r\n                  }\r\n                }\r\n                \r\n                observer.error(new Error(errorMessage));\r\n              } else {\r\n                // Unknown status\r\n                observer.error(new Error(`Unknown response status: ${status}`));\r\n              }\r\n            } else {\r\n              // Invalid response structure\r\n              observer.error(new Error('Invalid response format from server'));\r\n            }\r\n          } catch (error) {\r\n            // console.error('Save config error:', error);\r\n            observer.error(new Error('Failed to save Compass Configuration.'));\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves the current Corepoint Glidian credentials from the backend.\r\n   * Uses the cov_compass_service with requestType 'getCorepointGlidianCredentials'.\r\n   * @returns Observable<any> - Emits the credentials object with username and password.\r\n   */\r\n  getCorepointGlidianCredentials(): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'getCorepointGlidianCredentials',\r\n                parameters: { requestType: 'getCorepointGlidianCredentials' }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          const raw = this.customService.get('getCorepointGlidianCredentials');\r\n          if (raw) {\r\n            observer.next(raw);\r\n          } else {\r\n            observer.error('No credentials data returned.');\r\n          }\r\n          observer.complete();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Stores the updated Corepoint Glidian credentials to the backend.\r\n   * Uses the cov_compass_service with requestType 'storeCorepointGlidianCredentials'.\r\n   * @param credentials - The credentials object with username and password\r\n   * @returns Observable<any> - Emits success response or throws error\r\n   */\r\n  storeCorepointGlidianCredentials(credentials_request: { username: string; password: string }): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'storeCorepointGlidianCredentials',\r\n                parameters: {\r\n                  requestType: 'storeCorepointGlidianCredentials',\r\n                  requestData: JSON.stringify({\r\n                    credentials_request\r\n                  })\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('storeCorepointGlidianCredentials');\r\n            // console.log('Store credentials response:', raw);\r\n            \r\n            // Check if response has the expected structure\r\n            if (raw && raw.reply && raw.reply.statusData) {\r\n              const status = raw.reply.statusData.status;\r\n              \r\n              if (status === 'S') {\r\n                // Success\r\n                observer.next(raw);\r\n                observer.complete();\r\n              } else if (status === 'F') {\r\n                // Failure - extract error message from subeventstatus if available\r\n                let errorMessage = 'Failed to store Corepoint Glidian credentials.';\r\n                \r\n                if (raw.reply.statusData.subeventstatus && \r\n                    raw.reply.statusData.subeventstatus.length > 0) {\r\n                  const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                  if (subEvent.operationstatus) {\r\n                    errorMessage = `Store failed: ${subEvent.operationstatus}`;\r\n                  }\r\n                }\r\n                \r\n                observer.error(new Error(errorMessage));\r\n              } else {\r\n                // Unknown status\r\n                observer.error(new Error(`Unknown response status: ${status}`));\r\n              }\r\n            } else {\r\n              // Invalid response structure\r\n              observer.error(new Error('Invalid response format from server'));\r\n            }\r\n          } catch (error) {\r\n            // console.error('Store credentials error:', error);\r\n            observer.error(new Error('Failed to store Corepoint Glidian credentials.'));\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves the current Corepoint Glidian URL from the backend.\r\n   * Uses the cov_compass_service with requestType 'getCorepointGlidianUrl'.\r\n   * @returns Observable<any> - Emits the URL object with url and hasUrl properties.\r\n   */\r\n  getCorepointGlidianUrl(): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'getCorepointGlidianUrl',\r\n                parameters: { requestType: 'getCorepointGlidianUrl' }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          const raw = this.customService.get('getCorepointGlidianUrl');\r\n          if (raw) {\r\n            observer.next(raw);\r\n          } else {\r\n            observer.error('No URL data returned.');\r\n          }\r\n          observer.complete();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Stores the updated Corepoint Glidian URL to the backend.\r\n   * Uses the cov_compass_service with requestType 'storeCorepointGlidianUrl'.\r\n   * @param urlData - The URL object with url property\r\n   * @returns Observable<any> - Emits success response or throws error\r\n   */\r\n  storeCorepointGlidianUrl(url_data: { url: string }): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'storeCorepointGlidianUrl',\r\n                parameters: {\r\n                  requestType: 'storeCorepointGlidianUrl',\r\n                  requestData: JSON.stringify({\r\n                    url_data\r\n                  })\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('storeCorepointGlidianUrl');\r\n            // console.log('Store URL response:', raw);\r\n            \r\n            // Check if response has the expected structure\r\n            if (raw && raw.reply && raw.reply.statusData) {\r\n              const status = raw.reply.statusData.status;\r\n              \r\n              if (status === 'S') {\r\n                // Success\r\n                observer.next(raw);\r\n                observer.complete();\r\n              } else if (status === 'F') {\r\n                // Failure - extract error message from subeventstatus if available\r\n                let errorMessage = 'Failed to store Corepoint Glidian URL.';\r\n                \r\n                if (raw.reply.statusData.subeventstatus && \r\n                    raw.reply.statusData.subeventstatus.length > 0) {\r\n                  const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                  if (subEvent.operationstatus) {\r\n                    errorMessage = `Store failed: ${subEvent.operationstatus}`;\r\n                  }\r\n                }\r\n                \r\n                observer.error(new Error(errorMessage));\r\n              } else {\r\n                // Unknown status\r\n                observer.error(new Error(`Unknown response status: ${status}`));\r\n              }\r\n            } else {\r\n              // Invalid response structure\r\n              observer.error(new Error('Invalid response format from server'));\r\n            }\r\n          } catch (error) {\r\n            // console.error('Store URL error:', error);\r\n            observer.error(new Error('Failed to store Corepoint Glidian URL.'));\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves the current Corepoint Glidian Record URL from the backend.\r\n   * Uses the cov_compass_service with requestType 'getCorepointGlidianRecordUrl'.\r\n   * @returns Observable<any> - Emits the record URL object with url and hasUrl properties.\r\n   */\r\n  getCorepointGlidianRecordUrl(): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'getCorepointGlidianRecordUrl',\r\n                parameters: { requestType: 'getCorepointGlidianRecordUrl' }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          const raw = this.customService.get('getCorepointGlidianRecordUrl');\r\n          if (raw) {\r\n            observer.next(raw);\r\n          } else {\r\n            observer.error('No Record URL data returned.');\r\n          }\r\n          observer.complete();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Stores the updated Corepoint Glidian Record URL to the backend.\r\n   * Uses the cov_compass_service with requestType 'storeCorepointGlidianRecordUrl'.\r\n   * @param urlData - The URL object with url property\r\n   * @returns Observable<any> - Emits success response or throws error\r\n   */\r\n  storeCorepointGlidianRecordUrl(record_url_data: { url: string }): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'storeCorepointGlidianRecordUrl',\r\n                parameters: {\r\n                  requestType: 'storeCorepointGlidianRecordUrl',\r\n                  requestData: JSON.stringify({\r\n                    record_url_data\r\n                  })\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('storeCorepointGlidianRecordUrl');\r\n            // console.log('Store Record URL response:', raw);\r\n            // Check if response has the expected structure\r\n            if (raw && raw.reply && raw.reply.statusData) {\r\n              const status = raw.reply.statusData.status;\r\n              if (status === 'S') {\r\n                // Success\r\n                observer.next(raw);\r\n                observer.complete();\r\n              } else if (status === 'F') {\r\n                // Failure - extract error message from subeventstatus if available\r\n                let errorMessage = 'Failed to store Corepoint Glidian Record URL.';\r\n                if (raw.reply.statusData.subeventstatus && \r\n                    raw.reply.statusData.subeventstatus.length > 0) {\r\n                  const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                  if (subEvent.operationstatus) {\r\n                    errorMessage = `Store failed: ${subEvent.operationstatus}`;\r\n                  }\r\n                }\r\n                observer.error(new Error(errorMessage));\r\n              } else {\r\n                // Unknown status\r\n                observer.error(new Error(`Unknown response status: ${status}`));\r\n              }\r\n            } else {\r\n              // Invalid response structure\r\n              observer.error(new Error('Invalid response format from server'));\r\n            }\r\n          } catch (error) {\r\n            // console.error('Store Record URL error:', error);\r\n            observer.error(new Error('Failed to store Corepoint Glidian Record URL.'));\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves the current user assignments from the backend.\r\n   * Uses the cov_compass_service with requestType 'getUserAssignOptions'.\r\n   * CACHED: Multiple subscribers will share the same backend call result.\r\n   * @returns Observable<any> - Emits the user assignments object.\r\n   */\r\n  getUserAssignOptions(): Observable<any> {\r\n    if (!this.userAssignOptionsCache$) {\r\n      this.userAssignOptionsCache$ = new Observable<any>(observer => {\r\n        this.customService.load(\r\n          {\r\n            customScript: {\r\n              script: [\r\n                {\r\n                  name: 'cov_compass_service',\r\n                  run: 'pre',\r\n                  id: 'getUserAssignOptions',\r\n                  parameters: { requestType: 'getUserAssignOptions' }\r\n                }\r\n              ],\r\n              clearPatientSource: true\r\n            }\r\n          },\r\n          [{ personId: 0, encntrId: 0 }],\r\n          () => {\r\n            const raw = this.customService.get('getUserAssignOptions');\r\n            // console.log('Raw data from customService:', raw);\r\n\r\n            if (raw && typeof raw === 'object' && raw.usersAssignable) {\r\n              const mappedUsersAssignable: { [key: string]: any[] } = {};\r\n              for (const workflow in raw.usersAssignable) {\r\n                if (raw.usersAssignable.hasOwnProperty(workflow)) {\r\n                  mappedUsersAssignable[workflow] = raw.usersAssignable[workflow].map((user: any) => ({\r\n                    username: user.username,\r\n                    fullName: user.fullname, // Map fullname to fullName\r\n                    personId: parseFloat(user.personid) // Map personid to personId and convert to number\r\n                  }));\r\n                }\r\n              }\r\n              observer.next({ ...raw, usersAssignable: mappedUsersAssignable });\r\n            } else {\r\n              // console.log('Raw data is not in the expected format or is empty');\r\n              observer.next({});\r\n            }\r\n            observer.complete();\r\n          }\r\n        );\r\n      }).pipe(\r\n        shareReplay(1) // Cache the result and share it with all subscribers\r\n      );\r\n    }\r\n    return this.userAssignOptionsCache$;\r\n  }\r\n\r\n  /**\r\n   * Clear the user assign options cache\r\n   * Should be called after saving user assignments to ensure fresh data\r\n   */\r\n  clearUserAssignOptionsCache(): void {\r\n    this.userAssignOptionsCache$ = null;\r\n  }\r\n\r\n  /**\r\n   * Saves the updated user assignments to the backend.\r\n   * Uses the cov_compass_service with requestType 'saveUserAssignOptions'.\r\n   * Clears the cache after successful save to ensure fresh data on next fetch.\r\n   * @param userAssignments - The user assignments object to save\r\n   * @returns Observable<any> - Emits success response or throws error\r\n   */\r\n  saveUserAssignOptions(userAssignments: any): Observable<any> {\r\n    const formattedAssignments = { ...userAssignments };\r\n    for (const workflow in formattedAssignments) {\r\n      if (formattedAssignments.hasOwnProperty(workflow)) {\r\n        formattedAssignments[workflow] = formattedAssignments[workflow].map((user: any) => ({\r\n          username: user.username,\r\n          fullName: '',\r\n          personId: \"0.00\"\r\n        }));\r\n      }\r\n    }\r\n\r\n    const compass_user_config = {\r\n      compass_user_config: {\r\n        update_date_time: new Date().toISOString(),\r\n        users_assignable: formattedAssignments\r\n      }\r\n    };\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'saveUserAssignOptions',\r\n                parameters: {\r\n                  requestType: 'saveUserAssignOptions',\r\n                  requestData: JSON.stringify(compass_user_config)\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('saveUserAssignOptions');\r\n\r\n            // Check if response has the expected structure\r\n            if (raw && raw.reply && raw.reply.statusData) {\r\n              const status = raw.reply.statusData.status;\r\n\r\n              if (status === 'S') {\r\n                // Success - clear cache to ensure fresh data on next fetch\r\n                this.clearUserAssignOptionsCache();\r\n                observer.next(raw);\r\n                observer.complete();\r\n              } else if (status === 'F') {\r\n                // Failure - extract error message from subeventstatus if available\r\n                let errorMessage = 'Failed to save user assignments.';\r\n                \r\n                if (raw.reply.statusData.subeventstatus && \r\n                    raw.reply.statusData.subeventstatus.length > 0) {\r\n                  const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                  if (subEvent.operationstatus) {\r\n                    errorMessage = `Save failed: ${subEvent.operationstatus}`;\r\n                  }\r\n                }\r\n                \r\n                observer.error(new Error(errorMessage));\r\n              } else {\r\n                // Unknown status\r\n                observer.error(new Error(`Unknown response status: ${status}`));\r\n              }\r\n            } else {\r\n              // Invalid response structure\r\n              observer.error(new Error('Invalid response format from server'));\r\n            }\r\n          } catch (error) {\r\n            observer.error(new Error('Failed to save user assignments.'));\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetches documents for a specific person ID using the document browser.\r\n   * Uses the cov_compass_service with requestType 'getDocumentsForPerson'.\r\n   * @param personId - The person ID to fetch documents for\r\n   * @param beginDate - Optional beginning date for document search\r\n   * @param endDate - Optional end date for document search\r\n   * @returns Observable<any> - Emits the documents response\r\n   */\r\n  getDocumentsForPerson(personId: number, beginDate?: string, endDate?: string): Observable<any> {\r\n    const uniqueId = `getDocumentsForPerson_${personId}`;\r\n    \r\n    console.log('=== getDocumentsForPerson Debug Log ===');\r\n    console.log('personId:', personId);\r\n    console.log('beginDate:', beginDate);\r\n    console.log('endDate:', endDate);\r\n    console.log('uniqueId:', uniqueId);\r\n    \r\n    // Validate parameters\r\n    if (typeof personId !== 'number' || isNaN(personId)) {\r\n      const errorMsg = `Invalid personId: ${personId} (type: ${typeof personId})`;\r\n      console.error(errorMsg);\r\n      return new Observable<any>(observer => {\r\n        observer.error(new Error(errorMsg));\r\n        observer.complete();\r\n      });\r\n    }\r\n\r\n    return new Observable<any>(observer => {\r\n      try {\r\n        const requestPayload = {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"getDocumentsForPerson\",\r\n                personId: personId,\r\n                beginDate: beginDate,\r\n                endDate: endDate\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        };\r\n        \r\n        console.log('Request payload being sent:');\r\n        console.log(JSON.stringify(requestPayload, null, 2));\r\n\r\n        this.customService.load(\r\n          requestPayload,\r\n          [{ personId: personId, encntrId: 0 }],\r\n          () => {\r\n            try {\r\n              console.log('=== getDocumentsForPerson Callback Executed ===');\r\n              const raw = this.customService.get(uniqueId);\r\n              console.log('Raw response from customService:', raw);\r\n              \r\n              if (!raw) {\r\n                console.error('No response received from customService');\r\n                observer.error(new Error('No response received from server'));\r\n                observer.complete();\r\n                return;\r\n              }\r\n\r\n              // Process the response similar to getDocumentsForWorklist\r\n              let finalResponse: any = {\r\n                success: false,\r\n                documents: [],\r\n                message: 'Unknown error'\r\n              };\r\n\r\n              // Check if the response has documents directly (new format)\r\n              if (raw.documents && Array.isArray(raw.documents)) {\r\n                console.log('Found documents in direct response format');\r\n                finalResponse.success = true;\r\n                finalResponse.documents = raw.documents;\r\n                finalResponse.message = 'Documents retrieved successfully';\r\n                console.log('Direct documents:', finalResponse.documents);\r\n              }\r\n              // Check if the response has documents in t_rec->reply.json (CCL format)\r\n              else if (raw.reply && raw.reply.json) {\r\n                console.log('Found documents in t_rec->reply.json format');\r\n                try {\r\n                  const jsonData = JSON.parse(raw.reply.json);\r\n                  if (jsonData.documents && Array.isArray(jsonData.documents)) {\r\n                    finalResponse.success = true;\r\n                    finalResponse.documents = jsonData.documents;\r\n                    finalResponse.message = 'Documents retrieved successfully';\r\n                    console.log('JSON documents:', finalResponse.documents);\r\n                  } else {\r\n                    finalResponse.message = 'No documents found in JSON response';\r\n                  }\r\n                } catch (parseError) {\r\n                  console.error('Error parsing JSON data:', parseError);\r\n                  finalResponse.message = 'Error parsing document JSON data';\r\n                }\r\n              }\r\n              // Check if the response has the old format with statusData\r\n              else if (raw.reply && raw.reply.statusData) {\r\n                const status = raw.reply.statusData.status;\r\n                console.log('Response status:', status);\r\n                \r\n                if (status === 'S') {\r\n                  // Success - extract documents from the response\r\n                  finalResponse.success = true;\r\n                  \r\n                  if (raw.reply.statusData.subeventstatus && raw.reply.statusData.subeventstatus.length > 0) {\r\n                    const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                    if (subEvent.operationstatus) {\r\n                      try {\r\n                        const operationData = JSON.parse(subEvent.operationstatus);\r\n                        finalResponse.documents = operationData.documents || [];\r\n                        finalResponse.message = 'Documents retrieved successfully';\r\n                        console.log('Parsed documents:', finalResponse.documents);\r\n                      } catch (parseError) {\r\n                        console.error('Error parsing operation status:', parseError);\r\n                        finalResponse.message = 'Error parsing document data';\r\n                      }\r\n                    }\r\n                  }\r\n                } else if (status === 'F') {\r\n                  // Failure\r\n                  finalResponse.success = false;\r\n                  finalResponse.message = 'Failed to retrieve documents';\r\n                  \r\n                  if (raw.reply.statusData.subeventstatus && raw.reply.statusData.subeventstatus.length > 0) {\r\n                    const subEvent = raw.reply.statusData.subeventstatus[0];\r\n                    if (subEvent.operationstatus) {\r\n                      finalResponse.message = subEvent.operationstatus;\r\n                    }\r\n                  }\r\n                } else {\r\n                  finalResponse.message = `Unknown response status: ${status}`;\r\n                }\r\n              } else {\r\n                finalResponse.message = 'Invalid response format from server';\r\n                console.error('Unexpected response format:', raw);\r\n              }\r\n\r\n              console.log('Final response being sent to component:', finalResponse);\r\n              \r\n              observer.next(finalResponse);\r\n              observer.complete();\r\n            } catch (error) {\r\n              console.error('Error in getDocumentsForPerson callback:', error);\r\n              if (error instanceof Error) {\r\n                console.error('Error stack:', error.stack);\r\n              }\r\n              observer.error(new Error('Error retrieving documents for person'));\r\n              observer.complete();\r\n            }\r\n          }\r\n        );\r\n        console.log('customService.load called successfully');\r\n      } catch (loadError) {\r\n        console.error('Error calling customService.load:', loadError);\r\n        observer.error(new Error('Failed to initiate document retrieval'));\r\n        observer.complete();\r\n      }\r\n    });\r\n  }\r\n} ","import { Injectable, signal } from '@angular/core';\r\n\r\n/**\r\n * AppStatusService manages global application state using Angular signals.\r\n * \r\n * This service provides a centralized way to manage application-wide status indicators,\r\n * particularly for offline/online mode functionality. It uses Angular's new signal-based\r\n * reactive system introduced in Angular 16 for improved performance and developer experience.\r\n * \r\n * Signal Architecture Benefits:\r\n * - Fine-grained reactivity: Only components that depend on changed signals re-render\r\n * - Synchronous updates: No need for async/await or subscribe/unsubscribe patterns\r\n * - Automatic dependency tracking: Angular automatically tracks which components use which signals\r\n * - Memory efficiency: Signals clean up dependencies automatically\r\n * \r\n * @example\r\n * ```typescript\r\n * // In a component\r\n * constructor(private appStatus: AppStatusService) {}\r\n * \r\n * // Using the signal in template (automatically reactive)\r\n * isOffline = this.appStatus.offlineMode;\r\n * \r\n * // Using in component logic\r\n * ngOnInit() {\r\n *   if (this.appStatus.offlineMode()) {\r\n *     // Handle offline mode\r\n *   }\r\n * }\r\n * \r\n * // Setting offline mode\r\n * this.appStatus.setOfflineMode(true);\r\n * ```\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppStatusService {\r\n  /**\r\n   * Private writable signal for offline mode state.\r\n   * Only this service can modify the offline mode status through setOfflineMode().\r\n   */\r\n  private _offlineMode = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Read-only signal exposing the offline mode state to consumers.\r\n   * Components can subscribe to this signal and will automatically re-render\r\n   * when the offline mode state changes.\r\n   * \r\n   * @readonly\r\n   * @returns Signal<boolean> - Current offline mode state\r\n   */\r\n  readonly offlineMode = this._offlineMode.asReadonly();\r\n  \r\n  /**\r\n   * Updates the application's offline mode status.\r\n   * \r\n   * This method is the only way to change the offline mode state.\r\n   * When called, all components and computed signals that depend on\r\n   * the offlineMode signal will automatically update.\r\n   * \r\n   * @param offline - True to enable offline mode, false to disable\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Enable offline mode when network is unavailable\r\n   * this.appStatus.setOfflineMode(true);\r\n   * \r\n   * // Disable offline mode when network is restored\r\n   * this.appStatus.setOfflineMode(false);\r\n   * ```\r\n   */\r\n  setOfflineMode(offline: boolean): void {\r\n    this._offlineMode.set(offline);\r\n  }\r\n  \r\n  /**\r\n   * Legacy getter for backward compatibility during transition to signals.\r\n   * \r\n   * @deprecated Use the offlineMode signal directly instead.\r\n   * This getter is provided for components that haven't been migrated\r\n   * to use signals yet. It will be removed in a future version.\r\n   * \r\n   * @returns boolean - Current offline mode state\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Old way (deprecated)\r\n   * if (this.appStatus.offlineModeValue) { ... }\r\n   * \r\n   * // New way (preferred)\r\n   * if (this.appStatus.offlineMode()) { ... }\r\n   * ```\r\n   */\r\n  get offlineModeValue(): boolean {\r\n    return this._offlineMode();\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { mPageService } from '@clinicaloffice/clinical-office-mpage-core';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CernerActionService {\r\n\r\n  constructor(private mPage: mPageService) { }\r\n\r\n  /**\r\n   * Handles Cerner actions such as OPENCHART, VIEWORDER, APPT_VIEW, APPT_HX_VIEW, DOC_VIEWER, and PROC_VIEWER.\r\n   * Now supports async/await for actions that require DiscernObjectFactory.\r\n   * @param action The Cerner action to perform\r\n   * @param data The data required for the action\r\n   */\r\n  async CernerAction(action: string, data: any): Promise<void> {\r\n    // Process Cerner action with provided data\r\n    const el = document.getElementById('applink');\r\n    if (data.encntrId || data.personId || data.orderId) {\r\n      switch (action) {\r\n        case 'OPENCHART':\r\n          if (data.personId !== undefined && data.encntrId !== undefined) {\r\n            // @ts-ignore\r\n            el.href = 'javascript:APPLINK(0,\"Powerchart.exe\",\"/PERSONID=' + data.personId + ' /ENCNTRID=' + data.encntrId + '\")';\r\n          } else if (data.personId !== undefined) {\r\n            // @ts-ignore\r\n            el.href = 'javascript:APPLINK(0,\"Powerchart.exe\",\"/PERSONID=' + data.personId + '\")';\r\n          }\r\n          if (el) {\r\n            // Execute chart opening action via APPLINK\r\n            el.click();\r\n          } else {\r\n            // Handle missing applink element gracefully\r\n            // console.warn('Element with id \"applink\" not found');\r\n          }\r\n          break;\r\n        case 'VIEWORDER':\r\n          try {\r\n            await this.viewOrderAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('VIEWORDER error: ' + error);\r\n            // Log VIEWORDER error for debugging\r\n          }\r\n          break;\r\n        case 'APPT_VIEW':\r\n          try {\r\n            await this.viewAppointmentAsync(data, 'APPT_VIEW');\r\n          } catch (error) {\r\n            this.mPage.putLog('APPT_VIEW error: ' + error);\r\n          }\r\n          break;\r\n        case 'APPT_HX_VIEW':\r\n          try {\r\n            await this.viewAppointmentAsync(data, 'APPT_HX_VIEW');\r\n          } catch (error) {\r\n            this.mPage.putLog('APPT_HX_VIEW error: ' + error);\r\n          }\r\n          break;\r\n        case 'MODIFY_ORDER':\r\n          try {\r\n            await this.modifyOrderAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('MODIFY_ORDER error: ' + error);\r\n          }\r\n          break;\r\n        case 'CANCEL_ORDER':\r\n          try {\r\n            await this.cancelOrderAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('CANCEL_ORDER error: ' + error);\r\n          }\r\n          break;\r\n        case 'CANCEL_REORDER':\r\n          try {\r\n            await this.cancelReorderAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('CANCEL_REORDER error: ' + error);\r\n          }\r\n          break;\r\n        case 'DOC_VIEWER':\r\n          try {\r\n            await this.viewDocumentAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('DOC_VIEWER error: ' + error);\r\n          }\r\n          break;\r\n        case 'PROC_VIEWER':\r\n          try {\r\n            await this.viewProcedureAsync(data);\r\n          } catch (error) {\r\n            this.mPage.putLog('PROC_VIEWER error: ' + error);\r\n          }\r\n          break;\r\n        default:\r\n          alert('The action ' + action + ' has not been defined.');\r\n          break;\r\n      }\r\n    } else {\r\n      // Handle actions that don't require patient context (encntrId or personId)\r\n      switch (action) {\r\n        case 'URL':\r\n          // @ts-ignore\r\n          el.href = 'javascript:APPLINK(100,\"' + data + '\", \"\");';\r\n          // @ts-ignore\r\n          el.click();\r\n          break;\r\n        default:\r\n          alert('The action ' + action + ' has not been defined.');\r\n          break;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Order Info Viewer for a specific order using DiscernObjectFactory\r\n   * This method uses async/await syntax for Edge Chromium compatibility\r\n   * @param data Object containing orderId, personId, and encntrId\r\n   */\r\n  private async viewOrderAsync(data: any): Promise<void> {\r\n    try {\r\n      // Check if required data is available\r\n      if (!data.orderId) {\r\n        throw new Error('orderId is required for VIEWORDER action');\r\n      }\r\n\r\n\r\n      /*\r\n        Example code:\r\n        var orderId = 24190286;\r\n  \r\n        const objPVViewerMPage = await (window as any).external.DiscernObjectFactory(\"PVVIEWERMPAGE\");\r\n        objPVViewerMPage.LaunchOrderInfoViewer(data.orderId, 1);\r\n\r\n        async function myFunction() {\r\n        const PowerOrdersMPagesUtils = await (window as any).external.DiscernObjectFactory(\"POWERORDERS\");\r\n        const m_hMOEW = await PowerOrdersMPagesUtils.CreateMOEW(dPersonId, dEncntrId, 0, 2, 127);\r\n        await PowerOrdersMPagesUtils.DisplayMOEW(m_hMOEW);\r\n        PowerOrdersMPagesUtils.DestroyMOEW(m_hMOEW);\r\n        alert(\"Complete\");\r\n        }\r\n      */\r\n     \r\n      // Create Order Info Viewer object using DiscernObjectFactory\r\n      const orderInfoViewer = await (window as any).external.DiscernObjectFactory(\"PVVIEWERMPAGE\");\r\n      \r\n      // Display the order details\r\n      await orderInfoViewer.LaunchOrderInfoViewer(\r\n        data.orderId,\r\n        1\r\n      );\r\n      \r\n      // Order Info Viewer launched successfully\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('VIEWORDER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Appointment Viewer or Appointment History Viewer using DiscernObjectFactory\r\n   * @param data Object containing schEventId and scheduleId\r\n   * @param actionType 'APPT_VIEW' or 'APPT_HX_VIEW'\r\n   */\r\n  private async viewAppointmentAsync(data: any, actionType: 'APPT_VIEW' | 'APPT_HX_VIEW'): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      const eventId = parseFloat(data.schEventId);\r\n      const scheduleId = parseFloat(data.scheduleId);\r\n      // Only schEventId (eventId) is required and must be > 0; scheduleId can be 0\r\n      if (!(eventId > 0)) {\r\n        throw new Error('schEventId is required and must be > 0 for ' + actionType);\r\n      }\r\n      // Create Scheduling Actions object using DiscernObjectFactory\r\n      const schedulingActions = await (window as any).external.DiscernObjectFactory('PEXSCHEDULINGACTIONS');\r\n      if (actionType === 'APPT_VIEW') {\r\n        // Show the appointment view\r\n        schedulingActions.ShowView(eventId, scheduleId);\r\n        this.mPage.putLog('APPT_VIEW: ShowView called for eventId=' + eventId + ', scheduleId=' + scheduleId);\r\n      } else if (actionType === 'APPT_HX_VIEW') {\r\n        // Show the appointment history view\r\n        schedulingActions.ShowHistoryView(eventId, scheduleId);\r\n        this.mPage.putLog('APPT_HX_VIEW: ShowHistoryView called for eventId=' + eventId + ', scheduleId=' + scheduleId);\r\n      }\r\n    } catch (error) {\r\n      this.mPage.putLog(actionType + ' failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Modal Order Entry Window to modify an existing order using MPAGES_EVENT\r\n   * @param data Object containing orderId, personId, and encntrId\r\n   */\r\n  private async modifyOrderAsync(data: any): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      if (!data.orderId) {\r\n        throw new Error('orderId is required for MODIFY_ORDER action');\r\n      }\r\n      if (!data.personId) {\r\n        throw new Error('personId is required for MODIFY_ORDER action');\r\n      }\r\n      // encntrId can be 0, so we don't validate it as required\r\n\r\n      // Build the MPAGES_EVENT parameters for modifying an order\r\n      // Format: personId|encntrId|{MODIFY|orderId}|customizeFlags|tabLst|defaultDisplay|silentSignFlag\r\n      const personId = data.personId;\r\n      const encntrId = data.encntrId;\r\n      const orderId = data.orderId;\r\n      \r\n      // Create the orderLst parameter with MODIFY action\r\n      // {MODIFY|orderId} - MODIFY action with the specific orderId\r\n      const orderLst = `{MODIFY|${orderId}}`;\r\n      \r\n      // customizeFlags: 0 for basic functionality, 24 to enable PowerPlans\r\n      const customizeFlags = data.enablePowerPlans ? 24 : 0;\r\n      \r\n      // tabLst: {2|127}{3|127} for full PowerOrders functionality on both Order List and Medication List profiles\r\n      const tabLst = '{2|127}{3|127}';\r\n      \r\n      // defaultDisplay: 16 for order profile, 8 for order search, 32 for orders for signature\r\n      const defaultDisplay = data.defaultDisplay || 32;\r\n      \r\n      // silentSignFlag: 0 for normal operation, 1 for silent signing (default to 0)\r\n      const silentSignFlag = data.silentSign ? 1 : 0;\r\n      \r\n      // Build the complete parameter string\r\n      const parameters = `${personId}|${encntrId}|${orderLst}|${customizeFlags}|${tabLst}|${defaultDisplay}|${silentSignFlag}`;\r\n      \r\n      // Execute the MPAGES_EVENT for ORDERS\r\n      const mpagesEventCall = `MPAGES_EVENT(\"ORDERS\",\"${parameters}\")`;\r\n      \r\n      this.mPage.putLog('MODIFY_ORDER: Executing MPAGES_EVENT with parameters: ' + parameters);\r\n      \r\n      // Execute the MPAGES_EVENT\r\n      const el = document.getElementById('applink');\r\n      if (el) {\r\n        // @ts-ignore\r\n        el.href = 'javascript:' + mpagesEventCall;\r\n        // @ts-ignore\r\n        el.click();\r\n      } else {\r\n        throw new Error('Element with id \"applink\" not found');\r\n      }\r\n      \r\n      this.mPage.putLog('MODIFY_ORDER: MPAGES_EVENT executed successfully');\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('MODIFY_ORDER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Modal Order Entry Window to cancel an existing order using MPAGES_EVENT\r\n   * @param data Object containing orderId, personId, and encntrId\r\n   */\r\n  private async cancelOrderAsync(data: any): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      if (!data.orderId) {\r\n        throw new Error('orderId is required for CANCEL_ORDER action');\r\n      }\r\n      if (!data.personId) {\r\n        throw new Error('personId is required for CANCEL_ORDER action');\r\n      }\r\n      // encntrId can be 0, so we don't validate it as required\r\n\r\n      // Build the MPAGES_EVENT parameters for canceling an order\r\n      // Format: personId|encntrId|{CANCEL|orderId}|customizeFlags|tabLst|defaultDisplay|silentSignFlag\r\n      const personId = data.personId;\r\n      const encntrId = data.encntrId;\r\n      const orderId = data.orderId;\r\n      \r\n      // Create the orderLst parameter with CANCEL action\r\n      // {CANCEL|orderId} - CANCEL action with the specific orderId\r\n      const orderLst = `{CANCEL DC|${orderId}}`;\r\n      \r\n      // customizeFlags: 0 for basic functionality, 24 to enable PowerPlans\r\n      const customizeFlags = data.enablePowerPlans ? 24 : 0;\r\n      \r\n      // tabLst: {2|127}{3|127} for full PowerOrders functionality on both Order List and Medication List profiles\r\n      const tabLst = '{2|127}{3|127}';\r\n      \r\n      // defaultDisplay: 16 for order profile, 8 for order search, 32 for orders for signature\r\n      const defaultDisplay = data.defaultDisplay || 32;\r\n      \r\n      // silentSignFlag: 0 for normal operation, 1 for silent signing (default to 0)\r\n      const silentSignFlag = data.silentSign ? 1 : 0;\r\n      \r\n      // Build the complete parameter string\r\n      const parameters = `${personId}|${encntrId}|${orderLst}|${customizeFlags}|${tabLst}|${defaultDisplay}|${silentSignFlag}`;\r\n      \r\n      // Execute the MPAGES_EVENT for ORDERS\r\n      const mpagesEventCall = `MPAGES_EVENT(\"ORDERS\",\"${parameters}\")`;\r\n      \r\n      this.mPage.putLog('CANCEL_ORDER: Executing MPAGES_EVENT with parameters: ' + parameters);\r\n      \r\n      // Execute the MPAGES_EVENT\r\n      const el = document.getElementById('applink');\r\n      if (el) {\r\n        // @ts-ignore\r\n        el.href = 'javascript:' + mpagesEventCall;\r\n        // @ts-ignore\r\n        el.click();\r\n      } else {\r\n        throw new Error('Element with id \"applink\" not found');\r\n      }\r\n      \r\n      this.mPage.putLog('CANCEL_ORDER: MPAGES_EVENT executed successfully');\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('CANCEL_ORDER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Modal Order Entry Window to cancel and reorder an existing order using MPAGES_EVENT\r\n   * @param data Object containing orderId, personId, and encntrId\r\n   */\r\n  private async cancelReorderAsync(data: any): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      if (!data.orderId) {\r\n        throw new Error('orderId is required for CANCEL_REORDER action');\r\n      }\r\n      if (!data.personId) {\r\n        throw new Error('personId is required for CANCEL_REORDER action');\r\n      }\r\n      // encntrId can be 0, so we don't validate it as required\r\n\r\n      // Build the MPAGES_EVENT parameters for canceling and reordering an order\r\n      // Format: personId|encntrId|{CANCEL_REORDER|orderId}|customizeFlags|tabLst|defaultDisplay|silentSignFlag\r\n      const personId = data.personId;\r\n      const encntrId = data.encntrId;\r\n      const orderId = data.orderId;\r\n      \r\n      // Create the orderLst parameter with CANCEL_REORDER action\r\n      // {CANCEL_REORDER|orderId} - CANCEL_REORDER action with the specific orderId\r\n      const orderLst = `{CANCEL REORD|${orderId}}`;\r\n      \r\n      // customizeFlags: 0 for basic functionality, 24 to enable PowerPlans\r\n      const customizeFlags = data.enablePowerPlans ? 24 : 0;\r\n      \r\n      // tabLst: {2|127}{3|127} for full PowerOrders functionality on both Order List and Medication List profiles\r\n      const tabLst = '{2|127}{3|127}';\r\n      \r\n      // defaultDisplay: 16 for order profile, 8 for order search, 32 for orders for signature\r\n      const defaultDisplay = data.defaultDisplay || 32;\r\n      \r\n      // silentSignFlag: 0 for normal operation, 1 for silent signing (default to 0)\r\n      const silentSignFlag = data.silentSign ? 1 : 0;\r\n      \r\n      // Build the complete parameter string\r\n      const parameters = `${personId}|${encntrId}|${orderLst}|${customizeFlags}|${tabLst}|${defaultDisplay}|${silentSignFlag}`;\r\n      \r\n      // Execute the MPAGES_EVENT for ORDERS\r\n      const mpagesEventCall = `MPAGES_EVENT(\"ORDERS\",\"${parameters}\")`;\r\n      \r\n      this.mPage.putLog('CANCEL_REORDER: Executing MPAGES_EVENT with parameters: ' + parameters);\r\n      \r\n      // Execute the MPAGES_EVENT\r\n      const el = document.getElementById('applink');\r\n      if (el) {\r\n        // @ts-ignore\r\n        el.href = 'javascript:' + mpagesEventCall;\r\n        // @ts-ignore\r\n        el.click();\r\n      } else {\r\n        throw new Error('Element with id \"applink\" not found');\r\n      }\r\n      \r\n      this.mPage.putLog('CANCEL_REORDER: MPAGES_EVENT executed successfully');\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('CANCEL_REORDER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Document Viewer for one or more documents using DiscernObjectFactory\r\n   * Supports displaying documents with event class codes \"MDOC\", \"DOC\", and \"RAD\"\r\n   * @param data Object containing personId and eventId(s) for the document(s) to view\r\n   */\r\n  private async viewDocumentAsync(data: any): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      if (!data.personId) {\r\n        throw new Error('personId is required for DOC_VIEWER action');\r\n      }\r\n      if (!data.eventId && !data.eventIds) {\r\n        throw new Error('eventId or eventIds is required for DOC_VIEWER action');\r\n      }\r\n\r\n      // Create Document Viewer object using DiscernObjectFactory\r\n      const docViewer = await (window as any).external.DiscernObjectFactory(\"PVVIEWERMPAGE\");\r\n      \r\n      // Initialize the document viewer with the person ID\r\n      docViewer.CreateDocViewer(data.personId);\r\n      \r\n      // Handle single event ID\r\n      if (data.eventId) {\r\n        docViewer.AppendDocEvent(data.eventId);\r\n        this.mPage.putLog('DOC_VIEWER: Added single document eventId=' + data.eventId);\r\n      }\r\n      \r\n      // Handle multiple event IDs\r\n      if (data.eventIds && Array.isArray(data.eventIds)) {\r\n        for (const eventId of data.eventIds) {\r\n          docViewer.AppendDocEvent(eventId);\r\n          this.mPage.putLog('DOC_VIEWER: Added document eventId=' + eventId);\r\n        }\r\n      }\r\n      \r\n      // Skip privilege check if requested (optional)\r\n      if (data.skipPrivilegeCheck === true) {\r\n        docViewer.SkipDocViewerPrivilegeCheck(true);\r\n        this.mPage.putLog('DOC_VIEWER: Skipping privilege check as requested');\r\n      }\r\n      \r\n      // Launch the document viewer\r\n      docViewer.LaunchDocViewer();\r\n      \r\n      this.mPage.putLog('DOC_VIEWER: Document viewer launched successfully for personId=' + data.personId);\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('DOC_VIEWER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Opens the Procedure Viewer for one or more procedures using DiscernObjectFactory\r\n   * Supports displaying procedures with event class code \"PROCEDURE\"\r\n   * @param data Object containing personId and eventId(s) for the procedure(s) to view\r\n   */\r\n  private async viewProcedureAsync(data: any): Promise<void> {\r\n    try {\r\n      // Validate required data\r\n      if (!data.personId) {\r\n        throw new Error('personId is required for PROC_VIEWER action');\r\n      }\r\n      if (!data.eventId && !data.eventIds) {\r\n        throw new Error('eventId or eventIds is required for PROC_VIEWER action');\r\n      }\r\n\r\n      // Create Procedure Viewer object using DiscernObjectFactory\r\n      const procViewer = await (window as any).external.DiscernObjectFactory(\"PVVIEWERMPAGE\");\r\n      \r\n      // Initialize the procedure viewer with the person ID\r\n      procViewer.CreateProcViewer(data.personId);\r\n      \r\n      // Handle single event ID\r\n      if (data.eventId) {\r\n        procViewer.AppendProcEvent(data.eventId);\r\n        this.mPage.putLog('PROC_VIEWER: Added single procedure eventId=' + data.eventId);\r\n      }\r\n      \r\n      // Handle multiple event IDs\r\n      if (data.eventIds && Array.isArray(data.eventIds)) {\r\n        for (const eventId of data.eventIds) {\r\n          procViewer.AppendProcEvent(eventId);\r\n          this.mPage.putLog('PROC_VIEWER: Added procedure eventId=' + eventId);\r\n        }\r\n      }\r\n      \r\n      // Launch the procedure viewer\r\n      procViewer.LaunchProcViewer();\r\n      \r\n      this.mPage.putLog('PROC_VIEWER: Procedure viewer launched successfully for personId=' + data.personId);\r\n      \r\n    } catch (error) {\r\n      this.mPage.putLog('PROC_VIEWER failed: ' + error);\r\n      // Log failure details for troubleshooting\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n","import { Injectable, signal, computed } from '@angular/core';\r\nimport { ColumnItem } from '../models/column-item.model';\r\nimport { FilterCriteria, PredefinedFilter } from '../models/predefined-filter.model';\r\nimport { CompassConfiguration, FilterSet, LocationOption } from '../models/compass-configuration.model';\r\nimport { AdminService } from './admin.service';\r\nimport { Subject } from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ColumnConfigService {\r\n  \r\n  /**\r\n   * Signal to track if configuration has been loaded from backend\r\n   */\r\n  private _configurationLoaded = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal containing the complete compass configuration from the backend\r\n   */\r\n  private _compassConfiguration = signal<CompassConfiguration | null>(null);\r\n  \r\n  /**\r\n   * Read-only access to configuration loaded state\r\n   */\r\n  readonly configurationLoaded = this._configurationLoaded.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to compass configuration\r\n   */\r\n  readonly compassConfiguration = this._compassConfiguration.asReadonly();\r\n  \r\n  constructor(private adminService: AdminService) {\r\n    // Load configuration on service initialization\r\n    this.loadConfigurationFromBackend();\r\n  }\r\n  /**\r\n   * Signal containing column definitions for worklist table and filter bar.\r\n   * Changes to this signal automatically trigger reactive updates in all consuming components.\r\n   */\r\n  private _columns = signal<ColumnItem[]>([\r\n    {\r\n      name: 'Patient',\r\n      meaning: 'PATINFO',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.patient.name.localeCompare(b.patient.name),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.patient.name),\r\n      filterMultiple: false,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 1\r\n    },\r\n    {\r\n      name: 'Workflow Status',\r\n      meaning: 'WORKFLOWSTATUS',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.workflowStatus.status.localeCompare(b.workflowStatus.status),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.workflowStatus.status),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 2\r\n    },\r\n    {\r\n      name: 'Order Status',\r\n      meaning: 'ITEMSTATUS',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.subStatus.subStatus.localeCompare(b.subStatus.subStatus),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.subStatus.subStatus),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 10\r\n    },\r\n    {\r\n      name: 'Priority',\r\n      meaning: 'PRIORITY',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.priority.localeCompare(b.priority),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.priority),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 3\r\n    },\r\n    {\r\n      name: 'Codes',\r\n      meaning: 'CODES',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => {\r\n        const aCodes = a.codeList?.map((c: any) => c.identifier).join(', ') || '';\r\n        const bCodes = b.codeList?.map((c: any) => c.identifier).join(', ') || '';\r\n        return aCodes.localeCompare(bCodes);\r\n      },\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => {\r\n        if (!item.codeList || !item.codeList.length) return false;\r\n        return item.codeList.some((code: any) => list.includes(code.identifier));\r\n      },\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 4\r\n    },\r\n    {\r\n      name: 'Ordering Location',\r\n      meaning: 'ORDERINGLOCATION',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.orderingLocation.localeCompare(b.orderingLocation),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.orderingLocation),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 5\r\n    },\r\n    {\r\n      name: 'Ordering Provider',\r\n      meaning: 'ORDERINGPROVIDER',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.orderingProvider.localeCompare(b.orderingProvider),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.orderingProvider),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 6\r\n    },\r\n    {\r\n      name: 'Scheduling Location',\r\n      meaning: 'SCHEDULINGLOCATION',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.schedulingLocation.localeCompare(b.schedulingLocation),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.schedulingLocation),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 7\r\n    },\r\n    {\r\n      name: 'Schedule Status',\r\n      meaning: 'SCHEDULESTATUS',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => {\r\n        const aState = a.schedule?.state || '';\r\n        const bState = b.schedule?.state || '';\r\n        return aState.localeCompare(bState);\r\n      },\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => {\r\n        const state = item.schedule?.state || '';\r\n        return list.includes(state);\r\n      },\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: false,\r\n      order: 8\r\n    },\r\n    {\r\n      name: 'Payor',\r\n      meaning: 'PAYOR',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => {\r\n        const aPayors = a.payors.map((p: any) => p.planName).join(', ');\r\n        const bPayors = b.payors.map((p: any) => p.planName).join(', ');\r\n        return aPayors.localeCompare(bPayors);\r\n      },\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => {\r\n        return item.payors.some((p: any) => list.includes(p.planName));\r\n      },\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 9\r\n    },\r\n    {\r\n      name: 'Order Description',\r\n      meaning: 'ITEM',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.itemDescription.localeCompare(b.itemDescription),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.itemDescription),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 11\r\n    },\r\n    {\r\n      name: 'Order Date',\r\n      meaning: 'ORDERDTTM',\r\n      route: 'prior-auth',\r\n      // Default sort order is descending (most recent first). This will be overridden by user preferences if present.\r\n      sortOrder: 'descend',\r\n      sortFn: (a: any, b: any) => new Date(a.origOrderDtTm).getTime() - new Date(b.origOrderDtTm).getTime(),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.origOrderDtTm),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: false,\r\n      order: 12\r\n    },\r\n    {\r\n      name: 'EDOS',\r\n      meaning: 'EDOS',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => new Date(a.edosDate).getTime() - new Date(b.edosDate).getTime(),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.edosDate),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: false,\r\n      order: 13\r\n    },\r\n    {\r\n      name: 'Assigned User',\r\n      meaning: 'ASSIGNEDUSER',\r\n      route: 'prior-auth',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => {\r\n        // TODO: Implement sorting based on assigned user when data is available\r\n        return 0;\r\n      },\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => {\r\n        // TODO: Implement filtering based on assigned user when data is available\r\n        return true;\r\n      },\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 14\r\n    },\r\n    // Feedback worklist columns\r\n    {\r\n      name: 'Submitted By',\r\n      meaning: 'FEEDBACK_SUBMITTER',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.submitted_by_user.localeCompare(b.submitted_by_user),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.submitted_by_user),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 1\r\n    },\r\n    {\r\n      name: 'Feedback Type',\r\n      meaning: 'FEEDBACK_TYPE',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.feedback_type.localeCompare(b.feedback_type),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.feedback_type),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 2\r\n    },\r\n    {\r\n      name: 'Status',\r\n      meaning: 'FEEDBACK_STATUS',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.workflow_status.status.localeCompare(b.workflow_status.status),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.workflow_status.status),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 3\r\n    },\r\n    {\r\n      name: 'Priority',\r\n      meaning: 'FEEDBACK_PRIORITY',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.feedback_priority.localeCompare(b.feedback_priority),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.feedback_priority),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 4\r\n    },\r\n    {\r\n      name: 'Submission Date',\r\n      meaning: 'FEEDBACK_SUBMISSION_DATE',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => new Date(a.submission_datetime).getTime() - new Date(b.submission_datetime).getTime(),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.submission_datetime),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 5\r\n    },\r\n    {\r\n      name: 'Assigned To',\r\n      meaning: 'FEEDBACK_ASSIGNED_TO',\r\n      route: 'feedback',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => (a.assigned_to || '').localeCompare(b.assigned_to || ''),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.assigned_to || 'Unassigned'),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 6\r\n    },\r\n    // Oral Chemotherapy worklist columns\r\n    {\r\n      name: 'Patient Name',\r\n      meaning: 'ORAL_CHEMO_PATIENT',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.patient.name.localeCompare(b.patient.name),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.patient.name),\r\n      filterMultiple: false,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 1\r\n    },\r\n    {\r\n      name: 'Workflow Status',\r\n      meaning: 'ORAL_CHEMO_WORKFLOW_STATUS',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.workflowStatus.status.localeCompare(b.workflowStatus.status),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.workflowStatus.status),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 2\r\n    },\r\n    {\r\n      name: 'Ordering Location',\r\n      meaning: 'ORAL_CHEMO_ORDERING_LOCATION',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.orderingLocation.localeCompare(b.orderingLocation),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.orderingLocation),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 3\r\n    },\r\n    {\r\n      name: 'Ordering Provider',\r\n      meaning: 'ORAL_CHEMO_ORDERING_PROVIDER',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.orderingProvider.localeCompare(b.orderingProvider),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.orderingProvider),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 4\r\n    },\r\n    {\r\n      name: 'Order Status',\r\n      meaning: 'ORAL_CHEMO_ORDER_STATUS',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.subStatus.subStatus.localeCompare(b.subStatus.subStatus),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.subStatus.subStatus),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 5\r\n    },\r\n    {\r\n      name: 'Order Description',\r\n      meaning: 'ORAL_CHEMO_ORDER_DESC',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => a.itemDescription.localeCompare(b.itemDescription),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.itemDescription),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 6\r\n    },\r\n    {\r\n      name: 'Order Sentence',\r\n      meaning: 'ORAL_CHEMO_ORDER_SENTENCE',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => (a.orderSentence || '').localeCompare(b.orderSentence || ''),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.orderSentence || ''),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 7\r\n    },\r\n    {\r\n      name: 'Order Date',\r\n      meaning: 'ORAL_CHEMO_ORDER_DATE',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: 'descend',\r\n      sortFn: (a: any, b: any) => new Date(a.origOrderDtTm).getTime() - new Date(b.origOrderDtTm).getTime(),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.origOrderDtTm),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 8\r\n    },\r\n    {\r\n      name: 'First Dose',\r\n      meaning: 'ORAL_CHEMO_FIRST_DOSE',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => {\r\n        const dateA = a.firstDoseDate ? new Date(a.firstDoseDate).getTime() : 0;\r\n        const dateB = b.firstDoseDate ? new Date(b.firstDoseDate).getTime() : 0;\r\n        return dateA - dateB;\r\n      },\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.firstDoseDate || ''),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: false,\r\n      display: true,\r\n      order: 9\r\n    },\r\n    {\r\n      name: 'Pharmacy Location',\r\n      meaning: 'ORAL_CHEMO_PHARMACY_LOCATION',\r\n      route: 'oral-chemotherapy',\r\n      sortOrder: null,\r\n      sortFn: (a: any, b: any) => (a.pharmacyLocation || '').localeCompare(b.pharmacyLocation || ''),\r\n      listOfFilter: [],\r\n      filterFn: (list: string[], item: any) => list.includes(item.pharmacyLocation || ''),\r\n      filterMultiple: true,\r\n      sortDirections: ['ascend', 'descend', null],\r\n      filterable: true,\r\n      display: true,\r\n      order: 10\r\n    }\r\n  ]);\r\n\r\n  /**\r\n   * Signal containing predefined filter configurations for different routes\r\n   * These filters are dynamically loaded from the compass configuration backend\r\n   */\r\n  private _predefinedFilters = signal<PredefinedFilter[]>([]);\r\n\r\n  /**\r\n   * Configurable location dropdown options keyed by route and subroute.\r\n   * These options are dynamically loaded from the compass configuration backend.\r\n   * Each option contributes additional FilterCriteria that will be merged with the active predefined tab.\r\n   */\r\n  private _locationOptions = signal<{\r\n    [route: string]: {\r\n      [subroute: string]: LocationOption[];\r\n    };\r\n  }>({});\r\n\r\n  /**\r\n   * Signal for external locations for scheduling\r\n   */\r\n  private _externalLocations = signal<any>({ cnt: 0, locations: [] });\r\n\r\n  /** Readonly accessor for location options */\r\n  readonly locationOptions = this._locationOptions.asReadonly();\r\n\r\n  /** Readonly accessor for external locations */\r\n  readonly externalLocations = this._externalLocations.asReadonly();\r\n\r\n  /**\r\n   * Get location options for a route/subroute, defaulting to empty if not configured\r\n   */\r\n  getLocationOptions(route: string, subroute: string): LocationOption[] {\r\n    const routeMap = this._locationOptions()[route] || {};\r\n    return routeMap[subroute] || [];\r\n  }\r\n\r\n  /**\r\n   * Merge two FilterCriteria objects. Array-valued fields are unioned; scalars and objects are shallow-merged.\r\n   */\r\n  mergeCriteria(base: FilterCriteria, addon: FilterCriteria): FilterCriteria {\r\n    const result: FilterCriteria = { ...base };\r\n    const mergeArray = (a?: string[], b?: string[]) => {\r\n      if (!a && !b) return undefined;\r\n      const merged = [ ...(a || []), ...(b || []) ];\r\n      return Array.from(new Set(merged));\r\n    };\r\n\r\n    result.workflowStatus = mergeArray(base.workflowStatus, addon.workflowStatus);\r\n    result.schedulingStatus = mergeArray(base.schedulingStatus, addon.schedulingStatus);\r\n    result.schedulingLocation = mergeArray(base.schedulingLocation, addon.schedulingLocation);\r\n    result.orderingLocation = mergeArray(base.orderingLocation, addon.orderingLocation);\r\n    result.orderingProvider = mergeArray(base.orderingProvider, addon.orderingProvider);\r\n    result.daysFilter = addon.daysFilter ?? base.daysFilter;\r\n    result.customFilters = { ...(base.customFilters || {}), ...(addon.customFilters || {}) };\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Return a combined FilterCriteria given a predefined tab and optional location key.\r\n   */\r\n  getCombinedCriteria(route: string, subroute: string, predefined: PredefinedFilter, locationValue?: string): FilterCriteria {\r\n    const options = this.getLocationOptions(route, subroute);\r\n    const selected = options.find(o => o.value === locationValue);\r\n    \r\n    if (selected) {\r\n      // Convert location filters to FilterCriteria format\r\n      const locationCriteria: FilterCriteria = {};\r\n      Object.keys(selected.filters).forEach(key => {\r\n        switch (key) {\r\n          case 'workflowStatus':\r\n            locationCriteria.workflowStatus = selected.filters[key];\r\n            break;\r\n          case 'schedulingStatus':\r\n            locationCriteria.schedulingStatus = selected.filters[key];\r\n            break;\r\n          case 'schedulingLocation':\r\n            locationCriteria.schedulingLocation = selected.filters[key];\r\n            break;\r\n          case 'orderingLocation':\r\n            locationCriteria.orderingLocation = selected.filters[key];\r\n            break;\r\n          case 'orderingProvider':\r\n            locationCriteria.orderingProvider = selected.filters[key];\r\n            break;\r\n          default:\r\n            if (!locationCriteria.customFilters) {\r\n              locationCriteria.customFilters = {};\r\n            }\r\n            locationCriteria.customFilters[key] = selected.filters[key];\r\n            break;\r\n        }\r\n      });\r\n      \r\n      return this.mergeCriteria(predefined.filters || {}, locationCriteria);\r\n    }\r\n    \r\n    return predefined.filters || {};\r\n  }\r\n\r\n  /**\r\n   * Signal to track when column filter updates are in progress\r\n   */\r\n  private _updatingColumnFilters = signal<boolean>(false);\r\n\r\n  /**\r\n   * Subject to emit when column filter updates are complete\r\n   */\r\n  private _columnFiltersUpdated = new Subject<void>();\r\n\r\n  /**\r\n   * Read-only access to the columns signal\r\n   */\r\n  readonly columns = this._columns.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to the predefined filters signal\r\n   */\r\n  readonly predefinedFilters = this._predefinedFilters.asReadonly();\r\n\r\n  /**\r\n   * Computed signal that returns columns for a specific route, sorted by order\r\n   */\r\n  readonly columnsForRoute = computed(() => {\r\n    return (route: string) => this._columns()\r\n      .filter(col => col.route === route)\r\n      .sort((a, b) => a.order - b.order);\r\n  });\r\n\r\n  /**\r\n   * Computed signal that returns predefined filters for a specific route and subroute, sorted by order\r\n   */\r\n  readonly predefinedFiltersForRoute = computed(() => {\r\n    return (route: string, subroute?: string) => this._predefinedFilters()\r\n      .filter(filter => filter.route === route && (!subroute || filter.subroute === subroute))\r\n      .sort((a, b) => (a.order || 0) - (b.order || 0));\r\n  });\r\n\r\n  /**\r\n   * Returns the column configuration for a given route.\r\n   * Uses the computed signal for reactive updates.\r\n   * @param route The route string (e.g. 'prior-auth')\r\n   */\r\n  getColumns(route: string): ColumnItem[] {\r\n    return this.columnsForRoute()(route);\r\n  }\r\n\r\n  /**\r\n   * Sort filter options alphabetically or numerically based on content\r\n   * @param filterOptions Array of filter options to sort\r\n   * @returns Sorted array of filter options\r\n   */\r\n  private sortFilterOptions(filterOptions: { text: string, value: string }[]): { text: string, value: string }[] {\r\n    return filterOptions.sort((a, b) => {\r\n      // Check if values are numeric\r\n      const aNum = parseFloat(a.value);\r\n      const bNum = parseFloat(b.value);\r\n      \r\n      if (!isNaN(aNum) && !isNaN(bNum)) {\r\n        // Numeric sorting\r\n        return aNum - bNum;\r\n      } else {\r\n        // Alphabetical sorting (case-insensitive)\r\n        // Ensure text values are strings before calling localeCompare\r\n        const aText = String(a.text || '');\r\n        const bText = String(b.text || '');\r\n        return aText.localeCompare(bText, undefined, { sensitivity: 'base' });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Read-only access to column filter update state\r\n   */\r\n  readonly updatingColumnFilters = this._updatingColumnFilters.asReadonly();\r\n\r\n  /**\r\n   * Observable that emits when column filter updates are complete\r\n   */\r\n  readonly columnFiltersUpdated$ = this._columnFiltersUpdated.asObservable();\r\n\r\n  /**\r\n   * Load configuration from backend and populate predefined filters and location options\r\n   * This method is called during service initialization\r\n   */\r\n  private loadConfigurationFromBackend(): void {\r\n    // Load compass configuration\r\n    this.adminService.getCompassConfiguration().subscribe({\r\n      next: (config: CompassConfiguration) => {\r\n        // Store the complete configuration\r\n        this._compassConfiguration.set(config);\r\n        this.processCompassConfiguration(config);\r\n        this._configurationLoaded.set(true);\r\n      },\r\n      error: (error) => {\r\n        console.error('Failed to load compass configuration:', error);\r\n        // Fall back to empty arrays if configuration fails to load\r\n        this._predefinedFilters.set([]);\r\n        this._locationOptions.set({});\r\n        this._configurationLoaded.set(true);\r\n      }\r\n    });\r\n\r\n    // Load external locations for scheduling\r\n    this.adminService.getCompassOutsideLocations().subscribe({\r\n      next: (locations: any) => {\r\n        // Store external locations for use in scheduling location modal\r\n        this._externalLocations.set(locations);\r\n        console.log('External locations loaded:', locations);\r\n      },\r\n      error: (error) => {\r\n        console.error('Failed to load external locations:', error);\r\n        // Set empty locations on error\r\n        this._externalLocations.set({ cnt: 0, locations: [] });\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Process the compass configuration and extract predefined filters and location options\r\n   * @param config The compass configuration from the backend\r\n   */\r\n  private processCompassConfiguration(config: CompassConfiguration): void {\r\n    const predefinedFilters: PredefinedFilter[] = [];\r\n    const locationOptions: { [route: string]: { [subroute: string]: LocationOption[] } } = {};\r\n\r\n    // Process each workflow to extract filter sets\r\n    config.workflows.forEach(workflow => {\r\n      workflow.filterSets.forEach(filterSet => {\r\n        if (filterSet.type === 'PredefinedFilter') {\r\n          // Convert FilterSet to PredefinedFilter\r\n          const predefinedFilter: PredefinedFilter = {\r\n            id: filterSet.id,\r\n            label: filterSet.label,\r\n            route: filterSet.route,\r\n            subroute: filterSet.subroute,\r\n            filters: this.convertFilterSetFiltersToFilterCriteria(filterSet.filters),\r\n            excludeFilters: this.convertFilterSetFiltersToFilterCriteria(filterSet.excludedFiltes),\r\n            isDefault: filterSet.isDefault === 1,\r\n            order: filterSet.sortOrder\r\n          };\r\n          predefinedFilters.push(predefinedFilter);\r\n        } else if (filterSet.type === 'LocationOption') {\r\n          // Convert FilterSet to LocationOption\r\n          const route = filterSet.route;\r\n          let subroute = filterSet.subroute;\r\n          \r\n          // SWAP SUBROUTES FOR PRIOR-AUTH LOCATION OPTIONS ONLY\r\n          // This allows incoming to show scheduling locations and outgoing to show ordering locations\r\n          if (route === 'prior-auth') {\r\n            if (subroute === 'incoming') {\r\n              subroute = 'outgoing';\r\n            } else if (subroute === 'outgoing') {\r\n              subroute = 'incoming';\r\n            }\r\n          }\r\n          \r\n          if (!locationOptions[route]) {\r\n            locationOptions[route] = {};\r\n          }\r\n          if (!locationOptions[route][subroute]) {\r\n            locationOptions[route][subroute] = [];\r\n          }\r\n          \r\n          const locationOption: LocationOption = {\r\n            label: filterSet.label,\r\n            value: filterSet.id,\r\n            filters: this.convertFilterSetFiltersToLocationFilters(filterSet.filters)\r\n          };\r\n          \r\n          locationOptions[route][subroute].push(locationOption);\r\n        }\r\n      });\r\n    });\r\n\r\n    // Sort predefined filters by order\r\n    predefinedFilters.sort((a, b) => (a.order || 0) - (b.order || 0));\r\n    \r\n    // Add 'All Locations' option to each subroute if it doesn't already exist, and sort location options by sortOrder from original filterSet\r\n    Object.keys(locationOptions).forEach(route => {\r\n      Object.keys(locationOptions[route]).forEach(subroute => {\r\n        // Check if 'All Locations' option already exists\r\n        const hasAllOption = locationOptions[route][subroute].some(opt => \r\n          opt.value === 'all' || opt.label === 'All Locations'\r\n        );\r\n        \r\n        // Add 'All Locations' option at the beginning if it doesn't exist\r\n        if (!hasAllOption) {\r\n          locationOptions[route][subroute].unshift({\r\n            label: 'All Locations',\r\n            value: 'all',\r\n            filters: {} // Empty filters means no additional location filtering\r\n          });\r\n        }\r\n        \r\n        // Sort location options alphabetically by label, keeping any 'all' options at the top\r\n        locationOptions[route][subroute].sort((a, b) => {\r\n          // Keep 'all' options at the top\r\n          if ((a.value === 'all' || a.label === 'All Locations') && !(b.value === 'all' || b.label === 'All Locations')) {\r\n            return -1;\r\n          }\r\n          if (!(a.value === 'all' || a.label === 'All Locations') && (b.value === 'all' || b.label === 'All Locations')) {\r\n            return 1;\r\n          }\r\n          \r\n          // For non-'all' options, sort alphabetically by label\r\n          return a.label.localeCompare(b.label);\r\n        });\r\n      });\r\n    });\r\n\r\n    // Update the signals\r\n    this._predefinedFilters.set(predefinedFilters);\r\n    this._locationOptions.set(locationOptions);\r\n  }\r\n\r\n  /**\r\n   * Convert FilterSet filters to FilterCriteria format\r\n   * @param filters Array of FilterSetFilter objects\r\n   * @returns FilterCriteria object\r\n   */\r\n  private convertFilterSetFiltersToFilterCriteria(filters: any[]): FilterCriteria {\r\n    const criteria: FilterCriteria = {};\r\n    \r\n    filters.forEach(filter => {\r\n      const dataElement = filter.dataElement;\r\n      const options = filter.options.map((opt: any) => opt.item);\r\n      \r\n      // Map dataElement names to FilterCriteria properties\r\n      switch (dataElement) {\r\n        case 'workflowStatus':\r\n          criteria.workflowStatus = options;\r\n          break;\r\n        case 'schedulingStatus':\r\n          criteria.schedulingStatus = options;\r\n          break;\r\n        case 'schedulingLocation':\r\n          criteria.schedulingLocation = options;\r\n          break;\r\n        case 'orderingLocation':\r\n          criteria.orderingLocation = options;\r\n          break;\r\n        case 'orderingProvider':\r\n          criteria.orderingProvider = options;\r\n          break;\r\n        default:\r\n          // Handle custom filters\r\n          if (!criteria.customFilters) {\r\n            criteria.customFilters = {};\r\n          }\r\n          criteria.customFilters[dataElement] = options;\r\n          break;\r\n      }\r\n    });\r\n    \r\n    return criteria;\r\n  }\r\n\r\n  /**\r\n   * Convert FilterSet filters to location filters format\r\n   * @param filters Array of FilterSetFilter objects\r\n   * @returns Object with string array values for location filters\r\n   */\r\n  private convertFilterSetFiltersToLocationFilters(filters: any[]): { [key: string]: string[] } {\r\n    const locationFilters: { [key: string]: string[] } = {};\r\n    \r\n    filters.forEach(filter => {\r\n      const dataElement = filter.dataElement;\r\n      const options = filter.options.map((opt: any) => opt.item);\r\n      locationFilters[dataElement] = options;\r\n    });\r\n    \r\n    return locationFilters;\r\n  }\r\n\r\n  /**\r\n   * Reload configuration from backend\r\n   * Useful for refreshing configuration without restarting the application\r\n   */\r\n  reloadConfiguration(): void {\r\n    this._configurationLoaded.set(false);\r\n    this.loadConfigurationFromBackend();\r\n  }\r\n\r\n  /**\r\n   * Check if the configuration has been loaded from the backend\r\n   * Components can use this to wait for configuration before initializing filters\r\n   */\r\n  isConfigurationLoaded(): boolean {\r\n    return this._configurationLoaded();\r\n  }\r\n\r\n  /**\r\n   * Dynamically populate listOfFilter for all filterable columns based on unique values in the worklist data.\r\n   * Call this after loading or updating worklist data.\r\n   */\r\n  updateColumnFiltersFromData(worklist: any[]): void {\r\n    // Set updating flag\r\n    this._updatingColumnFilters.set(true);\r\n    \r\n    // Get current columns and create a mutable copy\r\n    const currentColumns = [...this._columns()];\r\n\r\n    // Capture current filter selections for each column by meaning (not name)\r\n    const previousSelections: { [colMeaning: string]: string[] } = {};\r\n    for (const col of currentColumns) {\r\n      if (col.filterable && col.listOfFilter && col.listOfFilter.length > 0) {\r\n        const selected = col.listOfFilter\r\n          .filter(opt => opt.byDefault)\r\n          .map(opt => opt.value);\r\n        if (selected.length > 0) {\r\n          previousSelections[col.meaning] = selected;\r\n          // console.log(`[ColumnConfig] Preserving filter for ${col.name} (${col.meaning}):`, selected);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Helper function to safely convert values to strings\r\n    const safeString = (value: any): string => {\r\n      if (value === null || value === undefined) return '';\r\n      if (value instanceof Date) return value.toISOString();\r\n      return String(value);\r\n    };\r\n    \r\n    // Workflow Status\r\n    const statusSet = new Set<string>(worklist.map(item => safeString(item.workflowStatus?.status)));\r\n    const statusColumn = currentColumns.find(col => col.name === 'Workflow Status');\r\n    if (statusColumn) {\r\n      statusColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(statusSet).map(status => ({ text: status, value: status }))\r\n      );\r\n    }\r\n    // Order Status (was Item Status)\r\n    const itemStatusSet = new Set<string>(worklist.map(item => safeString(item.subStatus?.subStatus)));\r\n    const itemStatusColumn = currentColumns.find(col => col.name === 'Order Status');\r\n    if (itemStatusColumn) {\r\n      itemStatusColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(itemStatusSet).map(status => ({ text: status, value: status }))\r\n      );\r\n    }\r\n    // Priority\r\n    const prioritySet = new Set<string>(worklist.map(item => safeString(item.priority)));\r\n    const priorityColumn = currentColumns.find(col => col.name === 'Priority');\r\n    if (priorityColumn) {\r\n      priorityColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(prioritySet).map(priority => ({ text: priority, value: priority }))\r\n      );\r\n    }\r\n    // Codes\r\n    const codesSet = new Set<string>(worklist.flatMap(item => \r\n      item.codeList?.map((code: any) => safeString(code.identifier)) || []\r\n    ));\r\n    const codesColumn = currentColumns.find(col => col.name === 'Codes');\r\n    if (codesColumn) {\r\n      codesColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(codesSet).map(code => ({ text: code, value: code }))\r\n      );\r\n    }\r\n    // Payor\r\n    const payorSet = new Set<string>(worklist.flatMap(item => item.payors?.map((p: any) => safeString(p.planName)) || []));\r\n    const payorColumn = currentColumns.find(col => col.name === 'Payor');\r\n    if (payorColumn) {\r\n      payorColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(payorSet).map(plan => ({ text: plan, value: plan }))\r\n      );\r\n    }\r\n    // Ordering Location\r\n    const orderingLocationSet = new Set<string>(worklist.map(item => safeString(item.orderingLocation)));\r\n    const orderingLocationColumn = currentColumns.find(col => col.name === 'Ordering Location');\r\n    if (orderingLocationColumn) {\r\n      orderingLocationColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(orderingLocationSet).map(loc => ({ text: loc, value: loc }))\r\n      );\r\n    }\r\n    // Ordering Provider\r\n    const orderingProviderSet = new Set<string>(worklist.map(item => safeString(item.orderingProvider)));\r\n    const orderingProviderColumn = currentColumns.find(col => col.name === 'Ordering Provider');\r\n    if (orderingProviderColumn) {\r\n      orderingProviderColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(orderingProviderSet).map(provider => ({ text: provider, value: provider }))\r\n      );\r\n    }\r\n    // Scheduling Location\r\n    const schedulingLocationSet = new Set<string>(worklist.map(item => safeString(item.schedulingLocation)));\r\n    const schedulingLocationColumn = currentColumns.find(col => col.name === 'Scheduling Location');\r\n    if (schedulingLocationColumn) {\r\n      schedulingLocationColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(schedulingLocationSet).map(loc => ({ text: loc, value: loc }))\r\n      );\r\n    }\r\n    // Schedule Status\r\n    const scheduleStatusSet = new Set<string>(worklist.map(item => safeString(item.schedule?.state)));\r\n    const scheduleStatusColumn = currentColumns.find(col => col.name === 'Schedule Status');\r\n    if (scheduleStatusColumn) {\r\n      scheduleStatusColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(scheduleStatusSet).map(state => ({ text: state, value: state }))\r\n      );\r\n    }\r\n    // Order Description\r\n    const itemDescriptionSet = new Set<string>(worklist.map(item => safeString(item.itemDescription)));\r\n    const itemDescriptionColumn = currentColumns.find(col => col.name === 'Order Description');\r\n    if (itemDescriptionColumn) {\r\n      itemDescriptionColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(itemDescriptionSet).map(desc => ({ text: desc, value: desc }))\r\n      );\r\n    }\r\n    // Order Date\r\n    const orderDateSet = new Set<string>(worklist.map(item => safeString(item.origOrderDtTm)));\r\n    const orderDateColumn = currentColumns.find(col => col.name === 'Order Date');\r\n    if (orderDateColumn) {\r\n      orderDateColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(orderDateSet).map(date => ({ text: date, value: date }))\r\n      );\r\n    }\r\n    // EDOS\r\n    const edosSet = new Set<string>(worklist.map(item => safeString(item.edosDate)));\r\n    const edosColumn = currentColumns.find(col => col.name === 'EDOS');\r\n    if (edosColumn) {\r\n      edosColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(edosSet).map(date => ({ text: date, value: date }))\r\n      );\r\n    }\r\n    \r\n    // For each filterable column, re-apply previous selections\r\n    for (const col of currentColumns) {\r\n      if (col.filterable && col.listOfFilter && previousSelections[col.meaning]) {\r\n        // console.log(`[ColumnConfig] Restoring filter for ${col.name} (${col.meaning}):`, previousSelections[col.meaning]);\r\n        for (const opt of col.listOfFilter) {\r\n          // Only set byDefault, as 'selected' is not a valid property\r\n          opt.byDefault = previousSelections[col.meaning].includes(opt.value);\r\n        }\r\n      }\r\n    }\r\n\r\n    // Update the signal with the modified columns to trigger reactive updates\r\n    this._columns.set(currentColumns);\r\n    \r\n    // Restore previous selections\r\n    for (const col of currentColumns) {\r\n      if (col.filterable && col.listOfFilter && previousSelections[col.meaning]) {\r\n        const selectedValues = previousSelections[col.meaning];\r\n        for (const opt of col.listOfFilter) {\r\n          opt.byDefault = selectedValues.includes(opt.value);\r\n        }\r\n      }\r\n    }\r\n    \r\n    // Clear updating flag and emit completion event\r\n    this._updatingColumnFilters.set(false);\r\n    this._columnFiltersUpdated.next();\r\n    \r\n    // Column filters updated with worklist items\r\n  }\r\n\r\n  /**\r\n   * Update column filters for feedback worklist data\r\n   */\r\n  updateFeedbackColumnFiltersFromData(feedbackItems: any[]): void {\r\n    // Get current columns and create a mutable copy\r\n    const currentColumns = [...this._columns()];\r\n    \r\n    // Helper function to safely convert values to strings\r\n    const safeString = (value: any): string => {\r\n      if (value === null || value === undefined) return '';\r\n      if (value instanceof Date) return value.toISOString();\r\n      return String(value);\r\n    };\r\n    \r\n    // Submitted By\r\n    const submitterSet = new Set<string>(feedbackItems.map(item => safeString(item.submitted_by_user)));\r\n    const submitterColumn = currentColumns.find(col => col.meaning === 'FEEDBACK_SUBMITTER');\r\n    if (submitterColumn) {\r\n      submitterColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(submitterSet).map(user => ({ text: user, value: user }))\r\n      );\r\n    }\r\n    \r\n    // Feedback Type\r\n    const typeSet = new Set<string>(feedbackItems.map(item => safeString(item.feedback_type)));\r\n    const typeColumn = currentColumns.find(col => col.meaning === 'FEEDBACK_TYPE');\r\n    if (typeColumn) {\r\n      typeColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(typeSet).map(type => ({ \r\n          text: type === 'GENERAL_FEEDBACK' ? 'General Feedback' : 'Worklist Item Feedback', \r\n          value: type \r\n        }))\r\n      );\r\n    }\r\n    \r\n    // Status\r\n    const statusSet = new Set<string>(feedbackItems.map(item => safeString(item.workflow_status?.status)));\r\n    const statusColumn = currentColumns.find(col => col.meaning === 'FEEDBACK_STATUS');\r\n    if (statusColumn) {\r\n      statusColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(statusSet).map(status => ({ text: status, value: status }))\r\n      );\r\n    }\r\n    \r\n    // Priority\r\n    const prioritySet = new Set<string>(feedbackItems.map(item => safeString(item.feedback_priority)));\r\n    const priorityColumn = currentColumns.find(col => col.meaning === 'FEEDBACK_PRIORITY');\r\n    if (priorityColumn) {\r\n      priorityColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(prioritySet).map(priority => ({ text: priority, value: priority }))\r\n      );\r\n    }\r\n    \r\n    // Assigned To\r\n    const assignedSet = new Set<string>(feedbackItems.map(item => safeString(item.assigned_to || 'Unassigned')));\r\n    const assignedColumn = currentColumns.find(col => col.meaning === 'FEEDBACK_ASSIGNED_TO');\r\n    if (assignedColumn) {\r\n      assignedColumn.listOfFilter = this.sortFilterOptions(\r\n        Array.from(assignedSet).map(assignee => ({ text: assignee, value: assignee }))\r\n      );\r\n    }\r\n    \r\n    // Update the signal with the modified columns to trigger reactive updates\r\n    this._columns.set(currentColumns);\r\n  }\r\n\r\n  /**\r\n   * Returns the column configuration for a given route URL.\r\n   * Inspects the URL and returns the correct columns for the route.\r\n   * Defaults to 'prior-auth' if no match is found.\r\n   */\r\n  getColumnsForCurrentRoute(url: string): ColumnItem[] {\r\n    if (url.includes('prior-auth')) {\r\n      return this.getColumns('prior-auth');\r\n    } else if (url.includes('oral-chemotherapy')) {\r\n      return this.getColumns('oral-chemotherapy');\r\n    } else if (url.includes('feedback')) {\r\n      return this.getColumns('feedback');\r\n    } else if (url.includes('future')) {\r\n      return this.getColumns('future');\r\n    } else if (url.includes('test-data')) {\r\n      return this.getColumns('test-data');\r\n    } else {\r\n      return this.getColumns('prior-auth'); // default\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Returns the default column configuration for the app for a given route.\r\n   * If no route is provided, returns all columns for all routes.\r\n   * Used for initializing user preferences or fallback.\r\n   */\r\n  getDefaultColumns(route: string = 'prior-auth'): ColumnItem[] {\r\n    return this.getColumns(route).map(col => ({ ...col }));\r\n  }\r\n\r\n  /**\r\n   * Overrides the current column configuration for a specific route with the provided array.\r\n   * Used when loading user preferences from the database.\r\n   */\r\n  overrideColumns(columns: ColumnItem[], route: string): void {\r\n    // Replace only the columns for the given route using signal update\r\n    const currentColumns = this._columns();\r\n    const updatedColumns = currentColumns\r\n      .filter(col => col.route !== route)\r\n      .concat(columns.map(col => ({ ...col, route })));\r\n    \r\n    this._columns.set(updatedColumns);\r\n  }\r\n\r\n  /**\r\n   * Returns all known routes for the app that have column configuration.\r\n   */\r\n  getAllRoutes(): string[] {\r\n    return Array.from(new Set(this._columns().map(col => col.route)));\r\n  }\r\n\r\n  /**\r\n   * Updates the width of a specific column for a given route.\r\n   * @param route The route string (e.g. 'prior-auth')\r\n   * @param columnKey The column meaning/key to update\r\n   * @param width The new width in pixels\r\n   */\r\n  updateColumnWidth(route: string, columnKey: string, width: number): void {\r\n    const currentColumns = [...this._columns()];\r\n    const column = currentColumns.find(col => col.route === route && col.meaning === columnKey);\r\n    if (column) {\r\n      column.width = width;\r\n      // Update the signal to trigger reactive updates\r\n      this._columns.set(currentColumns);\r\n    }\r\n    \r\n    // Store in localStorage for persistence\r\n    this.saveColumnWidths();\r\n  }\r\n\r\n  /**\r\n   * Loads column widths from localStorage\r\n   */\r\n  loadColumnWidths(): void {\r\n    const saved = localStorage.getItem('compass_column_widths');\r\n    if (saved) {\r\n      try {\r\n        const widths = JSON.parse(saved);\r\n        const currentColumns = [...this._columns()];\r\n        let hasChanges = false;\r\n        \r\n        currentColumns.forEach(column => {\r\n          const key = `${column.route}_${column.meaning}`;\r\n          if (widths[key] && widths[key] !== column.width) {\r\n            column.width = widths[key];\r\n            hasChanges = true;\r\n          }\r\n        });\r\n        \r\n        // Only update signal if there were actual changes\r\n        if (hasChanges) {\r\n          this._columns.set(currentColumns);\r\n        }\r\n      } catch (error) {\r\n        // Handle error loading column widths\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Saves column widths to localStorage\r\n   */\r\n  private saveColumnWidths(): void {\r\n    const widths: { [key: string]: number } = {};\r\n    const currentColumns = this._columns();\r\n    currentColumns.forEach(column => {\r\n      if (column.width) {\r\n        const key = `${column.route}_${column.meaning}`;\r\n        widths[key] = column.width;\r\n      }\r\n    });\r\n    \r\n    // Also save workflow and actions column widths if they exist\r\n    const workflowWidth = localStorage.getItem('compass_workflow_width');\r\n    const actionsWidth = localStorage.getItem('compass_actions_width');\r\n    if (workflowWidth) widths['workflow'] = parseInt(workflowWidth);\r\n    if (actionsWidth) widths['actions'] = parseInt(actionsWidth);\r\n\r\n    localStorage.setItem('compass_column_widths', JSON.stringify(widths));\r\n  }\r\n\r\n  /**\r\n   * Resets all column widths to default (removes custom widths)\r\n   * @param route The route to reset columns for (optional, defaults to all routes)\r\n   */\r\n  resetColumnWidths(route?: string): void {\r\n    // Reset column widths in memory using signal update\r\n    const currentColumns = [...this._columns()];\r\n    let hasChanges = false;\r\n    \r\n    currentColumns.forEach(column => {\r\n      if (!route || column.route === route) {\r\n        if (column.width !== undefined) {\r\n          delete column.width;\r\n          hasChanges = true;\r\n        }\r\n      }\r\n    });\r\n    \r\n    // Update signal to trigger reactive updates if changes were made\r\n    if (hasChanges) {\r\n      this._columns.set(currentColumns);\r\n    }\r\n\r\n    // Clear localStorage for column widths\r\n    if (route) {\r\n      // Clear only specific route widths\r\n      const saved = localStorage.getItem('compass_column_widths');\r\n      if (saved) {\r\n        try {\r\n          const widths = JSON.parse(saved);\r\n          Object.keys(widths).forEach(key => {\r\n            if (key.startsWith(`${route}_`)) {\r\n              delete widths[key];\r\n            }\r\n          });\r\n          localStorage.setItem('compass_column_widths', JSON.stringify(widths));\r\n        } catch (error) {\r\n          // console.warn('Error resetting column widths:', error);\r\n        }\r\n      }\r\n    } else {\r\n      // Clear all column widths\r\n      localStorage.removeItem('compass_column_widths');\r\n      localStorage.removeItem('compass_workflow_width');\r\n      localStorage.removeItem('compass_actions_width');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Gets default column widths for a route\r\n   */\r\n  getDefaultColumnWidths(route: string): { [columnKey: string]: number } {\r\n    // Define sensible default widths based on content\r\n    const defaults: { [key: string]: { [columnKey: string]: number } } = {\r\n      'prior-auth': {\r\n        'PATINFO': 200,\r\n        'WORKFLOWSTATUS': 120,\r\n        'ITEMSTATUS': 120,\r\n        'PRIORITY': 100,\r\n        'CODES': 150,\r\n        'PAYOR': 200,\r\n        'ORDERINGLOCATION': 180,\r\n        'ORDERINGPROVIDER': 180,\r\n        'SCHEDULINGLOCATION': 120,\r\n        'SCHEDULESTATUS': 120,\r\n        'ITEM': 250,\r\n        'ORDERDTTM': 140,\r\n        'EDOS': 140,\r\n        'ASSIGNEDUSER': 100,\r\n        'workflow': 200,\r\n        'actions': 140\r\n      },\r\n      'feedback': {\r\n        'FEEDBACK_SUBMITTER': 180,\r\n        'FEEDBACK_TYPE': 140,\r\n        'FEEDBACK_STATUS': 120,\r\n        'FEEDBACK_PRIORITY': 100,\r\n        'FEEDBACK_SUBMISSION_DATE': 160,\r\n        'FEEDBACK_ASSIGNED_TO': 150,\r\n        'workflow': 200,\r\n        'actions': 140\r\n      }\r\n    };\r\n    \r\n    return defaults[route] || {};\r\n  }\r\n\r\n  /**\r\n   * Updates the display property of a column and triggers reactive updates\r\n   * @param route The route string\r\n   * @param columnMeaning The column meaning/key\r\n   * @param display Whether the column should be displayed\r\n   */\r\n  updateColumnDisplay(route: string, columnMeaning: string, display: boolean): void {\r\n    const currentColumns = [...this._columns()];\r\n    const column = currentColumns.find(col => col.route === route && col.meaning === columnMeaning);\r\n    \r\n    if (column && column.display !== display) {\r\n      column.display = display;\r\n      this._columns.set(currentColumns);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Triggers a signal update to force reactive updates in consuming components\r\n   * Useful when column properties are modified directly\r\n   */\r\n  triggerUpdate(): void {\r\n    const currentColumns = [...this._columns()];\r\n    this._columns.set(currentColumns);\r\n  }\r\n\r\n  /**\r\n   * Updates the columns signal without triggering the columnFiltersUpdated$ observable\r\n   * Used internally to prevent infinite loops when applying visual filters\r\n   */\r\n  updateColumnsSilently(): void {\r\n    const currentColumns = [...this._columns()];\r\n    this._columns.set(currentColumns);\r\n  }\r\n\r\n  /**\r\n   * Reorders columns based on a new array of column orders\r\n   * @param route The route to reorder columns for\r\n   * @param newOrder Array of column meanings in the desired order\r\n   */\r\n  reorderColumns(route: string, newOrder: string[]): void {\r\n    const currentColumns = [...this._columns()];\r\n    const routeColumns = currentColumns.filter(col => col.route === route);\r\n    \r\n    // Update order values based on new positions\r\n    newOrder.forEach((meaning, index) => {\r\n      const column = routeColumns.find(col => col.meaning === meaning);\r\n      if (column) {\r\n        column.order = index + 1;\r\n      }\r\n    });\r\n    \r\n    // Update the signal to trigger reactive updates\r\n    this._columns.set(currentColumns);\r\n  }\r\n\r\n  /**\r\n   * Moves a column from one position to another within the same route\r\n   * @param route The route containing the column\r\n   * @param fromIndex Current index of the column\r\n   * @param toIndex Target index for the column\r\n   */\r\n  moveColumn(route: string, fromIndex: number, toIndex: number): void {\r\n    const currentColumns = [...this._columns()];\r\n    const routeColumns = currentColumns\r\n      .filter(col => col.route === route)\r\n      .sort((a, b) => a.order - b.order);\r\n    \r\n    if (fromIndex >= 0 && fromIndex < routeColumns.length && \r\n        toIndex >= 0 && toIndex < routeColumns.length && \r\n        fromIndex !== toIndex) {\r\n      \r\n      // Remove the column from its current position and insert at new position\r\n      const [movedColumn] = routeColumns.splice(fromIndex, 1);\r\n      routeColumns.splice(toIndex, 0, movedColumn);\r\n      \r\n      // Update order values to reflect new positions\r\n      routeColumns.forEach((column, index) => {\r\n        column.order = index + 1;\r\n      });\r\n      \r\n      // Update the signal to trigger reactive updates\r\n      this._columns.set(currentColumns);\r\n    }\r\n  }\r\n\r\n  // === PREDEFINED FILTER METHODS ===\r\n\r\n  /**\r\n   * Returns the predefined filters for a given route and subroute\r\n   * @param route The route string (e.g. 'prior-auth')\r\n   * @param subroute The subroute string (e.g. 'incoming', 'outgoing')\r\n   */\r\n  getPredefinedFilters(route: string, subroute?: string): PredefinedFilter[] {\r\n    const filters = this.predefinedFiltersForRoute()(route, subroute);\r\n    return filters;\r\n  }\r\n\r\n  /**\r\n   * Returns the default predefined filter for a given route and subroute\r\n   * @param route The route string (e.g. 'prior-auth')\r\n   * @param subroute The subroute string (e.g. 'incoming', 'outgoing')\r\n   */\r\n  getDefaultPredefinedFilter(route: string, subroute?: string): PredefinedFilter | null {\r\n    const filters = this.getPredefinedFilters(route, subroute);\r\n    return filters.find(filter => filter.isDefault) || null;\r\n  }\r\n\r\n  /**\r\n   * Returns a specific predefined filter by ID and route\r\n   * @param route The route string (e.g. 'prior-auth')\r\n   * @param filterId The filter ID (e.g. 'work-items')\r\n   */\r\n  getPredefinedFilter(route: string, filterId: string): PredefinedFilter | null {\r\n    const filters = this.getPredefinedFilters(route);\r\n    return filters.find(filter => filter.id === filterId) || null;\r\n  }\r\n\r\n  /**\r\n   * Updates a predefined filter configuration\r\n   * @param route The route string\r\n   * @param filterId The filter ID to update\r\n   * @param updates Partial filter object with updates\r\n   */\r\n  updatePredefinedFilter(route: string, filterId: string, updates: Partial<PredefinedFilter>): void {\r\n    const currentFilters = [...this._predefinedFilters()];\r\n    const filterIndex = currentFilters.findIndex(f => f.route === route && f.id === filterId);\r\n    \r\n    if (filterIndex !== -1) {\r\n      currentFilters[filterIndex] = { ...currentFilters[filterIndex], ...updates };\r\n      this._predefinedFilters.set(currentFilters);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Adds a new predefined filter\r\n   * @param filter The complete predefined filter configuration\r\n   */\r\n  addPredefinedFilter(filter: PredefinedFilter): void {\r\n    const currentFilters = [...this._predefinedFilters()];\r\n    currentFilters.push(filter);\r\n    this._predefinedFilters.set(currentFilters);\r\n  }\r\n\r\n  /**\r\n   * Removes a predefined filter\r\n   * @param route The route string\r\n   * @param filterId The filter ID to remove\r\n   */\r\n  removePredefinedFilter(route: string, filterId: string): void {\r\n    const currentFilters = this._predefinedFilters().filter(\r\n      f => !(f.route === route && f.id === filterId)\r\n    );\r\n    this._predefinedFilters.set(currentFilters);\r\n  }\r\n} ","import { Injectable, signal, computed, effect } from '@angular/core';\r\nimport { CustomWorklist, CustomWorklistCreate } from '../models/custom-worklist.model';\r\nimport { PredefinedFilter } from '../models/predefined-filter.model';\r\nimport { UserPreferencesService } from './user-preferences.service';\r\nimport { MessagingService } from './messaging.service';\r\n\r\n/**\r\n * CustomWorklistService\r\n *\r\n * Manages user-created custom worklists for the Prior Authorization feature.\r\n * Custom worklists are stored as JSON in user preferences (not in a separate table).\r\n *\r\n * Features:\r\n * - Signal-based state management\r\n * - CRUD operations for custom worklists\r\n * - Automatic persistence to user preferences\r\n * - Conversion to PredefinedFilter for compatibility with existing filter infrastructure\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class CustomWorklistService {\r\n  /**\r\n   * Private writable signal containing all custom worklists for current user\r\n   */\r\n  private _customWorklists = signal<CustomWorklist[]>([]);\r\n\r\n  /**\r\n   * Private writable signal for the currently active custom worklist\r\n   */\r\n  private _activeWorklist = signal<CustomWorklist | null>(null);\r\n\r\n  /**\r\n   * Read-only access to custom worklists\r\n   */\r\n  readonly customWorklists = this._customWorklists.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to active worklist\r\n   */\r\n  readonly activeWorklist = this._activeWorklist.asReadonly();\r\n\r\n  /**\r\n   * Computed signal that returns custom worklists for a specific route\r\n   */\r\n  readonly worklistsForRoute = computed(() => {\r\n    const worklists = this._customWorklists();\r\n    return (route: string, subroute?: string) => {\r\n      return worklists.filter(w =>\r\n        w.route === route && (!subroute || w.subroute === subroute)\r\n      );\r\n    };\r\n  });\r\n\r\n  /**\r\n   * Computed signal that returns the default worklist for a route\r\n   */\r\n  readonly defaultWorklistForRoute = computed(() => {\r\n    return (route: string, subroute?: string) => {\r\n      const worklists = this.worklistsForRoute()(route, subroute);\r\n      return worklists.find(w => w.isDefault) || null;\r\n    };\r\n  });\r\n\r\n  constructor(\r\n    private userPreferencesService: UserPreferencesService,\r\n    private messagingService: MessagingService\r\n  ) {\r\n    // Load custom worklists from user preferences when available\r\n    this.loadFromUserPreferences();\r\n\r\n    // React to user preferences changes and reload worklists\r\n    effect(() => {\r\n      const userData = this.userPreferencesService.userData();\r\n      if (userData?.preferences?.customWorklists) {\r\n        this._customWorklists.set(userData.preferences.customWorklists);\r\n      }\r\n    }, { allowSignalWrites: true });\r\n  }\r\n\r\n  /**\r\n   * Load custom worklists from user preferences\r\n   * Called automatically on service init and when user preferences change\r\n   */\r\n  loadFromUserPreferences(): void {\r\n    const userData = this.userPreferencesService.getUserData();\r\n    console.log('[CustomWorklistService] loadFromUserPreferences - userData:', userData);\r\n    const worklists = userData?.preferences?.customWorklists || [];\r\n    console.log('[CustomWorklistService] loadFromUserPreferences - worklists:', worklists);\r\n    this._customWorklists.set(worklists);\r\n  }\r\n\r\n  /**\r\n   * Get all custom worklists for a specific route/subroute\r\n   */\r\n  getWorklistsForRoute(route: string, subroute?: string): CustomWorklist[] {\r\n    return this.worklistsForRoute()(route, subroute);\r\n  }\r\n\r\n  /**\r\n   * Get a custom worklist by ID\r\n   */\r\n  getWorklistById(id: string): CustomWorklist | undefined {\r\n    return this._customWorklists().find(w => w.id === id);\r\n  }\r\n\r\n  /**\r\n   * Create a new custom worklist\r\n   * Generates a unique ID and timestamps, then persists to user preferences\r\n   */\r\n  createWorklist(worklistData: CustomWorklistCreate): CustomWorklist {\r\n    const newWorklist: CustomWorklist = {\r\n      id: this.generateId(),\r\n      ...worklistData,\r\n      createdDate: new Date().toISOString(),\r\n      modifiedDate: new Date().toISOString()\r\n    };\r\n\r\n    // If this is set as default, clear default flag from other worklists in same route/subroute\r\n    if (newWorklist.isDefault) {\r\n      this.clearDefaultForRoute(newWorklist.route, newWorklist.subroute);\r\n    }\r\n\r\n    // Add to list\r\n    const updatedWorklists = [...this._customWorklists(), newWorklist];\r\n    this._customWorklists.set(updatedWorklists);\r\n\r\n    // Persist to backend\r\n    this.saveToUserPreferences();\r\n\r\n    this.messagingService.success(`Custom worklist \"${newWorklist.name}\" created successfully`);\r\n    return newWorklist;\r\n  }\r\n\r\n  /**\r\n   * Update an existing custom worklist\r\n   */\r\n  updateWorklist(id: string, updates: Partial<CustomWorklistCreate>): void {\r\n    const worklists = this._customWorklists();\r\n    const index = worklists.findIndex(w => w.id === id);\r\n\r\n    if (index === -1) {\r\n      this.messagingService.error('Worklist not found');\r\n      return;\r\n    }\r\n\r\n    const existingWorklist = worklists[index];\r\n    const updatedWorklist: CustomWorklist = {\r\n      ...existingWorklist,\r\n      ...updates,\r\n      modifiedDate: new Date().toISOString()\r\n    };\r\n\r\n    // If this is being set as default, clear default flag from other worklists\r\n    if (updates.isDefault && !existingWorklist.isDefault) {\r\n      this.clearDefaultForRoute(updatedWorklist.route, updatedWorklist.subroute);\r\n    }\r\n\r\n    // Update the list\r\n    const updatedWorklists = [...worklists];\r\n    updatedWorklists[index] = updatedWorklist;\r\n    this._customWorklists.set(updatedWorklists);\r\n\r\n    // Update active worklist if it's the one being edited\r\n    if (this._activeWorklist()?.id === id) {\r\n      this._activeWorklist.set(updatedWorklist);\r\n    }\r\n\r\n    // Persist to backend\r\n    this.saveToUserPreferences();\r\n\r\n    this.messagingService.success(`Custom worklist \"${updatedWorklist.name}\" updated successfully`);\r\n  }\r\n\r\n  /**\r\n   * Delete a custom worklist\r\n   */\r\n  deleteWorklist(id: string): void {\r\n    const worklists = this._customWorklists();\r\n    const worklistToDelete = worklists.find(w => w.id === id);\r\n\r\n    if (!worklistToDelete) {\r\n      this.messagingService.error('Worklist not found');\r\n      return;\r\n    }\r\n\r\n    // Remove from list\r\n    const updatedWorklists = worklists.filter(w => w.id !== id);\r\n    this._customWorklists.set(updatedWorklists);\r\n\r\n    // Clear active worklist if it's the one being deleted\r\n    if (this._activeWorklist()?.id === id) {\r\n      this._activeWorklist.set(null);\r\n    }\r\n\r\n    // Persist to backend\r\n    this.saveToUserPreferences();\r\n\r\n    this.messagingService.success(`Custom worklist \"${worklistToDelete.name}\" deleted successfully`);\r\n  }\r\n\r\n  /**\r\n   * Duplicate an existing worklist\r\n   */\r\n  duplicateWorklist(id: string): CustomWorklist | null {\r\n    const originalWorklist = this.getWorklistById(id);\r\n\r\n    if (!originalWorklist) {\r\n      this.messagingService.error('Worklist not found');\r\n      return null;\r\n    }\r\n\r\n    const duplicateData: CustomWorklistCreate = {\r\n      name: `${originalWorklist.name} (Copy)`,\r\n      route: originalWorklist.route,\r\n      subroute: originalWorklist.subroute,\r\n      filters: { ...originalWorklist.filters },\r\n      excludeFilters: originalWorklist.excludeFilters ? { ...originalWorklist.excludeFilters } : undefined,\r\n      isDefault: false // Duplicates are never default\r\n    };\r\n\r\n    return this.createWorklist(duplicateData);\r\n  }\r\n\r\n  /**\r\n   * Set a worklist as active\r\n   */\r\n  setActiveWorklist(id: string | null): void {\r\n    if (id === null) {\r\n      this._activeWorklist.set(null);\r\n      return;\r\n    }\r\n\r\n    const worklist = this.getWorklistById(id);\r\n    if (worklist) {\r\n      this._activeWorklist.set(worklist);\r\n    } else {\r\n      this.messagingService.error('Worklist not found');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear the active worklist\r\n   */\r\n  clearActiveWorklist(): void {\r\n    this._activeWorklist.set(null);\r\n  }\r\n\r\n  /**\r\n   * Convert a CustomWorklist to PredefinedFilter for compatibility with existing infrastructure\r\n   */\r\n  toPredefinedFilter(worklist: CustomWorklist): PredefinedFilter {\r\n    return {\r\n      id: `custom-${worklist.id}`,\r\n      label: worklist.name,\r\n      route: worklist.route,\r\n      subroute: worklist.subroute,\r\n      filters: worklist.filters,\r\n      excludeFilters: worklist.excludeFilters,\r\n      isDefault: worklist.isDefault,\r\n      order: 0 // Custom worklists appear first\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Clear default flag from all worklists in a route/subroute\r\n   */\r\n  private clearDefaultForRoute(route: string, subroute?: string): void {\r\n    const worklists = this._customWorklists();\r\n    const updatedWorklists = worklists.map(w => {\r\n      if (w.route === route && w.subroute === subroute && w.isDefault) {\r\n        return { ...w, isDefault: false };\r\n      }\r\n      return w;\r\n    });\r\n    this._customWorklists.set(updatedWorklists);\r\n  }\r\n\r\n  /**\r\n   * Save custom worklists to user preferences\r\n   * This persists the worklists to the backend as JSON\r\n   */\r\n  private saveToUserPreferences(): void {\r\n    const userData = this.userPreferencesService.getUserData();\r\n    if (!userData) {\r\n      this.messagingService.error('No user data available');\r\n      return;\r\n    }\r\n\r\n    // Update user preferences with current worklists\r\n    const updatedPreferences = {\r\n      ...userData.preferences,\r\n      customWorklists: this._customWorklists()\r\n    };\r\n\r\n    // Update user data (will trigger save via UserPreferencesService)\r\n    this.userPreferencesService.updatePreferences(updatedPreferences);\r\n\r\n    // Explicitly save to backend\r\n    this.userPreferencesService.saveUserPreferences();\r\n  }\r\n\r\n  /**\r\n   * Generate a unique ID for a new worklist\r\n   * Uses timestamp + random number for uniqueness\r\n   */\r\n  private generateId(): string {\r\n    return `worklist-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n  }\r\n}\r\n","import { Injectable, signal, computed } from '@angular/core';\r\nimport { Observable, of, throwError, forkJoin } from 'rxjs';\r\nimport { map, catchError, tap } from 'rxjs/operators';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { \r\n  FeedbackItem, \r\n  FeedbackMilestoneUpdateRequest, \r\n  FeedbackStatusUpdateRequest,\r\n  FeedbackServiceResponse,\r\n  FeedbackFilterOptions,\r\n  FeedbackSubmissionData \r\n} from '../models/feedback.model';\r\nimport { MessagingService } from './messaging.service';\r\n\r\n/**\r\n * FeedbackWorklistService - Signal-based service for managing feedback worklist items\r\n * \r\n * This service manages the feedback worklist data using Angular signals for reactive state\r\n * management. It interfaces with the cov_compass_service CCL script to perform CRUD\r\n * operations on feedback worklist items.\r\n * \r\n * FEATURES:\r\n * - Signal-based reactive state management\r\n * - Integration with COMPASS CCL backend services\r\n * - Feedback worklist item management (CRUD operations)\r\n * - Milestone tracking and updates\r\n * - Real-time filtering and sorting\r\n * - Error handling with user messaging\r\n * \r\n * SIGNAL ARCHITECTURE:\r\n * - Private writable signals for internal state management\r\n * - Public readonly signals for component consumption\r\n * - Computed signals for derived state (filtering, sorting)\r\n * \r\n * CCL INTEGRATION:\r\n * - Uses cov_compass_service with requestType=\"getWorklist\" and worklistType=\"FEEDBACK\"\r\n * - Calls getFeedbackItemById for detailed feedback data\r\n * - Updates milestones via updateFeedbackMilestone requests\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FeedbackWorklistService {\r\n\r\n  // === PRIVATE SIGNALS FOR STATE MANAGEMENT ===\r\n\r\n  /**\r\n   * Core feedback worklist items from the database\r\n   */\r\n  private _feedbackItems = signal<FeedbackItem[]>([]);\r\n\r\n  /**\r\n   * Loading state for the entire worklist\r\n   */\r\n  private _loading = signal<boolean>(false);\r\n\r\n  /**\r\n   * Set of feedback item IDs currently being updated\r\n   */\r\n  private _updatingItems = signal<Set<number>>(new Set());\r\n\r\n  /**\r\n   * Signal tracking which items are currently loading their detailed information\r\n   * Used to show individual loading states for progressive updates\r\n   */\r\n  private _loadingDetails = signal<Set<number>>(new Set());\r\n\r\n  /**\r\n   * Current filter settings\r\n   */\r\n  private _filterOptions = signal<FeedbackFilterOptions>({\r\n    status_filter: 'all',\r\n    priority_filter: 'all',\r\n    type_filter: 'all',\r\n    days_filter: 30,\r\n    assigned_to_me: false\r\n  });\r\n\r\n  /**\r\n   * Error state for the service\r\n   */\r\n  private _error = signal<string | null>(null);\r\n\r\n  // === PUBLIC READONLY SIGNALS ===\r\n\r\n  /**\r\n   * Read-only access to feedback items\r\n   */\r\n  readonly feedbackItems = this._feedbackItems.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to loading state\r\n   */\r\n  readonly loading = this._loading.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to filter options\r\n   */\r\n  readonly filterOptions = this._filterOptions.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to error state\r\n   */\r\n  readonly error = this._error.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to the loading details state\r\n   * Components can use this to show individual item loading indicators\r\n   */\r\n  readonly loadingDetails = this._loadingDetails.asReadonly();\r\n\r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n\r\n  /**\r\n   * Filtered feedback items based on current filter options\r\n   */\r\n  readonly filteredItems = computed(() => {\r\n    const items = this._feedbackItems();\r\n    const filters = this._filterOptions();\r\n\r\n    return items.filter(item => {\r\n      // Status filter\r\n      if (filters.status_filter !== 'all' && item.workflow_status.status !== filters.status_filter) {\r\n        return false;\r\n      }\r\n\r\n      // Priority filter\r\n      if (filters.priority_filter !== 'all' && item.feedback_priority !== filters.priority_filter) {\r\n        return false;\r\n      }\r\n\r\n      // Type filter\r\n      if (filters.type_filter !== 'all' && item.feedback_type !== filters.type_filter) {\r\n        return false;\r\n      }\r\n\r\n      // Days filter\r\n      if (filters.days_filter !== 'all') {\r\n        const daysDiff = Math.floor((Date.now() - new Date(item.submission_datetime).getTime()) / (1000 * 60 * 60 * 24));\r\n        if (daysDiff > filters.days_filter) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Assigned to me filter (would need current user context)\r\n      if (filters.assigned_to_me && !item.assigned_to_person_id) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n  });\r\n\r\n  /**\r\n   * Count of items by status for summary display\r\n   */\r\n  readonly itemCounts = computed(() => {\r\n    const items = this._feedbackItems();\r\n    return {\r\n      total: items.length,\r\n      received: items.filter(item => item.workflow_status.status === 'RECEIVED').length,\r\n      triaged: items.filter(item => item.workflow_status.status === 'TRIAGED').length,\r\n      assigned: items.filter(item => item.workflow_status.status === 'ASSIGNED').length,\r\n      in_progress: items.filter(item => item.workflow_status.status === 'IN_PROGRESS').length,\r\n      resolved: items.filter(item => item.workflow_status.status === 'RESOLVED').length,\r\n      closed: items.filter(item => item.workflow_status.status === 'CLOSED').length\r\n    };\r\n  });\r\n\r\n  /**\r\n   * Function to check if an item is currently being updated\r\n   */\r\n  readonly isItemUpdating = computed(() => \r\n    (itemId: number) => this._updatingItems().has(itemId)\r\n  );\r\n\r\n  constructor(\r\n    private customService: CustomService,\r\n    private messagingService: MessagingService\r\n  ) {}\r\n\r\n  // === PUBLIC METHODS ===\r\n\r\n  /**\r\n   * Load the feedback worklist from the backend\r\n   */\r\n  loadFeedbackWorklist(): Observable<FeedbackItem[]> {\r\n    this._loading.set(true);\r\n    this._error.set(null);\r\n\r\n    return new Observable(observer => {\r\n      // Setup CustomService call to cov_compass_service\r\n      this.customService.load(\r\n        {\r\n          patientSource: [{ personId: 0, encntrId: 0 }],\r\n          customScript: {\r\n            script: [{\r\n              name: 'cov_compass_service:group1',\r\n              run: 'pre',\r\n              id: 'feedbackWorklist',\r\n              parameters: {\r\n                requestType: 'getWorklist',\r\n                worklistType: 'FEEDBACK'\r\n              }\r\n            }],\r\n            clearPatientList: 1\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get('feedbackWorklist');\r\n            \r\n            // Handle different response structures\r\n            let qualData: any[] = [];\r\n            \r\n            if (response?.qual && Array.isArray(response.qual)) {\r\n              // Direct response with qual array (like your sample)\r\n              qualData = response.qual;\r\n            } else if (response?.reply?.qual && Array.isArray(response.reply.qual)) {\r\n              // Wrapped response with reply.qual\r\n              qualData = response.reply.qual;\r\n            } else if (response?.statusData?.status === 'S' && response?.qual && Array.isArray(response.qual)) {\r\n              // Status wrapper response\r\n              qualData = response.qual;\r\n            }\r\n            \r\n            if (qualData.length > 0) {\r\n              // Success - parse feedback items\r\n              const feedbackItems = this.parseFeedbackWorklistResponse(qualData);\r\n              \r\n              // First, immediately display the basic feedback items\r\n              // console.log('[FeedbackWorklistService] Displaying basic feedback items immediately:', feedbackItems.length, 'items');\r\n              this._feedbackItems.set(feedbackItems);\r\n              observer.next(feedbackItems);\r\n              \r\n              // Then fetch detailed information for each item individually\r\n              // This allows the UI to show basic data immediately while details load progressively\r\n              this.loadDetailedFeedbackData(feedbackItems);\r\n              \r\n              observer.complete();\r\n            } else {\r\n              const errorMessage = 'No feedback items found in response';\r\n              this.handleError(errorMessage);\r\n              observer.error(new Error(errorMessage));\r\n            }\r\n          } catch (error) {\r\n            this.handleError('Error processing feedback worklist response', error);\r\n            observer.error(error);\r\n          } finally {\r\n            this._loading.set(false);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Load detailed feedback data for a list of feedback items\r\n   * This method starts all detail requests in parallel but doesn't wait for them to complete\r\n   * The UI will show basic data immediately and update progressively as details arrive\r\n   */\r\n  private loadDetailedFeedbackData(feedbackItems: FeedbackItem[]): void {\r\n    // For each feedback item, load the detailed feedback data\r\n    const detailRequests = feedbackItems.map(item => {\r\n      const itemId = item.compass_worklist_id;\r\n      // console.log(`[FeedbackWorklistService] Fetching details for feedback item with compass_worklist_id: ${itemId}`);\r\n      \r\n      // Mark this item as loading details\r\n      this._loadingDetails.update(current => new Set([...current, itemId]));\r\n      \r\n      return this.getFeedbackItemById(itemId).pipe(\r\n        map(feedbackData => {\r\n          // Update the specific item in the worklist with detailed information\r\n          const updatedItem = this.mergeFeedbackData(item, feedbackData);\r\n          this.updateFeedbackItem(updatedItem);\r\n          // console.log(`[FeedbackWorklistService] Updated item ${updatedItem.compass_worklist_id} with detailed information`);\r\n          return updatedItem;\r\n        }),\r\n        catchError(error => {\r\n          // console.warn(`Failed to load details for feedback item ${itemId}:`, error);\r\n          return of(item); // Return the base item if detail loading fails\r\n        })\r\n      );\r\n    });\r\n\r\n    // Start all detail requests in parallel but don't wait for them to complete\r\n    // The UI will show basic data immediately and update progressively as details arrive\r\n    detailRequests.forEach(observable => {\r\n      observable.subscribe({\r\n        next: (detailedItem) => {\r\n          // Remove from loading details when complete\r\n          if (detailedItem) {\r\n            this._loadingDetails.update(current => {\r\n              const newSet = new Set(current);\r\n              newSet.delete(detailedItem.compass_worklist_id);\r\n              return newSet;\r\n            });\r\n          }\r\n        },\r\n        error: (error) => {\r\n          // console.error('[FeedbackWorklistService] Error fetching item details:', error);\r\n          // Remove from loading details on error\r\n          this._loadingDetails.update(current => {\r\n            const newSet = new Set(current);\r\n            // Note: We don't know which item failed, so we can't remove it specifically\r\n            // The loading state will clear when the observable completes\r\n            return newSet;\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get detailed feedback data by ID\r\n   */\r\n  getFeedbackItemById(feedbackId: number): Observable<FeedbackSubmissionData> {\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          patientSource: [{ personId: 0, encntrId: 0 }],\r\n          customScript: {\r\n            script: [{\r\n              name: 'cov_compass_service:group1',\r\n              run: 'pre',\r\n              id: `feedbackItem_${feedbackId}`,\r\n              parameters: {\r\n                requestType: 'getFeedbackItemById',\r\n                requestId: feedbackId\r\n              }\r\n            }],\r\n            clearPatientList: 1\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(`feedbackItem_${feedbackId}`);\r\n            \r\n            // Handle different response structures for getFeedbackItemById\r\n            let qualData: any[] = [];\r\n            \r\n            if (response?.qual && Array.isArray(response.qual)) {\r\n              // Direct response with qual array (like the sample response)\r\n              qualData = response.qual;\r\n            } else if (response?.reply?.qual && Array.isArray(response.reply.qual)) {\r\n              // Wrapped response with reply.qual\r\n              qualData = response.reply.qual;\r\n            } else if (response?.statusData?.status === 'S' && response?.qual && Array.isArray(response.qual)) {\r\n              // Status wrapper response\r\n              qualData = response.qual;\r\n            }\r\n            \r\n            if (qualData.length > 0) {\r\n              // Extract feedback data from the qual array structure\r\n              const feedbackData = this.parseFeedbackItemResponse(qualData[0]);\r\n              if (feedbackData) {\r\n                observer.next(feedbackData);\r\n                observer.complete();\r\n              } else {\r\n                const errorMessage = `No feedback data found for item ${feedbackId}`;\r\n                observer.error(new Error(errorMessage));\r\n              }\r\n            } else {\r\n              const errorMessage = `No feedback data found for item ${feedbackId}`;\r\n              observer.error(new Error(errorMessage));\r\n            }\r\n          } catch (error) {\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a feedback milestone status\r\n   */\r\n  updateFeedbackMilestone(request: FeedbackMilestoneUpdateRequest): Observable<FeedbackServiceResponse> {\r\n    const itemId = request.compass_worklist_id;\r\n    \r\n    // Add to updating set\r\n    this._updatingItems.update(current => new Set([...current, itemId]));\r\n\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          patientSource: [{ personId: 0, encntrId: 0 }],\r\n          customScript: {\r\n            script: [{\r\n              name: 'cov_compass_service:group1',\r\n              run: 'pre',\r\n              id: `updateFeedbackMilestone_${itemId}`,\r\n              parameters: {\r\n                requestType: 'updateFeedbackMilestone',\r\n                requestId: itemId,\r\n                requestData: JSON.stringify(request)\r\n              }\r\n            }],\r\n            clearPatientList: 1\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(`updateFeedbackMilestone_${itemId}`);\r\n            const replyData = response?.reply || response;\r\n            \r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              const successMessage = replyData.text || 'Feedback milestone updated successfully';\r\n              this.messagingService.success(successMessage);\r\n              \r\n              // Check if reload is required based on backend response\r\n              if (replyData.reloadInd === 1) {\r\n                // console.log('[FeedbackWorklistService] Backend requested reload, refreshing feedback item');\r\n                // Refresh the specific feedback item\r\n                this.refreshFeedbackItem(itemId);\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              const errorMessage = replyData?.text || 'Failed to update feedback milestone';\r\n              this.messagingService.error(errorMessage);\r\n              \r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: replyData\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            this.handleError('Error updating feedback milestone', error);\r\n            observer.error(error);\r\n          } finally {\r\n            // Remove from updating set\r\n            this._updatingItems.update(current => {\r\n              const newSet = new Set(current);\r\n              newSet.delete(itemId);\r\n              return newSet;\r\n            });\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update feedback workflow status\r\n   */\r\n  updateFeedbackStatus(request: FeedbackStatusUpdateRequest): Observable<FeedbackServiceResponse> {\r\n    const itemId = request.compass_worklist_id;\r\n    \r\n    this._updatingItems.update(current => new Set([...current, itemId]));\r\n\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          patientSource: [{ personId: 0, encntrId: 0 }],\r\n          customScript: {\r\n            script: [{\r\n              name: 'cov_compass_service:group1',\r\n              run: 'pre',\r\n              id: `updateFeedbackStatus_${itemId}`,\r\n              parameters: {\r\n                requestType: 'updateFeedbackStatus',\r\n                requestId: itemId,\r\n                requestData: JSON.stringify(request)\r\n              }\r\n            }],\r\n            clearPatientList: 1\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(`updateFeedbackStatus_${itemId}`);\r\n            const replyData = response?.reply || response;\r\n            \r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              const successMessage = replyData.text || 'Feedback status updated successfully';\r\n              this.messagingService.success(successMessage);\r\n              \r\n              // Check if reload is required based on backend response\r\n              if (replyData.reloadInd === 1) {\r\n                // console.log('[FeedbackWorklistService] Backend requested reload, refreshing feedback item');\r\n                // Refresh the specific feedback item\r\n                this.refreshFeedbackItem(itemId);\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              const errorMessage = replyData?.text || 'Failed to update feedback status';\r\n              this.messagingService.error(errorMessage);\r\n              \r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: replyData\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            this.handleError('Error updating feedback status', error);\r\n            observer.error(error);\r\n          } finally {\r\n            this._updatingItems.update(current => {\r\n              const newSet = new Set(current);\r\n              newSet.delete(itemId);\r\n              return newSet;\r\n            });\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Refresh a single feedback item\r\n   */\r\n  refreshFeedbackItem(feedbackId: number): void {\r\n    this.getFeedbackItemById(feedbackId).subscribe({\r\n      next: (feedbackData) => {\r\n        this._feedbackItems.update(items => \r\n          items.map(item => \r\n            item.compass_worklist_id === feedbackId \r\n              ? this.mergeFeedbackData(item, feedbackData)\r\n              : item\r\n          )\r\n        );\r\n      },\r\n      error: (error) => {\r\n        this.handleError(`Failed to refresh feedback item ${feedbackId}`, error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Refresh the entire worklist\r\n   */\r\n  refreshWorklist(): void {\r\n    this.loadFeedbackWorklist().subscribe({\r\n      next: () => {\r\n        this.messagingService.success('Feedback worklist refreshed');\r\n      },\r\n      error: (error) => {\r\n        this.handleError('Failed to refresh feedback worklist', error);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update filter options\r\n   */\r\n  updateFilterOptions(filters: Partial<FeedbackFilterOptions>): void {\r\n    this._filterOptions.update(current => ({ ...current, ...filters }));\r\n  }\r\n\r\n  /**\r\n   * Clear all filters\r\n   */\r\n  clearFilters(): void {\r\n    this._filterOptions.set({\r\n      status_filter: 'all',\r\n      priority_filter: 'all',\r\n      type_filter: 'all',\r\n      days_filter: 'all',\r\n      assigned_to_me: false\r\n    });\r\n  }\r\n\r\n  // === PRIVATE HELPER METHODS ===\r\n\r\n  /**\r\n   * Parse the feedback worklist response from CCL\r\n   * Maps the generic worklist response to FeedbackItem structure\r\n   */\r\n  private parseFeedbackWorklistResponse(qualData: any[]): FeedbackItem[] {\r\n    return qualData.map(item => {\r\n      // Map milestones from the response structure to FeedbackMilestone structure\r\n      const mappedMilestones = (item.milestones || []).map((milestone: any) => ({\r\n        milestone_id: milestone.milestoneId || 0,\r\n        name: milestone.name || '',\r\n        meaning: milestone.meaning || 'REVIEW',\r\n        status: milestone.status || 'OPEN',\r\n        status_datetime: milestone.statusDateTime && milestone.statusDateTime !== '0000-00-00T00:00:00.000+00:00' \r\n          ? new Date(milestone.statusDateTime) \r\n          : new Date(),\r\n        sequence: 1, // Default sequence\r\n        required_ind: 1, // Default required\r\n        milestone_data: milestone.milestoneData || []\r\n      }));\r\n\r\n      return {\r\n        compass_worklist_id: item.compassWorklistId || 0,\r\n        submitted_by_person_id: item.personId || 0,\r\n        submitted_by_user: 'Unknown', // Will be populated by getFeedbackItemById\r\n        submitted_by_username: 'unknown', // Will be populated by getFeedbackItemById\r\n        submission_datetime: new Date(item.workflowUpdateDateTime || Date.now()),\r\n        feedback_type: 'GENERAL_FEEDBACK', // Default type, will be updated by getFeedbackItemById\r\n        feedback_narrative: '', // Will be populated by getFeedbackItemById\r\n        feedback_priority: 'MEDIUM', // Default priority, will be updated by getFeedbackItemById\r\n        item_reference: '', // Will be populated by getFeedbackItemById\r\n        item_type: '', // Will be populated by getFeedbackItemById\r\n        item_id: '', // Will be populated by getFeedbackItemById\r\n        item_meaning: '', // Will be populated by getFeedbackItemById\r\n        related_item: undefined, // Will be populated by getFeedbackItemById if applicable\r\n        workflow_type: 'FEEDBACK',\r\n        workflow_status: {\r\n          status: this.mapWorkflowStatus(item.workflowStatus?.status || 'Ordered'),\r\n          status_datetime: new Date(item.workflowStatus?.statusDateTime || Date.now())\r\n        },\r\n        workflow_update_datetime: new Date(item.workflowUpdateDateTime || Date.now()),\r\n        workflow_update_count: item.workflowUpdateCount || 0,\r\n        milestones: mappedMilestones,\r\n        assigned_to: undefined, // Will be populated by getFeedbackItemById\r\n        assigned_to_person_id: undefined, // Will be populated by getFeedbackItemById\r\n        resolution_notes: undefined, // Will be populated by getFeedbackItemById\r\n        data_refresh_datetime: new Date(),\r\n        active_ind: 1\r\n      };\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Map workflow status from backend to FeedbackWorkflowStatus\r\n   */\r\n  private mapWorkflowStatus(backendStatus: string): 'RECEIVED' | 'TRIAGED' | 'ASSIGNED' | 'IN_PROGRESS' | 'RESOLVED' | 'CLOSED' {\r\n    const statusMap: { [key: string]: 'RECEIVED' | 'TRIAGED' | 'ASSIGNED' | 'IN_PROGRESS' | 'RESOLVED' | 'CLOSED' } = {\r\n      'Ordered': 'RECEIVED',\r\n      'Received': 'RECEIVED',\r\n      'Triaged': 'TRIAGED',\r\n      'Assigned': 'ASSIGNED',\r\n      'In Progress': 'IN_PROGRESS',\r\n      'Resolved': 'RESOLVED',\r\n      'Closed': 'CLOSED'\r\n    };\r\n    \r\n    return statusMap[backendStatus] || 'RECEIVED';\r\n  }\r\n\r\n  /**\r\n   * Parse detailed feedback response from CCL\r\n   */\r\n  private parseFeedbackDetailResponse(replyData: any): FeedbackSubmissionData {\r\n    const requestObject = replyData.request_object || {};\r\n    \r\n    return {\r\n      user: requestObject.user || 'Unknown User',\r\n      userName: requestObject.userName || 'unknown.user',\r\n      submissionDateTime: new Date(requestObject.submissionDateTime || Date.now()),\r\n      itemReference: requestObject.itemReference || '',\r\n      itemType: requestObject.itemType || '',\r\n      itemId: requestObject.itemId || '',\r\n      itemMeaning: requestObject.itemMeaning || '',\r\n      feedbackNarrative: requestObject.feedbackNarrative || '',\r\n      feedbackPriority: requestObject.feedbackPriority || 'MEDIUM',\r\n      workflowStatus: {\r\n        status: requestObject.workflowStatus?.status || 'RECEIVED',\r\n        status_datetime: requestObject.workflowStatus?.status_datetime ? new Date(requestObject.workflowStatus.status_datetime) : new Date(requestObject.submissionDateTime || Date.now()),\r\n        updated_by: requestObject.workflowStatus?.updated_by || requestObject.user || 'Unknown User'\r\n      },\r\n      item: requestObject.item\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Parse feedback item response from the qual array structure\r\n   * This handles the actual response format from getFeedbackItemById\r\n   */\r\n  private parseFeedbackItemResponse(itemData: any): FeedbackSubmissionData | null {\r\n    try {\r\n      // console.log('[FeedbackWorklistService] Parsing feedback item response:', itemData);\r\n      \r\n      // Extract feedback narrative from milestone data\r\n      let feedbackNarrative = '';\r\n      let requestObject: any = {};\r\n      \r\n      // Look for feedback data in milestones\r\n      if (itemData.milestones && Array.isArray(itemData.milestones)) {\r\n        // console.log('[FeedbackWorklistService] Found milestones:', itemData.milestones.length);\r\n        \r\n        for (const milestone of itemData.milestones) {\r\n          // console.log('[FeedbackWorklistService] Processing milestone:', milestone.meaning);\r\n          \r\n          if (milestone.meaning === 'REVIEW' && milestone.milestoneData && Array.isArray(milestone.milestoneData)) {\r\n            // console.log('[FeedbackWorklistService] Found REVIEW milestone with data:', milestone.milestoneData.length);\r\n            \r\n            for (const milestoneData of milestone.milestoneData) {\r\n              // console.log('[FeedbackWorklistService] Processing milestone data:', milestoneData.name);\r\n              \r\n              if (milestoneData.name === 'Review' && milestoneData.valueText) {\r\n                // console.log('[FeedbackWorklistService] Found Review milestone data with valueText');\r\n                \r\n                try {\r\n                  // Parse the JSON string from valueText\r\n                  const parsedData = JSON.parse(milestoneData.valueText);\r\n                  // console.log('[FeedbackWorklistService] Parsed milestone data:', parsedData);\r\n                  \r\n                  if (parsedData.request_object) {\r\n                    requestObject = parsedData.request_object;\r\n                    feedbackNarrative = requestObject.feedbackNarrative || '';\r\n                    // console.log('[FeedbackWorklistService] Extracted feedback narrative:', feedbackNarrative);\r\n                  }\r\n                } catch (parseError) {\r\n                  // console.warn('Failed to parse milestone data JSON:', parseError);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        // console.log('[FeedbackWorklistService] No milestones found in item data');\r\n      }\r\n      \r\n      // Extract user information from feedback data\r\n      const user = requestObject.user || 'Unknown User';\r\n      const userName = requestObject.userName || 'unknown.user';\r\n      const submissionDateTime = requestObject.submissionDateTime ? \r\n        new Date(requestObject.submissionDateTime) : new Date();\r\n      \r\n      return {\r\n        user: user,\r\n        userName: userName,\r\n        submissionDateTime: submissionDateTime,\r\n        itemReference: requestObject.itemReference || '',\r\n        itemType: requestObject.itemType || '',\r\n        itemId: requestObject.itemId || '',\r\n        itemMeaning: requestObject.itemMeaning || '',\r\n        feedbackNarrative: feedbackNarrative,\r\n        feedbackPriority: requestObject.feedbackPriority || 'MEDIUM',\r\n        workflowStatus: {\r\n          status: requestObject.workflowStatus?.status || 'RECEIVED',\r\n          status_datetime: requestObject.workflowStatus?.status_datetime ? new Date(requestObject.workflowStatus.status_datetime) : submissionDateTime,\r\n          updated_by: requestObject.workflowStatus?.updated_by || user\r\n        },\r\n        item: requestObject.item\r\n      };\r\n    } catch (error) {\r\n      // console.error('Error parsing feedback item response:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Merge feedback data with worklist item data\r\n   */\r\n  private mergeFeedbackData(worklistItem: FeedbackItem, feedbackData: FeedbackSubmissionData | null): FeedbackItem {\r\n    if (!feedbackData) {\r\n      // If no feedback data is available, return the worklist item as-is\r\n      return worklistItem;\r\n    }\r\n    \r\n    return {\r\n      ...worklistItem,\r\n      submitted_by_user: feedbackData.user,\r\n      submitted_by_username: feedbackData.userName,\r\n      submission_datetime: feedbackData.submissionDateTime,\r\n      feedback_narrative: feedbackData.feedbackNarrative,\r\n      feedback_priority: feedbackData.feedbackPriority,\r\n      workflow_status: feedbackData.workflowStatus,\r\n      item_reference: feedbackData.itemReference,\r\n      item_type: feedbackData.itemType,\r\n      item_id: feedbackData.itemId,\r\n      item_meaning: feedbackData.itemMeaning,\r\n      related_item: feedbackData.item ? this.parseRelatedItem(feedbackData.item) : undefined\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Parse related worklist item from feedback data\r\n   */\r\n  private parseRelatedItem(itemData: any): any {\r\n    if (!itemData || typeof itemData !== 'object') return undefined;\r\n    \r\n    return {\r\n      compass_worklist_id: itemData.compass_worklist_id,\r\n      person_id: itemData.personId,\r\n      encntr_id: itemData.encntrId,\r\n      order_id: itemData.orderId,\r\n      patient: itemData.patient,\r\n      item_description: itemData.itemDescription,\r\n      ordering_location: itemData.orderingLocation,\r\n      ordering_provider: itemData.orderingProvider,\r\n      workflow_type: itemData.workflowType,\r\n      workflow_status: itemData.workflowStatus\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Handle service errors\r\n   */\r\n  private handleError(message: string, error?: any): void {\r\n    // console.error(message, error);\r\n    this._error.set(message);\r\n    this.messagingService.error(message);\r\n    this._loading.set(false);\r\n  }\r\n\r\n  /**\r\n   * Update a single feedback item in the worklist\r\n   * Updates the signal and triggers automatic recalculation of filtered items\r\n   */\r\n  updateFeedbackItem(item: FeedbackItem): void {\r\n    const currentItems = this._feedbackItems();\r\n    const index = currentItems.findIndex(i => i.compass_worklist_id === item.compass_worklist_id);\r\n    \r\n    if (index !== -1) {\r\n      const updatedItems = [...currentItems];\r\n      updatedItems[index] = { ...item };\r\n      this._feedbackItems.set(updatedItems);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Check if a specific item is currently loading its detailed information\r\n   * @param itemId - The compass worklist ID of the item to check\r\n   * @returns true if the item is loading details, false otherwise\r\n   */\r\n  isItemLoadingDetails(itemId: number): boolean {\r\n    return this._loadingDetails().has(itemId);\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { FeedbackData } from '../compass-content/feedback-form/feedback-form.component';\r\nimport { MessagingService } from './messaging.service';\r\n\r\n/**\r\n * Response structure returned by the feedback submission service\r\n * \r\n * @interface FeedbackResponse\r\n * @property {boolean} success - Indicates whether the feedback was successfully submitted\r\n * @property {string} message - Human-readable message describing the result\r\n * @property {string} [feedbackId] - Optional unique identifier assigned to the submitted feedback\r\n */\r\nexport interface FeedbackResponse {\r\n  success: boolean;\r\n  message: string;\r\n  feedbackId?: string;\r\n}\r\n\r\n/**\r\n * FeedbackService - User Feedback Management System\r\n * \r\n * This service handles the collection, processing, and submission of user feedback\r\n * throughout the COMPASS application. It integrates with the Clinical Office \r\n * CustomService to persist feedback data and provides real-time user notifications.\r\n * \r\n * ARCHITECTURE:\r\n * - Built on Clinical Office's CustomService for Cerner EMR integration\r\n * - Uses Observable patterns for asynchronous feedback submission\r\n * - Integrates with MessagingService for user notification feedback\r\n * - Supports both specific item feedback and general application feedback\r\n * \r\n * CLINICAL OFFICE INTEGRATION:\r\n * - Calls 'cov_compass_service' CCL script with 'submitFeedback' request type\r\n * - Passes feedback data as JSON-stringified parameters\r\n * - Processes standardized response format with status codes and messages\r\n * - Extracts feedback IDs from subeventstatus for tracking purposes\r\n * \r\n * FEEDBACK FLOW:\r\n * 1. User submits feedback through FeedbackFormComponent modal\r\n * 2. Service packages feedback data with context (item ID, type, meaning)\r\n * 3. CustomService executes CCL script to persist feedback in Cerner database\r\n * 4. Service processes response and shows success/error message to user\r\n * 5. Returns feedback ID for potential follow-up or tracking\r\n * \r\n * ERROR HANDLING:\r\n * - Gracefully handles CustomService failures\r\n * - Provides meaningful error messages to users via MessagingService\r\n * - Maintains application stability during backend communication issues\r\n * - Logs errors appropriately for debugging and monitoring\r\n * \r\n * USAGE EXAMPLES:\r\n * ```typescript\r\n * // Submit general feedback\r\n * const feedbackData: FeedbackData = {\r\n *   itemId: 'general',\r\n *   itemType: 'General Feedback',\r\n *   itemMeaning: 'GENERAL_FEEDBACK',\r\n *   itemReference: 'Application',\r\n *   feedbackType: 'suggestion',\r\n *   message: 'Feature request for better filtering',\r\n *   priority: 'medium'\r\n * };\r\n * \r\n * this.feedbackService.submitFeedback(feedbackData).subscribe({\r\n *   next: (response) => {\r\n *     if (response.success) {\r\n *       console.log('Feedback submitted with ID:', response.feedbackId);\r\n *     }\r\n *   },\r\n *   error: (error) => {\r\n *     console.error('Feedback submission failed:', error);\r\n *   }\r\n * });\r\n * \r\n * // Submit item-specific feedback\r\n * const itemFeedback: FeedbackData = {\r\n *   itemId: '12345',\r\n *   itemType: 'Prior Auth Item',\r\n *   itemMeaning: 'PRIOR_AUTH_ITEM',\r\n *   itemReference: 'Patient: John Doe, Order: MRI Brain',\r\n *   feedbackType: 'bug',\r\n *   message: 'Milestone status not updating correctly',\r\n *   priority: 'high',\r\n *   item: priorAuthItem\r\n * };\r\n * \r\n * this.feedbackService.submitFeedback(itemFeedback).subscribe(response => {\r\n *   // Feedback submitted, user will see success/error message automatically\r\n * });\r\n * ```\r\n * \r\n * DATA PERSISTENCE:\r\n * - Feedback is stored in Cerner database tables via CCL scripts\r\n * - Each feedback entry receives a unique identifier for tracking\r\n * - Associated with user context and timestamp for audit purposes\r\n * - Enables reporting and analysis of user feedback patterns\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class FeedbackService {\r\n  /**\r\n   * Constructor for FeedbackService\r\n   * \r\n   * @param customService - Clinical Office CustomService for CCL script execution\r\n   * @param messagingService - MessagingService for user notifications\r\n   */\r\n  constructor(\r\n    private customService: CustomService,\r\n    private messagingService: MessagingService\r\n  ) {}\r\n\r\n  /**\r\n   * Submit user feedback to the COMPASS feedback system\r\n   * \r\n   * This method packages the feedback data and submits it via the Clinical Office\r\n   * CustomService to the 'cov_compass_service' CCL script for persistence in the\r\n   * Cerner EMR database. The method handles the complete feedback submission flow\r\n   * including user notifications and error handling.\r\n   * \r\n   * SUBMISSION PROCESS:\r\n   * 1. Packages feedback data with contextual information\r\n   * 2. Executes 'cov_compass_service' with 'submitFeedback' request type\r\n   * 3. Processes response status and extracts feedback ID if available\r\n   * 4. Shows success/error message to user via MessagingService\r\n   * 5. Returns standardized response object with success status and details\r\n   * \r\n   * ERROR SCENARIOS:\r\n   * - Network failures during CustomService execution\r\n   * - CCL script errors or database constraints\r\n   * - Invalid feedback data format or missing required fields\r\n   * - Authentication or authorization issues with Cerner services\r\n   * \r\n   * @param feedbackData - Complete feedback information including:\r\n   *   - itemId: Unique identifier for the item being referenced\r\n   *   - itemType: Type of item (e.g., 'Prior Auth Item', 'General Feedback')\r\n   *   - itemMeaning: System meaning code for categorization\r\n   *   - itemReference: Human-readable reference description\r\n   *   - feedbackType: Type of feedback ('bug', 'suggestion', 'compliment', etc.)\r\n   *   - message: Detailed feedback content from the user\r\n   *   - priority: Priority level ('low', 'medium', 'high', 'critical')\r\n   *   - item: Optional reference to the specific item object\r\n   * \r\n   * @returns Observable<FeedbackResponse> - Emits response containing:\r\n   *   - success: Boolean indicating submission success/failure\r\n   *   - message: User-friendly status message\r\n   *   - feedbackId: Optional unique identifier for the submitted feedback\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * const feedback: FeedbackData = {\r\n   *   itemId: 'worklist-123',\r\n   *   itemType: 'Prior Auth Item',\r\n   *   itemMeaning: 'PRIOR_AUTH_ITEM',\r\n   *   itemReference: 'Patient: Smith, John - MRI Brain Auth',\r\n   *   feedbackType: 'bug',\r\n   *   message: 'Status not updating after approval',\r\n   *   priority: 'high'\r\n   * };\r\n   * \r\n   * this.feedbackService.submitFeedback(feedback).subscribe({\r\n   *   next: (response) => {\r\n   *     if (response.success) {\r\n   *       // Feedback submitted successfully\r\n   *       console.log('Feedback ID:', response.feedbackId);\r\n   *     } else {\r\n   *       // Handle submission failure\r\n   *       console.error('Submission failed:', response.message);\r\n   *     }\r\n   *   },\r\n   *   error: (error) => {\r\n   *     // Handle unexpected errors\r\n   *     console.error('Unexpected error:', error);\r\n   *   }\r\n   * });\r\n   * ```\r\n   */\r\n  submitFeedback(feedbackData: FeedbackData): Observable<FeedbackResponse> {\r\n    // Prepare to submit feedback data to the cov_compass_service\r\n\r\n    return new Observable<FeedbackResponse>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre', \r\n                id: 'submitFeedback',\r\n                parameters: { \r\n                  requestType: 'submitFeedback',\r\n                  feedbackId: feedbackData.itemId,\r\n                  requestMeaning: feedbackData.itemMeaning,\r\n                  feedbackData: JSON.stringify({\r\n                    request_object: feedbackData\r\n                  })\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get('submitFeedback');\r\n            // Process the response from the feedback submission service\r\n\r\n            // Handle new response structure with 'reply' wrapper\r\n            const replyData = response?.reply || response;\r\n            \r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              const successMessage = replyData.text || 'Feedback submitted successfully';\r\n              this.messagingService.success(successMessage);\r\n              \r\n              // Extract feedback ID from CCL response for tracking and follow-up\r\n              // The CCL script returns the assigned feedback ID in the subeventstatus array\r\n              // under the targetobjectname 'COMPASS ID' for consistent identification\r\n              let feedbackId: string | undefined;\r\n              if (replyData.statusData.subeventstatus && replyData.statusData.subeventstatus.length > 0) {\r\n                const compassIdEntry = replyData.statusData.subeventstatus.find(\r\n                  (subevent: any) => subevent.targetobjectname?.trim() === 'COMPASS ID'\r\n                );\r\n                if (compassIdEntry) {\r\n                  feedbackId = compassIdEntry.targetobjectvalue?.trim();\r\n                }\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                feedbackId: feedbackId\r\n              });\r\n            } else {\r\n              const errorMessage = replyData?.text || 'Failed to submit feedback';\r\n              this.messagingService.error(errorMessage);\r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            // Handle unexpected errors during feedback submission process\r\n            const errorMessage = 'Error submitting feedback';\r\n            this.messagingService.error(errorMessage);\r\n            observer.next({\r\n              success: false,\r\n              message: errorMessage\r\n            });\r\n            observer.complete();\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n} ","import { Injectable, signal, computed } from '@angular/core';\r\nimport { ColumnConfigService } from './column-config.service';\r\nimport { PriorAuthItem } from '../models/prior-auth.model';\r\nimport { ItemHighlight, ItemHighlightCriteria } from '../models/compass-configuration.model';\r\n\r\n/**\r\n * ItemHighlightingService - Service for handling item highlighting based on configuration\r\n * \r\n * This service provides functionality to determine which CSS classes should be applied\r\n * to worklist items based on highlighting rules defined in the compass configuration.\r\n * It supports various highlighting types and criteria matching.\r\n * \r\n * FEATURES:\r\n * - Rule-based highlighting using compass configuration\r\n * - Support for multiple highlight types (worklistitem-row, etc.)\r\n * - Criteria matching for text, number, and date values\r\n * - CSS class generation based on type and class combinations\r\n * - Reactive updates when configuration changes\r\n * \r\n * USAGE:\r\n * - Call getRowHighlightClasses(item) to get CSS classes for a worklist item\r\n * - Classes are returned as space-separated string ready for [class] binding\r\n * - Service automatically handles configuration loading and updates\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ItemHighlightingService {\r\n  \r\n  constructor(private columnConfigService: ColumnConfigService) {}\r\n\r\n  /**\r\n   * Get highlighting CSS classes for a worklist item row\r\n   * @param item The worklist item to check for highlighting\r\n   * @param workflowType The workflow type (e.g., 'GLIDIAN') - defaults to item's workflowType\r\n   * @returns Space-separated string of CSS classes to apply\r\n   */\r\n  getRowHighlightClasses(item: PriorAuthItem, workflowType?: string): string {\r\n    const config = this.columnConfigService.compassConfiguration();\r\n    if (!config) {\r\n      return '';\r\n    }\r\n\r\n    const workflow = config.workflows.find(w => w.meaning === (workflowType || item.workflowType));\r\n    if (!workflow || !workflow.itemHighlight || workflow.itemHighlight.length === 0) {\r\n      return '';\r\n    }\r\n\r\n    const classes: string[] = [];\r\n\r\n    // Check each highlight rule for worklistitem-row type\r\n    workflow.itemHighlight\r\n      .filter(highlight => highlight.type === 'worklistitem-row')\r\n      .forEach(highlight => {\r\n        if (this.matchesHighlightCriteria(item, highlight)) {\r\n          // Generate CSS class name by combining type and class\r\n          const cssClass = `${highlight.type}-${highlight.class}`;\r\n          classes.push(cssClass);\r\n        }\r\n      });\r\n\r\n    return classes.join(' ');\r\n  }\r\n\r\n  /**\r\n   * Check if a worklist item matches the criteria for a highlight rule\r\n   * @param item The worklist item to check\r\n   * @param highlight The highlight rule to evaluate\r\n   * @returns true if the item matches the criteria, false otherwise\r\n   */\r\n  private matchesHighlightCriteria(item: PriorAuthItem, highlight: ItemHighlight): boolean {\r\n    const fieldValue = this.getFieldValue(item, highlight.reference);\r\n    \r\n    if (fieldValue === undefined || fieldValue === null) {\r\n      return false;\r\n    }\r\n\r\n    // Check if any of the criteria match\r\n    return highlight.criteria.some(criteria => this.matchesCriteria(fieldValue, criteria));\r\n  }\r\n\r\n  /**\r\n   * Get the value of a field from a worklist item using the reference path\r\n   * @param item The worklist item\r\n   * @param reference The field reference (e.g., 'schedulingLocation', 'workflowStatus.status')\r\n   * @returns The field value or undefined if not found\r\n   */\r\n  private getFieldValue(item: PriorAuthItem, reference: string): any {\r\n    // Handle nested property access using dot notation\r\n    const parts = reference.split('.');\r\n    let value: any = item;\r\n    \r\n    for (const part of parts) {\r\n      if (value && typeof value === 'object' && part in value) {\r\n        value = value[part];\r\n      } else {\r\n        return undefined;\r\n      }\r\n    }\r\n    \r\n    return value;\r\n  }\r\n\r\n  /**\r\n   * Check if a field value matches specific criteria\r\n   * @param fieldValue The actual field value from the item\r\n   * @param criteria The criteria to match against\r\n   * @returns true if the value matches the criteria, false otherwise\r\n   */\r\n  private matchesCriteria(fieldValue: any, criteria: ItemHighlightCriteria): boolean {\r\n    // Convert field value to string for text comparison\r\n    const fieldValueStr = String(fieldValue || '').trim();\r\n    \r\n    // Check text criteria (primary matching method)\r\n    if (criteria.valueText && criteria.valueText.trim() !== '') {\r\n      return fieldValueStr === criteria.valueText.trim();\r\n    }\r\n    \r\n    // Check numeric criteria if specified and non-zero\r\n    if (criteria.valueNumber && criteria.valueNumber !== 0) {\r\n      const fieldValueNum = Number(fieldValue);\r\n      if (!isNaN(fieldValueNum)) {\r\n        return fieldValueNum === criteria.valueNumber;\r\n      }\r\n    }\r\n    \r\n    // Check date criteria if specified and not empty\r\n    if (criteria.valueDate && criteria.valueDate.trim() !== '') {\r\n      // Handle date comparison - could be enhanced based on specific requirements\r\n      const fieldValueDate = new Date(fieldValue);\r\n      const criteriaDate = new Date(criteria.valueDate);\r\n      if (!isNaN(fieldValueDate.getTime()) && !isNaN(criteriaDate.getTime())) {\r\n        return fieldValueDate.getTime() === criteriaDate.getTime();\r\n      }\r\n    }\r\n    \r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Get all available highlight rules for a specific workflow\r\n   * @param workflowType The workflow type to get rules for\r\n   * @returns Array of highlight rules for the workflow\r\n   */\r\n  getHighlightRulesForWorkflow(workflowType: string): ItemHighlight[] {\r\n    const config = this.columnConfigService.compassConfiguration();\r\n    if (!config) {\r\n      return [];\r\n    }\r\n\r\n    const workflow = config.workflows.find(w => w.meaning === workflowType);\r\n    return workflow?.itemHighlight || [];\r\n  }\r\n\r\n  /**\r\n   * Check if highlighting is configured for a specific workflow\r\n   * @param workflowType The workflow type to check\r\n   * @returns true if highlighting rules exist, false otherwise\r\n   */\r\n  hasHighlightingForWorkflow(workflowType: string): boolean {\r\n    return this.getHighlightRulesForWorkflow(workflowType).length > 0;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { NzMessageService } from 'ng-zorro-antd/message';\r\n\r\n/**\r\n * Type definition for message types supported by the messaging system\r\n * - success: Indicates successful operations (green styling)\r\n * - warning: Indicates cautionary messages (orange styling)\r\n * - error: Indicates error conditions (red styling)\r\n * - info: Provides informational messages (blue styling)\r\n * - loading: Shows ongoing operations with spinner (gray styling)\r\n */\r\nexport type MessageType = 'success' | 'warning' | 'error' | 'info' | 'loading';\r\n\r\n/**\r\n * Configuration options for message display behavior\r\n */\r\nexport interface MessageOptions {\r\n  /** Duration in milliseconds before auto-dismissal (0 = no auto-dismissal) */\r\n  duration?: number;\r\n  /** Whether message should pause auto-dismissal on hover */\r\n  pauseOnHover?: boolean;\r\n}\r\n\r\n/**\r\n * MessagingService - Centralized Message Display System\r\n * \r\n * This service provides a unified interface for displaying user notifications throughout\r\n * the COMPASS application. It wraps the NG-Zorro Ant Design message system to provide\r\n * consistent messaging behavior across all components.\r\n * \r\n * ARCHITECTURE:\r\n * - Built on top of NG-Zorro's NzMessageService for consistent UI/UX\r\n * - Provides type-safe message display with standardized durations\r\n * - Supports both auto-dismissing and persistent messages\r\n * - Integrates with Clinical Office MPage environment styling\r\n * \r\n * INTEGRATION PATTERNS:\r\n * - Singleton service (providedIn: 'root') for application-wide access\r\n * - Consistent with Cerner MPage styling and user experience expectations\r\n * - Supports offline/online mode by maintaining local message queue\r\n * \r\n * USAGE EXAMPLES:\r\n * ```typescript\r\n * // Basic success message\r\n * this.messagingService.success('Data saved successfully');\r\n * \r\n * // Error with custom duration\r\n * this.messagingService.error('Save failed', { duration: 10000 });\r\n * \r\n * // Persistent loading message\r\n * const loadingId = this.messagingService.loading('Processing...');\r\n * // Later remove it\r\n * this.messagingService.remove(loadingId);\r\n * \r\n * // Dynamic message type\r\n * this.messagingService.show(response.success ? 'success' : 'error', response.message);\r\n * ```\r\n * \r\n * CLINICAL OFFICE INTEGRATION:\r\n * - Messages display consistently within MPage iFrame environment\r\n * - Respects Cerner's accessibility and styling guidelines\r\n * - Supports high-contrast mode and screen reader compatibility\r\n * \r\n * ERROR HANDLING:\r\n * - Gracefully handles undefined/null content by displaying fallback messages\r\n * - Automatically sanitizes HTML content to prevent XSS attacks\r\n * - Maintains message queue during navigation within single-page application\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MessagingService {\r\n\r\n  constructor(private message: NzMessageService) { }\r\n\r\n  /**\r\n   * Display a success message indicating successful operations\r\n   * \r\n   * @param content - The message content to display to the user\r\n   * @param options - Optional configuration for display behavior\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Basic success message (auto-dismisses after 3 seconds)\r\n   * this.messagingService.success('Data saved successfully');\r\n   * \r\n   * // Success with custom duration\r\n   * this.messagingService.success('Complex operation completed', { duration: 5000 });\r\n   * ```\r\n   */\r\n  success(content: string, options?: MessageOptions): void {\r\n    this.message.success(content, {\r\n      nzDuration: options?.duration || 3000,\r\n      nzPauseOnHover: options?.pauseOnHover ?? true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Display a warning message for cautionary information\r\n   * \r\n   * @param content - The warning message content to display\r\n   * @param options - Optional configuration for display behavior\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Warning about potential data loss\r\n   * this.messagingService.warning('Unsaved changes will be lost');\r\n   * \r\n   * // Warning with extended duration for important notices\r\n   * this.messagingService.warning('System maintenance in 5 minutes', { duration: 6000 });\r\n   * ```\r\n   */\r\n  warning(content: string, options?: MessageOptions): void {\r\n    this.message.warning(content, {\r\n      nzDuration: options?.duration || 4000,\r\n      nzPauseOnHover: options?.pauseOnHover ?? true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Display an error message for failed operations or critical issues\r\n   * \r\n   * @param content - The error message content to display\r\n   * @param options - Optional configuration for display behavior\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Standard error message (auto-dismisses after 5 seconds)\r\n   * this.messagingService.error('Failed to save data');\r\n   * \r\n   * // Critical error that requires user attention\r\n   * this.messagingService.error('Connection lost', { duration: 10000 });\r\n   * ```\r\n   */\r\n  error(content: string, options?: MessageOptions): void {\r\n    this.message.error(content, {\r\n      nzDuration: options?.duration || 5000,\r\n      nzPauseOnHover: options?.pauseOnHover ?? true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Display an informational message for general notifications\r\n   * \r\n   * @param content - The informational message content to display\r\n   * @param options - Optional configuration for display behavior\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // General information message\r\n   * this.messagingService.info('New features available');\r\n   * \r\n   * // Info message with hover pause disabled\r\n   * this.messagingService.info('System update completed', { pauseOnHover: false });\r\n   * ```\r\n   */\r\n  info(content: string, options?: MessageOptions): void {\r\n    this.message.info(content, {\r\n      nzDuration: options?.duration || 3000,\r\n      nzPauseOnHover: options?.pauseOnHover ?? true\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Display a loading message for ongoing operations\r\n   * \r\n   * @param content - The loading message content to display\r\n   * @param options - Optional configuration for display behavior\r\n   * @returns The message ID for manual removal when operation completes\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Show loading message during async operation\r\n   * const loadingId = this.messagingService.loading('Saving data...');\r\n   * \r\n   * try {\r\n   *   await this.dataService.save(data);\r\n   *   this.messagingService.remove(loadingId);\r\n   *   this.messagingService.success('Data saved successfully');\r\n   * } catch (error) {\r\n   *   this.messagingService.remove(loadingId);\r\n   *   this.messagingService.error('Failed to save data');\r\n   * }\r\n   * ```\r\n   */\r\n  loading(content: string, options?: MessageOptions): string {\r\n    return this.message.loading(content, {\r\n      nzDuration: options?.duration || 0, // 0 means no auto-close for loading messages\r\n      nzPauseOnHover: options?.pauseOnHover ?? false\r\n    }).messageId;\r\n  }\r\n\r\n  /**\r\n   * Display a message with dynamically determined type\r\n   * \r\n   * @param type - The type of message to display\r\n   * @param content - The message content to display\r\n   * @param options - Optional configuration for display behavior\r\n   * @returns The message ID for manual removal (only returned for loading type)\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Dynamic message based on API response\r\n   * const messageType = response.success ? 'success' : 'error';\r\n   * this.messagingService.show(messageType, response.message);\r\n   * \r\n   * // Show loading and capture ID for later removal\r\n   * const messageId = this.messagingService.show('loading', 'Processing...');\r\n   * // Later remove the loading message\r\n   * this.messagingService.remove(messageId as string);\r\n   * ```\r\n   */\r\n  show(type: MessageType, content: string, options?: MessageOptions): string | void {\r\n    switch (type) {\r\n      case 'success':\r\n        return this.success(content, options);\r\n      case 'warning':\r\n        return this.warning(content, options);\r\n      case 'error':\r\n        return this.error(content, options);\r\n      case 'info':\r\n        return this.info(content, options);\r\n      case 'loading':\r\n        return this.loading(content, options);\r\n      default:\r\n        return this.info(content, options);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Remove a specific message by its unique identifier\r\n   * \r\n   * @param messageId - The unique ID of the message to remove\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Remove a specific loading message\r\n   * const loadingId = this.messagingService.loading('Processing...');\r\n   * setTimeout(() => {\r\n   *   this.messagingService.remove(loadingId);\r\n   * }, 5000);\r\n   * ```\r\n   */\r\n  remove(messageId: string): void {\r\n    this.message.remove(messageId);\r\n  }\r\n\r\n  /**\r\n   * Remove all currently displayed messages\r\n   * \r\n   * Useful for clearing the message queue during navigation or when\r\n   * entering a new application state where previous messages are no longer relevant.\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Clear all messages when navigating to a new page\r\n   * this.router.events.pipe(\r\n   *   filter(event => event instanceof NavigationEnd)\r\n   * ).subscribe(() => {\r\n   *   this.messagingService.removeAll();\r\n   * });\r\n   * ```\r\n   */\r\n  removeAll(): void {\r\n    this.message.remove();\r\n  }\r\n\r\n  /**\r\n   * Create a persistent message that requires manual removal\r\n   * \r\n   * @param type - The type of message to create\r\n   * @param content - The message content to display\r\n   * @param options - Optional configuration (duration defaults to 0 for no auto-close)\r\n   * @returns The message ID for manual removal\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Create a persistent error message that stays until manually dismissed\r\n   * const errorId = this.messagingService.create('error', 'Critical system error');\r\n   * \r\n   * // Later, when the issue is resolved\r\n   * this.messagingService.remove(errorId);\r\n   * \r\n   * // Create a persistent info message with custom hover behavior\r\n   * const infoId = this.messagingService.create('info', 'System maintenance mode', {\r\n   *   pauseOnHover: false\r\n   * });\r\n   * ```\r\n   */\r\n  create(type: MessageType, content: string, options?: MessageOptions): string {\r\n    const messageOptions = {\r\n      nzDuration: options?.duration || 0, // 0 means no auto-close\r\n      nzPauseOnHover: options?.pauseOnHover ?? true\r\n    };\r\n\r\n    switch (type) {\r\n      case 'success':\r\n        return this.message.success(content, messageOptions).messageId;\r\n      case 'warning':\r\n        return this.message.warning(content, messageOptions).messageId;\r\n      case 'error':\r\n        return this.message.error(content, messageOptions).messageId;\r\n      case 'info':\r\n        return this.message.info(content, messageOptions).messageId;\r\n      case 'loading':\r\n        return this.message.loading(content, messageOptions).messageId;\r\n      default:\r\n        return this.message.info(content, messageOptions).messageId;\r\n    }\r\n  }\r\n} ","import { Injectable, signal } from '@angular/core';\r\n\r\n/**\r\n * NotificationsService - Simple notification state management\r\n * \r\n * This service manages the notification state for the application.\r\n * Currently provides a simple boolean indicator for unread notifications.\r\n * Will be extended to integrate with cov_compass_service for database notifications.\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NotificationsService {\r\n  \r\n  /**\r\n   * Signal indicating whether there are unread notifications\r\n   */\r\n  private _hasNotifications = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Public readonly access to notification state\r\n   */\r\n  public readonly hasNotifications = this._hasNotifications.asReadonly();\r\n  \r\n  constructor() {\r\n    // TODO: Initialize from cov_compass_service\r\n    // For now, set to true for testing\r\n    this._hasNotifications.set(false);\r\n  }\r\n  \r\n  /**\r\n   * Mark all notifications as read\r\n   */\r\n  markAllAsRead(): void {\r\n    this._hasNotifications.set(false);\r\n  }\r\n  \r\n  /**\r\n   * Set notification state (for testing)\r\n   */\r\n  setHasNotifications(value: boolean): void {\r\n    this._hasNotifications.set(value);\r\n  }\r\n}","import { Injectable, signal, computed, effect } from '@angular/core';\r\nimport { Observable, of, Subject, BehaviorSubject } from 'rxjs';\r\nimport { switchMap, map, tap } from 'rxjs/operators';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { ColumnConfigService } from './column-config.service';\r\nimport { MessagingService } from './messaging.service';\r\nimport { UserPreferencesService } from './user-preferences.service';\r\nimport { PredefinedFilter } from '../models/predefined-filter.model';\r\n\r\n/**\r\n * Interface for oral chemotherapy worklist items\r\n * This should match the data structure returned from the backend\r\n */\r\nexport interface OralChemotherapyItem {\r\n  compass_worklist_id: number;\r\n  workflow_id: number;\r\n  personId: number;\r\n  encntrId: number;\r\n  orderId: number;\r\n  patient?: {\r\n    name: string;\r\n    dateOfBirth: Date;\r\n    fin: string;\r\n    mrn: string;\r\n  };\r\n  itemDescription: string;\r\n  orderingLocation: string;\r\n  orderingProvider: string;\r\n  schedulingLocation: string;\r\n  workflowType: string;\r\n  workflowUpdateDateTime: Date;\r\n  workflowUpdateCount: number;\r\n  workflowStatus: {\r\n    status: string;\r\n    statusDateTime: Date;\r\n  };\r\n  subStatus: {\r\n    subStatus: string;\r\n    subStatusDateTime: Date;\r\n  };\r\n  priority: string;\r\n  codeList: Array<{\r\n    type: string;\r\n    vocabulary: string;\r\n    identifier: string;\r\n    display: string;\r\n  }>;\r\n  edosDate?: Date;\r\n  origOrderDtTm?: Date;\r\n  dataRefreshDtTm?: Date;\r\n  financialClass: string;\r\n  reasonForExam: string;\r\n  assignedTo: string;\r\n  assignedName: string;\r\n}\r\n\r\n/**\r\n * @class OralChemotherapyService\r\n * @description This service manages the state and business logic for the oral chemotherapy worklist.\r\n * It uses Angular signals for reactive state management, ensuring that the UI updates automatically\r\n * when the underlying data changes. The service is responsible for fetching data from the backend,\r\n * applying filters, and handling user interactions.\r\n *\r\n * Key Responsibilities:\r\n * - Fetching and managing the master list of oral chemotherapy items (_worklistItems).\r\n * - Providing reactive, derived signals for filtered data (filteredItems) and UI state (loading, processingCount).\r\n * - Handling data filtering based on days (currentDaysFilter) and predefined filter sets (activePredefinedFilter).\r\n * - Exposing methods to interact with the backend for CRUD operations on worklist items.\r\n * - Managing real-time updates and ensuring data consistency across the application.\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OralChemotherapyService {\r\n  \r\n  // === SIGNALS IMPLEMENTATION ===\r\n  \r\n  /**\r\n   * Signal containing all oral chemotherapy items loaded from the service\r\n   * This is the master data source for all worklist operations\r\n   * Starts empty to avoid showing test data during loading\r\n   */\r\n  private _worklistItems = signal<OralChemotherapyItem[]>([]);\r\n  \r\n  /**\r\n   * Signal tracking the current days filter setting\r\n   * Controls which items are visible based on their EDOS date\r\n   */\r\n  private _currentDaysFilter = signal<number | 'all'>(30);\r\n  \r\n  /**\r\n   * Signal tracking the loading state of worklist operations\r\n   * Used to show loading indicators during data fetching\r\n   */\r\n  private _loading = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal tracking which items are currently loading their detailed information\r\n   * Used to show individual loading states for progressive updates\r\n   */\r\n  private _loadingDetails = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Signal tracking the count of items being processed for details\r\n   * Used to show a badge on the refresh button during progressive loading\r\n   */\r\n  private _processingCount = signal<number>(0);\r\n  \r\n  /**\r\n   * Subject to emit when an item is being refreshed automatically\r\n   * Components can subscribe to this to show loading states\r\n   */\r\n  private _itemRefreshSubject = new Subject<number>();\r\n\r\n  /**\r\n   * Subject to emit when an item is updated with detailed data during progressive loading\r\n   * Components can subscribe to this to trigger change detection for table updates\r\n   */\r\n  private _itemDetailUpdatedSubject = new Subject<void>();\r\n  \r\n  /**\r\n   * Signal tracking the currently active predefined filter\r\n   * Controls which predefined filter is applied to the worklist\r\n   */\r\n  private _activePredefinedFilter = signal<PredefinedFilter | null>(null);\r\n\r\n  /**\r\n   * Signal tracking whether to show only current user's assignments\r\n   * Controls if the worklist shows all items or only those assigned to current user\r\n   */\r\n  private _showMyAssignmentsOnly = signal<boolean>(false);\r\n  \r\n  // Track last column filter update to prevent infinite loops\r\n  private _lastColumnFilterUpdate: string = '';\r\n  \r\n  // === READ-ONLY SIGNALS FOR EXTERNAL ACCESS ===\r\n  \r\n  /**\r\n   * Read-only access to the current days filter setting\r\n   * Components can use this to display the current filter state\r\n   */\r\n  readonly currentDaysFilter = this._currentDaysFilter.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the loading state\r\n   * Components can use this to show loading indicators\r\n   */\r\n  readonly loading = this._loading.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the loading details state\r\n   * Components can use this to show individual item loading indicators\r\n   */\r\n  readonly loadingDetails = this._loadingDetails.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the processing count\r\n   * Components can use this to show a badge on the refresh button\r\n   */\r\n  readonly processingCount = this._processingCount.asReadonly();\r\n  \r\n  /**\r\n   * Observable that emits when an item is being refreshed automatically\r\n   * Components can subscribe to this to show loading states\r\n   */\r\n  readonly itemRefresh$ = this._itemRefreshSubject.asObservable();\r\n\r\n  /**\r\n   * Observable that emits when an item is updated with detailed data during progressive loading\r\n   * Components can subscribe to this to trigger change detection for table row updates\r\n   */\r\n  readonly itemDetailUpdated$ = this._itemDetailUpdatedSubject.asObservable();\r\n  \r\n  /**\r\n   * Read-only access to the active predefined filter\r\n   * Components can use this to display the current filter state\r\n   */\r\n  readonly activePredefinedFilter = this._activePredefinedFilter.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to the assignment filter state\r\n   * Components can use this to display whether filtering by current user's assignments\r\n   */\r\n  readonly showMyAssignmentsOnly = this._showMyAssignmentsOnly.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to all worklist items\r\n   * Contains the complete unfiltered dataset\r\n   */\r\n  readonly worklistItems = this._worklistItems.asReadonly();\r\n  \r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n  \r\n  /**\r\n   * Computed signal that returns filtered worklist items based on days filter, predefined filters, and assignment filter\r\n   * Automatically recalculates when worklistItems, currentDaysFilter, activePredefinedFilter, or showMyAssignmentsOnly changes\r\n   * This eliminates the need for manual filtering in components\r\n   */\r\n  readonly filteredItems = computed(() => {\r\n    let items = this._worklistItems();\r\n    const daysFilter = this._currentDaysFilter();\r\n    const predefinedFilter = this._activePredefinedFilter();\r\n    const showMyAssignmentsOnly = this._showMyAssignmentsOnly();\r\n    const isLoading = this._loading();\r\n    \r\n    // During loading, if we have a predefined filter but no items, return empty array\r\n    // This prevents showing filtered results on empty data during the loading process\r\n    if (isLoading && items.length === 0 && predefinedFilter) {\r\n      return [];\r\n    }\r\n    \r\n    // Apply predefined filters first\r\n    if (predefinedFilter && predefinedFilter.filters) {\r\n      const filters = predefinedFilter.filters;\r\n      const excludeFilters = predefinedFilter.excludeFilters;\r\n      \r\n      // Apply workflow status filter\r\n      if (filters.workflowStatus && filters.workflowStatus.length > 0) {\r\n        items = items.filter(item => \r\n          filters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n        );\r\n      }\r\n      \r\n      // Apply workflow status exclude filter\r\n      if (excludeFilters?.workflowStatus && excludeFilters.workflowStatus.length > 0) {\r\n        items = items.filter(item => \r\n          !excludeFilters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n        );\r\n      }\r\n      \r\n      // Apply ordering location filter\r\n      if (filters.orderingLocation && filters.orderingLocation.length > 0) {\r\n        items = items.filter(item => \r\n          filters.orderingLocation!.includes(item.orderingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering provider filter\r\n      if (filters.orderingProvider && filters.orderingProvider.length > 0) {\r\n        items = items.filter(item => \r\n          filters.orderingProvider!.includes(item.orderingProvider || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling location filter\r\n      if (filters.schedulingLocation && filters.schedulingLocation.length > 0) {\r\n        items = items.filter(item => \r\n          filters.schedulingLocation!.includes(item.schedulingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering location exclude filter\r\n      if (excludeFilters?.orderingLocation && excludeFilters.orderingLocation.length > 0) {\r\n        items = items.filter(item => \r\n          !excludeFilters.orderingLocation!.includes(item.orderingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering provider exclude filter\r\n      if (excludeFilters?.orderingProvider && excludeFilters.orderingProvider.length > 0) {\r\n        items = items.filter(item => \r\n          !excludeFilters.orderingProvider!.includes(item.orderingProvider || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling location exclude filter\r\n      if (excludeFilters?.schedulingLocation && excludeFilters.schedulingLocation.length > 0) {\r\n        items = items.filter(item => \r\n          !excludeFilters.schedulingLocation!.includes(item.schedulingLocation || '')\r\n        );\r\n      }\r\n      \r\n      // Override days filter if specified in predefined filter\r\n      if (filters.daysFilter !== undefined) {\r\n        const filterDays = filters.daysFilter;\r\n        if (filterDays !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + filterDays);\r\n          \r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n        // Apply assignment filter even with predefined days filter\r\n        if (showMyAssignmentsOnly) {\r\n          const currentUser = this.userPreferences.getUserData();\r\n          if (currentUser && currentUser.username) {\r\n            const currentUsername = currentUser.username.toLowerCase();\r\n            return items.filter(item => \r\n              item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n            );\r\n          }\r\n          // If no current user or username, return empty array when filtering by assignments\r\n          return [];\r\n        }\r\n        return items; // Return early if predefined filter has days filter\r\n      }\r\n    }\r\n    \r\n    // Apply regular days filter if not overridden by predefined filter\r\n    if (daysFilter === 'all') {\r\n      // Apply assignment filter even when showing all days\r\n      if (showMyAssignmentsOnly) {\r\n        const currentUser = this.userPreferences.getUserData();\r\n        if (currentUser && currentUser.username) {\r\n          const currentUsername = currentUser.username.toLowerCase();\r\n          return items.filter(item => \r\n            item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n          );\r\n        }\r\n        // If no current user or username, return empty array when filtering by assignments\r\n        return [];\r\n      }\r\n      return items;\r\n    }\r\n    \r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0); // Set to start of day\r\n    const futureDate = new Date(today);\r\n    futureDate.setDate(today.getDate() + daysFilter);\r\n    \r\n    const filteredByDays = items.filter(item => {\r\n      if (!item.edosDate) {\r\n        return false;\r\n      }\r\n      const edosDate = new Date(item.edosDate);\r\n      edosDate.setHours(0, 0, 0, 0); // Set to start of day\r\n      // Include items with EDOS dates in the past OR within the specified future range\r\n      return edosDate <= futureDate;\r\n    });\r\n\r\n    // Apply assignment filter if enabled\r\n    if (showMyAssignmentsOnly) {\r\n      const currentUser = this.userPreferences.getUserData();\r\n      if (currentUser && currentUser.username) {\r\n        const currentUsername = currentUser.username.toLowerCase();\r\n        return filteredByDays.filter(item => \r\n          item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n        );\r\n      }\r\n      // If no current user or username, return empty array when filtering by assignments\r\n      return [];\r\n    }\r\n\r\n    return filteredByDays;\r\n  });\r\n\r\n  constructor(\r\n    private customService: CustomService,\r\n    private columnConfig: ColumnConfigService,\r\n    private messagingService: MessagingService,\r\n    private userPreferences: UserPreferencesService\r\n  ) {\r\n\r\n    // Set up automatic column filter updates when filtered data changes\r\n    // This effect runs whenever filteredItems() changes and automatically updates column filters\r\n    effect(() => {\r\n      const filteredData = this.filteredItems();\r\n      const predefinedFilter = this._activePredefinedFilter();\r\n      \r\n      // Create a hash that includes individual item refresh timestamps to detect updates\r\n      // This ensures that when individual items are updated, the effect re-runs\r\n      const dataHash = JSON.stringify({\r\n        count: filteredData.length,\r\n        filterId: predefinedFilter?.id || 'null',\r\n        firstItemId: filteredData[0]?.compass_worklist_id || 'null',\r\n        // Include the latest dataRefreshDtTm to detect individual item updates\r\n        latestRefresh: filteredData.length > 0 ? \r\n          Math.max(...filteredData.map(item => item.dataRefreshDtTm?.getTime() || 0)) : 0,\r\n        // Include a sample of workflow statuses to detect status changes\r\n        statusSample: filteredData.slice(0, 5).map(item => ({\r\n          id: item.compass_worklist_id,\r\n          status: item.workflowStatus?.status,\r\n          edos: item.edosDate?.getTime()\r\n        }))\r\n      });\r\n      \r\n      // Only update column filters if:\r\n      // 1. We have data and we're not in a loading state\r\n      // 2. The data has actually changed (prevent infinite loops)\r\n      if (filteredData.length > 0 && !this._loading() && dataHash !== this._lastColumnFilterUpdate) {\r\n        // Auto-updating column filters with filtered items (detected data changes)\r\n        this._lastColumnFilterUpdate = dataHash;\r\n        this.columnConfig.updateColumnFiltersFromData(filteredData);\r\n      } else if (dataHash === this._lastColumnFilterUpdate) {\r\n        // Skipping column filter update - data unchanged\r\n      }\r\n    }, { allowSignalWrites: true });\r\n  }\r\n\r\n  /**\r\n   * Updates the days filter setting\r\n   * This automatically triggers recalculation of the filteredItems computed signal\r\n   * No manual filtering or emission needed - signals handle the reactivity\r\n   */\r\n  updateDaysFilter(days: number | 'all'): void {\r\n    this._currentDaysFilter.set(days);\r\n  }\r\n\r\n  /**\r\n   * Get the current days filter value using signals\r\n   * Returns the current value of the currentDaysFilter signal\r\n   */\r\n  getCurrentDaysFilter(): number | 'all' {\r\n    return this._currentDaysFilter();\r\n  }\r\n\r\n  /**\r\n   * Updates the assignment filter setting\r\n   * This automatically triggers recalculation of the filteredItems computed signal\r\n   * @param showMyAssignmentsOnly - true to show only current user's assignments, false to show all\r\n   */\r\n  updateAssignmentFilter(showMyAssignmentsOnly: boolean): void {\r\n    this._showMyAssignmentsOnly.set(showMyAssignmentsOnly);\r\n  }\r\n  \r\n  /**\r\n   * Update the active predefined filter\r\n   * This will filter the worklist items based on the predefined filter criteria\r\n   */\r\n  updatePredefinedFilter(filter: PredefinedFilter | null): void {\r\n    // Setting predefined filter\r\n    this._activePredefinedFilter.set(filter);\r\n    \r\n    // Column filter updates are now handled automatically by the effect() below\r\n    // No need for setTimeout - the effect will trigger when filteredItems() changes\r\n  }\r\n  \r\n  /**\r\n   * Clears the active predefined filter\r\n   * This will revert to showing items based only on the days filter\r\n   */\r\n  clearPredefinedFilter(): void {\r\n    // Clearing predefined filter\r\n    this._activePredefinedFilter.set(null);\r\n    \r\n    // Column filter updates are now handled automatically by the effect() below\r\n    // No need for setTimeout - the effect will trigger when filteredItems() changes\r\n  }\r\n\r\n  /**\r\n   * Update a single oral chemotherapy item in the worklist\r\n   * Updates the signal and triggers automatic recalculation of filtered items\r\n   * This ensures that individual item updates are reflected across all filter views\r\n   * Only updates if the new data is more recent than existing data\r\n   */\r\n  updateOralChemotherapyItem(item: OralChemotherapyItem): void {\r\n    // Update the master worklist items signal with the updated item\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(existingItem => \r\n        existingItem.compass_worklist_id === item.compass_worklist_id\r\n      );\r\n      \r\n      if (itemIndex !== -1) {\r\n        const existingItem = currentItems[itemIndex];\r\n        const existingRefreshTime = existingItem.dataRefreshDtTm?.getTime() || 0;\r\n        const newRefreshTime = item.dataRefreshDtTm?.getTime() || 0;\r\n        \r\n        // Only update if the new item is more recent, OR if there's no timestamp data\r\n        if (newRefreshTime >= existingRefreshTime || (!existingRefreshTime && !newRefreshTime)) {\r\n          const updatedItems = [...currentItems];\r\n          updatedItems[itemIndex] = { ...item, dataRefreshDtTm: new Date() };\r\n          return updatedItems;\r\n        } else {\r\n          return currentItems;\r\n        }\r\n      } else {\r\n        // Item not found - this could happen if the item was added while we weren't watching\r\n        return [...currentItems, { ...item, dataRefreshDtTm: new Date() }];\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the worklist items, using Clinical Office CustomService in online mode.\r\n   * Updates the worklistItems signal with fresh data when called\r\n   * Components should prefer using the filteredItems computed signal for reactive updates\r\n   */\r\n  getWorklist(): Observable<OralChemotherapyItem[]> {\r\n    // Use Clinical Office CustomService to fetch worklist data\r\n    // Check if batch mode is enabled in user preferences\r\n    const userData = this.userPreferences.getUserData();\r\n    const batchMode = userData?.performanceSettings?.batchMode === 1;\r\n\r\n    // Only clear existing data if no predefined filter is set to avoid race condition\r\n    if (!this._activePredefinedFilter()) {\r\n      this._worklistItems.set([]);\r\n    }\r\n      \r\n    return new Observable<any[]>(observer => {\r\n      // Execute worklist fetch using Clinical Office CustomService with CCL script\r\n      \r\n      // Update loading state\r\n      this._loading.set(true);\r\n      \r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: 'oralChemoWorklist',\r\n                parameters: { \r\n                    requestType: 'getWorklist', \r\n                    worklistType: 'ORALCHEMO',\r\n                    requestMeaning: batchMode ? \"BATCH\" : \"INDIVIDUAL\" }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get('oralChemoWorklist');\r\n            // Process raw worklist response from CustomService\r\n            \r\n            if (!raw) {\r\n              // Handle empty response from CustomService - clear sample data and return empty array\r\n              this._worklistItems.set([]);\r\n              observer.next([]);\r\n              observer.complete();\r\n              \r\n              // Update loading state\r\n              this._loading.set(false);\r\n              return;\r\n            }\r\n            \r\n            // Expecting items in raw.qual array\r\n            const qualArray = raw && Array.isArray(raw.qual) ? raw.qual : [];\r\n            // Extract qual array containing worklist items from service response\r\n            \r\n            if (qualArray.length) {\r\n              observer.next(qualArray);\r\n            } else {\r\n              // No valid qual array received, clear sample data and return empty array\r\n              this._worklistItems.set([]);\r\n              observer.next([]);\r\n            }\r\n            observer.complete();\r\n            \r\n            // Update loading state\r\n            this._loading.set(false);\r\n          } catch (error) {\r\n            // Handle any errors during CustomService callback processing\r\n            observer.error(error);\r\n            \r\n            // Update loading state\r\n            this._loading.set(false);\r\n          }\r\n        }\r\n      );\r\n    }).pipe(\r\n      switchMap((worklist: any[]) => {\r\n        // Process and transform the raw worklist data into OralChemotherapyItem objects\r\n        if (!worklist.length) {\r\n          // Worklist is empty - return empty observable array\r\n          return of([]);\r\n        }\r\n        \r\n        // Map each item to OralChemotherapyItem using mapToOralChemotherapyItem\r\n        const mappedItems: OralChemotherapyItem[] = worklist.map(item => {\r\n          try {\r\n            const mapped = this.mapToOralChemotherapyItem(item);\r\n            return mapped;\r\n          } catch (error) {\r\n            // Skip items that fail to map properly\r\n            return null;\r\n          }\r\n        }).filter((item): item is OralChemotherapyItem => item !== null);\r\n        \r\n        if (!mappedItems.length) {\r\n          // No items were successfully mapped - clear sample data and return empty array\r\n          this._worklistItems.set([]);\r\n          return of([]);\r\n        }\r\n        \r\n        // First, immediately display the basic worklist items\r\n        this._worklistItems.set(mappedItems);\r\n\r\n        if (batchMode) {\r\n          // Batch mode enabled - skip detailed loading for better performance\r\n          this.messagingService.success(`Oral chemotherapy worklist loaded with ${mappedItems.length} items.`);\r\n          return of(mappedItems);\r\n        } else {\r\n          // Normal mode - load detailed information for each item\r\n          this.messagingService.success(`Oral chemotherapy worklist loaded with ${mappedItems.length} items. Item details are now being loaded...`);\r\n          \r\n          // Track completion of detail loading\r\n          let completedDetails = 0;\r\n          const totalDetails = mappedItems.length;\r\n          \r\n          // Set initial processing count\r\n          this._processingCount.set(totalDetails);\r\n          \r\n          // Then fetch detailed information for each item individually\r\n          // This allows the UI to show basic data immediately while details load progressively\r\n          mappedItems.forEach(item => {\r\n            const itemId = item.compass_worklist_id;\r\n            \r\n            // Mark this item as loading details\r\n            this._loadingDetails.update(current => new Set(Array.from(current).concat(itemId)));\r\n            \r\n            // Use the same pattern as refreshWorklistItem - direct subscribe call\r\n            this.getOralChemotherapyItemById(itemId).subscribe({\r\n              next: (detailedItem) => {\r\n                // Remove from loading details when complete\r\n                this._loadingDetails.update(current => {\r\n                  const newSet = new Set(Array.from(current).filter(id => id !== itemId));\r\n                  return newSet;\r\n                });\r\n                \r\n                if (detailedItem) {\r\n                  // Direct update just like refreshWorklistItem - no timing conditions needed for initial load\r\n                  this.updateOralChemotherapyItem(detailedItem);\r\n                  \r\n                  // Emit event to trigger change detection in components so the table row updates\r\n                  this._itemDetailUpdatedSubject.next();\r\n                }\r\n                \r\n                // Track completion and send message when all details are loaded\r\n                completedDetails++;\r\n                \r\n                // Update processing count\r\n                this._processingCount.update(current => Math.max(0, current - 1));\r\n                \r\n                if (completedDetails === totalDetails) {\r\n                  this.messagingService.success(`All ${totalDetails} worklist item details have been loaded successfully.`);\r\n                }\r\n              },\r\n              error: (error) => {\r\n                // Remove from loading details on error\r\n                this._loadingDetails.update(current => {\r\n                  const newSet = new Set(Array.from(current).filter(id => id !== itemId));\r\n                  return newSet;\r\n                });\r\n                \r\n                // Track completion even on error to ensure we don't wait forever\r\n                completedDetails++;\r\n                \r\n                // Update processing count on error as well\r\n                this._processingCount.update(current => Math.max(0, current - 1));\r\n                \r\n                if (completedDetails === totalDetails) {\r\n                  this.messagingService.success(`All ${totalDetails} worklist item details have been processed.`);\r\n                }\r\n              }\r\n            });\r\n          });\r\n          \r\n          // Return the basic items immediately, details will update progressively via direct subscribe calls\r\n          return of(mappedItems);\r\n        }\r\n      })\r\n    );\r\n  }\r\n  \r\n  /**\r\n   * Refresh the worklist data by calling getWorklist and updating signals\r\n   * Returns an observable that emits when the refresh is complete\r\n   * Components can use this method to manually refresh data\r\n   */\r\n  refreshWorklist(): Observable<OralChemotherapyItem[]> {\r\n    // Trigger a fresh worklist data fetch and signal update\r\n    // Note: Success messages are now handled within getWorklist() method\r\n    return this.getWorklist();\r\n  }\r\n\r\n  /**\r\n   * Fetch a single OralChemotherapyItem by ID using Clinical Office CustomService.\r\n   * This will call a custom CCL script and return the result as an Observable<OralChemotherapyItem>.\r\n   * Creates a unique ID for the custom script call using the method name and the compass worklist ID.\r\n   */\r\n  getOralChemotherapyItemById(id: number): Observable<OralChemotherapyItem> {\r\n    // Fetch specific oral chemotherapy item by ID using CustomService with unique ID\r\n    return new Observable<OralChemotherapyItem>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `getOralChemoItemById_${id}`,\r\n                parameters: { requestType: 'getOralChemoItemById', requestId: id }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          const raw = this.customService.get(`getOralChemoItemById_${id}`);\r\n          \r\n          // Extract the first item from qual array\r\n          const item = raw && Array.isArray(raw.qual) && raw.qual.length > 0 ? raw.qual[0] : null;\r\n          if (item) {\r\n            const mapped: OralChemotherapyItem = this.mapToOralChemotherapyItem(item);\r\n            observer.next(mapped);\r\n          } else {\r\n            // Return null to indicate no detailed data available\r\n            observer.next(null as any);\r\n          }\r\n          observer.complete();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Map the raw JSON response from customService.get to a valid OralChemotherapyItem.\r\n   * Implement this function to transform the backend response to your strict model.\r\n   */\r\n  private mapToOralChemotherapyItem(raw: any): OralChemotherapyItem {\r\n    // Transform raw service response data to OralChemotherapyItem model structure\r\n    const mapped: OralChemotherapyItem = {\r\n      compass_worklist_id: raw.compassWorklistId || raw.compass_worklist_id || raw.id,\r\n      workflow_id: raw.workflowId,\r\n      personId: raw.personId,\r\n      encntrId: raw.encntrId,\r\n      orderId: raw.orderId,\r\n      patient: raw.patient ? {\r\n        name: raw.patient.name || '',\r\n        dateOfBirth: raw.patient.dateOfBirth ? new Date(raw.patient.dateOfBirth) : new Date(),\r\n        fin: raw.patient.fin || '',\r\n        mrn: raw.patient.mrn || ''\r\n      } : undefined,\r\n      itemDescription: raw.itemDescription,\r\n      orderingLocation: raw.orderingLocation,\r\n      orderingProvider: raw.orderingProvider,\r\n      schedulingLocation: raw.schedulingLocation,\r\n      workflowType: raw.workflowType,\r\n      workflowUpdateDateTime: new Date(raw.workflowUpdateDateTime),\r\n      workflowUpdateCount: raw.workflowUpdateCount,\r\n      workflowStatus: {\r\n        status: raw.workflowStatus?.status || '',\r\n        statusDateTime: raw.workflowStatus?.statusDateTime ? new Date(raw.workflowStatus.statusDateTime) : new Date()\r\n      },\r\n      subStatus: {\r\n        subStatus: raw.subStatus?.subStatus || '',\r\n        subStatusDateTime: raw.subStatus?.subStatusDateTime ? new Date(raw.subStatus.subStatusDateTime) : new Date()\r\n      },\r\n      priority: raw.priority || 'Routine',\r\n      codeList: raw.codeList && Array.isArray(raw.codeList) ? raw.codeList.map((code: any) => ({\r\n        type: code.type || '',\r\n        vocabulary: code.vocabulary || '',\r\n        identifier: code.identifier || '',\r\n        display: code.display || ''\r\n      })) : [],\r\n      edosDate: raw.edosdate ? new Date(raw.edosdate) : undefined,\r\n      origOrderDtTm: raw.origOrderDtTm ? new Date(raw.origOrderDtTm) : undefined,\r\n      dataRefreshDtTm: new Date(), // Stamp the refresh time\r\n      financialClass: raw.financialClass || '',\r\n      reasonForExam: raw.reasonForExam || '',\r\n      assignedTo: raw.assignedTo || '',\r\n      assignedName: raw.assignedName || raw.assignedDisplayName || raw.assignedFullName || ''\r\n    };\r\n    // Successfully mapped raw data to OralChemotherapyItem with current timestamp\r\n    return mapped;\r\n  }\r\n\r\n  /**\r\n   * Set worklist items directly (useful for testing or offline scenarios)\r\n   * Updates the signal which triggers automatic recalculation of filtered items\r\n   */\r\n  setWorklistItems(items: OralChemotherapyItem[]): void {\r\n    this._worklistItems.set(items);\r\n  }\r\n  \r\n  /**\r\n   * Check if a specific item is currently loading its detailed information\r\n   * @param itemId - The compass worklist ID of the item to check\r\n   * @returns true if the item is loading details, false otherwise\r\n   */\r\n  isItemLoadingDetails(itemId: number): boolean {\r\n    return this._loadingDetails().has(itemId);\r\n  }\r\n\r\n  /**\r\n   * Computed signal that calculates item counts for each predefined filter\r\n   * Returns a map of filter ID to count for display on filter tabs\r\n   */\r\n  readonly predefinedFilterCounts = computed(() => {\r\n    const allItems = this._worklistItems();\r\n    const daysFilter = this._currentDaysFilter();\r\n    const predefinedFilters = this.columnConfig.getPredefinedFilters('oral-chemotherapy');\r\n    \r\n    const counts: { [filterId: string]: number } = {};\r\n    \r\n    for (const filter of predefinedFilters) {\r\n      // Apply the same filtering logic as filteredItems but for each specific filter\r\n      let items = [...allItems];\r\n      \r\n      if (filter.filters) {\r\n        const filters = filter.filters;\r\n        const excludeFilters = filter.excludeFilters;\r\n        \r\n        // Apply workflow status filter\r\n        if (filters.workflowStatus && filters.workflowStatus.length > 0) {\r\n          items = items.filter(item => \r\n            filters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n          );\r\n        }\r\n        \r\n        // Apply workflow status exclude filter\r\n        if (excludeFilters?.workflowStatus && excludeFilters.workflowStatus.length > 0) {\r\n          items = items.filter(item => \r\n            !excludeFilters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n          );\r\n        }\r\n        \r\n        // Apply days filter (use filter-specific days or global days filter)\r\n        const filterDays = filters.daysFilter !== undefined ? filters.daysFilter : daysFilter;\r\n        if (filterDays !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + filterDays);\r\n          \r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n      } else {\r\n        // 'All Items' filter - apply only days filter\r\n        if (daysFilter !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + daysFilter);\r\n          \r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n      }\r\n      \r\n      counts[filter.id] = items.length;\r\n    }\r\n    \r\n    return counts;\r\n  });\r\n}\r\n","import { Injectable, signal, computed, effect } from '@angular/core';\r\nimport { Observable, of, Subject, BehaviorSubject } from 'rxjs';\r\nimport { switchMap, map, tap } from 'rxjs/operators';\r\nimport { PriorAuthItem, MilestoneUpdateRequest, PriorAuthComment, SchedulingLocationUpdateRequest } from '../models/prior-auth.model';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { ColumnConfigService } from './column-config.service';\r\nimport { MessagingService } from './messaging.service';\r\nimport { UserPreferencesService } from './user-preferences.service';\r\nimport { PredefinedFilter } from '../models/predefined-filter.model';\r\nimport { TimerService } from './timer.service';\r\nimport { BackendFilterCriteria } from '../models/backend-filter-criteria.model';\r\n\r\n/**\r\n * @class PriorAuthService\r\n * @description This service manages the state and business logic for the prior authorization worklist.\r\n * It uses Angular signals for reactive state management, ensuring that the UI updates automatically\r\n * when the underlying data changes. The service is responsible for fetching data from the backend,\r\n * applying filters, and handling user interactions like updating items and submitting requests.\r\n *\r\n * Key Responsibilities:\r\n * - Fetching and managing the master list of prior authorization items (_worklistItems).\r\n * - Providing reactive, derived signals for filtered data (filteredItems) and UI state (loading, processingCount).\r\n * - Handling data filtering based on days (currentDaysFilter) and predefined filter sets (activePredefinedFilter).\r\n * - Exposing methods to interact with the backend for CRUD operations on worklist items, milestones, and comments.\r\n * - Integrating with external services like Glidian for authorization requests.\r\n * - Managing real-time updates and ensuring data consistency across the application.\r\n *\r\n * @method constructor - Initializes the service, injects dependencies, and sets up an effect to automatically update column filters.\r\n * @method updateDaysFilter - Updates the days filter for the worklist.\r\n * @method getCurrentDaysFilter - Retrieves the current days filter value.\r\n * @method updatePredefinedFilter - Applies a predefined filter to the worklist.\r\n * @method clearPredefinedFilter - Clears the currently active predefined filter.\r\n * @method clearWorklistData - Clears all worklist data from the table.\r\n * @method updatePriorAuthItem - Updates a single prior authorization item in the worklist.\r\n * @method updatePriorAuthItemStatus - Updates the status of a specific prior authorization item.\r\n * @method updatePriorAuthItemPriority - Updates the priority of a specific prior authorization item.\r\n * @method updatePriorAuthItemMilestone - Updates a milestone for a specific prior authorization item.\r\n * @method updateMilestone - Sends a milestone update request to the backend.\r\n * @method getPriorAuthItemById - Fetches a single, detailed prior authorization item from the backend.\r\n * @method getWorklist - Fetches the entire prior authorization worklist from the backend.\r\n * @method refreshWorklist - Manually triggers a refresh of the entire worklist.\r\n * @method refreshWorklistItem - Refreshes a single item in the worklist.\r\n * @method setWorklistItems - A utility to manually set the worklist items, primarily for testing.\r\n * @method isItemLoadingDetails - Checks if detailed information for a specific item is currently being loaded.\r\n * @method createGlidianAuth - Initiates a Glidian authorization request.\r\n * @method reprocessCompass - Triggers a backend reprocessing of a worklist item.\r\n * @method getWorklistComments - Fetches comments for a specific worklist item.\r\n * @method addWorklistComment - Adds a new comment to a worklist item.\r\n * @method updateWorklistComment - Updates an existing comment on a worklist item.\r\n * @method getLatestGlidianRecord - Fetches the latest Glidian record for a worklist item.\r\n * @method createTestOrders - A utility for creating test orders in non-production environments.\r\n * @method getDocumentsForWorklist - Fetches available documents for attaching to a worklist item.\r\n * @method attachDocumentsToGlidianMilestone - Attaches selected documents to a Glidian milestone.\r\n * @method removeGlidianId - Removes a specific Glidian ID from a milestone.\r\n *\r\n * @property worklistItems - Read-only signal containing all prior authorization items.\r\n * @property filteredItems - Computed signal that returns a filtered view of the worklist items.\r\n * @property predefinedFilterCounts - Computed signal that provides counts for each predefined filter.\r\n * @property loading - Read-only signal indicating if the worklist is loading.\r\n * @property loadingDetails - Read-only signal tracking which individual items are loading details.\r\n * @property processingCount - Read-only signal tracking the number of items being processed.\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PriorAuthService {\r\n  \r\n  // === SIGNALS IMPLEMENTATION ===\r\n  \r\n  /**\r\n   * Signal containing all prior authorization items loaded from the service\r\n   * This is the master data source for all worklist operations\r\n   * Starts empty to avoid showing test data during loading\r\n   */\r\n  private _worklistItems = signal<PriorAuthItem[]>([]);\r\n  \r\n  /**\r\n   * Signal tracking the current days filter setting\r\n   * Controls which items are visible based on their EDOS date\r\n   */\r\n  private _currentDaysFilter = signal<number | 'all'>(30);\r\n  \r\n  /**\r\n   * Signal tracking the loading state of worklist operations\r\n   * Used to show loading indicators during data fetching\r\n   */\r\n  private _loading = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Signal tracking which items are currently loading their detailed information\r\n   * Used to show individual loading states for progressive updates\r\n   */\r\n  private _loadingDetails = signal<Set<number>>(new Set());\r\n  \r\n  /**\r\n   * Signal tracking the count of items being processed for details\r\n   * Used to show a badge on the refresh button during progressive loading\r\n   */\r\n  private _processingCount = signal<number>(0);\r\n  \r\n  /**\r\n   * Subject to emit when an item is being refreshed automatically\r\n   * Components can subscribe to this to show loading states\r\n   */\r\n  private _itemRefreshSubject = new Subject<number>();\r\n\r\n  /**\r\n   * Subject to emit when an item is updated with detailed data during progressive loading\r\n   * Components can subscribe to this to trigger change detection for table updates\r\n   */\r\n  private _itemDetailUpdatedSubject = new Subject<void>();\r\n  \r\n  /**\r\n   * Signal tracking the currently active predefined filter\r\n   * Controls which predefined filter is applied to the worklist\r\n   */\r\n  private _activePredefinedFilter = signal<PredefinedFilter | null>(null);\r\n\r\n  /**\r\n   * Signal tracking whether to show only current user's assignments\r\n   * Controls if the worklist shows all items or only those assigned to current user\r\n   */\r\n  private _showMyAssignmentsOnly = signal<boolean>(false);\r\n\r\n  /**\r\n   * Subject to emit and store worklist comments\r\n   * Components can subscribe to this to get real-time comment updates\r\n   */\r\n  private _commentsSubject = new BehaviorSubject<PriorAuthComment[]>([]);\r\n  public comments$ = this._commentsSubject.asObservable();\r\n  \r\n  // Track last column filter update to prevent infinite loops\r\n  private _lastColumnFilterUpdate: string = '';\r\n  \r\n  // === READ-ONLY SIGNALS FOR EXTERNAL ACCESS ===\r\n  \r\n  /**\r\n   * Read-only access to the current days filter setting\r\n   * Components can use this to display the current filter state\r\n   */\r\n  readonly currentDaysFilter = this._currentDaysFilter.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the loading state\r\n   * Components can use this to show loading indicators\r\n   */\r\n  readonly loading = this._loading.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the loading details state\r\n   * Components can use this to show individual item loading indicators\r\n   */\r\n  readonly loadingDetails = this._loadingDetails.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to the processing count\r\n   * Components can use this to show a badge on the refresh button\r\n   */\r\n  readonly processingCount = this._processingCount.asReadonly();\r\n  \r\n  /**\r\n   * Observable that emits when an item is being refreshed automatically\r\n   * Components can subscribe to this to show loading states\r\n   */\r\n  readonly itemRefresh$ = this._itemRefreshSubject.asObservable();\r\n\r\n  /**\r\n   * Observable that emits when an item is updated with detailed data during progressive loading\r\n   * Components can subscribe to this to trigger change detection for table row updates\r\n   */\r\n  readonly itemDetailUpdated$ = this._itemDetailUpdatedSubject.asObservable();\r\n  \r\n  /**\r\n   * Read-only access to the active predefined filter\r\n   * Components can use this to display the current filter state\r\n   */\r\n  readonly activePredefinedFilter = this._activePredefinedFilter.asReadonly();\r\n\r\n  /**\r\n   * Read-only access to the assignment filter state\r\n   * Components can use this to display whether filtering by current user's assignments\r\n   */\r\n  readonly showMyAssignmentsOnly = this._showMyAssignmentsOnly.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to all worklist items\r\n   * Contains the complete unfiltered dataset\r\n   */\r\n  readonly worklistItems = this._worklistItems.asReadonly();\r\n  \r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n  \r\n  /**\r\n   * Filtered items computed signal with conditional logic based on version\r\n   *\r\n   * IMPORTANT ARCHITECTURE NOTE:\r\n   * - When useNewVersion is TRUE (new custom worklist filtering):\r\n   *   Backend CCL handles filtering (workflow status, scheduling status, locations, providers, days filter)\r\n   *   Frontend only applies assignment filter\r\n   * - When useNewVersion is FALSE (old predefined filter bar):\r\n   *   Backend returns all data, frontend applies all predefined filter criteria\r\n   *\r\n   * Additional frontend filtering (global search, column filters) is handled\r\n   * at the component level in PriorAuthComponent and WorklistTableComponent.\r\n   */\r\n  readonly filteredItems = computed(() => {\r\n    let items = this._worklistItems();\r\n    const daysFilter = this._currentDaysFilter();\r\n    const predefinedFilter = this._activePredefinedFilter();\r\n    const showMyAssignmentsOnly = this._showMyAssignmentsOnly();\r\n    const isLoading = this._loading();\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    // During loading, return empty array to prevent showing partial results\r\n    if (isLoading && items.length === 0) {\r\n      return [];\r\n    }\r\n\r\n    // NEW VERSION: Backend filtering, frontend only applies assignment filter\r\n    if (useNewVersion) {\r\n      if (showMyAssignmentsOnly) {\r\n        const currentUser = this.userPreferences.getUserData();\r\n        if (currentUser && currentUser.username) {\r\n          const currentUsername = currentUser.username.toLowerCase();\r\n          return items.filter(item =>\r\n            item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n          );\r\n        }\r\n        return [];\r\n      }\r\n      return items;\r\n    }\r\n\r\n    // OLD VERSION: Frontend filtering with predefined filters\r\n    // Apply predefined filters first\r\n    if (predefinedFilter && predefinedFilter.filters) {\r\n      const filters = predefinedFilter.filters;\r\n      const excludeFilters = predefinedFilter.excludeFilters;\r\n\r\n      // Apply workflow status filter\r\n      if (filters.workflowStatus && filters.workflowStatus.length > 0) {\r\n        items = items.filter(item =>\r\n          filters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n        );\r\n      }\r\n\r\n      // Apply workflow status exclude filter\r\n      if (excludeFilters?.workflowStatus && excludeFilters.workflowStatus.length > 0) {\r\n        items = items.filter(item =>\r\n          !excludeFilters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling status filter\r\n      if (filters.schedulingStatus && filters.schedulingStatus.length > 0) {\r\n        items = items.filter(item =>\r\n          filters.schedulingStatus!.includes(item.schedule?.state || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling status exclude filter\r\n      if (excludeFilters?.schedulingStatus && excludeFilters.schedulingStatus.length > 0) {\r\n        items = items.filter(item =>\r\n          !excludeFilters.schedulingStatus!.includes(item.schedule?.state || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering location filter\r\n      if (filters.orderingLocation && filters.orderingLocation.length > 0) {\r\n        items = items.filter(item =>\r\n          filters.orderingLocation!.includes(item.orderingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering provider filter\r\n      if (filters.orderingProvider && filters.orderingProvider.length > 0) {\r\n        items = items.filter(item =>\r\n          filters.orderingProvider!.includes(item.orderingProvider || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling location filter\r\n      if (filters.schedulingLocation && filters.schedulingLocation.length > 0) {\r\n        items = items.filter(item =>\r\n          filters.schedulingLocation!.includes(item.schedulingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering location exclude filter\r\n      if (excludeFilters?.orderingLocation && excludeFilters.orderingLocation.length > 0) {\r\n        items = items.filter(item =>\r\n          !excludeFilters.orderingLocation!.includes(item.orderingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Apply ordering provider exclude filter\r\n      if (excludeFilters?.orderingProvider && excludeFilters.orderingProvider.length > 0) {\r\n        items = items.filter(item =>\r\n          !excludeFilters.orderingProvider!.includes(item.orderingProvider || '')\r\n        );\r\n      }\r\n\r\n      // Apply scheduling location exclude filter\r\n      if (excludeFilters?.schedulingLocation && excludeFilters.schedulingLocation.length > 0) {\r\n        items = items.filter(item =>\r\n          !excludeFilters.schedulingLocation!.includes(item.schedulingLocation || '')\r\n        );\r\n      }\r\n\r\n      // Override days filter if specified in predefined filter\r\n      if (filters.daysFilter !== undefined) {\r\n        const filterDays = filters.daysFilter;\r\n        if (filterDays !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + filterDays);\r\n\r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n        // Apply assignment filter even with predefined days filter\r\n        if (showMyAssignmentsOnly) {\r\n          const currentUser = this.userPreferences.getUserData();\r\n          if (currentUser && currentUser.username) {\r\n            const currentUsername = currentUser.username.toLowerCase();\r\n            return items.filter(item =>\r\n              item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n            );\r\n          }\r\n          return [];\r\n        }\r\n        return items;\r\n      }\r\n    }\r\n\r\n    // Apply regular days filter if not overridden by predefined filter\r\n    if (daysFilter === 'all') {\r\n      if (showMyAssignmentsOnly) {\r\n        const currentUser = this.userPreferences.getUserData();\r\n        if (currentUser && currentUser.username) {\r\n          const currentUsername = currentUser.username.toLowerCase();\r\n          return items.filter(item =>\r\n            item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n          );\r\n        }\r\n        return [];\r\n      }\r\n      return items;\r\n    }\r\n\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const futureDate = new Date(today);\r\n    futureDate.setDate(today.getDate() + daysFilter);\r\n\r\n    const filteredByDays = items.filter(item => {\r\n      if (!item.edosDate) {\r\n        return false;\r\n      }\r\n      const edosDate = new Date(item.edosDate);\r\n      edosDate.setHours(0, 0, 0, 0);\r\n      return edosDate <= futureDate;\r\n    });\r\n\r\n    // Apply assignment filter if enabled\r\n    if (showMyAssignmentsOnly) {\r\n      const currentUser = this.userPreferences.getUserData();\r\n      if (currentUser && currentUser.username) {\r\n        const currentUsername = currentUser.username.toLowerCase();\r\n        return filteredByDays.filter(item =>\r\n          item.assignedTo && item.assignedTo.toLowerCase() === currentUsername\r\n        );\r\n      }\r\n      return [];\r\n    }\r\n\r\n    return filteredByDays;\r\n  });\r\n  \r\n  \r\n\r\n\r\n  constructor(\r\n    private customService: CustomService,\r\n    private columnConfig: ColumnConfigService,\r\n    private messagingService: MessagingService,\r\n    private userPreferences: UserPreferencesService,\r\n    private timerService: TimerService\r\n  ) {\r\n\r\n    // Set up automatic column filter updates when filtered data changes\r\n    // This effect runs whenever filteredItems() changes and automatically updates column filters\r\n    effect(() => {\r\n      const filteredData = this.filteredItems();\r\n      const predefinedFilter = this._activePredefinedFilter();\r\n      \r\n      // Create a hash that includes individual item refresh timestamps to detect updates\r\n      // This ensures that when individual items are updated, the effect re-runs\r\n      const dataHash = JSON.stringify({\r\n        count: filteredData.length,\r\n        filterId: predefinedFilter?.id || 'null',\r\n        firstItemId: filteredData[0]?.compass_worklist_id || 'null',\r\n        // Include the latest dataRefreshDtTm to detect individual item updates\r\n        latestRefresh: filteredData.length > 0 ? \r\n          Math.max(...filteredData.map(item => item.dataRefreshDtTm?.getTime() || 0)) : 0,\r\n        // Include a sample of workflow statuses to detect status changes\r\n        statusSample: filteredData.slice(0, 5).map(item => ({\r\n          id: item.compass_worklist_id,\r\n          status: item.workflowStatus?.status,\r\n          edos: item.edosDate?.getTime(),\r\n          glidian: item.glidianData?.latestStatus\r\n        }))\r\n      });\r\n      \r\n      // Only update column filters if:\r\n      // 1. We have data and we're not in a loading state\r\n      // 2. The data has actually changed (prevent infinite loops)\r\n      if (filteredData.length > 0 && !this._loading() && dataHash !== this._lastColumnFilterUpdate) {\r\n        // Auto-updating column filters with filtered items (detected data changes)\r\n        this._lastColumnFilterUpdate = dataHash;\r\n        this.columnConfig.updateColumnFiltersFromData(filteredData);\r\n      } else if (dataHash === this._lastColumnFilterUpdate) {\r\n        // Skipping column filter update - data unchanged\r\n      }\r\n    }, { allowSignalWrites: true });\r\n  }\r\n\r\n\r\n  /**\r\n   * Updates the days filter setting\r\n   * This automatically triggers recalculation of the filteredItems computed signal\r\n   * No manual filtering or emission needed - signals handle the reactivity\r\n   */\r\n  updateDaysFilter(days: number | 'all'): void {\r\n    this._currentDaysFilter.set(days);\r\n  }\r\n\r\n\r\n  /**\r\n   * Get the current days filter value using signals\r\n   * Returns the current value of the currentDaysFilter signal\r\n   */\r\n  getCurrentDaysFilter(): number | 'all' {\r\n    return this._currentDaysFilter();\r\n  }\r\n\r\n  /**\r\n   * Updates the assignment filter setting\r\n   * This automatically triggers recalculation of the filteredItems computed signal\r\n   * @param showMyAssignmentsOnly - true to show only current user's assignments, false to show all\r\n   */\r\n  updateAssignmentFilter(showMyAssignmentsOnly: boolean): void {\r\n    this._showMyAssignmentsOnly.set(showMyAssignmentsOnly);\r\n  }\r\n  \r\n  /**\r\n   * Update the active predefined filter\r\n   * This will filter the worklist items based on the predefined filter criteria\r\n   */\r\n  updatePredefinedFilter(filter: PredefinedFilter | null): void {\r\n    // Setting predefined filter\r\n    this._activePredefinedFilter.set(filter);\r\n    // Current predefined filter after set\r\n    \r\n    // Column filter updates are now handled automatically by the effect() below\r\n    // No need for setTimeout - the effect will trigger when filteredItems() changes\r\n  }\r\n  \r\n  /**\r\n   * Clears the active predefined filter\r\n   * This will revert to showing items based only on the days filter\r\n   */\r\n  clearPredefinedFilter(): void {\r\n    // Clearing predefined filter\r\n    this._activePredefinedFilter.set(null);\r\n\r\n    // Column filter updates are now handled automatically by the effect() below\r\n    // No need for setTimeout - the effect will trigger when filteredItems() changes\r\n  }\r\n\r\n  /**\r\n   * Clears all worklist data from the table\r\n   * Used when resetting the view (e.g., toggling to new version mode)\r\n   */\r\n  clearWorklistData(): void {\r\n    this._worklistItems.set([]);\r\n    this._loading.set(false);\r\n    this._processingCount.set(0);\r\n    this._loadingDetails.set(new Set());\r\n  }\r\n\r\n  /**\r\n   * Update a single prior auth item in the worklist\r\n   * Updates the signal and triggers automatic recalculation of filtered items\r\n   * This ensures that individual item updates are reflected across all filter views\r\n   * Only updates if the new data is more recent than existing data\r\n   */\r\n  updatePriorAuthItem(item: PriorAuthItem): void {\r\n    // Update the master worklist items signal with the updated item\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(existingItem => \r\n        existingItem.compass_worklist_id === item.compass_worklist_id\r\n      );\r\n      \r\n      if (itemIndex !== -1) {\r\n        const existingItem = currentItems[itemIndex];\r\n        const existingRefreshTime = existingItem.dataRefreshDtTm?.getTime() || 0;\r\n        const newRefreshTime = item.dataRefreshDtTm?.getTime() || 0;\r\n        \r\n        // Only update if the new item is more recent, OR if there's no timestamp data\r\n        if (newRefreshTime >= existingRefreshTime || (!existingRefreshTime && !newRefreshTime)) {\r\n          const updatedItems = [...currentItems];\r\n          updatedItems[itemIndex] = { ...item, dataRefreshDtTm: new Date() };\r\n          // console.log(`[PriorAuthService.updatePriorAuthItem] Updated item ${item.compass_worklist_id} in master data source (newer data)`);\r\n          return updatedItems;\r\n        } else {\r\n          // console.log(`[PriorAuthService.updatePriorAuthItem] Skipping update for item ${item.compass_worklist_id} - existing data is newer`);\r\n          return currentItems;\r\n        }\r\n      } else {\r\n        // Item not found - this could happen if the item was added while we weren't watching\r\n        // console.warn(`[PriorAuthService.updatePriorAuthItem] Item ${item.compass_worklist_id} not found in worklist, adding it`);\r\n        return [...currentItems, { ...item, dataRefreshDtTm: new Date() }];\r\n      }\r\n    });\r\n    \r\n    // Update column filters from data if requested (this will now be handled by the effect)\r\n    // The effect automatically runs when _worklistItems changes, so no manual trigger needed\r\n  }\r\n\r\n  /**\r\n   * Update just the status of a prior auth item\r\n   * Updates the master worklist items signal to ensure changes are reflected across all filter views\r\n   */\r\n  updatePriorAuthItemStatus(id: number, status: string): void {\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(item => item.compass_worklist_id === id);\r\n      \r\n      if (itemIndex !== -1) {\r\n        const updatedItems = [...currentItems];\r\n        updatedItems[itemIndex] = {\r\n          ...updatedItems[itemIndex],\r\n          workflowStatus: {\r\n            ...updatedItems[itemIndex].workflowStatus,\r\n            status: status,\r\n            statusDateTime: new Date()\r\n          },\r\n          dataRefreshDtTm: new Date()\r\n        };\r\n        // console.log(`[PriorAuthService.updatePriorAuthItemStatus] Updated status for item ${id} to ${status}`);\r\n        return updatedItems;\r\n      }\r\n      \r\n      return currentItems;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update just the priority of a prior auth item\r\n   * Updates the master worklist items signal to ensure changes are reflected across all filter views\r\n   */\r\n  updatePriorAuthItemPriority(id: number, priority: string): void {\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(item => item.compass_worklist_id === id);\r\n      \r\n      if (itemIndex !== -1) {\r\n        const updatedItems = [...currentItems];\r\n        updatedItems[itemIndex] = {\r\n          ...updatedItems[itemIndex],\r\n          priority: priority,\r\n          dataRefreshDtTm: new Date()\r\n        };\r\n        // console.log(`[PriorAuthService.updatePriorAuthItemPriority] Updated priority for item ${id} to ${priority}`);\r\n        return updatedItems;\r\n      }\r\n      \r\n      return currentItems;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update a milestone in a prior auth item\r\n   * Updates the master worklist items signal to ensure changes are reflected across all filter views\r\n   */\r\n  updatePriorAuthItemMilestone(id: number, milestoneName: string, status: string): void {\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(item => item.compass_worklist_id === id);\r\n      \r\n      if (itemIndex !== -1) {\r\n        const updatedItems = [...currentItems];\r\n        const item = { ...updatedItems[itemIndex] };\r\n        \r\n        // Update the specific milestone\r\n        if (item.milestones && Array.isArray(item.milestones)) {\r\n          item.milestones = item.milestones.map(milestone => {\r\n            if (milestone.name === milestoneName) {\r\n              return {\r\n                ...milestone,\r\n                status: status,\r\n                statusDateTime: new Date(),\r\n                completedDate: status === 'Complete' ? new Date() : milestone.completedDate\r\n              };\r\n            }\r\n            return milestone;\r\n          });\r\n        }\r\n        \r\n        item.dataRefreshDtTm = new Date();\r\n        updatedItems[itemIndex] = item;\r\n        // console.log(`[PriorAuthService.updatePriorAuthItemMilestone] Updated milestone ${milestoneName} for item ${id} to ${status}`);\r\n        return updatedItems;\r\n      }\r\n      \r\n      return currentItems;\r\n    });\r\n  }\r\n  \r\n\r\n  /**\r\n   * Updates a milestone using Clinical Office CustomService.\r\n   * This method calls the cov_compass_service with updateMilestone id and updatePriorAuthMilestone requestType.\r\n   * \r\n   * @param requestData - The data to update the milestone with (includes compassMilestoneId)\r\n   * @param worklistItemId - Optional worklist item ID for refreshing the item when reloadInd is 1\r\n   * @returns Observable<any> - The response from the service\r\n   */\r\n  updateMilestone(requestData: MilestoneUpdateRequest, worklistItemId?: number): Observable<any> {\r\n    // Initiate milestone update request with specified ID and data payload\r\n\r\n    // Online mode: use Clinical Office CustomService\r\n    return new Observable<any>(observer => {\r\n      // Execute milestone update using Clinical Office CustomService with proper CCL script call\r\n      // Note: No global loading state - only individual item loading states should be used\r\n      \r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `updateMilestone_${requestData.compassMilestoneId}`,\r\n                parameters: { \r\n                  requestType: 'updatePriorAuthMilestone', \r\n                  requestId: requestData.compassMilestoneId,\r\n                  requestMeaning: requestData.actionMeaning || 'Updated Milestone Status',\r\n                  requestData: JSON.stringify({\r\n                    request_object: requestData\r\n                  })\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get(`updateMilestone_${requestData.compassMilestoneId}`);\r\n            // Process raw response from CustomService milestone update\r\n            \r\n            if (!raw) {\r\n              // Handle case where no response is received from the service\r\n              const errorMessage = 'No response received from milestone update service';\r\n              this.messagingService.error(errorMessage);\r\n              observer.error(new Error(errorMessage));\r\n              return;\r\n            }\r\n            \r\n            // Handle new response structure with 'reply' wrapper\r\n            const replyData = raw?.reply || raw;\r\n            \r\n            // Process the response based on status\r\n            if (replyData.statusData && replyData.statusData.status === 'S') {\r\n              // Success case - don't show service-level message as components will show combined message\r\n              const successMessage = replyData.text || 'Milestone updated successfully';\r\n              \r\n              // Extract milestone ID from subeventstatus if available\r\n              let milestoneId: string | undefined;\r\n              if (replyData.statusData.subeventstatus && replyData.statusData.subeventstatus.length > 0) {\r\n                const milestoneIdEntry = replyData.statusData.subeventstatus.find(\r\n                  (subevent: any) => subevent.targetobjectname?.trim() === 'MILESTONE ID'\r\n                );\r\n                if (milestoneIdEntry) {\r\n                  milestoneId = milestoneIdEntry.targetobjectvalue?.trim();\r\n                }\r\n              }\r\n              \r\n              // Check if reload is required based on backend response\r\n              if (replyData.reloadInd === 1) {\r\n                // console.log('[PriorAuthService.updateMilestone] Backend requested reload, refreshing worklist item');\r\n                \r\n                // Use the worklistItemId parameter if provided, otherwise skip refresh\r\n                if (worklistItemId) {\r\n                  // Call the refresh method which will update the worklist items\r\n                  this.refreshWorklistItem(worklistItemId);\r\n                } else {\r\n                  // console.warn('[PriorAuthService.updateMilestone] reloadInd is 1 but no worklistItemId provided, skipping refresh');\r\n                }\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                milestoneId: milestoneId,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              // Failure case\r\n              const errorMessage = replyData.text || 'Milestone update failed';\r\n              this.messagingService.error(errorMessage);\r\n              \r\n              // Extract milestone ID from subeventstatus if available (even for failures)\r\n              let milestoneId: string | undefined;\r\n              if (replyData.statusData?.subeventstatus && replyData.statusData.subeventstatus.length > 0) {\r\n                const milestoneIdEntry = replyData.statusData.subeventstatus.find(\r\n                  (subevent: any) => subevent.targetobjectname?.trim() === 'MILESTONE ID'\r\n                );\r\n                if (milestoneIdEntry) {\r\n                  milestoneId = milestoneIdEntry.targetobjectvalue?.trim();\r\n                }\r\n              }\r\n              \r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                milestoneId: milestoneId,\r\n                data: replyData\r\n              });\r\n            }\r\n            \r\n            observer.complete();\r\n          } catch (error) {\r\n            // Handle any errors that occur during milestone update processing\r\n            const errorMessage = 'Error updating milestone';\r\n            this.messagingService.error(errorMessage);\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetch a single PriorAuthItem by ID using Clinical Office CustomService.\r\n   * This will call a custom CCL script and return the result as an Observable<PriorAuthItem>.\r\n   * Creates a unique ID for the custom script call using the method name and the compass worklist ID.\r\n   *\r\n   * NOTE: The JSON returned from customService.get('getPriorAuthItemById_${id}') may not match the PriorAuthItem interface.\r\n   * Use the mapToPriorAuthItem function below to transform the raw response to a valid PriorAuthItem.\r\n   */\r\n  getPriorAuthItemById(id: number): Observable<PriorAuthItem> {\r\n    // Fetch specific prior authorization item by ID using CustomService with unique ID\r\n    return new Observable<PriorAuthItem>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `getPriorAuthItemById_${id}`,\r\n                parameters: { requestType: 'getPriorAuthItemById', requestId: id }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          const raw = this.customService.get(`getPriorAuthItemById_${id}`);\r\n          // console.log(`[PriorAuthService.getPriorAuthItemById] Raw response for item ${id}:`, raw);\r\n          \r\n          // Extract the first item from qual array\r\n          const item = raw && Array.isArray(raw.qual) && raw.qual.length > 0 ? raw.qual[0] : null;\r\n          if (item) {\r\n            const mapped: PriorAuthItem = this.mapToPriorAuthItem(item);\r\n            // console.log(`[PriorAuthService.getPriorAuthItemById] Successfully mapped item ${id}:`, mapped);\r\n            observer.next(mapped);\r\n          } else {\r\n            // console.warn(`[PriorAuthService.getPriorAuthItemById] No detailed data found for item ${id}, raw response:`, raw);\r\n            // Return null to indicate no detailed data available\r\n            observer.next(null as any);\r\n          }\r\n          observer.complete();\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Helper function to check if a date string is valid\r\n   * Returns true if the date is valid and not the invalid \"0000-00-00\" format\r\n   */\r\n  private isValidDateString(dateStr: string | null | undefined): boolean {\r\n    if (!dateStr) return false;\r\n    if (dateStr === '0000-00-00T00:00:00.000+00:00') return false;\r\n    if (dateStr.startsWith('0000-00-00')) return false;\r\n    const date = new Date(dateStr);\r\n    return !isNaN(date.getTime());\r\n  }\r\n\r\n  /**\r\n   * Map the raw JSON response from customService.get('getPriorAuthItemById_${id}') to a valid PriorAuthItem.\r\n   * Implement this function to transform the backend response to your strict model.\r\n   */\r\n  private mapToPriorAuthItem(raw: any): PriorAuthItem {\r\n    // Transform raw service response data to PriorAuthItem model structure\r\n    // Map payors if they exist in the raw data\r\n    let payors: any[] = [];\r\n    if (raw.payors && Array.isArray(raw.payors)) {\r\n      payors = raw.payors.map((p: any) => ({\r\n        planId: p.planId || '',\r\n        planName: p.planName || '',\r\n        planType: p.planType || '',\r\n        effectiveDate: this.isValidDateString(p.effectiveDate) ? new Date(p.effectiveDate) : new Date(),\r\n        endDate: this.isValidDateString(p.endDate) ? new Date(p.endDate) : undefined,\r\n        glidianPayerId: p.glidian_payer_id || p.glidianPayerId || ''\r\n      }));\r\n    }\r\n\r\n    // Map milestones if they exist in the raw data\r\n    let milestones: any[] = [];\r\n    if (raw.milestones && Array.isArray(raw.milestones)) {\r\n      milestones = raw.milestones.map((m: any) => ({\r\n        milestoneId: m.milestoneId || 0,\r\n        name: m.name || '',\r\n        meaning: m.meaning || '',\r\n        status: m.status || '',\r\n        statusDateTime: this.isValidDateString(m.statusDateTime) ? new Date(m.statusDateTime) : undefined,\r\n        completedDate: this.isValidDateString(m.completedDate) ? new Date(m.completedDate) : undefined,\r\n        requiredInd: m.requiredInd !== undefined ? m.requiredInd : true,\r\n        milestoneData: m.milestoneData && Array.isArray(m.milestoneData) ? m.milestoneData : []\r\n      }));\r\n    }\r\n\r\n    // Map actions if they exist in the raw data\r\n    let actions: any[] = [];\r\n    if (raw.actions && Array.isArray(raw.actions)) {\r\n      actions = raw.actions.map((a: any) => ({\r\n        actionId: a.actionId || 0,\r\n        milestoneId: a.milestoneId || 0,\r\n        name: a.name || '',\r\n        description: a.description || '',\r\n        type: a.type || '',\r\n        meaning: a.meaning || '',\r\n        status: a.status || '',\r\n        actionDtTm: this.isValidDateString(a.actionDtTm) ? new Date(a.actionDtTm) : new Date(),\r\n        actionBy: a.actionBy || a.action_by || 'Unknown'\r\n      }));\r\n    }\r\n\r\n    // Map schedule information if it exists in the raw data\r\n    let schedule: any = undefined;\r\n    if (raw.schedule && (raw.schedule.eventId || raw.schedule.scheduleId)) {\r\n      schedule = {\r\n        eventId: raw.schedule.eventId || 0,\r\n        scheduleId: raw.schedule.scheduleId || 0,\r\n        state: raw.schedule.state || undefined\r\n      };\r\n    }\r\n\r\n    // Map GlidianData if present\r\n    let glidianData = undefined;\r\n    if (raw.glidianData) {\r\n      glidianData = {\r\n        recordId: raw.glidianData.recordId || '',\r\n        portalUrl: raw.glidianData.portalUrl || '',\r\n        latestStatusDtTm: this.isValidDateString(raw.glidianData.latestStatusDtTm) ? new Date(raw.glidianData.latestStatusDtTm) : undefined,\r\n        latestStatus: raw.glidianData.latestStatus || '',\r\n        latestStatusId: raw.glidianData.latestStatusId || 0,\r\n        authNumber: raw.glidianData.authNumber || '',\r\n        authStartDateTime: this.isValidDateString(raw.glidianData.authStartDateTime) ? new Date(raw.glidianData.authStartDateTime) : undefined,\r\n        authEndDateTime: this.isValidDateString(raw.glidianData.authEndDateTime) ? new Date(raw.glidianData.authEndDateTime) : undefined,\r\n        payorReferenceNumber: raw.glidianData.payorReferenceNumber || ''\r\n      };\r\n    }\r\n\r\n    // Map RenderingInfo if present\r\n    // This contains information about the facility/location where services will be rendered\r\n    // A location is considered \"selected\" if organizationId > 0 OR isManualEntry === 1\r\n    let renderingInfo = undefined;\r\n    if (raw.renderingInfo) {\r\n      renderingInfo = {\r\n        organizationId: raw.renderingInfo.organizationId || 0,\r\n        locFacilityCd: raw.renderingInfo.locFacilityCd || 0,\r\n        locationName: raw.renderingInfo.locationName || '',\r\n        address: raw.renderingInfo.address || '',\r\n        city: raw.renderingInfo.city || '',\r\n        state: raw.renderingInfo.state || '',\r\n        zipCode: raw.renderingInfo.zipCode || '',\r\n        phone: raw.renderingInfo.phone || '',\r\n        fax: raw.renderingInfo.fax || '',\r\n        npi: raw.renderingInfo.npi || '',\r\n        taxId: raw.renderingInfo.taxId || '',\r\n        isManualEntry: raw.renderingInfo.isManualEntry || 0,\r\n        useOrderingProviderInd: raw.renderingInfo.useOrderingProviderInd || 0\r\n      };\r\n    }\r\n\r\n    // Map OrderingInfo if present\r\n    let orderingInfo = undefined;\r\n    if (raw.orderingInfo) {\r\n      orderingInfo = {\r\n        orderingProviderId: raw.orderingInfo.orderingProviderId || 0,\r\n        orderingProvider: raw.orderingInfo.orderingProvider || '',\r\n        internalProviderInd: raw.orderingInfo.internalProviderInd || 0,\r\n        orderingProviderInfo: raw.orderingInfo.orderingProviderInfo || [],\r\n        orderingLocation: raw.orderingInfo.orderingLocation || '',\r\n        orderingLocationInfo: raw.orderingInfo.orderingLocationInfo || []\r\n      };\r\n    }\r\n\r\n    // Map feedback if present\r\n    let feedback = raw.feedback || undefined;\r\n\r\n    const mapped: PriorAuthItem = {\r\n      compass_worklist_id: raw.compassWorklistId || raw.compass_worklist_id || raw.id,\r\n      workflow_id: raw.workflowId,\r\n      personId: raw.personId,\r\n      encntrId: raw.encntrId,\r\n      orderId: raw.orderId,\r\n      patient: raw.patient ? {\r\n        name: raw.patient.name || '',\r\n        dateOfBirth: this.isValidDateString(raw.patient.dateOfBirth) ? new Date(raw.patient.dateOfBirth) : new Date(),\r\n        fin: raw.patient.fin || '',\r\n        mrn: raw.patient.mrn || ''\r\n      } : undefined,\r\n      itemDescription: raw.itemDescription,\r\n      orderingLocation: raw.orderingLocation,\r\n      orderingProvider: raw.orderingProvider,\r\n      schedulingLocation: raw.schedulingLocation,\r\n      workflowType: raw.workflowType,\r\n      workflowUpdateDateTime: this.isValidDateString(raw.workflowUpdateDateTime) ? new Date(raw.workflowUpdateDateTime) : new Date(),\r\n      workflowUpdateCount: raw.workflowUpdateCount,\r\n      workflowStatus: {\r\n        status: raw.workflowStatus?.status || '',\r\n        statusDateTime: this.isValidDateString(raw.workflowStatus?.statusDateTime) ? new Date(raw.workflowStatus.statusDateTime) : new Date()\r\n      },\r\n      subStatus: {\r\n        subStatus: raw.subStatus?.subStatus || '',\r\n        subStatusDateTime: this.isValidDateString(raw.subStatus?.subStatusDateTime) ? new Date(raw.subStatus.subStatusDateTime) : new Date()\r\n      },\r\n      priority: raw.priority || 'Routine',\r\n      codeList: raw.codeList && Array.isArray(raw.codeList) ? raw.codeList.map((code: any) => ({\r\n        type: code.type || '',\r\n        vocabulary: code.vocabulary || '',\r\n        identifier: code.identifier || '',\r\n        display: code.display || ''\r\n      })) : [],\r\n      milestones: milestones,\r\n      actions: actions, // Add the mapped actions array\r\n      payors: payors,\r\n      edosDate: this.isValidDateString(raw.edosdate) ? new Date(raw.edosdate) : undefined,\r\n      origOrderDtTm: this.isValidDateString(raw.origOrderDtTm) ? new Date(raw.origOrderDtTm) : undefined,\r\n      dataRefreshDtTm: new Date(), // Stamp the refresh time\r\n      schedule: schedule, // Add the mapped schedule object\r\n      glidianData: glidianData,\r\n      renderingInfo: renderingInfo,\r\n      orderingInfo: orderingInfo,\r\n      financialClass: raw.financialClass || '',\r\n      reasonForExam: raw.reasonForExam || '',\r\n      feedback: feedback,\r\n      assignedTo: raw.assignedTo || '',\r\n      assignedName: raw.assignedName || raw.assignedDisplayName || raw.assignedFullName || '',\r\n      commentInd: raw.commentInd || 0\r\n    };\r\n    // Successfully mapped raw data to PriorAuthItem with current timestamp\r\n    return mapped;\r\n  }\r\n\r\n  /**\r\n   * Build filter parameters from active predefined filter for backend CCL\r\n   * Converts frontend filter structure to CCL-compatible format\r\n   * @returns Object with include and exclude filter criteria\r\n   */\r\n  private buildFilterParameters(): {\r\n    include: BackendFilterCriteria;\r\n    exclude: BackendFilterCriteria;\r\n  } {\r\n    // Check if using new version (custom worklist filtering) or old version (predefined filters)\r\n    const useNewVersion = this.userPreferences.useNewVersion();\r\n\r\n    // If using old version, return empty criteria to trigger START_001 (legacy filtering)\r\n    if (!useNewVersion) {\r\n      return {\r\n        include: this.createEmptyFilterCriteria(),\r\n        exclude: this.createEmptyFilterCriteria()\r\n      };\r\n    }\r\n\r\n    const activeFilter = this._activePredefinedFilter();\r\n\r\n    // If no filter, return empty criteria (backend returns all items)\r\n    if (!activeFilter || !activeFilter.filters) {\r\n      return {\r\n        include: this.createEmptyFilterCriteria(),\r\n        exclude: this.createEmptyFilterCriteria()\r\n      };\r\n    }\r\n\r\n    const filters = activeFilter.filters;\r\n    const excludeFilters = activeFilter.excludeFilters || {};\r\n\r\n    // Build include criteria\r\n    const includeCriteria: BackendFilterCriteria = {\r\n      workflowStatus: this.buildArrayParameter(filters.workflowStatus),\r\n      workflowStatusCnt: filters.workflowStatus?.length || 0,\r\n\r\n      schedulingStatus: this.buildArrayParameter(filters.schedulingStatus),\r\n      schedulingStatusCnt: filters.schedulingStatus?.length || 0,\r\n\r\n      orderingLocation: this.buildArrayParameter(filters.orderingLocation),\r\n      orderingLocationCnt: filters.orderingLocation?.length || 0,\r\n\r\n      orderingProvider: this.buildArrayParameter(filters.orderingProvider),\r\n      orderingProviderCnt: filters.orderingProvider?.length || 0,\r\n\r\n      schedulingLocation: this.buildArrayParameter(filters.schedulingLocation),\r\n      schedulingLocationCnt: filters.schedulingLocation?.length || 0,\r\n\r\n      priority: this.buildArrayParameter(filters.priority),\r\n      priorityCnt: filters.priority?.length || 0,\r\n\r\n      daysFilter: filters.daysFilter?.toString() || 'all',\r\n      edosStartDate: this.calculateEdosStartDate(filters.daysFilter),\r\n      edosEndDate: this.calculateEdosEndDate(filters.daysFilter)\r\n    };\r\n\r\n    // Build exclude criteria\r\n    const excludeCriteria: BackendFilterCriteria = {\r\n      workflowStatus: this.buildArrayParameter(excludeFilters.workflowStatus),\r\n      workflowStatusCnt: excludeFilters.workflowStatus?.length || 0,\r\n\r\n      schedulingStatus: this.buildArrayParameter(excludeFilters.schedulingStatus),\r\n      schedulingStatusCnt: excludeFilters.schedulingStatus?.length || 0,\r\n\r\n      orderingLocation: this.buildArrayParameter(excludeFilters.orderingLocation),\r\n      orderingLocationCnt: excludeFilters.orderingLocation?.length || 0,\r\n\r\n      orderingProvider: this.buildArrayParameter(excludeFilters.orderingProvider),\r\n      orderingProviderCnt: excludeFilters.orderingProvider?.length || 0,\r\n\r\n      schedulingLocation: this.buildArrayParameter(excludeFilters.schedulingLocation),\r\n      schedulingLocationCnt: excludeFilters.schedulingLocation?.length || 0,\r\n\r\n      priority: this.buildArrayParameter(excludeFilters.priority),\r\n      priorityCnt: excludeFilters.priority?.length || 0,\r\n\r\n      daysFilter: 'all', // Exclude filters don't use days filter\r\n      edosStartDate: null,\r\n      edosEndDate: null\r\n    };\r\n\r\n    return {\r\n      include: includeCriteria,\r\n      exclude: excludeCriteria\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Helper to build array parameter for CCL\r\n   * Converts string array to CCL-compatible array of objects\r\n   * @param values Optional array of string values\r\n   * @returns Array of objects with value property, or empty array\r\n   */\r\n  private buildArrayParameter(values?: string[]): Array<{ value: string }> {\r\n    if (!values || values.length === 0) {\r\n      return [];\r\n    }\r\n    return values.map(v => ({ value: v }));\r\n  }\r\n\r\n  /**\r\n   * Calculate EDOS start date based on days filter\r\n   * @param daysFilter Days filter value (30, 60, 90, 180, or 'all')\r\n   * @returns Start date (today) or null if 'all'\r\n   */\r\n  private calculateEdosStartDate(daysFilter?: number | 'all'): Date | null {\r\n    if (daysFilter === 'all' || !daysFilter) {\r\n      return null;\r\n    }\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    return today;\r\n  }\r\n\r\n  /**\r\n   * Calculate EDOS end date based on days filter\r\n   * @param daysFilter Days filter value (30, 60, 90, 180, or 'all')\r\n   * @returns End date (today + days) or null if 'all'\r\n   */\r\n  private calculateEdosEndDate(daysFilter?: number | 'all'): Date | null {\r\n    if (daysFilter === 'all' || !daysFilter) {\r\n      return null;\r\n    }\r\n    const today = new Date();\r\n    today.setHours(0, 0, 0, 0);\r\n    const futureDate = new Date(today);\r\n    futureDate.setDate(today.getDate() + daysFilter);\r\n    return futureDate;\r\n  }\r\n\r\n  /**\r\n   * Create empty filter criteria (backend returns all items)\r\n   * @returns Empty BackendFilterCriteria object\r\n   */\r\n  private createEmptyFilterCriteria(): BackendFilterCriteria {\r\n    return {\r\n      workflowStatus: [],\r\n      workflowStatusCnt: 0,\r\n      schedulingStatus: [],\r\n      schedulingStatusCnt: 0,\r\n      orderingLocation: [],\r\n      orderingLocationCnt: 0,\r\n      orderingProvider: [],\r\n      orderingProviderCnt: 0,\r\n      schedulingLocation: [],\r\n      schedulingLocationCnt: 0,\r\n      priority: [],\r\n      priorityCnt: 0,\r\n      daysFilter: 'all',\r\n      edosStartDate: null,\r\n      edosEndDate: null\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Returns the worklist items, using local data in offline mode, or Clinical Office CustomService in online mode.\r\n   * Updates the worklistItems signal with fresh data when called\r\n   * Components should prefer using the filteredItems computed signal for reactive updates\r\n   */\r\n  getWorklist(): Observable<PriorAuthItem[]> {\r\n    // Use Clinical Office CustomService to fetch worklist data\r\n    // Check if batch mode is enabled in user preferences\r\n    const userData = this.userPreferences.getUserData();\r\n    // console.log('[PriorAuthService.getWorklist] User data for batch mode check:', userData);\r\n    // console.log('[PriorAuthService.getWorklist] Performance settings:', userData?.performanceSettings);\r\n    // console.log('[PriorAuthService.getWorklist] Batch mode value:', userData?.performanceSettings?.batchMode);\r\n    const batchMode = userData?.performanceSettings?.batchMode === 1;\r\n\r\n    // Build filter parameters from active predefined filter for backend filtering\r\n    const filterParams = this.buildFilterParameters();\r\n\r\n    // Only clear existing data if no predefined filter is set to avoid race condition\r\n    if (!this._activePredefinedFilter()) {\r\n      this._worklistItems.set([]);\r\n    }\r\n\r\n      return new Observable<any[]>(observer => {\r\n        // Execute worklist fetch using Clinical Office CustomService with CCL script\r\n\r\n        // Update loading state\r\n        this._loading.set(true);\r\n\r\n        const customServiceStartTime = performance.now();\r\n        this.customService.load(\r\n          {\r\n            customScript: {\r\n              script: [\r\n                {\r\n                  name: 'cov_compass_service',\r\n                  run: 'pre',\r\n                  id: 'priorAuthWorklist',\r\n                  parameters: {\r\n                      requestType: 'getWorklist',\r\n                      worklistType: 'PRIORAUTH',\r\n                      requestMeaning: batchMode ? \"BATCH\" : \"INDIVIDUAL\",\r\n                      filterCriteria: filterParams.include,\r\n                      excludeCriteria: filterParams.exclude\r\n                  }\r\n                }\r\n              ],\r\n              clearPatientSource: true\r\n            }\r\n          },\r\n          [{ personId: 0, encntrId: 0 }],\r\n          () => {\r\n            try {\r\n              const raw = this.customService.get('priorAuthWorklist');\r\n            // Process raw worklist response from CustomService\r\n            const customServiceEndTime = performance.now();\r\n            const customServiceDuration = customServiceEndTime - customServiceStartTime;\r\n            \r\n            // Capture backend processing time from response\r\n              if (raw && typeof raw.elapsedTimeSeconds === 'number') {\r\n                this.timerService.setServerProcessingTime(raw.elapsedTimeSeconds);\r\n                this.timerService.setTotalBackendCallTime(customServiceDuration);\r\n              }\r\n              \r\n              if (!raw) {\r\n                // Handle empty response from CustomService - clear sample data and return empty array\r\n                // console.log('[PriorAuthService.getWorklist] Empty response from CustomService, clearing sample data');\r\n                this._worklistItems.set([]);\r\n                observer.next([]);\r\n                observer.complete();\r\n                \r\n                // Update loading state\r\n                this._loading.set(false);\r\n                return;\r\n              }\r\n              \r\n              // Expecting items in raw.qual array\r\n              const qualArray = raw && Array.isArray(raw.qual) ? raw.qual : [];\r\n              // Extract qual array containing worklist items from service response\r\n              \r\n              if (qualArray.length) {\r\n                observer.next(qualArray);\r\n              } else {\r\n                // No valid qual array received, clear sample data and return empty array\r\n                // console.log('[PriorAuthService.getWorklist] No valid qual array received, clearing sample data');\r\n                this._worklistItems.set([]);\r\n                observer.next([]);\r\n              }\r\n              observer.complete();\r\n              \r\n              // Don't set loading to false here - let it be set after data processing completes\r\n            } catch (error) {\r\n              // Handle any errors during CustomService callback processing\r\n              observer.error(error);\r\n              \r\n              // Set loading to false on error\r\n              this._loading.set(false);\r\n            }\r\n          }\r\n        );\r\n      }).pipe(\r\n        switchMap((worklist: any[]) => {\r\n          // Process and transform the raw worklist data into PriorAuthItem objects\r\n          if (!worklist.length) {\r\n            // Worklist is empty - return empty observable array\r\n            return of([]);\r\n          }\r\n          \r\n          // Map each item to PriorAuthItem using mapToPriorAuthItem\r\n          const mappedItems: PriorAuthItem[] = worklist.map(item => {\r\n            try {\r\n              const mapped = this.mapToPriorAuthItem(item);\r\n              // Successfully mapped worklist item to PriorAuthItem structure\r\n              return mapped;\r\n            } catch (error) {\r\n              // Skip items that fail to map properly\r\n              return null;\r\n            }\r\n          }).filter((item): item is PriorAuthItem => item !== null);\r\n          \r\n          // All items have been successfully mapped to PriorAuthItem format\r\n          \r\n          if (!mappedItems.length) {\r\n            // No items were successfully mapped - clear sample data and return empty array\r\n            // console.log('[PriorAuthService.getWorklist] No items successfully mapped, clearing sample data');\r\n            this._worklistItems.set([]);\r\n            return of([]);\r\n          }\r\n          \r\n          // First, immediately display the basic worklist items\r\n          // console.log('[PriorAuthService.getWorklist] Displaying basic worklist items immediately:', mappedItems.length, 'items');\r\n          // console.log('[PriorAuthService.getWorklist] Current predefined filter before setting items:', this._activePredefinedFilter()?.id || 'null');\r\n          // console.log('[PriorAuthService.getWorklist] About to set worklist items - filter should be preserved');\r\n          this._worklistItems.set(mappedItems);\r\n          // console.log('[PriorAuthService.getWorklist] Items set, current predefined filter after setting items:', this._activePredefinedFilter()?.id || 'null');\r\n          // this.columnConfig.updateColumnFiltersFromData(mappedItems); // This is now handled by the effect\r\n\r\n          // Start frontend processing timer (data processed, now timing view rendering)\r\n          this.timerService.startFrontendTimer();\r\n\r\n          \r\n          if (batchMode) {\r\n            // Batch mode enabled - skip detailed loading for better performance\r\n            // console.log('[PriorAuthService.getWorklist] Batch mode enabled, skipping individual item detail loading');\r\n            this.messagingService.success(`Prior authorization worklist loaded with ${mappedItems.length} items.`);\r\n            return of(mappedItems);\r\n          } else {\r\n            // Normal mode - load detailed information for each item\r\n            // console.log('[PriorAuthService.getWorklist] Normal mode, loading detailed information for each item');\r\n            this.messagingService.success(`Prior authorization worklist loaded with ${mappedItems.length} items.  item details are now being loaded...`);\r\n            \r\n            // Track completion of detail loading\r\n            let completedDetails = 0;\r\n            const totalDetails = mappedItems.length;\r\n            \r\n            // Set initial processing count\r\n            this._processingCount.set(totalDetails);\r\n            \r\n            // Then fetch detailed information for each item individually using the same pattern as refreshWorklistItem\r\n            // This allows the UI to show basic data immediately while details load progressively\r\n            mappedItems.forEach(item => {\r\n              const itemId = item.compass_worklist_id;\r\n              // console.log(`[PriorAuthService.getWorklist] Fetching details for worklist item with compass_worklist_id: ${itemId}`);\r\n              \r\n              // Mark this item as loading details\r\n              this._loadingDetails.update(current => new Set(Array.from(current).concat(itemId)));\r\n              \r\n              // Use the same pattern as refreshWorklistItem - direct subscribe call\r\n              this.getPriorAuthItemById(itemId).subscribe({\r\n                next: (detailedItem) => {\r\n                  // Remove from loading details when complete\r\n                  this._loadingDetails.update(current => {\r\n                    const newSet = new Set(Array.from(current).filter(id => id !== itemId));\r\n                    return newSet;\r\n                  });\r\n                  \r\n                  if (detailedItem) {\r\n                    // Direct update just like refreshWorklistItem - no timing conditions needed for initial load\r\n                    this.updatePriorAuthItem(detailedItem);\r\n                    \r\n                    // Emit event to trigger change detection in components so the table row updates\r\n                    this._itemDetailUpdatedSubject.next();\r\n                    \r\n                    // console.log(`[PriorAuthService.getWorklist] Updated item ${detailedItem.compass_worklist_id} with detailed information`);\r\n                  } else {\r\n                    // console.warn(`[PriorAuthService.getWorklist] No detailed data received for item ${itemId}, keeping basic data`);\r\n                  }\r\n                  \r\n                  // Track completion and send message when all details are loaded\r\n                  completedDetails++;\r\n                  \r\n                  // Update processing count\r\n                  this._processingCount.update(current => Math.max(0, current - 1));\r\n                  \r\n                    if (completedDetails === totalDetails) {\r\n                      this.messagingService.success(`All ${totalDetails} worklist item details have been loaded successfully.`);\r\n                    }\r\n                },\r\n                error: (error) => {\r\n                  // console.error('[PriorAuthService.getWorklist] Error fetching item details:', error);\r\n                  // Remove from loading details on error\r\n                  this._loadingDetails.update(current => {\r\n                    const newSet = new Set(Array.from(current).filter(id => id !== itemId));\r\n                    return newSet;\r\n                  });\r\n                  \r\n                  // Track completion even on error to ensure we don't wait forever\r\n                  completedDetails++;\r\n                  \r\n                  // Update processing count on error as well\r\n                  this._processingCount.update(current => Math.max(0, current - 1));\r\n                  \r\n                    if (completedDetails === totalDetails) {\r\n                      this.messagingService.success(`All ${totalDetails} worklist item details have been processed.`);\r\n                    }\r\n                }\r\n              });\r\n            });\r\n            \r\n            // Return the basic items immediately, details will update progressively via direct subscribe calls\r\n            return of(mappedItems);\r\n          }\r\n        }),\r\n        tap(() => {\r\n          // Set loading to false after all data processing is complete\r\n          this._loading.set(false);\r\n        })\r\n      );\r\n  }\r\n  \r\n  /**\r\n   * Refresh the worklist data by calling getWorklist and updating signals\r\n   * Returns an observable that emits when the refresh is complete\r\n   * Components can use this method to manually refresh data\r\n   */\r\n  refreshWorklist(): Observable<PriorAuthItem[]> {\r\n    // Trigger a fresh worklist data fetch and signal update\r\n    // Note: Success messages are now handled within getWorklist() method\r\n    return this.getWorklist();\r\n  }\r\n\r\n  /**\r\n   * Track active item refreshes to prevent loops\r\n   */\r\n  private activeItemRefreshes = new Set<number>();\r\n  \r\n  /**\r\n   * Refresh a specific worklist item by ID\r\n   * This method fetches the latest data for a specific item and updates the signals\r\n   * Also marks the item to prevent background detail loading from overwriting it\r\n   */\r\n  refreshWorklistItem(worklistItemId: number): void {\r\n    // Check if we're already refreshing this item\r\n    if (this.activeItemRefreshes.has(worklistItemId)) {\r\n      // console.warn(`[PriorAuthService.refreshWorklistItem] Already refreshing item ${worklistItemId}, skipping to prevent loop`);\r\n      return;\r\n    }\r\n    \r\n    // Add to active refreshes\r\n    this.activeItemRefreshes.add(worklistItemId);\r\n    \r\n    // Emit refresh event to notify components\r\n    this._itemRefreshSubject.next(worklistItemId);\r\n    \r\n    // First, mark this item as manually refreshed to prevent background overwrites\r\n    this._worklistItems.update(currentItems => {\r\n      const itemIndex = currentItems.findIndex(item => item.compass_worklist_id === worklistItemId);\r\n      if (itemIndex !== -1) {\r\n        const updatedItems = [...currentItems];\r\n        updatedItems[itemIndex] = {\r\n          ...updatedItems[itemIndex],\r\n          dataRefreshDtTm: new Date() // Mark as recently refreshed\r\n        };\r\n        return updatedItems;\r\n      }\r\n      return currentItems;\r\n    });\r\n    \r\n    this.getPriorAuthItemById(worklistItemId).subscribe({\r\n      next: (updatedItem) => {\r\n        if (updatedItem) {\r\n          // Use the existing updatePriorAuthItem method which will trigger automatic column filter updates\r\n          this.updatePriorAuthItem(updatedItem);\r\n          // console.log(`[PriorAuthService.refreshWorklistItem] Successfully refreshed worklist item ${worklistItemId} due to reloadInd`);\r\n        }\r\n        // Remove from active refreshes\r\n        this.activeItemRefreshes.delete(worklistItemId);\r\n      },\r\n      error: (error) => {\r\n        // console.error(`[PriorAuthService.refreshWorklistItem] Failed to refresh worklist item ${worklistItemId}:`, error);\r\n        // Remove from active refreshes on error\r\n        this.activeItemRefreshes.delete(worklistItemId);\r\n      }\r\n    });\r\n  }\r\n  \r\n  /**\r\n   * Set worklist items directly (useful for testing or offline scenarios)\r\n   * Updates the signal which triggers automatic recalculation of filtered items\r\n   */\r\n  setWorklistItems(items: PriorAuthItem[]): void {\r\n    this._worklistItems.set(items);\r\n  }\r\n  \r\n  /**\r\n   * Check if a specific item is currently loading its detailed information\r\n   * @param itemId - The compass worklist ID of the item to check\r\n   * @returns true if the item is loading details, false otherwise\r\n   */\r\n  isItemLoadingDetails(itemId: number): boolean {\r\n    return this._loadingDetails().has(itemId);\r\n  }\r\n\r\n  /**\r\n   * Create a Glidian authorization request for a specific worklist item\r\n   * \r\n   * This method calls the COMPASS backend service to initiate a Glidian\r\n   * authorization request for the specified worklist item. The request\r\n   * includes the worklist item data converted to JSON format.\r\n   * \r\n   * @param worklistItemId - The compass_worklist_id of the item to process\r\n   * @returns Observable<any> - The response from the Glidian service\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Create Glidian auth for a specific worklist item\r\n   * this.priorAuthService.createGlidianAuth(12345).subscribe(\r\n   *   response => console.log('Glidian auth created:', response),\r\n   *   error => console.error('Error creating Glidian auth:', error)\r\n   * );\r\n   * ```\r\n   */\r\n  createGlidianAuth(worklistItemId: number): Observable<any> {\r\n    const uniqueId = `createGlidianAuth_${worklistItemId}`;\r\n    // console.log(`[PriorAuthService.createGlidianAuth] Starting Glidian auth creation for worklist item ${worklistItemId}`);\r\n    \r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"createGlidianAuth\",\r\n                requestId: worklistItemId\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n            // console.log('[PriorAuthService.createGlidianAuth] Raw response:', response);\r\n            \r\n            // Handle case where no response is received\r\n            if (!response) {\r\n              const errorMessage = 'No response received from Glidian authorization service';\r\n              // console.log('[PriorAuthService.createGlidianAuth] No response received, showing error');\r\n              this.messagingService.error(errorMessage);\r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: null\r\n              });\r\n              observer.complete();\r\n              return;\r\n            }\r\n            \r\n            // Extract reply data from response structure\r\n            const replyData = response?.reply || response;\r\n            // console.log('[PriorAuthService.createGlidianAuth] Reply data:', replyData);\r\n            // console.log('[PriorAuthService.createGlidianAuth] Status data:', replyData?.statusData);\r\n            // console.log('[PriorAuthService.createGlidianAuth] Status:', replyData?.statusData?.status);\r\n            \r\n            // Check if the response indicates success based on statusData.status\r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              const successMessage = replyData.text || 'Glidian submission successful';\r\n              // console.log('[PriorAuthService.createGlidianAuth] Success detected, showing success message');\r\n              this.messagingService.success(successMessage);\r\n              \r\n              // Check if reload is required based on backend response\r\n              if (replyData.reloadInd === 1) {\r\n                // console.log('[PriorAuthService.createGlidianAuth] Backend requested reload, refreshing worklist item');\r\n                // Refresh the specific worklist item\r\n                this.refreshWorklistItem(worklistItemId);\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              // Handle failure case - check for error message in response\r\n              const errorMessage = replyData?.text || 'Failed to Submit to Glidian';\r\n              // console.log('[PriorAuthService.createGlidianAuth] Failure detected, showing error message');\r\n              this.messagingService.error(errorMessage);\r\n              \r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: replyData\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            // console.error('[PriorAuthService.createGlidianAuth] Exception caught:', error);\r\n            this.messagingService.error('Error creating Glidian authorization');\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Triggers a reprocessCompass request for the given worklist item ID.\r\n   * Calls the cov_compass_service script with requestType 'reprocessCompass' and requestId = worklistId.\r\n   * Returns an Observable of the backend response.\r\n   */\r\n  reprocessCompass(worklistId: number): Observable<any> {\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `reprocessCompass_${worklistId}`,\r\n                parameters: {\r\n                  requestType: 'reprocessCompass',\r\n                  requestId: worklistId\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(`reprocessCompass_${worklistId}`);\r\n            observer.next(response);\r\n            observer.complete();\r\n          } catch (error) {\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetches the list of user comments for a given worklist item from the backend.\r\n   * Uses cov_compass_service with requestType 'getWorklistComments' and requestId as the worklistId.\r\n   * Returns an Observable of PriorAuthComment[].\r\n   * In offline mode, returns mock data.\r\n   */\r\n  getWorklistComments(worklistId: number): void {\r\n    const cacheKey = `getWorklistComments_${worklistId}`;\r\n    this.customService.clear(cacheKey);\r\n\r\n    this.customService.load({\r\n      customScript: {\r\n        script: [{\r\n          name: 'cov_compass_service',\r\n          run: 'pre',\r\n          id: cacheKey,\r\n          parameters: {\r\n            requestType: 'getWorklistComments',\r\n            requestId: worklistId\r\n          }\r\n        }]\r\n      }\r\n    },\r\n    [{ personId: 0, encntrId: 0 }],\r\n    () => {\r\n      try {\r\n        const raw = this.customService.get(cacheKey);\r\n        const comments = raw?.qual.map((c: any) => ({\r\n          commentId: c.id,\r\n          author: c.user,\r\n          authorId: c.userId,\r\n          commentText: c.comment,\r\n          createdDateTime: this.isValidDateString(c.dateTime) ? new Date(c.dateTime) : new Date()\r\n        })) || [];\r\n        this._commentsSubject.next(comments);\r\n      } catch (error) {\r\n        // console.error('Failed to get worklist comments:', error);\r\n        this._commentsSubject.next([]);\r\n      }\r\n    });\r\n  }\r\n\r\n  addWorklistComment(worklistId: number, commentText: string): Observable<void> {\r\n    const uniqueId = `addWorklistComment_${worklistId}`;\r\n    return new Observable<void>(observer => {\r\n      this.customService.load({\r\n        customScript: {\r\n          script: [{\r\n            name: 'cov_compass_service',\r\n            run: 'pre',\r\n            id: uniqueId,\r\n            parameters: {\r\n              requestType: 'addWorklistComment',\r\n              requestId: worklistId,\r\n              requestData: commentText\r\n            }\r\n          }]\r\n        }\r\n      },\r\n      [{ personId: 0, encntrId: 0 }],\r\n      () => {\r\n        try {\r\n          this.getWorklistComments(worklistId);\r\n          observer.next();\r\n          observer.complete();\r\n        } catch (error) {\r\n          // console.error('Failed to add comment:', error);\r\n          observer.error(error);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Update an existing comment for a worklist item.\r\n   * Uses cov_compass_service with requestType 'updateWorklistComment' and requestId as the worklistId.\r\n   * The requestData is an object containing the comment ID and updated comment text.\r\n   * Returns an Observable of the updated PriorAuthComment.\r\n   */\r\n  updateWorklistComment(worklistId: number, commentId: number, commentText: string): Observable<PriorAuthComment> {\r\n\r\n    return new Observable<PriorAuthComment>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `updateWorklistComment_${worklistId}_${commentId}`,\r\n                parameters: {\r\n                  requestType: 'updateWorklistComment',\r\n                  requestId: worklistId,\r\n                  requestData: {\r\n                    commentId: commentId,\r\n                    commentText: commentText\r\n                  }\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get(`updateWorklistComment_${worklistId}_${commentId}`);\r\n            const replyData = raw?.reply || raw;\r\n            const updatedComment: PriorAuthComment = {\r\n              commentId: replyData.commentId || commentId,\r\n              author: replyData.author,\r\n              authorId: replyData.authorId,\r\n              commentText: replyData.commentText || commentText,\r\n              createdDateTime: this.isValidDateString(replyData.createdDateTime) ? new Date(replyData.createdDateTime) : new Date()\r\n            };\r\n            observer.next(updatedComment);\r\n            observer.complete();\r\n          } catch (error) {\r\n            this.messagingService.error('Failed to update comment');\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Assigns a user to a specific worklist item.\r\n   * @param worklistId The ID of the worklist item.\r\n   * @param username The username of the user to assign. Pass an empty string to remove the assignment.\r\n   * @returns Observable<any>\r\n   */\r\n  assignUserToWorklistItem(worklistId: number, username: string): Observable<any> {\r\n    const uniqueId = `assignUserToWorklistItem_${worklistId}`;\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: uniqueId,\r\n                parameters: {\r\n                  requestType: 'assignUserToWorklistItem',\r\n                  requestId: worklistId,\r\n                  requestData: username\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get(uniqueId);\r\n            const replyData = raw?.reply || raw;\r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              observer.next(replyData);\r\n              observer.complete();\r\n            } else {\r\n              observer.error(replyData || 'Failed to assign user.');\r\n            }\r\n          } catch (error) {\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Track active Glidian record fetches to prevent loops\r\n   */\r\n  private activeGlidianFetches = new Set<number>();\r\n  \r\n  /**\r\n   * Fetch the latest Glidian record for a specific worklist item.\r\n   * Calls the cov_compass_service script with requestType 'getGlidianRecord' and requestId = worklistItemId.\r\n   * Returns an Observable of the backend response.\r\n   *\r\n   * @param worklistItemId - The compass_worklist_id of the item to fetch from Glidian\r\n   * @returns Observable<any> - The response from the Glidian service\r\n   */\r\n  getLatestGlidianRecord(worklistItemId: number): Observable<any> {\r\n    const uniqueId = `getGlidianRecord_${worklistItemId}`;\r\n    \r\n    // Check if we're already fetching this item to prevent loops\r\n    if (this.activeGlidianFetches.has(worklistItemId)) {\r\n      // console.warn(`[PriorAuthService.getLatestGlidianRecord] Already fetching Glidian record for item ${worklistItemId}, skipping to prevent loop`);\r\n      return of({\r\n        success: false,\r\n        message: 'Glidian record fetch already in progress',\r\n        data: null\r\n      });\r\n    }\r\n    \r\n    // Add to active fetches\r\n    this.activeGlidianFetches.add(worklistItemId);\r\n    // console.log(`[PriorAuthService.getLatestGlidianRecord] Fetching latest Glidian record for worklist item ${worklistItemId}`);\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: 'cov_compass_service',\r\n              run: 'pre',\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: 'getGlidianRecord',\r\n                requestId: worklistItemId\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n            // console.log('[PriorAuthService.getLatestGlidianRecord] Raw response:', response);\r\n            if (!response) {\r\n              const errorMessage = 'No response received from Glidian record service';\r\n              this.messagingService.error(errorMessage);\r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: null\r\n              });\r\n              observer.complete();\r\n              // Remove from active fetches\r\n              this.activeGlidianFetches.delete(worklistItemId);\r\n              return;\r\n            }\r\n            const replyData = response?.reply || response;\r\n            if (replyData && replyData.statusData && replyData.statusData.status === 'S') {\r\n              const successMessage = replyData.text || 'Latest Glidian record fetched successfully';\r\n              this.messagingService.success(successMessage);\r\n              // Optionally refresh the worklist item if reloadInd === 1\r\n              if (replyData.reloadInd === 1) {\r\n                // console.log(`[PriorAuthService.getLatestGlidianRecord] Backend requested reload for item ${worklistItemId}`);\r\n                this.refreshWorklistItem(worklistItemId);\r\n              }\r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              const errorMessage = replyData?.text || 'Failed to fetch latest Glidian record';\r\n              this.messagingService.error(errorMessage);\r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: replyData\r\n              });\r\n            }\r\n            observer.complete();\r\n            // Remove from active fetches\r\n            this.activeGlidianFetches.delete(worklistItemId);\r\n          } catch (error) {\r\n            this.messagingService.error('Error fetching latest Glidian record');\r\n            // Remove from active fetches on error\r\n            this.activeGlidianFetches.delete(worklistItemId);\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Computed signal that calculates item counts for each predefined filter\r\n   * Returns a map of filter ID to count for display on filter tabs\r\n   */\r\n  readonly predefinedFilterCounts = computed(() => {\r\n    const allItems = this._worklistItems();\r\n    const daysFilter = this._currentDaysFilter();\r\n    const predefinedFilters = this.columnConfig.getPredefinedFilters('prior-auth');\r\n    \r\n    const counts: { [filterId: string]: number } = {};\r\n    \r\n    for (const filter of predefinedFilters) {\r\n      // Apply the same filtering logic as filteredItems but for each specific filter\r\n      let items = [...allItems];\r\n      \r\n      if (filter.filters) {\r\n        const filters = filter.filters;\r\n        const excludeFilters = filter.excludeFilters;\r\n        \r\n        // Apply workflow status filter\r\n        if (filters.workflowStatus && filters.workflowStatus.length > 0) {\r\n          items = items.filter(item => \r\n            filters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n          );\r\n        }\r\n        \r\n        // Apply workflow status exclude filter\r\n        if (excludeFilters?.workflowStatus && excludeFilters.workflowStatus.length > 0) {\r\n          items = items.filter(item => \r\n            !excludeFilters.workflowStatus!.includes(item.workflowStatus?.status || '')\r\n          );\r\n        }\r\n        \r\n        // Apply scheduling status filter\r\n        if (filters.schedulingStatus && filters.schedulingStatus.length > 0) {\r\n          items = items.filter(item => \r\n            filters.schedulingStatus!.includes(item.schedule?.state || '')\r\n          );\r\n        }\r\n        \r\n        // Apply scheduling status exclude filter\r\n        if (excludeFilters?.schedulingStatus && excludeFilters.schedulingStatus.length > 0) {\r\n          items = items.filter(item => \r\n            !excludeFilters.schedulingStatus!.includes(item.schedule?.state || '')\r\n          );\r\n        }\r\n        \r\n        // Apply days filter (use filter-specific days or global days filter)\r\n        const filterDays = filters.daysFilter !== undefined ? filters.daysFilter : daysFilter;\r\n        if (filterDays !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + filterDays);\r\n          \r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n      } else {\r\n        // 'All Items' filter - apply only days filter\r\n        if (daysFilter !== 'all') {\r\n          const today = new Date();\r\n          today.setHours(0, 0, 0, 0);\r\n          const futureDate = new Date(today);\r\n          futureDate.setDate(today.getDate() + daysFilter);\r\n          \r\n          items = items.filter(item => {\r\n            if (!item.edosDate) return false;\r\n            const edosDate = new Date(item.edosDate);\r\n            edosDate.setHours(0, 0, 0, 0);\r\n            return edosDate <= futureDate;\r\n          });\r\n        }\r\n      }\r\n      \r\n      counts[filter.id] = items.length;\r\n    }\r\n    \r\n    return counts;\r\n  });\r\n\r\n  /**\r\n   * Create test orders using the cov_compass_create_test_ord CCL script\r\n   * This method is only available in non-production domains (not P0665)\r\n   * Success is determined by checking if the response contains an orderId greater than zero\r\n   * @returns Observable<any> - The response from the service\r\n   */\r\n  createTestOrders(): Observable<any> {\r\n\r\n    const requestId = `createTestOrders_${Date.now()}`;\r\n\r\n    return new Observable(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_create_test_ord',\r\n                run: 'pre',\r\n                id: requestId,\r\n                parameters: {}\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get(requestId);\r\n            \r\n            if (!raw) {\r\n              const errorMessage = 'No response received from test order creation service';\r\n              this.messagingService.error(errorMessage);\r\n              observer.error(new Error(errorMessage));\r\n              return;\r\n            }\r\n\r\n            const replyData = raw?.reply || raw;\r\n            \r\n            // Check for success condition: orderId greater than zero in the response\r\n            if (replyData && replyData.orders && replyData.orders.orderId > 0) {\r\n              const successMessage = replyData.text || 'Test orders created successfully';\r\n              this.messagingService.success(successMessage);\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              // Check if there's a statusData.status === 'S' as fallback\r\n              if (replyData.statusData && replyData.statusData.status === 'S') {\r\n                const successMessage = replyData.text || 'Test orders created successfully';\r\n                this.messagingService.success(successMessage);\r\n                \r\n                observer.next({\r\n                  success: true,\r\n                  message: successMessage,\r\n                  data: replyData\r\n                });\r\n              } else {\r\n                const errorMessage = replyData.text || 'Failed to create test orders - no valid order ID returned';\r\n                this.messagingService.error(errorMessage);\r\n                \r\n                observer.next({\r\n                  success: false,\r\n                  message: errorMessage,\r\n                  data: replyData\r\n                });\r\n              }\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            this.messagingService.error('Error creating test orders');\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n  /**\r\n   * Attaches selected documents to a Glidian milestone\r\n   * \r\n   * This method calls the COMPASS backend service to attach one or more\r\n   * documents to a specific Glidian milestone. The documents are stored as\r\n   * ATTACHED_DOCUMENT entries in the milestone data.\r\n   * \r\n   * @param compassWorklistId - The compass_worklist_id to attach documents to\r\n   * @param documents - Array of documents to attach (each with event_id and title)\r\n   * @param worklistItemId - Optional worklist item ID for refreshing after attachment\r\n   * @returns Observable<any> - The response from the attachment service\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Attach documents to a Glidian milestone\r\n   * const documents = [\r\n   *   { event_id: 111, title: 'Patient Letter' },\r\n   *   { event_id: 222, title: 'Phone Message' }\r\n   * ];\r\n   * this.priorAuthService.attachDocumentsToGlidianMilestone(12345, documents).subscribe(\r\n   *   response => console.log('Documents attached:', response),\r\n   *   error => console.error('Error attaching documents:', error)\r\n   * );\r\n   * ```\r\n   */\r\n\r\n  /**\r\n   * Remove a specific Glidian ID from a milestone\r\n   * @param compassWorklistId - The worklist item ID\r\n   * @param glidianId - The Glidian ID to remove\r\n   * @returns Observable with the response\r\n   */\r\n  removeGlidianId(compassWorklistId: number, glidianId: string): Observable<any> {\r\n    const uniqueId = `removeGlidianId_${compassWorklistId}_${glidianId}`;\r\n    // console.log(`[PriorAuthService.removeGlidianId] Removing Glidian ID ${glidianId} from worklist item ${compassWorklistId}`);\r\n\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"removeGlidianId\",\r\n                requestId: compassWorklistId,\r\n                glidianId: glidianId,\r\n                userId: 1.0 // Default user ID - will be replaced with actual user context in CCL\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n            // console.log(`[PriorAuthService.removeGlidianId] Response for ${uniqueId}:`, response);\r\n            observer.next(response);\r\n            observer.complete();\r\n          } catch (error) {\r\n            // console.error(`[PriorAuthService.removeGlidianId] Error for ${uniqueId}:`, error);\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  attachDocumentsToGlidianMilestone(\r\n    compassWorklistId: number, \r\n    documents: Array<{ event_id: number; title: string }>,\r\n    worklistItemId?: number\r\n  ): Observable<any> {\r\n    const uniqueId = `attachDocumentsToGlidianMilestone_${compassWorklistId}`;\r\n    \r\n    return new Observable<any>(observer => {\r\n      const requestData = {\r\n        request_object: {\r\n          documents\r\n        }\r\n      };\r\n      \r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"attachDocumentsToGlidianMilestone\",\r\n                requestId: compassWorklistId,\r\n                requestData: JSON.stringify(requestData)\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n            \r\n            if (!response) {\r\n              const errorMessage = 'No response received from document attachment service';\r\n              this.messagingService.error(errorMessage);\r\n              observer.error(new Error(errorMessage));\r\n              return;\r\n            }\r\n            \r\n            // Extract reply data from response structure\r\n            const replyData = response?.reply || response;\r\n            \r\n            // Check if the response indicates success\r\n            if (replyData?.statusData?.status === 'S') {\r\n              const successMessage = replyData.text || 'Documents attached successfully';\r\n              this.messagingService.success(successMessage);\r\n              \r\n              // Refresh the worklist item if ID provided\r\n              if (worklistItemId) {\r\n                this.refreshWorklistItem(worklistItemId);\r\n              }\r\n              \r\n              observer.next({\r\n                success: true,\r\n                message: successMessage,\r\n                data: replyData\r\n              });\r\n            } else {\r\n              const errorMessage = replyData?.text || 'Failed to attach documents';\r\n              this.messagingService.error(errorMessage);\r\n              \r\n              observer.next({\r\n                success: false,\r\n                message: errorMessage,\r\n                data: replyData\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            this.messagingService.error('Error attaching documents to Glidian milestone');\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Fetches available documents for attaching to a worklist item\r\n   * \r\n   * This method calls the COMPASS backend service to retrieve available\r\n   * documents that can be attached to a specific worklist item. It returns\r\n   * both available documents and currently attached documents.\r\n   * \r\n   * @param worklistId - The compass_worklist_id to fetch documents for\r\n   * @param beginDate - Optional begin date for document search (ISO string)\r\n   * @param endDate - Optional end date for document search (ISO string)\r\n   * @returns Observable<any> - The response containing available and attached documents\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Get documents for a specific worklist item\r\n   * this.priorAuthService.getDocumentsForWorklist(12345).subscribe(\r\n   *   response => console.log('Documents retrieved:', response),\r\n   *   error => console.error('Error retrieving documents:', error)\r\n   * );\r\n   * ```\r\n   */\r\n  getDocumentsForWorklist(worklistId: number, beginDate?: string, endDate?: string): Observable<any> {\r\n    const uniqueId = `getDocumentsForWorklist_${worklistId}`;\r\n    \r\n    // Add comprehensive logging for troubleshooting\r\n    console.log('=== getDocumentsForWorklist Debug Log ===');\r\n    console.log('worklistId:', worklistId);\r\n    console.log('beginDate:', beginDate);\r\n    console.log('endDate:', endDate);\r\n    console.log('uniqueId:', uniqueId);\r\n    \r\n    // Validate parameters\r\n    if (typeof worklistId !== 'number' || isNaN(worklistId)) {\r\n      const errorMsg = `Invalid worklistId: ${worklistId} (type: ${typeof worklistId})`;\r\n      console.error(errorMsg);\r\n      return new Observable<any>(observer => {\r\n        observer.error(new Error(errorMsg));\r\n      });\r\n    }\r\n    \r\n    // Validate dates if provided\r\n    if (beginDate && typeof beginDate !== 'string') {\r\n      console.warn('beginDate is not a string:', beginDate, 'type:', typeof beginDate);\r\n    }\r\n    if (endDate && typeof endDate !== 'string') {\r\n      console.warn('endDate is not a string:', endDate, 'type:', typeof endDate);\r\n    }\r\n    \r\n    return new Observable<any>(observer => {\r\n      // Build request data if dates are provided\r\n      const requestData = (beginDate || endDate) ? {\r\n        request_object: {\r\n          beginDate,\r\n          endDate\r\n        }\r\n      } : undefined;\r\n      \r\n      // Log the request payload being sent\r\n      const requestPayload = {\r\n        customScript: {\r\n          script: [{\r\n            name: \"cov_compass_service\",\r\n            run: \"pre\",\r\n            id: uniqueId,\r\n            parameters: {\r\n              requestType: \"getDocumentsForWorklist\",\r\n              requestId: worklistId,\r\n              beginDate: beginDate,\r\n              endDate: endDate\r\n            }\r\n          }],\r\n          clearPatientSource: true\r\n        }\r\n      };\r\n      \r\n      console.log('Request payload being sent:');\r\n      console.log(JSON.stringify(requestPayload, null, 2));\r\n      \r\n      // Validate JSON structure\r\n      try {\r\n        const testJson = JSON.stringify(requestPayload);\r\n        console.log('JSON validation successful, length:', testJson.length);\r\n        console.log('JSON parse test successful:', JSON.parse(testJson));\r\n      } catch (jsonError) {\r\n        console.error('JSON validation failed:', jsonError);\r\n        if (jsonError instanceof Error) {\r\n          console.error('JSON error details:', jsonError.message);\r\n        }\r\n      }\r\n      \r\n      // Log the patient source data\r\n      const patientSource = [{ personId: 0, encntrId: 0 }];\r\n      console.log('Patient source data:', patientSource);\r\n      \r\n      try {\r\n        console.log('About to call customService.load...');\r\n        this.customService.load(\r\n          requestPayload,\r\n          patientSource,\r\n          () => {\r\n            try {\r\n              console.log('=== Response received from customService.load ===');\r\n              const response = this.customService.get(uniqueId);\r\n              console.log('Raw response from customService.get:', response);\r\n              console.log('Response type:', typeof response);\r\n              console.log('Response stringified:', JSON.stringify(response, null, 2));\r\n              \r\n              if (!response) {\r\n                const errorMessage = 'No response received from document retrieval service';\r\n                console.error('Error:', errorMessage);\r\n                this.messagingService.error(errorMessage);\r\n                observer.error(new Error(errorMessage));\r\n                return;\r\n              }\r\n              \r\n              // Handle the response structure\r\n              const documents = response?.documents || [];\r\n              const attachedDocuments = response?.attachedDocuments || response?.attached_documents || [];\r\n              \r\n              console.log('Processed documents:', documents);\r\n              console.log('Processed attachedDocuments:', attachedDocuments);\r\n              \r\n              // Map attached documents to include author and type from available documents\r\n              const enrichedAttachedDocuments = attachedDocuments.map((attachedDoc: any) => {\r\n                // Find the corresponding available document to get author and type\r\n                const availableDoc = documents.find((doc: any) => doc.eventId === attachedDoc.eventId);\r\n                \r\n                return {\r\n                  ...attachedDoc,\r\n                  author: availableDoc?.author || 'N/A',\r\n                  type: availableDoc?.type || 'Document',\r\n                  effectiveDate: availableDoc?.effectiveDate || 'N/A',\r\n                  source: availableDoc?.source || 'Clinical'\r\n                };\r\n              });\r\n              \r\n              console.log('Enriched attached documents:', enrichedAttachedDocuments);\r\n              \r\n              const finalResponse = {\r\n                success: true,\r\n                documents,\r\n                attachedDocuments: enrichedAttachedDocuments,\r\n                data: response\r\n              };\r\n              \r\n              console.log('Final response being sent to component:', finalResponse);\r\n              \r\n              observer.next(finalResponse);\r\n              observer.complete();\r\n            } catch (error) {\r\n              console.error('Error in getDocumentsForWorklist callback:', error);\r\n              if (error instanceof Error) {\r\n                console.error('Error stack:', error.stack);\r\n              }\r\n              this.messagingService.error('Error retrieving documents for worklist item');\r\n              observer.error(error);\r\n            }\r\n          }\r\n        );\r\n        console.log('customService.load called successfully');\r\n      } catch (loadError) {\r\n        console.error('Error calling customService.load:', loadError);\r\n        if (loadError instanceof Error) {\r\n          console.error('Load error stack:', loadError.stack);\r\n        }\r\n        this.messagingService.error('Error calling document retrieval service');\r\n        observer.error(loadError);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Updates the scheduling location for a worklist item.\r\n   * Uses the cov_compass_service with requestType 'updateSchedulingLocation'.\r\n   * @param compassWorklistId - The worklist item ID to update\r\n   * @param locationData - The location data to save (standardized as SchedulingLocationUpdateRequest)\r\n   * @returns Observable<any> - Emits the update response\r\n   */\r\n  updateSchedulingLocation(compassWorklistId: number, locationData: SchedulingLocationUpdateRequest): Observable<any> {\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [\r\n              {\r\n                name: 'cov_compass_service',\r\n                run: 'pre',\r\n                id: `updateSchedulingLocation_${compassWorklistId}`,\r\n                parameters: { \r\n                  requestType: 'updateSchedulingLocation',\r\n                  requestId: compassWorklistId,\r\n                  organizationId: locationData.organizationId || 0,\r\n                  locationName: locationData.locationName || '',\r\n                  locationCode: locationData.locationCode || '',\r\n                  address: locationData.address || '',\r\n                  city: locationData.city || '',\r\n                  state: locationData.state || '',\r\n                  zipCode: locationData.zipCode || '',\r\n                  phone: locationData.phone || '',\r\n                  fax: locationData.fax || '',\r\n                  npi: locationData.npi || '',\r\n                  taxId: locationData.taxId || '',\r\n                  isManualEntry: locationData.isManualEntry || false\r\n                }\r\n              }\r\n            ],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const raw = this.customService.get(`updateSchedulingLocation_${compassWorklistId}`);\r\n            if (raw) {\r\n              observer.next(raw);\r\n            } else {\r\n              observer.error('Failed to update scheduling location.');\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            observer.error(error);\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves a preview of a specific document through cov_compass_service\r\n   * @param eventId - The event ID of the document to preview\r\n   * @param personId - The person ID associated with the document\r\n   * @param encounterId - The encounter ID associated with the document\r\n   * @returns Observable with document preview data including HTML content\r\n   */\r\n  getDocumentPreview(eventId: number, personId: number, encounterId: number): Observable<any> {\r\n    console.log('Getting document preview for eventId:', eventId);\r\n    \r\n    const uniqueId = `getDocumentPreview_${eventId}`;\r\n    \r\n    return new Observable<any>(observer => {\r\n      // Build the request for cov_compass_service\r\n      const docPreviewRequest = {\r\n        event_id: eventId,\r\n        person_id: personId,\r\n        encounter_id: encounterId\r\n      };\r\n      \r\n      // Use cov_compass_service as the gateway\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"getDocumentPreview\",\r\n                requestId: eventId,\r\n                requestData: JSON.stringify(docPreviewRequest)\r\n              }\r\n            }]\r\n          }\r\n        },\r\n        [{ personId: personId, encntrId: encounterId }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n            console.log('Document preview response from cov_compass_service:', response);\r\n            \r\n            if (!response) {\r\n              observer.next({\r\n                success: false,\r\n                message: 'No response received from document preview service'\r\n              });\r\n              observer.complete();\r\n              return;\r\n            }\r\n            \r\n            // Parse the response from cov_compass_service\r\n            const parsedResponse = typeof response === 'string' ? JSON.parse(response) : response;\r\n            \r\n            // Check for successful response using actual backend structure\r\n            const isSuccess = parsedResponse?.reply?.statusData?.status === 'S';\r\n            const hasDocumentHtml = parsedResponse?.documentHtml && parsedResponse.documentHtml.trim() !== '';\r\n\r\n            if (isSuccess && hasDocumentHtml) {\r\n              observer.next({\r\n                success: true,\r\n                documentHtml: parsedResponse.documentHtml,\r\n                documentType: parsedResponse.documentType || 'HTML',\r\n                eventId: eventId,\r\n                title: parsedResponse.title || 'Document Preview'\r\n              });\r\n            } else if (!isSuccess) {\r\n              observer.next({\r\n                success: false,\r\n                message: parsedResponse?.reply?.text || 'Failed to retrieve document preview'\r\n              });\r\n            } else if (!hasDocumentHtml) {\r\n              observer.next({\r\n                success: false,\r\n                message: 'Document preview content is empty'\r\n              });\r\n            } else {\r\n              // Handle unexpected response format\r\n              observer.next({\r\n                success: false,\r\n                message: 'Unexpected response format from document preview service'\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            console.error('Error processing document preview response:', error);\r\n            observer.next({\r\n              success: false,\r\n              message: 'Error processing document preview response'\r\n            });\r\n            observer.complete();\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Retrieves the DATA_VC field from CUST_COMPASS_ACTION table for a specific action\r\n   * The DATA_VC field typically contains JSON data with additional action details\r\n   *\r\n   * @param actionId - The action ID to retrieve data for\r\n   * @returns Observable with the action data\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * // Get action data for a specific action\r\n   * this.priorAuthService.getActionData(12345).subscribe(\r\n   *   response => console.log('Action data:', response),\r\n   *   error => console.error('Error retrieving action data:', error)\r\n   * );\r\n   * ```\r\n   */\r\n  getActionData(actionId: number): Observable<any> {\r\n    const uniqueId = `getActionData_${actionId}`;\r\n\r\n    return new Observable<any>(observer => {\r\n      this.customService.load(\r\n        {\r\n          customScript: {\r\n            script: [{\r\n              name: \"cov_compass_service\",\r\n              run: \"pre\",\r\n              id: uniqueId,\r\n              parameters: {\r\n                requestType: \"getActionData\",\r\n                requestId: actionId\r\n              }\r\n            }],\r\n            clearPatientSource: true\r\n          }\r\n        },\r\n        [{ personId: 0, encntrId: 0 }],\r\n        () => {\r\n          try {\r\n            const response = this.customService.get(uniqueId);\r\n\r\n            if (!response) {\r\n              observer.next({\r\n                success: false,\r\n                message: 'No response received from action data service'\r\n              });\r\n              observer.complete();\r\n              return;\r\n            }\r\n\r\n            // Extract reply data from response structure\r\n            const replyData = response?.reply || response;\r\n\r\n            // Check for successful response\r\n            const isSuccess = replyData?.status_data?.status === 'S' || replyData?.statusData?.status === 'S';\r\n\r\n            if (isSuccess) {\r\n              // Parse the action data if it's a JSON string\r\n              let actionData = replyData.json || '';\r\n              let parsedData = null;\r\n\r\n              try {\r\n                if (actionData && typeof actionData === 'string') {\r\n                  parsedData = JSON.parse(actionData);\r\n                }\r\n              } catch (parseError) {\r\n                // If parsing fails, just return the raw string\r\n                parsedData = actionData;\r\n              }\r\n\r\n              observer.next({\r\n                success: true,\r\n                actionData: actionData,\r\n                parsedData: parsedData,\r\n                message: 'Action data retrieved successfully'\r\n              });\r\n            } else {\r\n              observer.next({\r\n                success: false,\r\n                message: replyData?.text || 'Failed to retrieve action data'\r\n              });\r\n            }\r\n            observer.complete();\r\n          } catch (error) {\r\n            observer.next({\r\n              success: false,\r\n              message: 'Error processing action data response'\r\n            });\r\n            observer.complete();\r\n          }\r\n        }\r\n      );\r\n    });\r\n  }\r\n}","import { Injectable } from '@angular/core';\r\nimport { Observable, of } from 'rxjs';\r\nimport { RandomUser } from '../models/random-user.model';\r\nimport { randomUsers } from '../data/random-users.data';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RandomUserService {\r\n  \r\n  constructor() {}\r\n  \r\n  getUsers(\r\n    pageIndex: number,\r\n    pageSize: number,\r\n    sortField: string | null,\r\n    sortOrder: string | null,\r\n    filters: Array<{ key: string; value: string[] }>\r\n  ): Observable<{ results: RandomUser[] }> {\r\n    // Start with all users\r\n    let filteredUsers = [...randomUsers];\r\n\r\n    // Apply filters\r\n    filters.forEach(filter => {\r\n      if (filter.value.length > 0) {\r\n        filteredUsers = filteredUsers.filter(user => {\r\n          // Handle nested properties\r\n          const value = filter.key.split('.').reduce((obj: any, key) => obj?.[key], user);\r\n          return filter.value.includes(String(value));\r\n        });\r\n      }\r\n    });\r\n\r\n    // Apply sorting\r\n    if (sortField && sortOrder) {\r\n      filteredUsers.sort((a, b) => {\r\n        const valueA = sortField.split('.').reduce((obj: any, key) => obj?.[key], a);\r\n        const valueB = sortField.split('.').reduce((obj: any, key) => obj?.[key], b);\r\n        \r\n        if (valueA < valueB) return sortOrder === 'ascend' ? -1 : 1;\r\n        if (valueA > valueB) return sortOrder === 'ascend' ? 1 : -1;\r\n        return 0;\r\n      });\r\n    }\r\n\r\n    // Apply pagination\r\n    const startIndex = (pageIndex - 1) * pageSize;\r\n    const paginatedUsers = filteredUsers.slice(startIndex, startIndex + pageSize);\r\n\r\n    return of({ results: paginatedUsers });\r\n  }\r\n}\r\n","import { Injectable, signal } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\n\r\n/**\r\n * SidebarStateService manages the state of the application's sidebar component.\r\n * \r\n * This service demonstrates a hybrid approach during the migration from RxJS observables\r\n * to Angular signals. It maintains both signal-based and observable-based APIs to ensure\r\n * backward compatibility during the transition period.\r\n * \r\n * Key Responsibilities:\r\n * - Track sidebar collapsed/expanded state\r\n * - Manage sidebar width for resizing functionality\r\n * - Provide both signal and observable APIs during migration\r\n * \r\n * Signal vs Observable Architecture:\r\n * - Signals: Synchronous, automatic dependency tracking, built-in change detection\r\n * - Observables: Asynchronous, manual subscription management, requires OnDestroy cleanup\r\n * \r\n * Migration Strategy:\r\n * 1. Add signal-based API alongside existing observables\r\n * 2. Update components to use signals gradually\r\n * 3. Remove observable API once all components are migrated\r\n * \r\n * @example\r\n * ```typescript\r\n * // Using signals (preferred)\r\n * constructor(private sidebarState: SidebarStateService) {}\r\n * \r\n * isCollapsed = this.sidebarState.collapsed; // Auto-reactive in templates\r\n * sidebarWidth = this.sidebarState.width;\r\n * \r\n * toggleSidebar() {\r\n *   this.sidebarState.toggle();\r\n * }\r\n * \r\n * // Using observables (legacy)\r\n * ngOnInit() {\r\n *   this.sidebarState.collapsed$.subscribe(collapsed => {\r\n *     // Handle state change\r\n *   });\r\n * }\r\n * ```\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class SidebarStateService {\r\n  /**\r\n   * Private writable signal for sidebar collapsed state.\r\n   * Starts collapsed (true) by default for better initial UX.\r\n   */\r\n  private _collapsed = signal<boolean>(true);\r\n  \r\n  /**\r\n   * Private writable signal for sidebar width in pixels.\r\n   * Default width of 250px provides good balance between content and sidebar space.\r\n   */\r\n  private _width = signal<number>(250);\r\n\r\n  /**\r\n   * Read-only signal exposing the sidebar collapsed state.\r\n   * Components can use this directly in templates for automatic reactivity.\r\n   * \r\n   * @readonly\r\n   * @returns Signal<boolean> - True if sidebar is collapsed, false if expanded\r\n   */\r\n  readonly collapsed = this._collapsed.asReadonly();\r\n  \r\n  /**\r\n   * Read-only signal exposing the sidebar width.\r\n   * Used for dynamic styling and layout calculations.\r\n   * \r\n   * @readonly\r\n   * @returns Signal<number> - Current sidebar width in pixels\r\n   */\r\n  readonly width = this._width.asReadonly();\r\n\r\n  /**\r\n   * Legacy BehaviorSubject for collapsed state.\r\n   * @deprecated Use the collapsed signal instead.\r\n   * Maintained for backward compatibility during migration.\r\n   */\r\n  private collapsedSubject = new BehaviorSubject<boolean>(true);\r\n  \r\n  /**\r\n   * Legacy observable for collapsed state.\r\n   * @deprecated Use the collapsed signal instead.\r\n   * Will be removed once all components are migrated to signals.\r\n   */\r\n  collapsed$ = this.collapsedSubject.asObservable();\r\n  \r\n  /**\r\n   * Legacy BehaviorSubject for width state.\r\n   * @deprecated Use the width signal instead.\r\n   * Maintained for backward compatibility during migration.\r\n   */\r\n  private widthSubject = new BehaviorSubject<number>(250);\r\n  \r\n  /**\r\n   * Legacy observable for width state.\r\n   * @deprecated Use the width signal instead.\r\n   * Will be removed once all components are migrated to signals.\r\n   */\r\n  width$ = this.widthSubject.asObservable();\r\n\r\n  /**\r\n   * Sets the sidebar collapsed state.\r\n   * \r\n   * Updates both the signal and legacy observable to maintain compatibility.\r\n   * All components subscribing to either the signal or observable will be notified.\r\n   * \r\n   * @param collapsed - True to collapse sidebar, false to expand\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Collapse the sidebar\r\n   * this.sidebarState.setCollapsed(true);\r\n   * \r\n   * // Expand the sidebar\r\n   * this.sidebarState.setCollapsed(false);\r\n   * ```\r\n   */\r\n  setCollapsed(collapsed: boolean) {\r\n    this._collapsed.set(collapsed);\r\n    // Update legacy observable for compatibility during migration\r\n    this.collapsedSubject.next(collapsed);\r\n  }\r\n\r\n  /**\r\n   * Toggles the sidebar between collapsed and expanded states.\r\n   * \r\n   * This method uses the signal's update() function to atomically change\r\n   * the state based on the current value. Both signal and observable\r\n   * consumers will be notified of the change.\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Toggle sidebar state\r\n   * this.sidebarState.toggle();\r\n   * ```\r\n   */\r\n  toggle() {\r\n    // Use signal's update method for atomic state transitions\r\n    this._collapsed.update(current => !current);\r\n    // Update legacy observable for compatibility during migration\r\n    this.collapsedSubject.next(this._collapsed());\r\n  }\r\n\r\n  /**\r\n   * Sets the sidebar width in pixels.\r\n   * \r\n   * Used for resizable sidebar functionality. Updates both signal and\r\n   * observable to maintain compatibility during migration.\r\n   * \r\n   * @param width - New width in pixels (should be positive)\r\n   * \r\n   * @example\r\n   * ```typescript\r\n   * // Set sidebar to 300px wide\r\n   * this.sidebarState.setWidth(300);\r\n   * \r\n   * // Minimum width\r\n   * this.sidebarState.setWidth(200);\r\n   * ```\r\n   */\r\n  setWidth(width: number) {\r\n    this._width.set(width);\r\n    // Update legacy observable for compatibility during migration\r\n    this.widthSubject.next(width);\r\n  }\r\n\r\n  /**\r\n   * Legacy getter for collapsed state.\r\n   * @deprecated Use the collapsed signal directly: `service.collapsed()`\r\n   * \r\n   * This getter provides synchronous access to the collapsed state for\r\n   * components that haven't been migrated to signals yet.\r\n   * \r\n   * @returns boolean - Current collapsed state\r\n   */\r\n  get collapsedValue() {\r\n    return this._collapsed();\r\n  }\r\n\r\n  /**\r\n   * Legacy getter for width value.\r\n   * @deprecated Use the width signal directly: `service.width()`\r\n   * \r\n   * This getter provides synchronous access to the width value for\r\n   * components that haven't been migrated to signals yet.\r\n   * \r\n   * @returns number - Current width in pixels\r\n   */\r\n  get widthValue() {\r\n    return this._width();\r\n  }\r\n} ","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TestProviderRegistryService {\r\n  private baseUrl = environment.npiApiBaseUrl;\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  /**\r\n   * Calls the NPI Registry API for a given city and returns the result_count.\r\n   */\r\n  getResultCountByCity(city: string): Observable<number> {\r\n    return this.http.get<{ result_count: number }>(`${this.baseUrl}&city=${encodeURIComponent(city)}`)\r\n      .pipe(map(res => res.result_count));\r\n  }\r\n} ","import { Injectable, signal, computed } from '@angular/core';\r\n\r\n/**\r\n * @interface PerformanceMetrics\r\n * @description Interface for performance metrics display\r\n */\r\nexport interface PerformanceMetrics {\r\n  /** Backend processing time in seconds (server-side only) */\r\n  backendTimeSeconds: number;\r\n  /** Total backend call duration in milliseconds (including network/transport) */\r\n  totalBackendCallMs: number;\r\n  /** Server processing time in seconds (from elapsedTimeSeconds) */\r\n  serverProcessingTimeSeconds: number;\r\n  /** Frontend processing time in milliseconds */\r\n  frontendTimeMs: number;\r\n  /** Last updated timestamp */\r\n  lastUpdated: Date;\r\n}\r\n\r\n/**\r\n * @class TimerService\r\n * @description Service for tracking performance timers throughout the application.\r\n * This service provides functionality to measure frontend processing times from\r\n * when backend response is received to when the view is rendered.\r\n */\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TimerService {\r\n  \r\n  // === PRIVATE SIGNALS FOR STATE MANAGEMENT ===\r\n  \r\n  /**\r\n   * Backend processing time from the server response\r\n   */\r\n  private _backendTimeSeconds = signal<number>(0);\r\n  \r\n  /**\r\n   * Total backend call duration including network/transport time\r\n   */\r\n  private _totalBackendCallMs = signal<number>(0);\r\n  \r\n  /**\r\n   * Server processing time from elapsedTimeSeconds field\r\n   */\r\n  private _serverProcessingTimeSeconds = signal<number>(0);\r\n  \r\n  /**\r\n   * Frontend processing time from response received to view rendered\r\n   */\r\n  private _frontendTimeMs = signal<number>(0);\r\n  \r\n  /**\r\n   * Last performance metrics update timestamp\r\n   */\r\n  private _lastUpdated = signal<Date>(new Date());\r\n  \r\n  /**\r\n   * Start time for frontend processing timer\r\n   */\r\n  private _frontendStartTime = 0;\r\n  \r\n  // === PUBLIC COMPUTED SIGNALS ===\r\n  \r\n  /**\r\n   * Get current performance metrics for display\r\n   */\r\n  public readonly performanceMetrics = computed((): PerformanceMetrics => {\r\n    return {\r\n      backendTimeSeconds: this._backendTimeSeconds(),\r\n      totalBackendCallMs: this._totalBackendCallMs(),\r\n      serverProcessingTimeSeconds: this._serverProcessingTimeSeconds(),\r\n      frontendTimeMs: this._frontendTimeMs(),\r\n      lastUpdated: this._lastUpdated()\r\n    };\r\n  });\r\n  \r\n  // === PUBLIC METHODS ===\r\n  \r\n  /**\r\n   * Set the backend processing time from server response\r\n   * @param seconds Backend processing time in seconds\r\n   */\r\n  public setBackendTime(seconds: number): void {\r\n    this._backendTimeSeconds.set(seconds);\r\n    this._lastUpdated.set(new Date());\r\n  }\r\n\r\n  /**\r\n   * Set the total backend call duration including network/transport time\r\n   * @param milliseconds - Total backend call duration in milliseconds\r\n   */\r\n  public setTotalBackendCallTime(milliseconds: number): void {\r\n    this._totalBackendCallMs.set(milliseconds);\r\n    this._lastUpdated.set(new Date());\r\n  }\r\n\r\n  /**\r\n   * Set the server processing time from elapsedTimeSeconds field\r\n   * @param seconds - Server processing time in seconds\r\n   */\r\n  public setServerProcessingTime(seconds: number): void {\r\n    this._serverProcessingTimeSeconds.set(seconds);\r\n    this._lastUpdated.set(new Date());\r\n  }\r\n  \r\n  /**\r\n   * Start frontend processing timer (call when response is received)\r\n   */\r\n      public startFrontendTimer(): void {\r\n        this._frontendStartTime = performance.now();\r\n      }\r\n  \r\n  /**\r\n   * Stop frontend processing timer (call when view is rendered)\r\n   * @returns The frontend processing time in milliseconds\r\n   */\r\n      public stopFrontendTimer(): number {\r\n        if (this._frontendStartTime === 0) {\r\n          return 0;\r\n        }\r\n\r\n        const endTime = performance.now();\r\n        const duration = endTime - this._frontendStartTime;\r\n\r\n        this._frontendTimeMs.set(duration);\r\n        this._lastUpdated.set(new Date());\r\n        this._frontendStartTime = 0; // Reset start time\r\n\r\n        return duration;\r\n      }\r\n  \r\n  /**\r\n   * Reset all timers\r\n   */\r\n  public resetTimers(): void {\r\n    this._backendTimeSeconds.set(0);\r\n    this._totalBackendCallMs.set(0);\r\n    this._serverProcessingTimeSeconds.set(0);\r\n    this._frontendTimeMs.set(0);\r\n    this._frontendStartTime = 0;\r\n    this._lastUpdated.set(new Date());\r\n  }\r\n  \r\n  /**\r\n   * Get performance summary for debugging\r\n   * @returns Object containing performance summary\r\n   */\r\n  public getPerformanceSummary(): any {\r\n    const metrics = this.performanceMetrics();\r\n    \r\n    return {\r\n      backendTimeSeconds: metrics.backendTimeSeconds,\r\n      frontendTimeMs: metrics.frontendTimeMs,\r\n      lastUpdated: metrics.lastUpdated,\r\n      isTimerActive: this._frontendStartTime > 0\r\n    };\r\n  }\r\n}\r\n","import { Injectable, signal, computed } from '@angular/core';\r\nimport { ColumnItem } from '../models/column-item.model';\r\nimport { UserData, UserPreferences, DEFAULT_USER_PREFERENCES } from '../models/user-data.model';\r\nimport { CustomService } from '@clinicaloffice/clinical-office-mpage-core';\r\nimport { ColumnConfigService } from './column-config.service';\r\nimport { TabList } from '../models/tab-list.model';\r\nimport { Router } from '@angular/router';\r\nimport { AppStatusService } from './app-status.service';\r\nimport { MessagingService } from './messaging.service';\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class UserPreferencesService {\r\n  // === SIGNALS IMPLEMENTATION ===\r\n  \r\n  /**\r\n   * Primary user data signal containing all user information and preferences\r\n   * This is the single source of truth for user state\r\n   */\r\n  private _userData = signal<UserData | null>(null);\r\n  \r\n  /**\r\n   * Loading state signal indicating whether user preferences have been loaded\r\n   * Used to show loading states and control navigation timing\r\n   */\r\n  private _preferencesLoaded = signal<boolean>(false);\r\n  \r\n  /**\r\n   * Current route signal for context-aware column and preference management\r\n   * Determines which route's configuration should be active\r\n   */\r\n  private _currentRoute = signal<string>('prior-auth');\r\n\r\n  /**\r\n   * Current filter state for each route\r\n   * Stores the active filter selections from worklist table components\r\n   */\r\n  private _currentFilterState: { [route: string]: { [columnMeaning: string]: string[] } } = {};\r\n  \r\n  // === READ-ONLY SIGNALS FOR EXTERNAL ACCESS ===\r\n  \r\n  /**\r\n   * Read-only access to user data\r\n   * Components should use this to access user information\r\n   */\r\n  readonly userData = this._userData.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to preferences loaded state\r\n   * Components can use this to show loading indicators\r\n   */\r\n  readonly preferencesLoaded = this._preferencesLoaded.asReadonly();\r\n  \r\n  /**\r\n   * Read-only access to current route\r\n   * Used for context-aware operations\r\n   */\r\n  readonly currentRoute = this._currentRoute.asReadonly();\r\n  \r\n  // === COMPUTED SIGNALS FOR DERIVED STATE ===\r\n  \r\n  /**\r\n   * Computed signal that returns columns for the current route\r\n   * Automatically updates when userData or currentRoute changes\r\n   * Falls back to default columns if user has no custom configuration\r\n   */\r\n  readonly currentRouteColumns = computed(() => {\r\n    const userData = this._userData();\r\n    const route = this._currentRoute();\r\n    return userData?.preferences.columns[route] || this.columnConfigService.getDefaultColumns(route);\r\n  });\r\n  \r\n  /**\r\n   * Computed signal that returns available tabs based on user preferences\r\n   * Automatically enables/disables tabs based on user settings\r\n   */\r\n  readonly availableTabs = computed(() => {\r\n    const userData = this._userData();\r\n    if (!userData?.preferences?.displaySettings) {\r\n      return this.defaultTabs;\r\n    }\r\n    \r\n    const enabledTabs = userData.preferences.displaySettings['enabledTabs'] || [];\r\n    const enabledRoutes = enabledTabs.map((tab: string) => '/' + tab);\r\n    \r\n    return this.defaultTabs.map((tab: TabList) => ({\r\n      ...tab,\r\n      disabled: !enabledRoutes.includes(tab.routerLink),\r\n      hidden: !enabledRoutes.includes(tab.routerLink)\r\n    }));\r\n  });\r\n  \r\n  /**\r\n   * Computed signal that returns the default route based on user preferences\r\n   * Determines where to navigate when user logs in\r\n   */\r\n  readonly defaultRoute = computed(() => {\r\n    const userData = this._userData();\r\n    console.log('[UserPreferencesService] defaultRoute computed - userData:', userData);\r\n    \r\n    if (!userData) {\r\n      console.log('[UserPreferencesService] defaultRoute computed - no userData, returning /default');\r\n      return '/default';\r\n    }\r\n    \r\n    const displaySettings = userData.preferences?.displaySettings;\r\n    if (!displaySettings) {\r\n      console.log('[UserPreferencesService] defaultRoute computed - no displaySettings, returning /default');\r\n      return '/default';\r\n    }\r\n    \r\n    const enabledTabs = displaySettings['enabledTabs'] || [];\r\n    const enabledRoutes = enabledTabs.map((tab: string) => '/' + tab);\r\n    const defaultTab = displaySettings['defaultTab'];\r\n    const defaultTabRoute = defaultTab ? '/' + defaultTab : undefined;\r\n    \r\n    console.log('[UserPreferencesService] defaultRoute computed - enabledTabs:', enabledTabs);\r\n    console.log('[UserPreferencesService] defaultRoute computed - enabledRoutes:', enabledRoutes);\r\n    console.log('[UserPreferencesService] defaultRoute computed - defaultTab:', defaultTab);\r\n    console.log('[UserPreferencesService] defaultRoute computed - defaultTabRoute:', defaultTabRoute);\r\n    \r\n    // If there's a default tab and it's enabled, use it\r\n    if (defaultTabRoute && enabledRoutes.includes(defaultTabRoute)) {\r\n      console.log('[UserPreferencesService] defaultRoute computed - returning defaultTabRoute:', defaultTabRoute);\r\n      return defaultTabRoute;\r\n    }\r\n    \r\n    // If there are enabled tabs, use the first one\r\n    if (enabledRoutes.length > 0) {\r\n      console.log('[UserPreferencesService] defaultRoute computed - returning first enabled route:', enabledRoutes[0]);\r\n      return enabledRoutes[0];\r\n    }\r\n    \r\n    // If no tabs are enabled, use default route\r\n    console.log('[UserPreferencesService] defaultRoute computed - no enabled tabs, returning /default');\r\n    return '/default';\r\n  });\r\n\r\n  /**\r\n   * Computed signal that returns whether to use new version (custom worklist filtering)\r\n   * or old version (predefined filter bar)\r\n   * Default: true (new version)\r\n   */\r\n  readonly useNewVersion = computed(() => {\r\n    const userData = this._userData();\r\n    const defaultValue = true; // Default to new version\r\n\r\n    if (!userData?.preferences?.performanceSettings) {\r\n      return defaultValue;\r\n    }\r\n\r\n    // Return user's preference, defaulting to true if not set\r\n    return userData.preferences.performanceSettings.useNewVersion ?? defaultValue;\r\n  });\r\n\r\n  // Default tab configuration\r\n  private readonly defaultTabs: TabList[] = [\r\n    {\r\n      title: 'Prior Authorization',\r\n      routerLink: '/prior-auth',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Oral Chemotherapy',\r\n      routerLink: '/oral-chemotherapy',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Reporting',\r\n      routerLink: '/reporting',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Admin',\r\n      routerLink: '/admin',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Feedback',\r\n      routerLink: '/feedback',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Future Item',\r\n      routerLink: '/future',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    },\r\n    {\r\n      title: 'Test Data',\r\n      routerLink: '/test-data',\r\n      forceRender: false,\r\n      hidden: true,\r\n      disabled: true\r\n    }\r\n  ];\r\n\r\n  /**\r\n   * Set the current route for this service (e.g., 'prior-auth', 'future', etc.)\r\n   * This will be used for all default column and preference logic.\r\n   * Updates the signal which triggers computed value recalculation\r\n   */\r\n  setCurrentRoute(route: string): void {\r\n    this._currentRoute.set(route);\r\n  }\r\n\r\n  constructor(\r\n    private customService: CustomService,\r\n    private columnConfigService: ColumnConfigService,\r\n    private router: Router,\r\n    private appStatus: AppStatusService,\r\n    private messagingService: MessagingService\r\n  ) {\r\n    // Debug router events to track navigation\r\n    this.router.events.subscribe(event => {\r\n      console.log('[UserPreferencesService] Router event:', event.constructor.name, event);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get current user data using signals\r\n   * Returns the current value of the userData signal\r\n   */\r\n  getUserData(): UserData | null {\r\n    return this._userData();\r\n  }\r\n\r\n  /**\r\n   * Set user data and update all dependent state\r\n   * This is the primary method for updating user state throughout the application\r\n   * Triggers automatic updates to all computed signals\r\n   */\r\n  setUserData(userData: UserData): void {\r\n    console.log('[UserPreferencesService] setUserData called with:', userData);\r\n    \r\n    // Update the primary signal - this will trigger all computed signals to recalculate\r\n    this._userData.set(userData);\r\n    \r\n    // Apply user column preferences for all routes\r\n    this.applyUserColumnPreferences();\r\n    \r\n    // Apply saved filters to restore filter state\r\n    this.applySavedFilters();\r\n    \r\n    // Note: Navigation is handled by DefaultComponent.checkTabAccess() via effect\r\n    // No need to navigate here to avoid conflicts\r\n    console.log('[UserPreferencesService] User data set, navigation will be handled by DefaultComponent');\r\n  }\r\n\r\n  /**\r\n   * Navigate to the default tab if we're currently on the default route\r\n   * Uses the computed defaultRoute signal to determine where to navigate\r\n   */\r\n  private navigateToDefaultTabIfNeeded(): void {\r\n    const currentRoute = this.router.url;\r\n    console.log('[UserPreferencesService] Current route:', currentRoute);\r\n    \r\n    if (currentRoute === '/default') {\r\n      const userData = this._userData();\r\n      const targetRoute = this.defaultRoute();\r\n      \r\n      console.log('[UserPreferencesService] User data:', userData);\r\n      console.log('[UserPreferencesService] Enabled tabs:', userData?.preferences?.displaySettings?.['enabledTabs']);\r\n      console.log('[UserPreferencesService] Default tab:', userData?.preferences?.displaySettings?.['defaultTab']);\r\n      console.log('[UserPreferencesService] Target route:', targetRoute);\r\n      \r\n      if (targetRoute !== '/default') {\r\n        console.log('[UserPreferencesService] Navigating to:', targetRoute);\r\n        this.router.navigate([targetRoute]).then(\r\n          (success) => console.log('[UserPreferencesService] Navigation success:', success, 'Current URL:', this.router.url),\r\n          (error) => console.log('[UserPreferencesService] Navigation error:', error)\r\n        );\r\n      } else {\r\n        console.log('[UserPreferencesService] Not navigating - target route is /default');\r\n      }\r\n    } else {\r\n      console.log('[UserPreferencesService] Not on /default route, skipping navigation');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load user preferences from Clinical Office service\r\n   * This should be called at app startup before rendering main content\r\n   */\r\n  /**\r\n   * Load user preferences from Clinical Office service or set offline defaults\r\n   * This method manages the complete user preference loading lifecycle\r\n   */\r\n  loadUserPreferences(userId: number): void {\r\n    // Initialize user preference loading process for the specified user ID\r\n    \r\n    // Update loading state\r\n    this._preferencesLoaded.set(false);\r\n    \r\n    // Check if we're in offline mode\r\n    if (this.appStatus.offlineMode()) {\r\n      // Operating in offline mode - use default preferences instead of server call\r\n      this.setOfflineDefaults(userId);\r\n      this._preferencesLoaded.set(true);\r\n      return;\r\n    }\r\n\r\n    this.customService.load(\r\n      {\r\n        customScript: {\r\n          script: [\r\n            {\r\n              name: 'cov_compass_user_data',\r\n              run: 'pre',\r\n              id: 'userPreferences',\r\n              parameters: { userId }\r\n            }\r\n          ],\r\n          clearPatientSource: true\r\n        }\r\n      },\r\n      [{ personId: 0, encntrId: 0 }],\r\n      () => {\r\n        const raw = this.customService.get('userPreferences');\r\n        if (raw && !raw.error && raw.preferences) {\r\n          // Parse the saved preferences JSON string if it exists\r\n          let savedPreferences: any = {};\r\n          if (raw.preferences.saved && typeof raw.preferences.saved === 'string') {\r\n            try {\r\n              savedPreferences = JSON.parse(raw.preferences.saved);\r\n              console.log('[UserPreferencesService] Parsed saved preferences:', savedPreferences);\r\n            } catch (error) {\r\n              console.error('[UserPreferencesService] Error parsing saved preferences:', error);\r\n            }\r\n          }\r\n\r\n          // Map the raw response to UserData\r\n          const userData: UserData = {\r\n            userId: raw.userId || userId,\r\n            fullName: raw.fullName || 'Unknown User',\r\n            username: raw.username || 'UNKNOWN',\r\n            position: raw.position,\r\n            curdomain: raw.curdomain,\r\n            curnode: raw.curnode,\r\n            preferences: {\r\n              columns: savedPreferences['columns'] || raw.preferences?.columns || this.columnConfigService.getDefaultColumns(this._currentRoute()),\r\n              filters: savedPreferences['filters'] || raw.preferences?.filters || DEFAULT_USER_PREFERENCES.filters,\r\n              displaySettings: {\r\n                ...raw.preferences?.displaySettings\r\n              },\r\n              customWorklists: savedPreferences['customWorklists'] || raw.preferences?.customWorklists || [] // Load custom worklists from saved preferences or direct field\r\n            },\r\n            performanceSettings: raw.performanceSettings,\r\n            runDtTm: raw.runDtTm ? new Date(raw.runDtTm) : new Date()\r\n          };\r\n          console.log('[UserPreferencesService] Raw preferences from server:', raw.preferences);\r\n          console.log('[UserPreferencesService] Parsed saved preferences:', savedPreferences);\r\n          console.log('[UserPreferencesService] Mapped userData:', userData);\r\n          this.setUserData(userData);\r\n        } else {\r\n          // If no preferences found, set default preferences with all tabs enabled\r\n          this.setOfflineDefaults(userId);\r\n        }\r\n        // Update loading state\r\n        this._preferencesLoaded.set(true);\r\n      }\r\n    );\r\n  }\r\n\r\n  private setOfflineDefaults(userId: number): void {\r\n    const defaultUserData: UserData = {\r\n      userId: userId,\r\n      fullName: 'Unknown User',\r\n      username: 'UNKNOWN',\r\n      curdomain: 'M0665', // Default domain for offline mode\r\n      curnode: 'offline',\r\n      preferences: {\r\n        ...DEFAULT_USER_PREFERENCES,\r\n        columns: { [this._currentRoute()]: this.columnConfigService.getDefaultColumns(this._currentRoute()) },\r\n        displaySettings: {\r\n          enabledTabs: ['prior-auth', 'oral-chemotherapy', 'future', 'test-data'],\r\n          defaultTab: 'prior-auth'\r\n        }\r\n      },\r\n      performanceSettings: {\r\n        batchMode: 0 // Default to normal mode in offline\r\n      },\r\n      runDtTm: new Date()\r\n    };\r\n    this.setUserData(defaultUserData);\r\n  }\r\n\r\n  /**\r\n   * Get current column configuration using signals\r\n   * Returns columns for the current route from computed signal\r\n   * This method provides backward compatibility while leveraging signals\r\n   */\r\n  getColumns(): ColumnItem[] {\r\n    return this.currentRouteColumns();\r\n  }\r\n\r\n  /**\r\n   * Update column configuration for the current route\r\n   * Updates the user data signal and triggers automatic recalculation of computed signals\r\n   */\r\n  updateColumns(columns: ColumnItem[]): void {\r\n    // Update user data signal if it exists\r\n    const currentUserData = this._userData();\r\n    if (currentUserData) {\r\n      const currentRoute = this._currentRoute();\r\n      // Update only the current route's columns in the user preferences\r\n      const updatedColumns = { ...currentUserData.preferences.columns, [currentRoute]: columns };\r\n      this.setUserData({\r\n        ...currentUserData,\r\n        preferences: {\r\n          ...currentUserData.preferences,\r\n          columns: updatedColumns\r\n        },\r\n        runDtTm: new Date()\r\n      });\r\n    }\r\n    \r\n    // Also update the column config service for the current route\r\n    this.columnConfigService.overrideColumns(columns, this._currentRoute());\r\n  }\r\n\r\n  /**\r\n   * Update column display state by column name\r\n   */\r\n  updateColumnDisplay(columnName: string, display: boolean): void {\r\n    const currentColumns = this.getColumns();\r\n    const updatedColumns = currentColumns.map(column =>\r\n      column.name === columnName ? { ...column, display } : column\r\n    );\r\n    this.updateColumns(updatedColumns);\r\n  }\r\n\r\n  /**\r\n   * Update column filters based on data (delegates to column config service)\r\n   */\r\n  updateColumnFiltersFromData(data: any[]): void {\r\n    this.columnConfigService.updateColumnFiltersFromData(data);\r\n  }\r\n\r\n  /**\r\n   * Apply saved filters to columns after loading preferences\r\n   * This method restores the filter state from saved preferences\r\n   */\r\n  applySavedFilters(): void {\r\n    const userData = this._userData();\r\n    if (!userData?.preferences?.filters) {\r\n      return;\r\n    }\r\n\r\n    const allRoutes = this.columnConfigService.getAllRoutes();\r\n    allRoutes.forEach(route => {\r\n      const routeFilters = userData.preferences.filters?.[route];\r\n      if (routeFilters) {\r\n        const routeColumns = this.columnConfigService.getColumns(route);\r\n        routeColumns.forEach(column => {\r\n          if (column.filterable && routeFilters[column.meaning]) {\r\n            const selectedValues = routeFilters[column.meaning];\r\n            // Update the listOfFilter to mark selected values as byDefault\r\n            if (column.listOfFilter) {\r\n              column.listOfFilter.forEach(option => {\r\n                option.byDefault = selectedValues.includes(option.value);\r\n              });\r\n            }\r\n          }\r\n        });\r\n        // Update the columns in the service\r\n        this.columnConfigService.overrideColumns(routeColumns, route);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Set the current filter state from a worklist table component\r\n   * This method allows the worklist table to provide its current filter selections\r\n   * @param route The route these filters apply to\r\n   * @param filterSelections The current filter selections from the table\r\n   */\r\n  setCurrentFilterState(route: string, filterSelections: { [columnMeaning: string]: string[] }): void {\r\n    // Store the current filter state for this route\r\n    if (!this._currentFilterState) {\r\n      this._currentFilterState = {};\r\n    }\r\n    this._currentFilterState[route] = filterSelections;\r\n    console.log(`[UserPreferencesService] Set filter state for ${route}:`, filterSelections);\r\n  }\r\n\r\n  /**\r\n   * Get the current filter state for a specific route\r\n   * @param route The route to get filters for\r\n   * @returns The current filter selections for the route\r\n   */\r\n  getCurrentFilterState(route: string): { [columnMeaning: string]: string[] } {\r\n    return this._currentFilterState?.[route] || {};\r\n  }\r\n\r\n  /**\r\n   * Update user preferences (partial update)\r\n   * Merges new preferences with existing ones and triggers signal updates\r\n   */\r\n  updatePreferences(preferences: Partial<UserPreferences>): void {\r\n    const currentUserData = this._userData();\r\n    if (currentUserData) {\r\n      this.setUserData({\r\n        ...currentUserData,\r\n        preferences: {\r\n          ...currentUserData.preferences,\r\n          ...preferences\r\n        },\r\n        runDtTm: new Date()\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  /**\r\n   * Apply user column preferences for all routes, merging with defaults as needed.\r\n   * Uses signals to get current user data and applies configuration to column service\r\n   * This should be called after loading user preferences.\r\n   */\r\n  applyUserColumnPreferences(): void {\r\n    const allRoutes = this.columnConfigService.getAllRoutes();\r\n    const userColumns = this._userData()?.preferences.columns || {};\r\n    allRoutes.forEach(route => {\r\n      const userRouteColumns = userColumns[route];\r\n      const defaultRouteColumns = this.columnConfigService.getDefaultColumns(route);\r\n      // Merge: use user columns if present, else default\r\n      const columnsToApply = userRouteColumns && userRouteColumns.length > 0\r\n        ? userRouteColumns\r\n        : defaultRouteColumns;\r\n      this.columnConfigService.overrideColumns(columnsToApply, route);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Save user preferences to the backend via cov_compass_service\r\n   * Persists current user preferences to the database for future sessions\r\n   * Note: Only saves columns and filters, not tab settings (which are position-based)\r\n   */\r\n  saveUserPreferences(): void {\r\n    const userData = this.getUserData();\r\n    \r\n    if (!userData) {\r\n      this.messagingService.error('No user data available to save');\r\n      return;\r\n    }\r\n    \r\n    // Prepare preferences data for saving - columns, filters, and custom worklists\r\n    // Tab settings (enabled_tabs, default_tab) remain position-based in cov_compass_user_data\r\n\r\n    // Create a clean copy of columns with listOfFilter cleared to avoid saving temporary filter state\r\n    const cleanColumns: { [route: string]: ColumnItem[] } = {};\r\n    const currentFilters: { [route: string]: { [columnMeaning: string]: string[] } } = {};\r\n\r\n    // Get the current filter state from our stored filter state\r\n    const allRoutes = this.columnConfigService.getAllRoutes();\r\n    allRoutes.forEach(route => {\r\n      // Get stored filter selections for this route\r\n      const routeFilters = this._currentFilterState[route] || {};\r\n      currentFilters[route] = { ...routeFilters };\r\n\r\n      if (Object.keys(routeFilters).length > 0) {\r\n        console.log(`[UserPreferencesService] Captured filters for ${route}:`, routeFilters);\r\n      }\r\n\r\n      // Create clean columns from user preferences (not live data)\r\n      const userRouteColumns = userData.preferences.columns[route];\r\n      if (Array.isArray(userRouteColumns)) {\r\n        cleanColumns[route] = userRouteColumns.map(column => ({\r\n          ...column,\r\n          listOfFilter: [] // Clear any applied filters to avoid saving temporary state\r\n        }));\r\n      }\r\n    });\r\n\r\n    const preferencesToSave = {\r\n      columns: cleanColumns,\r\n      filters: currentFilters,\r\n      customWorklists: userData.preferences.customWorklists || [] // Include custom worklists\r\n    };\r\n\r\n    console.log('[UserPreferencesService] preferencesToSave:', preferencesToSave);\r\n    \r\n    // Call the backend service to save preferences\r\n    this.customService.load(\r\n      {\r\n        customScript: {\r\n          script: [\r\n            {\r\n              name: 'cov_compass_service',\r\n              run: 'pre',\r\n              id: 'saveUserPreferences',\r\n              parameters: {\r\n                requestType: 'saveUserPreferences',\r\n                userId: userData.userId,\r\n                preferences: JSON.stringify(preferencesToSave)\r\n              }\r\n            }\r\n          ],\r\n          clearPatientSource: true\r\n        }\r\n      },\r\n      [{ personId: 0, encntrId: 0 }],\r\n      () => {\r\n        const response = this.customService.get('saveUserPreferences');\r\n        // Check for success in the nested response structure\r\n        if (response && response.reply?.statusData?.status === 'S') {\r\n          this.messagingService.success('User preferences saved successfully');\r\n        } else {\r\n          // Provide more detailed error information\r\n          const errorMessage = response?.reply?.text || response?.message || 'Failed to save user preferences';\r\n          this.messagingService.error(errorMessage);\r\n        }\r\n      }\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Get current tab configuration using signals\r\n   * Returns the computed available tabs based on user preferences\r\n   */\r\n  getTabs(): TabList[] {\r\n    return this.availableTabs();\r\n  }\r\n\r\n\r\n  /**\r\n   * Get the default route based on user preferences using signals\r\n   * Returns the computed default route based on user settings\r\n   */\r\n  getDefaultRoute(): string {\r\n    return this.defaultRoute();\r\n  }\r\n\r\n  /**\r\n   * Toggle between new version (custom worklist filtering) and old version (predefined filter bar)\r\n   * Updates the user preference and triggers signal recalculation\r\n   * NOTE: This is a session-only setting and is NOT saved to backend\r\n   * @param useNew true to use new version, false to use old version\r\n   */\r\n  setUseNewVersion(useNew: boolean): void {\r\n    const userData = this._userData();\r\n    if (!userData) {\r\n      return;\r\n    }\r\n\r\n    // Ensure performanceSettings exists\r\n    if (!userData.preferences.performanceSettings) {\r\n      userData.preferences.performanceSettings = {};\r\n    }\r\n\r\n    // Update the setting (session-only, not persisted)\r\n    userData.preferences.performanceSettings.useNewVersion = useNew;\r\n\r\n    // Update the signal with a proper deep copy to ensure nested objects are preserved\r\n    // This prevents customWorklists and other nested properties from being lost\r\n    this._userData.set({\r\n      ...userData,\r\n      preferences: {\r\n        ...userData.preferences,\r\n        performanceSettings: {\r\n          ...userData.preferences.performanceSettings,\r\n          useNewVersion: useNew\r\n        }\r\n      }\r\n    });\r\n\r\n    // Do NOT save to backend - this is a session-only toggle for testing/comparison\r\n  }\r\n} ","// Import the generated version information\r\nlet buildVersion = 'v0.0.0-unknown';\r\nlet packageVersion = '0.0.0';\r\nlet gitBranch = 'unknown';\r\n\r\n// Try to import the generated version file, fallback to package.json if not available\r\ntry {\r\n  const versionInfo = require('../app/version.js');\r\n  buildVersion = versionInfo.buildVersion;\r\n  packageVersion = versionInfo.packageVersion;\r\n  gitBranch = versionInfo.gitBranch;\r\n} catch (error) {\r\n  // Fallback to package.json version if version.js doesn't exist\r\n  buildVersion = `v${require('../../package.json').version}-unknown`;\r\n  packageVersion = require('../../package.json').version;\r\n}\r\n\r\nexport const environment = {\r\n    appVersion: buildVersion,\r\n    packageVersion: packageVersion,\r\n    gitBranch: gitBranch,\r\n    production: false,\r\n    npiApiBaseUrl: '/npi-api/api/?version=2.1'\r\n  };\r\n  ","import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\n\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => {\r\n    // Bootstrap error occurred\r\n  });\r\n","// Auto-generated build version file\n// Generated on: 2025-10-27T16:56:33.595Z\nexport const buildVersion = 'v0.1.2-develop';\nexport const packageVersion = '0.1.2';\nexport const gitBranch = 'develop';\n"],"names":["RouterModule","PriorAuthComponent","OralChemotherapyComponent","FutureItemComponent","TestDataComponent","DefaultComponent","AdminComponent","FeedbackComponent","ReportingComponent","routes","path","component","redirectTo","pathMatch","AppRoutingModule","forRoot","useHash","imports","i1","exports","AppComponent","constructor","activatedRoute","mPage","userPreferences","appStatus","router","loading","ngOnInit","navigate","queryParams","subscribe","params","personId","parseInt","encntrId","prsnlId","assignFromConfigFile","setTimeout","e","setMaxInstances","waitForServiceReady","_this","_asyncToGenerator","serviceReady","Promise","resolve","setOfflineMode","loadUserPreferences","i0","ɵɵdirectiveInject","ActivatedRoute","i2","mPageService","i3","UserPreferencesService","i4","AppStatusService","Router","selectors","decls","vars","consts","template","AppComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ErrorHandler","APP_INITIALIZER","BrowserModule","BrowserAnimationsModule","CommonModule","FormsModule","ReactiveFormsModule","DragDropModule","ClinicalOfficeMpageModule","MaterialModule","ErrorHandlerService","ConfigService","LuxonDateAdapter","DateAdapter","MAT_DATE_FORMATS","MAT_DATE_LOCALE","ComponentVersionComponent","PerformanceStatsComponent","PerformanceDetailsModalComponent","NZ_I18N","en_US","HttpClientModule","NzTypographyModule","NzInputModule","NzIconModule","NzLayoutModule","HeaderContentComponent","FooterContentComponent","CompassContentComponent","NzSkeletonModule","NzMenuModule","NzGridModule","OralChemoFilterBarComponent","OralChemoWorklistComponent","NzTableModule","TestPersonDemographicsComponent","NzImageModule","NzTabsModule","NzButtonModule","NzSelectModule","NzTagModule","NzDrawerModule","NzDescriptionsModule","NzTimelineModule","WorklistTableComponent","MilestoneDetailsComponent","NzSpinModule","NzStepsModule","NzProgressModule","GlidianWorkflowCellComponent","EarliestDateMilestoneComponent","MedicalNecessityMilestoneComponent","GlidianProcessMilestoneComponent","NzCardModule","NzDatePickerModule","NzSwitchModule","NzSpaceModule","PriorAuthFilterBarComponent","NzCollapseModule","NzAlertModule","NzListModule","NzDropDownModule","NzCheckboxModule","PriorAuthSiderComponent","NzSliderModule","PatientInfoComponent","ItemInfoComponent","SchedulingLocationComponent","LocationSelectionModalComponent","SchedulingInfoMilestoneComponent","NzSegmentedModule","NzPageHeaderModule","NzAffixModule","NzPaginationModule","NzModalModule","NzFormModule","NzToolTipModule","NzMessageModule","ResizableColumnDirective","AccessRequestComponent","LoadingTimelineComponent","ItemCodesComponent","FeedbackFormComponent","UserAssignmentComponent","NotificationBellComponent","NotificationModalComponent","FeedbackWorklistTableComponent","FeedbackWorkflowCellComponent","FeedbackMilestoneDetailsComponent","NzBadgeModule","NzEmptyModule","NzAvatarModule","NzStatisticModule","NzDividerModule","NzInputNumberModule","NzRadioModule","GlidianProcessViewComponent","DocumentSelectionComponent","DocumentPreviewDrawerComponent","CorepointIntegrationComponent","SystemConfigurationComponent","AdminUserAssignmentComponent","TestToolsComponent","DocumentViewerTestToolComponent","PatientInformationComponent","CommentsComponent","ItemDetailsComponent","CodesComponent","WorkflowStatusComponent","PayorsComponent","MilestoneTimelineComponent","OralChemoItemInfoComponent","OralChemoPatientInfoComponent","OralChemoMilestoneDetailsComponent","OralChemoPatientInformationComponent","OralChemoCommentsComponent","OralChemoItemDetailsComponent","OralChemoCodesComponent","OralChemoWorkflowStatusComponent","OralChemoPayorsComponent","OralChemoUserAssignmentComponent","OralChemoMilestoneTimelineComponent","CustomWorklistWizardComponent","NzPopconfirmModule","configFactory","configService","loadConfig","CUSTOM_DATE_FORMATS","parse","dateInput","display","dateTimeLabel","monthYearLabel","dateA11yLabel","monthYearA11yLabel","AppModule","bootstrap","provide","useFactory","deps","multi","useClass","useValue","declarations","ɵɵlistener","AdminUserAssignmentComponent_ng_template_2_Template_button_click_0_listener","ɵɵrestoreView","_r6","ctx_r5","ɵɵnextContext","ɵɵresetView","loadData","ɵɵproperty","ctx_r1","ɵɵtext","ɵɵadvance","AdminUserAssignmentComponent_nz_alert_5_Template_nz_alert_nzOnClose_0_listener","_r8","ctx_r7","error","ctx_r3","workflow_r13","meaning","AdminUserAssignmentComponent_div_6_div_6_ng_template_6_Template_button_click_0_listener","_r21","ctx_r20","addUser","ctx_r15","adding","newUsername","trim","AdminUserAssignmentComponent_div_6_div_6_ng_template_9_ng_template_7_Template_button_click_0_listener","_r27","user_r22","$implicit","ctx_r25","removeUser","ɵɵtemplate","AdminUserAssignmentComponent_div_6_div_6_ng_template_9_ng_template_7_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c0","_r23","ɵɵtextInterpolate1","fullName","username","AdminUserAssignmentComponent_div_6_div_6_Template_input_ngModelChange_5_listener","$event","_r29","ctx_r28","AdminUserAssignmentComponent_div_6_div_6_Template_input_keydown_enter_5_listener","ctx_r30","AdminUserAssignmentComponent_div_6_div_6_ng_template_6_Template","AdminUserAssignmentComponent_div_6_div_6_ng_template_9_Template","AdminUserAssignmentComponent_div_6_div_6_ng_template_11_Template","_r14","ctx_r10","currentUsers","_r16","_r18","AdminUserAssignmentComponent_div_6_div_7_Template_button_click_1_listener","_r32","ctx_r31","saveUserAssignments","AdminUserAssignmentComponent_div_6_div_7_Template_button_click_4_listener","ctx_r33","resetChanges","ctx_r11","saving","AdminUserAssignmentComponent_div_6_nz_alert_8_Template_nz_alert_nzOnClose_0_listener","_r35","ctx_r34","saveSuccess","AdminUserAssignmentComponent_div_6_Template_nz_select_ngModelChange_4_listener","_r37","ctx_r36","selectedWorkflow","ctx_r38","onWorkflowChange","AdminUserAssignmentComponent_div_6_nz_option_5_Template","AdminUserAssignmentComponent_div_6_div_6_Template","AdminUserAssignmentComponent_div_6_div_7_Template","AdminUserAssignmentComponent_div_6_nz_alert_8_Template","ctx_r4","workflows","hasChanges","JSON","stringify","userAssignments","originalUserAssignments","adminService","messagingService","cdr","getCompassConfiguration","next","config","length","loadUserAssignments","err","detectChanges","getUserAssignOptions","data","usersAssignable","updateCurrentUsers","workflow","key","toLowerCase","users","sort","a","b","nameA","nameB","lowerCaseUsername","some","u","warning","newUser","userToRemove","filter","saveUserAssignOptions","success","AdminService","MessagingService","ChangeDetectorRef","AdminUserAssignmentComponent_Template","AdminUserAssignmentComponent_ng_template_2_Template","AdminUserAssignmentComponent_div_4_Template","AdminUserAssignmentComponent_nz_alert_5_Template","AdminUserAssignmentComponent_div_6_Template","_r0","AdminComponent_Template","AdminComponent_ng_template_7_Template","AdminComponent_ng_template_15_Template","AdminComponent_ng_template_23_Template","AdminComponent_ng_template_31_Template","AdminComponent_ng_template_39_Template","_r2","_r4","currentCredentials","hasCredentials","ctx_r2","credentialsError","CorepointIntegrationComponent_div_12_ng_template_17_Template_i_click_0_listener","_r17","ctx_r16","passwordVisible","ctx_r13","credentialsSaveError","CorepointIntegrationComponent_div_12_Template_input_ngModelChange_9_listener","_r19","ctx_r18","credentialsForm","CorepointIntegrationComponent_div_12_Template_input_ngModelChange_16_listener","password","CorepointIntegrationComponent_div_12_ng_template_17_Template","CorepointIntegrationComponent_div_12_Template_button_click_22_listener","ctx_r21","saveCorepointCredentials","CorepointIntegrationComponent_div_12_Template_button_click_25_listener","ctx_r22","resetCredentialsForm","CorepointIntegrationComponent_div_12_Template_button_click_28_listener","ctx_r23","clearCredentialsForm","CorepointIntegrationComponent_div_12_Template_button_click_31_listener","ctx_r24","fetchCorepointCredentials","CorepointIntegrationComponent_div_12_div_34_Template","CorepointIntegrationComponent_div_12_div_35_Template","credentialsSaving","_r12","credentialsLoading","credentialsSaveSuccess","currentUrl","hasUrl","ctx_r6","urlError","ctx_r26","urlSaveError","CorepointIntegrationComponent_div_25_Template_input_ngModelChange_7_listener","_r28","ctx_r27","urlForm","url","CorepointIntegrationComponent_div_25_Template_button_click_11_listener","ctx_r29","saveCorepointUrl","CorepointIntegrationComponent_div_25_Template_button_click_14_listener","resetUrlForm","CorepointIntegrationComponent_div_25_Template_button_click_17_listener","clearUrlForm","CorepointIntegrationComponent_div_25_Template_button_click_20_listener","ctx_r32","fetchCorepointUrl","CorepointIntegrationComponent_div_25_div_23_Template","CorepointIntegrationComponent_div_25_div_24_Template","urlSaving","urlLoading","urlSaveSuccess","ctx_r9","currentRecordUrl","recordUrlError","recordUrlSaveError","CorepointIntegrationComponent_div_38_Template_input_ngModelChange_7_listener","_r36","ctx_r35","recordUrlForm","CorepointIntegrationComponent_div_38_Template_button_click_11_listener","ctx_r37","saveCorepointGlidianRecordUrl","CorepointIntegrationComponent_div_38_Template_button_click_14_listener","resetRecordUrlForm","CorepointIntegrationComponent_div_38_Template_button_click_17_listener","ctx_r39","clearRecordUrlForm","CorepointIntegrationComponent_div_38_Template_button_click_20_listener","ctx_r40","fetchCorepointGlidianRecordUrl","CorepointIntegrationComponent_div_38_div_23_Template","CorepointIntegrationComponent_div_38_div_24_Template","recordUrlSaving","recordUrlLoading","recordUrlSaveSuccess","ngZone","getCorepointGlidianCredentials","response","run","hascredentials","credentials","storeCorepointGlidianCredentials","getCorepointGlidianUrl","hasurl","URL","urlData","storeCorepointGlidianUrl","getCorepointGlidianRecordUrl","storeCorepointGlidianRecordUrl","NgZone","CorepointIntegrationComponent_Template","CorepointIntegrationComponent_ng_template_1_Template","CorepointIntegrationComponent_div_11_Template","CorepointIntegrationComponent_div_12_Template","CorepointIntegrationComponent_ng_template_14_Template","CorepointIntegrationComponent_div_24_Template","CorepointIntegrationComponent_div_25_Template","CorepointIntegrationComponent_ng_template_27_Template","CorepointIntegrationComponent_div_37_Template","CorepointIntegrationComponent_div_38_Template","Validators","SystemConfigurationComponent_ng_template_1_Template_button_click_1_listener","_r13","ctx_r12","fetchCompassConfig","SystemConfigurationComponent_div_12_div_8_ng_template_10_Template_button_click_0_listener","_r47","ctx_r46","addWorkflow","ɵɵtextInterpolate","workflow_r48","name","ɵɵtextInterpolate3","dataElementsCnt","milestoneCnt","filterSetsCnt","SystemConfigurationComponent_div_12_div_8_ng_template_17_Template_button_click_0_listener","_r50","ctx_r49","addWorklist","worklist_r51","SystemConfigurationComponent_div_12_div_8_ng_template_29_Template_button_click_0_listener","_r53","ctx_r52","SystemConfigurationComponent_div_12_div_8_tr_43_Template_button_click_8_listener","restoredCtx","_r56","worklist_r54","ctx_r55","editWorklist","id","SystemConfigurationComponent_div_12_div_8_ng_template_53_Template_button_click_0_listener","_r58","ctx_r57","SystemConfigurationComponent_div_12_div_8_ng_template_56_Template_nz_list_item_click_0_listener","_r61","workflow_r59","ctx_r60","selectWorkflow","SystemConfigurationComponent_div_12_div_8_ng_template_56_Template_button_click_9_listener","ctx_r62","editWorkflow","ɵɵclassProp","SystemConfigurationComponent_div_12_div_8_nz_col_58_tr_33_Template_button_click_10_listener","_r68","element_r66","ctx_r67","editDataElement","definition","SystemConfigurationComponent_div_12_div_8_nz_col_58_tr_55_Template_button_click_13_listener","_r71","milestone_r69","ctx_r70","editMilestone","sequence","requiredInd","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_ng_template_2_Template_button_click_5_listener","_r80","filterSet_r72","ctx_r78","editFilterSet","isDefault","type","option_r85","item","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_17_div_2_nz_tag_7_Template","ɵɵpropertyInterpolate1","filter_r83","dataElement","options","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_17_div_2_Template","filters","option_r90","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_18_div_2_nz_tag_7_Template","filter_r88","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_18_div_2_Template","excludedFiltes","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_ng_template_2_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_17_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_18_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_div_19_Template","label","_r73","route","subroute","sortOrder","SystemConfigurationComponent_div_12_div_8_nz_col_58_Template_button_click_16_listener","_r93","ctx_r92","addDataElement","SystemConfigurationComponent_div_12_div_8_nz_col_58_tr_33_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_Template_button_click_36_listener","ctx_r94","addMilestone","SystemConfigurationComponent_div_12_div_8_nz_col_58_tr_55_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_Template_button_click_58_listener","ctx_r95","addFilterSet","SystemConfigurationComponent_div_12_div_8_nz_col_58_div_62_Template","ɵɵpipeBind2","updtDtTm","dataElements","milestones","filterSets","worklist_r96","SystemConfigurationComponent_div_12_div_8_ng_template_99_Template_nz_list_item_click_0_listener","_r101","workflow_r97","ctx_r100","SystemConfigurationComponent_div_12_div_8_ng_template_99_ng_template_5_Template","ctx_r42","_r98","element_r109","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_16_tr_3_Template","ctx_r102","getDataElementsByMeaning","element_r111","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_17_tr_3_Template","ctx_r103","element_r113","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_18_tr_3_Template","ctx_r104","element_r115","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_19_tr_3_Template","ctx_r105","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_20_tr_15_nz_tag_11_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_20_tr_15_nz_tag_12_Template","milestone_r117","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_20_tr_15_Template","ctx_r106","getMilestones","filterSet_r121","ɵɵtextInterpolate2","ɵɵstyleProp","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_21_tr_19_Template","ctx_r107","getFilterSets","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_16_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_17_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_18_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_19_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_20_Template","SystemConfigurationComponent_div_12_div_8_div_101_nz_card_21_Template","ctx_r43","formatDate","ɵɵtextInterpolate4","sample_r126","filtersCount","excludedCount","SystemConfigurationComponent_div_12_div_8_nz_row_102_nz_card_4_div_8_li_5_Template","filterType_r123","samples","SystemConfigurationComponent_div_12_div_8_nz_row_102_nz_card_4_div_8_Template","count","totalFilters","SystemConfigurationComponent_div_12_div_8_nz_row_102_nz_card_4_Template","ctx_r44","getFilterSetTypes","mapping_r129","keyRef","keyRefType","value","valueType","SystemConfigurationComponent_div_12_div_8_nz_row_103_tr_17_Template","ctx_r45","configJson","mapping","SystemConfigurationComponent_div_12_div_8_ng_template_5_Template","SystemConfigurationComponent_div_12_div_8_ng_template_10_Template","SystemConfigurationComponent_div_12_div_8_div_14_Template","SystemConfigurationComponent_div_12_div_8_ng_template_17_Template","SystemConfigurationComponent_div_12_div_8_div_21_Template","SystemConfigurationComponent_div_12_div_8_ng_template_26_Template","SystemConfigurationComponent_div_12_div_8_ng_template_29_Template","SystemConfigurationComponent_div_12_div_8_tr_43_Template","SystemConfigurationComponent_div_12_div_8_ng_template_48_Template","SystemConfigurationComponent_div_12_div_8_ng_template_53_Template","SystemConfigurationComponent_div_12_div_8_ng_template_56_Template","SystemConfigurationComponent_div_12_div_8_nz_col_58_Template","SystemConfigurationComponent_div_12_div_8_ng_template_63_Template","SystemConfigurationComponent_div_12_div_8_tr_90_Template","SystemConfigurationComponent_div_12_div_8_ng_template_99_Template","SystemConfigurationComponent_div_12_div_8_div_101_Template","SystemConfigurationComponent_div_12_div_8_nz_row_102_Template","SystemConfigurationComponent_div_12_div_8_nz_row_103_Template","_r20","ctx_r14","ɵɵpureFunction0","_c1","worklists","_c2","_r26","_r31","_r33","_r38","getTotalFilterSetsCount","_r41","ctx_r130","jsonError","SystemConfigurationComponent_div_12_div_9_Template_textarea_ngModelChange_4_listener","_r132","ctx_r131","editableJson","SystemConfigurationComponent_div_12_div_9_div_6_Template","_c3","ctx_r17","saveError","SystemConfigurationComponent_div_12_Template_input_ngModelChange_3_listener","_r134","ctx_r133","editMode","SystemConfigurationComponent_div_12_Template_input_ngModelChange_6_listener","ctx_r135","SystemConfigurationComponent_div_12_div_8_Template","SystemConfigurationComponent_div_12_div_9_Template","SystemConfigurationComponent_div_12_Template_button_click_12_listener","ctx_r136","saveConfig","SystemConfigurationComponent_div_12_Template_button_click_15_listener","ctx_r137","resetEdit","SystemConfigurationComponent_div_12_div_18_Template","SystemConfigurationComponent_div_12_div_19_Template","SystemConfigurationComponent_form_15_Template_button_click_12_listener","_r139","ctx_r138","cancelEdit","SystemConfigurationComponent_form_15_Template_button_click_14_listener","ctx_r140","saveWorkflow","workflowForm","SystemConfigurationComponent_form_19_Template_button_click_17_listener","_r142","ctx_r141","SystemConfigurationComponent_form_19_Template_button_click_19_listener","ctx_r143","saveDataElement","ctx_r8","dataElementForm","_c4","SystemConfigurationComponent_form_21_Template_button_click_22_listener","_r145","ctx_r144","SystemConfigurationComponent_form_21_Template_button_click_24_listener","ctx_r146","saveMilestone","milestoneForm","SystemConfigurationComponent_form_23_Template_button_click_12_listener","_r148","ctx_r147","SystemConfigurationComponent_form_23_Template_button_click_14_listener","ctx_r149","saveWorklist","worklistForm","option_r155","SystemConfigurationComponent_form_25_div_42_Template_input_ngModelChange_3_listener","_r157","filter_r152","SystemConfigurationComponent_form_25_div_42_Template_nz_select_ngModelChange_5_listener","SystemConfigurationComponent_form_25_div_42_nz_option_6_Template","SystemConfigurationComponent_form_25_div_42_Template_button_click_8_listener","i_r153","index","ctx_r159","removeFilter","option_r163","SystemConfigurationComponent_form_25_div_51_Template_input_ngModelChange_3_listener","_r165","filter_r160","SystemConfigurationComponent_form_25_div_51_Template_nz_select_ngModelChange_5_listener","SystemConfigurationComponent_form_25_div_51_nz_option_6_Template","SystemConfigurationComponent_form_25_div_51_Template_button_click_8_listener","i_r161","ctx_r167","SystemConfigurationComponent_form_25_div_42_Template","SystemConfigurationComponent_form_25_Template_button_click_43_listener","_r169","ctx_r168","addFilter","SystemConfigurationComponent_form_25_div_51_Template","SystemConfigurationComponent_form_25_Template_button_click_52_listener","ctx_r170","SystemConfigurationComponent_form_25_Template_button_click_56_listener","ctx_r171","SystemConfigurationComponent_form_25_Template_button_click_58_listener","ctx_r172","saveFilterSet","filterSetForm","editingFilterSet","fb","activeTab","editingWorkflow","selectedDataElement","editingDataElement","selectedMilestone","editingMilestone","selectedWorklist","editingWorklist","selectedFilterSet","showAddWorkflow","showAddDataElement","showAddMilestone","showAddWorklist","showAddFilterSet","initializeForms","group","required","parseStructuredData","getNextId","items","idField","maxId","Math","max","map","newWorkflow","Date","toISOString","patchValue","invalid","formValue","push","findIndex","w","updateConfigFromStructured","deleteWorkflow","splice","newDataElement","domain","reset","de","deleteDataElement","newMilestone","milestone","m","deleteMilestone","filterSet","valid","toString","fs","deleteFilterSet","newWorklist","worklist","deleteWorklist","workflowCnt","worklistCnt","forEach","parsed","message","saveCompassConfiguration","getMilestonesByMeaning","filterTypeMap","Map","has","set","Set","typeData","get","add","Array","from","entries","size","filterType","newFilter","reduce","total","dateString","date","toLocaleDateString","toLocaleTimeString","FormBuilder","SystemConfigurationComponent_Template","SystemConfigurationComponent_ng_template_1_Template","SystemConfigurationComponent_div_11_Template","SystemConfigurationComponent_div_12_Template","SystemConfigurationComponent_div_13_Template","SystemConfigurationComponent_Template_nz_modal_nzVisibleChange_14_listener","SystemConfigurationComponent_Template_nz_modal_nzOnCancel_14_listener","SystemConfigurationComponent_form_15_Template","SystemConfigurationComponent_Template_nz_modal_nzVisibleChange_16_listener","SystemConfigurationComponent_Template_nz_modal_nzOnCancel_16_listener","SystemConfigurationComponent_div_17_Template","SystemConfigurationComponent_div_18_Template","SystemConfigurationComponent_form_19_Template","SystemConfigurationComponent_Template_nz_modal_nzVisibleChange_20_listener","SystemConfigurationComponent_Template_nz_modal_nzOnCancel_20_listener","SystemConfigurationComponent_form_21_Template","SystemConfigurationComponent_Template_nz_modal_nzVisibleChange_22_listener","SystemConfigurationComponent_Template_nz_modal_nzOnCancel_22_listener","SystemConfigurationComponent_form_23_Template","SystemConfigurationComponent_Template_nz_modal_nzVisibleChange_24_listener","SystemConfigurationComponent_Template_nz_modal_nzOnCancel_24_listener","SystemConfigurationComponent_form_25_Template","EventEmitter","Subject","takeUntil","DocumentViewerTestToolComponent_div_0_div_27_Template_input_ngModelChange_2_listener","_r10","searchText","applyFilter","DocumentViewerTestToolComponent_div_0_div_27_Template_button_click_4_listener","viewSelectedInCerner","DocumentViewerTestToolComponent_div_0_div_27_Template_button_click_6_listener","clearData","isLoadingDocuments","hasSelectedDocuments","getSelectedDocumentsCount","doc_r16","effectiveDate","DocumentViewerTestToolComponent_div_0_div_32_tr_24_Template_input_change_2_listener","_r22","onDocumentSelectChange","DocumentViewerTestToolComponent_div_0_div_32_tr_24_span_12_Template","DocumentViewerTestToolComponent_div_0_div_32_tr_24_ng_template_13_Template","DocumentViewerTestToolComponent_div_0_div_32_tr_24_Template_button_click_19_listener","previewDocument","DocumentViewerTestToolComponent_div_0_div_32_tr_24_Template_button_click_21_listener","viewInCerner","isRowHighlighted","selectedDocuments","eventId","title","author","source","isValidEventId","canViewInCerner","DocumentViewerTestToolComponent_div_0_div_32_span_4_Template","DocumentViewerTestToolComponent_div_0_div_32_Template_input_change_10_listener","onSelectAllChange","DocumentViewerTestToolComponent_div_0_div_32_Template_th_click_11_listener","sortBy","DocumentViewerTestToolComponent_div_0_div_32_Template_th_click_13_listener","DocumentViewerTestToolComponent_div_0_div_32_Template_th_click_15_listener","DocumentViewerTestToolComponent_div_0_div_32_Template_th_click_17_listener","DocumentViewerTestToolComponent_div_0_div_32_tr_24_Template","filteredDocuments","availableDocuments","isAllDocumentsSelected","isSomeDocumentsSelected","DocumentViewerTestToolComponent_div_0_Template_div_click_0_listener","closeModal","DocumentViewerTestToolComponent_div_0_Template_div_click_1_listener","stopPropagation","DocumentViewerTestToolComponent_div_0_Template_button_click_5_listener","DocumentViewerTestToolComponent_div_0_Template_input_ngModelChange_12_listener","DocumentViewerTestToolComponent_div_0_Template_input_ngModelChange_17_listener","beginDateStr","DocumentViewerTestToolComponent_div_0_Template_input_ngModelChange_20_listener","endDateStr","DocumentViewerTestToolComponent_div_0_Template_button_click_21_listener","setAllDates","DocumentViewerTestToolComponent_div_0_Template_button_click_24_listener","loadDocuments","DocumentViewerTestToolComponent_div_0_span_25_Template","DocumentViewerTestToolComponent_div_0_span_26_Template","DocumentViewerTestToolComponent_div_0_div_27_Template","DocumentViewerTestToolComponent_div_0_div_29_Template","DocumentViewerTestToolComponent_div_0_div_30_Template","DocumentViewerTestToolComponent_div_0_div_31_Template","DocumentViewerTestToolComponent_div_0_div_32_Template","ctx_r0","DocumentViewerTestToolComponent_div_1_div_7_Template_button_click_28_listener","_r42","ctx_r41","selectedDocumentForPreview","DocumentViewerTestToolComponent_div_1_div_7_Template_button_click_30_listener","viewInCernerProcedure","canViewInCernerProcedure","DocumentViewerTestToolComponent_div_1_Template_div_click_0_listener","_r45","closePreviewModal","DocumentViewerTestToolComponent_div_1_Template_div_click_1_listener","DocumentViewerTestToolComponent_div_1_Template_button_click_5_listener","ctx_r47","DocumentViewerTestToolComponent_div_1_div_7_Template","cernerActionService","isVisible","close","previewModalVisible","highlightedRowId","dateRange","beginDate","endDate","currentSortField","sortDirection","destroy$","sortByDate","dateA","dateB","isNaN","getTime","sortByType","localeCompare","sortByTitle","sortByAuthor","ngOnDestroy","complete","split","personIdNum","console","log","undefined","getDocumentsForPerson","pipe","documents","doc","eventType","isAttached","isSelected","Error","stack","searchLower","matchesSearch","includes","toggleDocumentSelection","checked","delete","onDateRangeChange","dates","clearDateFilter","isAllDatesSelected","startDate","startsWith","supportedEventTypes","canViewInCernerAny","CernerAction","then","catch","viewInCernerAppropriate","info","selectedDocs","viewableDocs","eventIds","viewSelectedInCernerProcedure","viewSelectedInCernerAppropriate","documentsToView","proceduresToView","emit","clear","getTypeColor","typeColors","every","toggleAllDocumentsSelection","field","aValue","bValue","event","target","CernerActionService","inputs","outputs","DocumentViewerTestToolComponent_Template","DocumentViewerTestToolComponent_div_0_Template","DocumentViewerTestToolComponent_div_1_Template","documentViewerTestVisible","openDocumentViewerTest","closeDocumentViewerTest","TestToolsComponent_Template","TestToolsComponent_Template_button_click_29_listener","TestToolsComponent_Template_app_document_viewer_test_tool_close_50_listener","NavigationEnd","ɵɵelementContainerStart","ɵɵelementContainerEnd","sidebarState","collapsed","width","columns","columnConfig","getColumnsForCurrentRoute","events","urlAfterRedirects","SidebarStateService","ColumnConfigService","CompassContentComponent_Template","CompassContentComponent_ng_container_1_Template","requestText","onSubmit","AccessRequestComponent_Template","AccessRequestComponent_Template_form_ngSubmit_7_listener","AccessRequestComponent_Template_textarea_ngModelChange_11_listener","effect","injector","showAccessRequest","preferencesEffect","loaded","preferencesLoaded","checkTabAccess","userData","getUserData","preferences","displaySettings","enabledTabs","defaultTab","Injector","DefaultComponent_Template","DefaultComponent_app_loading_timeline_1_Template","DefaultComponent_app_access_request_2_Template","signal","computed","timer","step_r4","description","status","LoadingTimelineComponent_div_8_Template_button_click_2_listener","_r7","enterOfflineMode","_currentStep","_preferencesLoaded","_showOfflineButton","currentStep","asReadonly","showOfflineButton","offlineMode","steps","updateStep","stopServiceCheck","allowSignalWrites","checkOfflineMode","startServiceCheck","startOfflineButtonTimer","checkMPageServiceReady","serviceCheckInterval","setInterval","clearInterval","stepIndex","LoadingTimelineComponent_Template","LoadingTimelineComponent_nz_step_7_Template","LoadingTimelineComponent_div_8_Template","LoadingTimelineComponent_div_9_Template","LoadingTimelineComponent_div_10_Template","NZ_MODAL_DATA","modalRef","feedbackService","userPreferencesService","itemReference","itemType","itemId","feedbackSubmitted","isSubmitting","submissionDateTime","feedbackForm","user","userName","feedbackNarrative","minLength","feedbackPriority","itemMeaning","populateUserInfo","submitFeedback","feedbackData","workflowStatus","status_datetime","updated_by","markFormGroupTouched","Object","keys","controls","control","markAsTouched","cancel","NzModalRef","FeedbackService","FeedbackFormComponent_Template","FeedbackFormComponent_Template_button_click_51_listener","FeedbackFormComponent_Template_button_click_53_listener","feedbackItem","item_type","FeedbackMilestoneDetailsComponent_div_28_div_8_Template","item_reference","related_item","patient","ordering_provider","workflow_status","FeedbackMilestoneDetailsComponent_div_29_div_8_Template","FeedbackMilestoneDetailsComponent_div_29_div_9_Template","FeedbackMilestoneDetailsComponent_div_29_div_10_Template","item_description","assigned_to","milestone_r9","assignee","completion_notes","data_r16","value_text","FeedbackMilestoneDetailsComponent_nz_timeline_item_35_div_12_div_1_Template","milestone_data","FeedbackMilestoneDetailsComponent_nz_timeline_item_35_div_10_Template","FeedbackMilestoneDetailsComponent_nz_timeline_item_35_div_11_Template","FeedbackMilestoneDetailsComponent_nz_timeline_item_35_div_12_Template","resolution_notes","milestoneUpdated","onMilestoneUpdated","d","hour","minute","getPriorityClass","priority","getStatusClass","FeedbackMilestoneDetailsComponent_Template","FeedbackMilestoneDetailsComponent_div_28_Template","FeedbackMilestoneDetailsComponent_div_29_Template","FeedbackMilestoneDetailsComponent_div_30_Template","FeedbackMilestoneDetailsComponent_nz_timeline_item_35_Template","FeedbackMilestoneDetailsComponent_Template_app_feedback_workflow_cell_milestoneUpdated_37_listener","FeedbackMilestoneDetailsComponent_div_38_Template","ɵɵclassMap","feedback_priority","submitted_by_user","submission_datetime","feedback_type","feedback_narrative","getWorkflowSummary","getActionIcon","action_r5","FeedbackWorkflowCellComponent_div_6_button_2_Template_button_click_0_listener","_r9","onActionClick","FeedbackWorkflowCellComponent_div_6_button_2_i_1_Template","getActionType","isActionLoading","getActionLabel","FeedbackWorkflowCellComponent_div_6_button_2_Template","availableActions","getMilestoneProgress","getCurrentMilestoneStatus","feedbackWorklistService","_actionLoading","updateAvailableActions","ngOnChanges","actions","action","update","current","updates","getActionUpdates","milestoneUpdate","updateMilestone","statusUpdate","updateStatus","currentUserId","getCurrentUserId","compass_worklist_id","milestone_id","getReviewMilestoneId","new_status","assignee_person_id","updated_by_person_id","request","updateFeedbackMilestone","newSet","updateFeedbackStatus","reviewMilestone","find","userId","replace","hasAvailableActions","FeedbackWorklistService","features","ɵɵNgOnChangesFeature","FeedbackWorkflowCellComponent_Template","FeedbackWorkflowCellComponent_div_5_Template","FeedbackWorkflowCellComponent_div_6_Template","FeedbackWorkflowCellComponent_div_7_Template","FeedbackWorkflowCellComponent_div_8_Template","truncateText","item_r4","FeedbackWorklistTableComponent_ng_container_24_div_23_Template","FeedbackWorklistTableComponent_ng_container_24_div_28_Template","FeedbackWorklistTableComponent_ng_container_24_Template_button_click_36_listener","selectItem","FeedbackWorklistTableComponent_ng_container_24_Template_button_click_38_listener","refreshItem","isItemLoading","submitted_by_username","getFeedbackTypeIcon","getColumnValue","FeedbackWorklistTableComponent_ng_container_27_app_feedback_milestone_details_1_Template_app_feedback_milestone_details_milestoneUpdated_0_listener","selectedItem","FeedbackWorklistTableComponent_ng_container_27_app_feedback_milestone_details_1_Template","columnConfigService","feedbackItems","refreshRequested","itemSelected","_loadingItems","_selectedItem","_drawerVisible","_columnWidths","isItemLoadingDetails","drawerVisible","tableColumns","columnsForRoute","getColumnWidth","columnName","loadColumnWidths","closeDrawer","refreshFeedbackItem","onRefreshRequested","onColumnResize","columnKey","saveColumnWidths","resetColumnWidths","saved","localStorage","getItem","widthsObject","widthsMap","Number","fromEntries","setItem","text","maxLength","substring","FeedbackWorklistTableComponent_Template","FeedbackWorklistTableComponent_Template_th_columnResize_5_listener","FeedbackWorklistTableComponent_Template_th_columnResize_7_listener","FeedbackWorklistTableComponent_Template_th_columnResize_9_listener","FeedbackWorklistTableComponent_Template_th_columnResize_11_listener","FeedbackWorklistTableComponent_Template_th_columnResize_13_listener","FeedbackWorklistTableComponent_Template_th_columnResize_15_listener","FeedbackWorklistTableComponent_Template_th_columnResize_17_listener","FeedbackWorklistTableComponent_ng_container_24_Template","FeedbackWorklistTableComponent_nz_empty_25_Template","FeedbackWorklistTableComponent_Template_nz_drawer_nzOnClose_26_listener","FeedbackWorklistTableComponent_ng_container_27_Template","itemCounts","received","triaged","in_progress","assigned","resolved","closed","FeedbackComponent_nz_alert_59_Template_nz_alert_nzOnClose_0_listener","retryLoad","componentError","FeedbackComponent_div_61_Template_app_feedback_worklist_table_refreshRequested_1_listener","FeedbackComponent_div_61_Template_app_feedback_worklist_table_itemSelected_1_listener","onFeedbackItemSelected","filteredItems","FeedbackComponent_div_62_Template_button_click_3_listener","onFiltersReset","toggleSummaryCards","showSummaryCards","v","_initialLoading","_filterOptions","status_filter","priority_filter","type_filter","days_filter","assigned_to_me","_componentError","initialLoading","filterOptions","filterSyncEffect","serviceFilters","setCurrentRoute","loadFeedbackWorklist","refreshWorklist","onFilterChanged","updateFilterOptions","clearFilters","onResetColumns","feedbackTable","getCurrentUser","viewQuery","FeedbackComponent_Query","FeedbackComponent_div_7_Template","FeedbackComponent_Template_nz_select_ngModelChange_14_listener","FeedbackComponent_Template_nz_select_ngModelChange_25_listener","FeedbackComponent_Template_nz_select_ngModelChange_34_listener","FeedbackComponent_Template_nz_select_ngModelChange_41_listener","FeedbackComponent_Template_button_click_47_listener","FeedbackComponent_Template_button_click_50_listener","FeedbackComponent_Template_button_click_53_listener","FeedbackComponent_Template_button_click_56_listener","FeedbackComponent_nz_alert_59_Template","FeedbackComponent_div_60_Template","FeedbackComponent_div_61_Template","FeedbackComponent_div_62_Template","ɵɵattribute","FutureItemComponent_Template","code_r6","vocabulary","identifier","OralChemoCodesComponent_div_0_div_1_tr_13_Template","group_r4","codes","OralChemoCodesComponent_div_0_div_1_Template","getCodeGroups","worklistItem","codeList","groups","code","OralChemoCodesComponent_Template","OralChemoCodesComponent_div_0_Template","OralChemoCodesComponent_ng_template_1_Template","_r1","OralChemoCommentsComponent_ng_template_4_Template_button_click_0_listener","addComment","newCommentText","isCommentsLoading","OralChemoCommentsComponent_div_6_div_1_button_7_Template_button_click_0_listener","comment_r9","startEditingComment","editingComment","commentText","OralChemoCommentsComponent_div_6_div_1_ng_template_10_ng_template_3_Template_button_click_0_listener","updateComment","OralChemoCommentsComponent_div_6_div_1_ng_template_10_ng_template_3_Template_button_click_2_listener","cancelEditingComment","ctx_r19","editingCommentText","isUpdatingComment","OralChemoCommentsComponent_div_6_div_1_ng_template_10_Template_textarea_ngModelChange_2_listener","_r24","OralChemoCommentsComponent_div_6_div_1_ng_template_10_ng_template_3_Template","OralChemoCommentsComponent_div_6_div_1_button_7_Template","OralChemoCommentsComponent_div_6_div_1_div_9_Template","OralChemoCommentsComponent_div_6_div_1_ng_template_10_Template","createdDateTime","canEditComment","isCommentBeingEdited","OralChemoCommentsComponent_div_6_div_1_Template","comments","worklistService","visible","commentsCountChanged","commentsSubscription","lastLoadedWorklistId","loadComments","changes","worklistItemChanged","firstChange","visibleChanged","previousValue","unsubscribe","newComment","commentId","now","authorId","comment","currentUser","commentIndex","c","OralChemotherapyService","OralChemoCommentsComponent_Template","OralChemoCommentsComponent_Template_textarea_ngModelChange_3_listener","OralChemoCommentsComponent_Template_textarea_keydown_enter_3_listener","OralChemoCommentsComponent_ng_template_4_Template","OralChemoCommentsComponent_div_6_Template","OralChemoCommentsComponent_ng_template_7_Template","OralChemoCommentsComponent_div_9_Template","_r3","itemDescription","workflowType","getPriorityColor","orderingLocation","orderingProvider","schedulingLocation","origOrderDtTm","edosDate","workflowUpdateDateTime","workflowUpdateCount","itemRefreshed","OralChemoItemDetailsComponent_Template","OralChemoItemDetailsComponent_div_0_Template","OralChemoItemDetailsComponent_div_1_Template","dataRefreshDtTm","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_span_7_Template","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_9_listener","collapseAll","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_11_listener","expandAll","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_13_listener","refreshCurrentItem","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_15_listener","copyItemDataToClipboard","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_17_listener","openFeedbackModal","isRefreshing","isCopying","OralChemoMilestoneDetailsComponent_ng_template_1_div_0_Template","commentsCount","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_ng_template_5_nz_badge_1_Template","milestone_r24","milestoneId","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_div_42_div_1_Template","action_r26","actionId","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_div_46_div_1_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_2_listener","panelStates","patientInfo","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_4_listener","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_ng_template_5_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_app_oral_chemo_comments_commentsCountChanged_7_listener","onCommentsCountChanged","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_8_listener","itemDetails","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_app_oral_chemo_item_details_itemRefreshed_9_listener","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_10_listener","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_12_listener","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_14_listener","payors","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_16_listener","userAssignment","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_21_listener","supportInfo","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_ng_template_22_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_div_42_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_ng_template_43_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_div_46_Template","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_ng_template_47_Template","isLoading","orderId","workflow_id","schedule","scheduleId","state","OralChemoMilestoneDetailsComponent_ng_container_3_Template_nz_slider_ngModelChange_2_listener","_r39","onDrawerWidthChange","OralChemoMilestoneDetailsComponent_ng_container_3_div_3_Template","drawerWidth","modalService","visibleChange","commentsPanelExpanded","setAllPanelStates","currentValue","assignedTo","assignedName","create","nzTitle","nzContent","nzWidth","nzData","nzFooter","nzClosable","nzMaskClosable","afterClose","result","itemData","subStatus","_exportedAt","_exportedBy","jsonString","navigator","clipboard","writeText","NzModalService","i5","OralChemoMilestoneDetailsComponent_Template","OralChemoMilestoneDetailsComponent_Template_nz_drawer_nzOnClose_0_listener","OralChemoMilestoneDetailsComponent_ng_template_1_Template","OralChemoMilestoneDetailsComponent_ng_container_3_Template","getItemIcon","item_r5","actionBy","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_div_15_nz_tag_1_Template","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_div_15_nz_tag_2_Template","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_ng_template_1_Template","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_div_10_Template","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_div_14_Template","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_div_15_Template","getStatusColor","dateTime","OralChemoMilestoneTimelineComponent_div_0_nz_timeline_item_4_Template","getTimelineItems","timelineItems","statusDateTime","milestoneData","actionDtTm","OralChemoMilestoneTimelineComponent_Template","OralChemoMilestoneTimelineComponent_div_0_Template","OralChemoMilestoneTimelineComponent_ng_template_1_Template","OralChemoMilestoneTimelineComponent_div_3_Template","dateOfBirth","fin","mrn","OralChemoPatientInformationComponent_Template","OralChemoPatientInformationComponent_div_0_Template","OralChemoPatientInformationComponent_div_1_Template","payor_r4","planName","getPlanTypeColor","planType","planId","OralChemoPayorsComponent_div_0_tr_15_Template","OralChemoPayorsComponent_Template","OralChemoPayorsComponent_div_0_Template","OralChemoPayorsComponent_ng_template_1_Template","hasAssignedUser","OralChemoUserAssignmentComponent_Template","OralChemoUserAssignmentComponent_div_0_Template","OralChemoUserAssignmentComponent_ng_template_1_Template","getSubStatusColor","subStatusDateTime","OralChemoWorkflowStatusComponent_Template","OralChemoWorkflowStatusComponent_div_0_Template","OralChemoWorkflowStatusComponent_div_1_Template","predefinedFilters","activePredefinedFilter","currentDaysFilter","showMyAssignmentsOnly","predefinedFilterSelect","globalSearch","daysFilterChange","assignmentToggle","refreshData","columnWidthsReset","globalSearchTerm","onPredefinedFilterSelect","onGlobalSearch","searchTerm","onDaysFilterChange","days","onAssignmentToggle","onRefreshData","onColumnWidthsReset","clearGlobalSearch","OralChemoFilterBarComponent_Template","OralChemoItemInfoComponent_div_0_Template_a_click_2_listener","openItemDetails","orderDescription","cernerAction","warn","OralChemoItemInfoComponent_Template","OralChemoItemInfoComponent_div_0_Template","OralChemoWorklistComponent_ng_container_4_th_1_Template_th_columnResize_0_listener","column_r3","sortFn","sortDirections","filterMultiple","OralChemoWorklistComponent_ng_container_4_th_2_Template_th_nzFilterChange_0_listener","_r11","onColumnFilterChange","OralChemoWorklistComponent_ng_container_4_th_2_Template_th_columnResize_0_listener","listOfFilter","filterFn","OralChemoWorklistComponent_ng_container_4_th_1_Template","OralChemoWorklistComponent_ng_container_4_th_2_Template","filterable","item_r14","getCellValue","column_r18","OralChemoWorklistComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_container_0_Template","OralChemoWorklistComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_Template","_r25","OralChemoWorklistComponent_tr_10_ng_container_1_td_1_ng_container_1_Template","OralChemoWorklistComponent_tr_10_ng_container_1_td_1_ng_template_2_Template","OralChemoWorklistComponent_tr_10_ng_container_1_td_1_Template","OralChemoWorklistComponent_tr_10_button_8_Template_button_click_0_listener","_r34","openMilestoneDetails","OralChemoWorklistComponent_tr_10_button_9_Template_button_click_0_listener","refreshWorklistItem","OralChemoWorklistComponent_tr_10_ng_container_1_Template","OralChemoWorklistComponent_tr_10_button_8_Template","OralChemoWorklistComponent_tr_10_button_9_Template","getRowHighlightClasses","listOfColumns","itemHighlighting","worklistItems","milestoneDetailsVisible","_expandedIds","_preventingFilterRestoration","_isDataRefreshing","filterSelections","_columnFiltersReady","_applyingPredefinedFilter","_lastAppliedFilterId","_lastAppliedFilterTime","expandedIds","loadingItems","columnFiltersReady","applyingPredefinedFilter","getColumns","isItemExpanded","filtersReady","applyingFilter","activeFilter","sameFilterRecently","applyVisualFilters","clearPredefinedFilterSelections","restoreTableFilters","onExpandChange","currentExpanded","updatePriority","refreshWorklistItemById","currentLoading","newLoading","patientName","scheduleStatus","orderStatus","orderDate","day","getDate","padStart","month","toLocaleString","year","getFullYear","updateColumnWidth","getFixedColumnWidth","selectedValues","onTableFilterChange","isArray","f","detail","setCurrentFilterState","clearAllColumnFilters","col","opt","byDefault","triggerUpdate","updateColumnsSilently","hasFilters","selected","schedulingStatus","onMilestoneDetailsVisibleChange","onItemRefreshed","updatedItem","ItemHighlightingService","OralChemoWorklistComponent_Query","OralChemoWorklistComponent_Template_nz_table_nzFilterChange_0_listener","OralChemoWorklistComponent_ng_container_4_Template","OralChemoWorklistComponent_Template_th_columnResize_5_listener","OralChemoWorklistComponent_Template_th_columnResize_7_listener","OralChemoWorklistComponent_tr_10_Template","OralChemoWorklistComponent_Template_app_oral_chemo_milestone_details_visibleChange_11_listener","OralChemoWorklistComponent_Template_app_oral_chemo_milestone_details_itemRefreshed_11_listener","openPatientChart","putLog","OralChemoPatientInfoComponent_Template","OralChemoPatientInfoComponent_Template_a_click_1_listener","term","_globalSearchTerm","sideBarToggle","filteredWorklistItems","search","orderDesc","getCurrentDaysFilter","getDefaultPredefinedFilter","order","updatePredefinedFilter","loadWorklistData","reject","updateDaysFilter","onSideBarToggle","daysFilter","clearPredefinedFilter","updateAssignmentFilter","onClearColumnFilters","SideBarIsCollapsed","OralChemotherapyComponent_Template","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_predefinedFilterSelect_2_listener","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_globalSearch_2_listener","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_daysFilterChange_2_listener","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_assignmentToggle_2_listener","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_refreshData_2_listener","OralChemotherapyComponent_Template_app_oral_chemo_filter_bar_columnWidthsReset_2_listener","CustomWorklistWizardComponent_div_11_Template_input_ngModelChange_9_listener","worklistName","CustomWorklistWizardComponent_div_11_Template_label_ngModelChange_12_listener","setAsDefault","status_r14","location_r15","location_r16","priority_r17","CustomWorklistWizardComponent_div_12_Template_nz_select_ngModelChange_9_listener","selectedWorkflowStatuses","CustomWorklistWizardComponent_div_12_nz_option_10_Template","CustomWorklistWizardComponent_div_12_Template_nz_select_ngModelChange_14_listener","selectedSchedulingLocations","CustomWorklistWizardComponent_div_12_nz_option_15_Template","CustomWorklistWizardComponent_div_12_Template_nz_select_ngModelChange_19_listener","selectedOrderingLocations","CustomWorklistWizardComponent_div_12_nz_option_20_Template","CustomWorklistWizardComponent_div_12_Template_nz_select_ngModelChange_24_listener","selectedPriorities","CustomWorklistWizardComponent_div_12_nz_option_25_Template","CustomWorklistWizardComponent_div_12_div_26_Template","availableWorkflowStatuses","availableSchedulingLocations","availableOrderingLocations","availablePriorities","hasAnyFiltersSelected","status_r28","CustomWorklistWizardComponent_div_13_div_21_nz_tag_4_Template","location_r30","CustomWorklistWizardComponent_div_13_div_22_nz_tag_4_Template","location_r32","CustomWorklistWizardComponent_div_13_div_23_nz_tag_4_Template","priority_r34","CustomWorklistWizardComponent_div_13_div_24_nz_tag_4_Template","CustomWorklistWizardComponent_div_13_div_21_Template","CustomWorklistWizardComponent_div_13_div_22_Template","CustomWorklistWizardComponent_div_13_div_23_Template","CustomWorklistWizardComponent_div_13_div_24_Template","getFilterSummary","CustomWorklistWizardComponent_button_18_Template_button_click_0_listener","previousStep","CustomWorklistWizardComponent_button_19_Template_button_click_0_listener","nextStep","isStepValid","CustomWorklistWizardComponent_button_20_Template_button_click_0_listener","_r40","isEditMode","customWorklistService","priorAuthService","worklistSaved","orderingLocationLabelToItemMap","orderingLocationItemToLabelMap","configLoaded","configurationLoaded","loadAvailableOptions","populateFormFromWorklist","compassConfiguration","loadWorkflowStatusesFromConfig","loadLocationOptionsFromConfig","loadPriorityOptionsFromConfig","workflowStatusSet","glidianWorkflow","element","schedulingLocationSet","orderingLocationSet","option","itemValue","displayLabel","prioritySet","buildFilterCriteria","worklistData","savedWorklist","updateWorklist","updatedWorklist","getWorklistById","createWorklist","resetForm","parts","join","CustomWorklistService","PriorAuthService","CustomWorklistWizardComponent_Template","CustomWorklistWizardComponent_Template_button_click_4_listener","CustomWorklistWizardComponent_div_11_Template","CustomWorklistWizardComponent_div_12_Template","CustomWorklistWizardComponent_div_13_Template","CustomWorklistWizardComponent_Template_button_click_15_listener","CustomWorklistWizardComponent_button_18_Template","CustomWorklistWizardComponent_button_19_Template","CustomWorklistWizardComponent_button_20_Template","CodesComponent_div_2_div_1_span_3_ng_container_2_Template","CodesComponent_div_2_div_1_span_3_span_3_Template","last_r7","CodesComponent_div_2_div_1_span_3_Template","codeGroup_r4","CodesComponent_div_2_div_1_Template","getCodesByType","codeGroups","CodesComponent_Template","CodesComponent_div_2_Template","CodesComponent_ng_template_3_Template","CommentsComponent_div_2_div_1_div_1_button_3_Template_button_click_0_listener","comment_r2","CommentsComponent_div_2_div_1_div_1_button_3_Template","CommentsComponent_div_2_div_1_div_2_Template_input_ngModelChange_2_listener","CommentsComponent_div_2_div_1_div_2_Template_input_keyup_enter_2_listener","CommentsComponent_div_2_div_1_div_2_Template_input_keyup_escape_2_listener","CommentsComponent_div_2_div_1_div_2_Template_button_click_3_listener","CommentsComponent_div_2_div_1_div_2_Template_button_click_5_listener","CommentsComponent_div_2_div_1_div_1_Template","CommentsComponent_div_2_div_1_div_2_Template","CommentsComponent_div_2_div_1_Template","getWorklistComments","comments$","addWorklistComment","updateWorklistComment","updatedComment","CommentsComponent_Template","CommentsComponent_div_2_Template","CommentsComponent_Template_input_ngModelChange_5_listener","CommentsComponent_Template_input_keyup_enter_5_listener","CommentsComponent_Template_button_click_6_listener","ItemDetailsComponent_button_28_Template_button_click_0_listener","modifyOrder","ItemDetailsComponent_button_29_Template_button_click_0_listener","cancelOrder","ItemDetailsComponent_button_30_Template_button_click_0_listener","cancelReorder","isMovingToReady","actionData","enablePowerPlans","defaultDisplay","silentSign","_this2","_this3","reprocessCompass","worklistId","moveToReadyToSchedule","glidianMilestone","requestData","compassMilestoneId","completedDate","actionMeaning","ItemDetailsComponent_Template","ItemDetailsComponent_button_28_Template","ItemDetailsComponent_button_29_Template","ItemDetailsComponent_button_30_Template","ItemDetailsComponent_Template_button_click_33_listener","ItemDetailsComponent_Template_button_click_36_listener","MilestoneDetailsComponent_ng_template_1_div_0_span_7_Template","MilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_9_listener","MilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_11_listener","MilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_13_listener","MilestoneDetailsComponent_ng_template_1_div_0_Template_button_click_15_listener","MilestoneDetailsComponent_ng_template_1_div_0_Template","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_5_nz_badge_1_Template","MilestoneDetailsComponent_ng_container_3_div_3_app_document_selection_19_Template_app_document_selection_documentsUpdated_0_listener","onDocumentsUpdated","MilestoneDetailsComponent_ng_container_3_div_3_app_document_selection_19_Template_app_document_selection_documentsRefreshed_0_listener","onDocumentsRefreshed","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_26_Template_button_click_3_listener","milestone_r30","MilestoneDetailsComponent_ng_container_3_div_3_div_46_div_1_Template","action_r32","MilestoneDetailsComponent_ng_container_3_div_3_div_50_div_1_Template","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_2_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_4_listener","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_5_Template","MilestoneDetailsComponent_ng_container_3_div_3_Template_app_comments_commentsCountChanged_7_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_8_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_app_item_details_itemRefreshed_9_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_10_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_12_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_14_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_16_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_18_listener","documentSelection","MilestoneDetailsComponent_ng_container_3_div_3_app_document_selection_19_Template","MilestoneDetailsComponent_ng_container_3_div_3_div_20_Template","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_21_listener","milestoneHistory","MilestoneDetailsComponent_ng_container_3_div_3_Template_nz_collapse_panel_nzActiveChange_25_listener","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_26_Template","MilestoneDetailsComponent_ng_container_3_div_3_div_46_Template","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_47_Template","MilestoneDetailsComponent_ng_container_3_div_3_div_50_Template","MilestoneDetailsComponent_ng_container_3_div_3_ng_template_51_Template","_r15","MilestoneDetailsComponent_ng_container_3_Template_nz_slider_ngModelChange_2_listener","MilestoneDetailsComponent_ng_container_3_div_3_Template","getPriorAuthItemById","MilestoneDetailsComponent_Template","MilestoneDetailsComponent_Template_nz_drawer_nzOnClose_0_listener","MilestoneDetailsComponent_ng_template_1_Template","MilestoneDetailsComponent_ng_container_3_Template","currentPage","totalPages","displayedTimelineItems","MilestoneTimelineComponent_div_3_ng_template_2_Template","MilestoneTimelineComponent_div_3_Template_nz_pagination_nzPageIndexChange_5_listener","goToPage","_r5","ITEMS_PER_PAGE","item_r12","data_r22","valueText","valueDate","valueCd","MilestoneTimelineComponent_div_5_tr_18_div_25_div_5_ng_template_5_ng_container_0_Template","MilestoneTimelineComponent_div_5_tr_18_div_25_div_5_ng_template_5_ng_template_1_Template","MilestoneTimelineComponent_div_5_tr_18_div_25_div_5_ng_container_4_Template","MilestoneTimelineComponent_div_5_tr_18_div_25_div_5_ng_template_5_Template","MilestoneTimelineComponent_div_5_tr_18_div_25_div_5_Template","MilestoneTimelineComponent_div_5_tr_18_nz_tag_11_Template","MilestoneTimelineComponent_div_5_tr_18_nz_tag_12_Template","MilestoneTimelineComponent_div_5_tr_18_nz_tag_13_Template","MilestoneTimelineComponent_div_5_tr_18_span_23_Template","MilestoneTimelineComponent_div_5_tr_18_span_24_Template","MilestoneTimelineComponent_div_5_tr_18_div_25_Template","getIconColor","MilestoneTimelineComponent_div_5_tr_18_Template","milestoneItems","item_r36","MilestoneTimelineComponent_div_6_tr_20_div_25_Template_button_click_1_listener","viewActionData","MilestoneTimelineComponent_div_6_tr_20_nz_tag_6_Template","MilestoneTimelineComponent_div_6_tr_20_span_19_Template","MilestoneTimelineComponent_div_6_tr_20_span_20_Template","MilestoneTimelineComponent_div_6_tr_20_span_23_Template","MilestoneTimelineComponent_div_6_tr_20_span_24_Template","MilestoneTimelineComponent_div_6_tr_20_div_25_Template","getActionRowClass","MilestoneTimelineComponent_div_6_tr_20_Template","actionItems","MilestoneTimelineComponent_div_8_Template_nz_pagination_nzPageIndexChange_1_listener","_r49","ctx_r48","ctx_r50","expandedMilestones","INITIAL_ACTIONS_COUNT","showPagination","buildTimeline","time","meaningOrder","slice","aIndex","indexOf","bIndex","totalActions","standaloneActions","actionsByMilestone","actionCount","ceil","updateDisplayedItems","timeEnd","startIndex","endIndex","min","page","previousPage","nextPage","getTimelineItemColor","color","getRowClass","getActionsForMilestone","getVisibleActionsForMilestone","isMilestoneExpanded","hasMoreActions","toggleMilestoneActions","getHiddenActionsCount","getActionData","formatActionDataForDisplay","parsedData","nzOkText","rawData","html","escapeHtml","div","document","createElement","textContent","innerHTML","MilestoneTimelineComponent_Template","MilestoneTimelineComponent_div_3_Template","MilestoneTimelineComponent_div_5_Template","MilestoneTimelineComponent_div_6_Template","MilestoneTimelineComponent_div_7_Template","MilestoneTimelineComponent_div_8_Template","PatientInformationComponent_Template","payor_r1","glidianPayerId","PayorsComponent_div_2_ng_container_3_Template","PayorsComponent_div_2_nz_tag_4_Template","PayorsComponent_div_2_small_5_Template","PayorsComponent_div_2_small_6_Template","PayorsComponent_Template","PayorsComponent_div_2_Template","WorkflowStatusComponent_Template","ɵɵpureFunction3","worklist_r18","PriorAuthFilterBarComponent_nz_space_3_nz_select_1_Template_nz_select_ngModelChange_0_listener","onCustomWorklistSelect","PriorAuthFilterBarComponent_nz_space_3_nz_select_1_nz_option_1_Template","selectedCustomWorklist","useNewVersion","customWorklists","PriorAuthFilterBarComponent_nz_space_3_button_2_Template_button_click_0_listener","openCreateWorklistWizard","PriorAuthFilterBarComponent_nz_space_3_ng_container_3_button_1_Template_button_click_0_listener","openEditWorklistWizard","PriorAuthFilterBarComponent_nz_space_3_ng_container_3_button_1_Template","PriorAuthFilterBarComponent_nz_space_3_ng_container_4_button_1_Template_button_nzOnConfirm_0_listener","deleteCustomWorklist","PriorAuthFilterBarComponent_nz_space_3_ng_container_4_button_1_Template","PriorAuthFilterBarComponent_nz_space_3_nz_select_1_Template","PriorAuthFilterBarComponent_nz_space_3_button_2_Template","PriorAuthFilterBarComponent_nz_space_3_ng_container_3_Template","PriorAuthFilterBarComponent_nz_space_3_ng_container_4_Template","getFilterCount","filter_r30","PriorAuthFilterBarComponent_nz_space_4_ng_container_1_nz_tag_1_Template","PriorAuthFilterBarComponent_nz_space_4_ng_container_1_Template","predefinedFiltersForCounts","PriorAuthFilterBarComponent_nz_space_5_nz_switch_2_Template_nz_switch_ngModelChange_0_listener","onVersionToggle","PriorAuthFilterBarComponent_nz_space_5_span_1_Template","PriorAuthFilterBarComponent_nz_space_5_nz_switch_2_Template","PriorAuthFilterBarComponent_nz_space_5_ng_template_3_Template","PriorAuthFilterBarComponent_nz_space_5_ng_template_5_Template","PriorAuthFilterBarComponent_div_6_nz_tab_3_Template_nz_tab_nzClick_0_listener","filter_r44","getTabTitle","opt_r49","PriorAuthFilterBarComponent_div_6_nz_select_6_Template_nz_select_ngModelChange_0_listener","_r51","onLocationChange","PriorAuthFilterBarComponent_div_6_nz_select_6_nz_option_1_Template","currentLocationValue","locationOptions","PriorAuthFilterBarComponent_div_6_nz_segmented_7_Template_nz_segmented_nzValueChange_0_listener","onSubrouteChange","subrouteOptions","PriorAuthFilterBarComponent_div_6_Template_nz_tabset_nzSelectedIndexChange_2_listener","_r55","ctx_r54","selectedTabIndex","PriorAuthFilterBarComponent_div_6_nz_tab_3_Template","PriorAuthFilterBarComponent_div_6_nz_select_6_Template","PriorAuthFilterBarComponent_div_6_nz_segmented_7_Template","PriorAuthFilterBarComponent_button_11_Template_button_click_0_listener","_r57","ctx_r56","toggle","PriorAuthFilterBarComponent_button_12_Template_button_click_0_listener","_r59","ctx_r58","saveUserPreferences","PriorAuthFilterBarComponent_button_13_Template_button_click_0_listener","PriorAuthFilterBarComponent_button_16_Template_button_click_0_listener","_r63","PriorAuthFilterBarComponent_nz_segmented_17_Template_nz_segmented_nzValueChange_0_listener","_r65","ctx_r64","daysOptions","PriorAuthFilterBarComponent_input_18_Template_input_input_0_listener","_r66","ɵɵreference","ctx_r69","processingCount","PriorAuthFilterBarComponent_button_19_Template_button_click_0_listener","PriorAuthFilterBarComponent_button_19_span_2_Template","PriorAuthFilterBarComponent_ng_container_20_button_1_Template_button_click_0_listener","_r74","ctx_r73","onCreateTestOrders","PriorAuthFilterBarComponent_ng_container_20_button_1_Template","filterCounts","predefinedFilterCounts","filterId","showTestOrderButton","curdomain","createTestOrders","clearColumnFilters","showWizardView","_currentSubroute","currentSubrouteIndex","getPredefinedFilters","getLocationOptions","selectedPredefinedFilter","_selectedTabIndex","getWorklistsForRoute","initializeDefaultFilter","currentSubroute","defaultFilter","emitCombinedSelection","defaultCustomWorklist","defaultWorklistForRoute","selectedOption","previousFilter","baseFilter","combined","getCombinedCriteria","merged","toPredefinedFilter","selectCustomWorklist","useNew","setUseNewVersion","PriorAuthFilterBarComponent_Template","PriorAuthFilterBarComponent_nz_space_3_Template","PriorAuthFilterBarComponent_nz_space_4_Template","PriorAuthFilterBarComponent_nz_space_5_Template","PriorAuthFilterBarComponent_div_6_Template","PriorAuthFilterBarComponent_button_11_Template","PriorAuthFilterBarComponent_button_12_Template","PriorAuthFilterBarComponent_button_13_Template","PriorAuthFilterBarComponent_button_16_Template","PriorAuthFilterBarComponent_nz_segmented_17_Template","PriorAuthFilterBarComponent_input_18_Template","PriorAuthFilterBarComponent_button_19_Template","PriorAuthFilterBarComponent_ng_container_20_Template","moveItemInArray","PriorAuthSiderComponent_tr_12_Template_nz_switch_ngModelChange_7_listener","column_r1","onColumnDisplayChange","selectedColumns","column","currentRoute","routeColumns","updateColumns","onColumnDrop","previousIndex","currentIndex","moveColumn","PriorAuthSiderComponent_Template","PriorAuthSiderComponent_Template_tbody_cdkDropListDropped_11_listener","PriorAuthSiderComponent_tr_12_Template","PriorAuthComponent_div_4_Template_app_custom_worklist_wizard_closeModal_1_listener","onCloseWizard","PriorAuthComponent_div_4_Template_app_custom_worklist_wizard_worklistSaved_1_listener","onWorklistSaved","getAllGlidianIdsForItem","glidianIds","timerService","showingWizard","glidianRecordId","glidianData","recordId","allGlidianIds","stopFrontendTimer","customFilter","ngAfterViewInit","onClearData","clearWorklistData","worklistTable","onShowWizardView","filterBar","TimerService","PriorAuthComponent_Query","PriorAuthComponent_Template_app_prior_auth_filter_bar_sideBarToggle_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_columnWidthsReset_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_daysFilterChange_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_refreshData_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_clearData_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_globalSearch_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_predefinedFilterSelect_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_clearColumnFilters_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_assignmentToggle_2_listener","PriorAuthComponent_Template_app_prior_auth_filter_bar_showWizardView_2_listener","PriorAuthComponent_div_3_Template","PriorAuthComponent_div_4_Template","isButtonChecked","selectedDate","isDateError","isHovering","hasDateChanged","getEDOSValueDate","onMouseEnter","onMouseLeave","onDateChange","isScheduled","currentEDOSDate","normalizeDateForComparison","dateValue","normalizedDate","setHours","currentDateNormalized","selectedDateNormalized","onEODCheckClick","undoMilestone","lastUpdateDateTime","valueID","milestoneName","isEdosDisabled","getDisabledMessage","canUndoMilestone","EarliestDateMilestoneComponent_Template","EarliestDateMilestoneComponent_Template_nz_date_picker_ngModelChange_3_listener","EarliestDateMilestoneComponent_Template_button_click_4_listener","EarliestDateMilestoneComponent_Template_button_mouseenter_4_listener","EarliestDateMilestoneComponent_Template_button_mouseleave_4_listener","DocumentPreviewDrawerComponent_div_0_div_23_Template_iframe_load_1_listener","onIframeLoad","DocumentPreviewDrawerComponent_div_0_div_23_Template_iframe_error_1_listener","onIframeError","previewDocumentUrl","ɵɵsanitizeResourceUrl","DocumentPreviewDrawerComponent_div_0_Template_div_click_1_listener","DocumentPreviewDrawerComponent_div_0_Template_button_click_7_listener","DocumentPreviewDrawerComponent_div_0_Template_button_click_10_listener","DocumentPreviewDrawerComponent_div_0_Template_button_click_13_listener","selectDocument","DocumentPreviewDrawerComponent_div_0_Template_button_click_16_listener","saveAsAttachment","DocumentPreviewDrawerComponent_div_0_span_17_Template","DocumentPreviewDrawerComponent_div_0_Template_button_click_19_listener","DocumentPreviewDrawerComponent_div_0_div_22_Template","DocumentPreviewDrawerComponent_div_0_div_23_Template","DocumentPreviewDrawerComponent_div_0_div_24_Template","previewDocumentTitle","canSelectDocument","canSaveAsAttachment","isSavingAttachment","isPreviewLoading","sanitizer","attachedDocuments","documentAttached","documentSelected","previewDocumentContent","loadDocumentPreview","window","addEventListener","handleIframeMessage","bind","removeEventListener","getDocumentPreview","documentHtml","htmlContent","dataUrl","encodeURIComponent","bypassSecurityTrustResourceUrl","errorMessage","isNoContentError","displayMessage","displayTitle","errorHtml","errorDataUrl","noContentHtml","noContentDataUrl","isAlreadyAttached","isAvailable","documentToAttach","event_id","convertEventIdForBackend","existingAttachedDocuments","allDocuments","attachDocumentsToGlidianMilestone","numericPart","DomSanitizer","DocumentPreviewDrawerComponent_Template","DocumentPreviewDrawerComponent_div_0_Template","DocumentSelectionComponent_div_1_tr_23_button_15_Template_button_click_0_listener","doc_r8","DocumentSelectionComponent_div_1_tr_23_button_16_Template_button_click_0_listener","DocumentSelectionComponent_div_1_tr_23_Template_tr_click_0_listener","DocumentSelectionComponent_div_1_tr_23_Template_td_click_1_listener","DocumentSelectionComponent_div_1_tr_23_Template_label_ngModelChange_2_listener","DocumentSelectionComponent_div_1_tr_23_Template_td_click_14_listener","DocumentSelectionComponent_div_1_tr_23_button_15_Template","DocumentSelectionComponent_div_1_tr_23_button_16_Template","DocumentSelectionComponent_div_1_div_3_Template","DocumentSelectionComponent_div_1_tr_23_Template","DocumentSelectionComponent_div_1_Template_button_click_25_listener","removeSelectedAttachments","hasFallbackIds","hasSelectedAttachmentsForRemoval","isSavingAttachments","getSelectedAttachmentsCount","DocumentSelectionComponent_tr_41_button_15_Template_button_click_0_listener","doc_r24","DocumentSelectionComponent_tr_41_button_16_Template_button_click_0_listener","DocumentSelectionComponent_tr_41_Template_tr_click_0_listener","DocumentSelectionComponent_tr_41_Template_td_click_1_listener","DocumentSelectionComponent_tr_41_Template_label_ngModelChange_2_listener","DocumentSelectionComponent_tr_41_Template_td_click_14_listener","DocumentSelectionComponent_tr_41_button_15_Template","DocumentSelectionComponent_tr_41_button_16_Template","documentsUpdated","documentsRefreshed","setMonth","getMonth","requestAnimationFrame","getDocumentsForWorklist","attachedInd","uniqueId","matchingAvailableDoc","availableDoc","attachDtTm","originalEventId","hasSelectedAvailableDocuments","getSelectedAvailableDocumentsCount","debugSelectionState","attachedEventIds","duplicateEventIds","uniqueEventIds","saveAttachments","documentsToAttach","stillAttached","removeAllAttachments","onDocumentAttached","onDocumentSelected","viewMultipleInCerner","viewMultipleInCernerProcedure","viewMultipleInCernerAppropriate","DocumentSelectionComponent_Template","DocumentSelectionComponent_div_1_Template","DocumentSelectionComponent_Template_nz_range_picker_ngModelChange_5_listener","DocumentSelectionComponent_Template_nz_range_picker_nzOnCalendarChange_5_listener","DocumentSelectionComponent_Template_button_click_6_listener","DocumentSelectionComponent_Template_button_click_8_listener","DocumentSelectionComponent_Template_button_click_11_listener","DocumentSelectionComponent_Template_input_ngModelChange_16_listener","DocumentSelectionComponent_ng_template_17_Template","DocumentSelectionComponent_tr_41_Template","DocumentSelectionComponent_Template_button_click_43_listener","DocumentSelectionComponent_Template_button_click_46_listener","DocumentSelectionComponent_Template_button_click_49_listener","DocumentSelectionComponent_Template_app_document_preview_drawer_close_52_listener","DocumentSelectionComponent_Template_app_document_preview_drawer_documentAttached_52_listener","DocumentSelectionComponent_Template_app_document_preview_drawer_documentSelected_52_listener","GlidianProcessMilestoneComponent_div_0_Template_nz_tag_click_1_listener","openMilestoneModal","getStepTagColor","step_r1","getStepIcon","modal","currentModalRef","getStepDetail","md","statusStep","step","toUpperCase","nzStyle","maxWidth","minWidth","GlidianProcessMilestoneComponent_Template","GlidianProcessMilestoneComponent_div_0_Template","GlidianProcessViewComponent_nz_descriptions_item_14_button_2_Template_button_click_0_listener","createGlidianAuth","isCreatingAuth","isEdosInFuture","submitToGlidianLabel","GlidianProcessViewComponent_nz_descriptions_item_14_button_3_Template_button_click_0_listener","getLatestFromGlidian","glidianActionMessage","GlidianProcessViewComponent_nz_descriptions_item_14_button_2_Template","GlidianProcessViewComponent_nz_descriptions_item_14_button_3_Template","GlidianProcessViewComponent_nz_descriptions_item_14_span_4_Template","hasSubmittedToGlidianThisSession","getGlidianId","getCurrentStep","getGlidianUrl","ɵɵsanitizeUrl","GlidianProcessViewComponent_nz_descriptions_item_20_ng_template_2_div_2_Template_div_click_0_listener","glidianId_r26","selectedGlidianId","GlidianProcessViewComponent_nz_descriptions_item_20_ng_template_2_div_2_Template_button_click_7_listener","removeGlidianId","getGlidianUrlForId","isRemovingGlidianId","GlidianProcessViewComponent_nz_descriptions_item_20_ng_template_2_div_2_Template","getGlidianIds","trackByGlidianId","GlidianProcessViewComponent_nz_descriptions_item_20_div_1_Template","GlidianProcessViewComponent_nz_descriptions_item_20_ng_template_2_Template","hasMultipleGlidianIds","getGlidianStatus","getGlidianStatusDate","data_r31","GlidianProcessViewComponent_div_25_li_4_Template","action_r33","GlidianProcessViewComponent_nz_collapse_panel_32_Template_nz_collapse_panel_nzActiveChange_0_listener","GlidianProcessViewComponent_nz_collapse_panel_32_tr_14_Template","milestoneActions","action_r37","GlidianProcessViewComponent_div_58_div_1_Template","GlidianProcessViewComponent_div_64_Template_button_click_1_listener","supportInformation","resubmitActions","itemRefresh$","refreshModalData","isQueuedStatus","hasGlidianActions","hasSubmittedToGlidianAction","updatedMilestone","recordIds","ids","getEdosDate","edos","today","getLatestGlidianRecord","updateLocalGlidianFromResponse","updateLocalGlidianStatus","newStatus","statusData","responseData","glidianStatus","latestStatusDtTm","glidianId","removeGlidianIdFromLocalData","indexToRemove","GlidianProcessViewComponent_Template","GlidianProcessViewComponent_Template_button_click_2_listener","GlidianProcessViewComponent_Template_button_click_5_listener","GlidianProcessViewComponent_Template_button_click_8_listener","GlidianProcessViewComponent_nz_descriptions_item_14_Template","GlidianProcessViewComponent_span_17_Template","GlidianProcessViewComponent_span_18_Template","GlidianProcessViewComponent_nz_descriptions_item_19_Template","GlidianProcessViewComponent_nz_descriptions_item_20_Template","GlidianProcessViewComponent_nz_descriptions_item_21_Template","GlidianProcessViewComponent_nz_descriptions_item_22_Template","GlidianProcessViewComponent_nz_descriptions_item_23_Template","GlidianProcessViewComponent_nz_descriptions_item_24_Template","GlidianProcessViewComponent_div_25_Template","GlidianProcessViewComponent_Template_nz_collapse_panel_nzActiveChange_28_listener","GlidianProcessViewComponent_nz_collapse_panel_32_Template","GlidianProcessViewComponent_Template_nz_collapse_panel_nzActiveChange_35_listener","GlidianProcessViewComponent_div_58_Template","GlidianProcessViewComponent_ng_template_59_Template","GlidianProcessViewComponent_div_64_Template","milestone_r2","GlidianWorkflowCellComponent_div_0_nz_col_2_div_2_Template","GlidianWorkflowCellComponent_div_0_nz_col_2_div_3_Template","GlidianWorkflowCellComponent_div_0_nz_col_2_div_4_Template","GlidianWorkflowCellComponent_div_0_nz_col_2_div_5_Template","getMilestoneFlex","GlidianWorkflowCellComponent_div_0_nz_col_2_Template","openDetails","GlidianWorkflowCellComponent_Template","GlidianWorkflowCellComponent_div_0_Template","MedicalNecessityMilestoneComponent_ng_container_5_Template_nz_switch_ngModelChange_1_listener","onStatusSwitch","oldStatus","updateRequest","statusText","MedicalNecessityMilestoneComponent_Template","MedicalNecessityMilestoneComponent_ng_container_5_Template","MedicalNecessityMilestoneComponent_ng_template_6_Template","schEventId","schEvent","sched","onSchedulingClick","SchedulingInfoMilestoneComponent_Template","SchedulingInfoMilestoneComponent_Template_button_click_0_listener","ItemCodesComponent_div_1_div_1_span_3_span_2_Template","code_r7","lastCode_r8","ItemCodesComponent_div_1_div_1_span_3_Template","ItemCodesComponent_div_1_div_1_Template","getCodes","hasCodes","getCodeIdentifiers","ItemCodesComponent_Template","ItemCodesComponent_div_1_Template","ItemCodesComponent_ng_template_2_Template","ItemInfoComponent_div_0_Template_a_click_2_listener","ItemInfoComponent_Template","ItemInfoComponent_div_0_Template","PatientInfoComponent_div_0_Template_a_click_2_listener","openChart","PatientInfoComponent_Template","PatientInfoComponent_div_0_Template","getCurrentLocationDisplay","LocationSelectionModalComponent_ng_container_1_tr_17_Template_tr_click_0_listener","location_r5","selectLocation","selectedLocation","facilityName","state_r8","LocationSelectionModalComponent_ng_container_1_div_1_Template","LocationSelectionModalComponent_ng_container_1_Template_nz_tabset_nzSelectedIndexChange_3_listener","onTabChange","LocationSelectionModalComponent_ng_container_1_Template_input_ngModelChange_7_listener","onSearchChange","LocationSelectionModalComponent_ng_container_1_tr_17_Template","LocationSelectionModalComponent_ng_container_1_nz_empty_18_Template","LocationSelectionModalComponent_ng_container_1_Template_input_input_30_listener","validateNPI","LocationSelectionModalComponent_ng_container_1_Template_input_input_35_listener","validateTaxId","LocationSelectionModalComponent_ng_container_1_Template_input_input_41_listener","validatePhone","LocationSelectionModalComponent_ng_container_1_Template_input_input_46_listener","validateFax","LocationSelectionModalComponent_ng_container_1_nz_option_66_Template","selectedTab","filteredLocations","manualEntryForm","states","locationType","isVisibleChange","locationSelected","configuredLocations","initializeForm","loadConfiguredLocations","preselectCurrentLocation","renderingInfo","hasOrganizationId","organizationId","isManualEntry","matchingFacility","location","locationName","populateManualEntryForm","npi","taxId","phone","fax","street","address","city","zipCode","pattern","schedulingLocations","loadExternalLocations","externalLocations","locations","externalFacilities","loc","locationCode","getCompassOutsideLocations","directLocations","handleCancel","handleOk","facilityDetails","isOkButtonEnabled","formatAddress","input","LocationSelectionModalComponent_Template","LocationSelectionModalComponent_Template_nz_modal_nzVisibleChange_0_listener","LocationSelectionModalComponent_Template_nz_modal_nzOnCancel_0_listener","LocationSelectionModalComponent_Template_nz_modal_nzOnOk_0_listener","LocationSelectionModalComponent_ng_container_1_Template","SchedulingLocationComponent_div_0_Template_span_click_1_listener","openLocationModal","SchedulingLocationComponent_div_0_span_2_Template","SchedulingLocationComponent_div_0_span_3_Template","isSpecialLocation","selectedFacility","getTooltipText","getDisplayValue","isModalVisible","loadPreviouslySelectedLocation","locFacilityCd","onLocationSelected","facility","locationData","updateSchedulingLocation","useOrderingProviderInd","tooltip","SchedulingLocationComponent_Template","SchedulingLocationComponent_div_0_Template","SchedulingLocationComponent_Template_app_location_selection_modal_isVisibleChange_1_listener","SchedulingLocationComponent_Template_app_location_selection_modal_locationSelected_1_listener","getAssignedTooltip","getDisplayName","user_r6","UserAssignmentComponent_ng_template_4_Template_nz_select_ngModelChange_3_listener","selectedUser","UserAssignmentComponent_ng_template_4_nz_option_4_Template","isModalLoading","assignableUsers","loadAssignableUsers","onUserAssignmentClick","modalContent","isCurrentUserAvailable","directlyAssignCurrentUser","showAssignmentModal","assignUserToWorklistItem","updatePriorAuthItem","onClick","destroy","danger","show","removeAssignment","disabled","saveAssignment","showErrors","assignedUser","UserAssignmentComponent_Template","UserAssignmentComponent_Template_div_click_0_listener","UserAssignmentComponent_ng_container_1_Template","UserAssignmentComponent_ng_template_2_Template","UserAssignmentComponent_ng_template_4_Template","WorklistTableComponent_ng_container_4_th_1_Template_th_columnResize_0_listener","WorklistTableComponent_ng_container_4_th_2_Template_th_nzFilterChange_0_listener","WorklistTableComponent_ng_container_4_th_2_Template_th_columnResize_0_listener","WorklistTableComponent_ng_container_4_th_1_Template","WorklistTableComponent_ng_container_4_th_2_Template","column_r19","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_template_1_ng_template_1_ng_container_0_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_template_1_ng_template_1_ng_template_1_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_template_1_ng_container_0_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_template_1_ng_template_1_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_container_0_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_ng_template_1_Template","_r30","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_container_0_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_ng_template_1_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_container_1_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_ng_template_2_Template","WorklistTableComponent_tr_10_ng_container_1_td_1_Template","WorklistTableComponent_tr_10_nz_badge_7_Template_button_click_1_listener","onOpenMilestoneDetails","commentInd","WorklistTableComponent_tr_10_button_8_Template_button_click_0_listener","ctx_r53","WorklistTableComponent_tr_10_ng_container_1_Template","WorklistTableComponent_tr_10_app_glidian_workflow_cell_4_Template","WorklistTableComponent_tr_10_nz_badge_7_Template","WorklistTableComponent_tr_10_button_8_Template","itemDetailUpdated$","getMilestoneStatusClass","closeMilestoneDetails","onDrawerVisibilityChange","checkForCircularReference","obj","onDrawerItemRefreshed","isWorklistItem","p","hours","getHours","minutes","getMinutes","applyPredefinedFilters","WorklistTableComponent_Query","WorklistTableComponent_Template_nz_table_nzFilterChange_0_listener","WorklistTableComponent_ng_container_4_Template","WorklistTableComponent_Template_th_columnResize_5_listener","WorklistTableComponent_Template_th_columnResize_7_listener","WorklistTableComponent_tr_10_Template","WorklistTableComponent_Template_app_milestone_details_visibleChange_11_listener","WorklistTableComponent_Template_app_milestone_details_itemRefreshed_11_listener","ReportingComponent_Template","data_r1","picture","thumbnail","login","gender","email","country","dob","nat","randomUserService","listOfRandomUser","pageSize","pageIndex","filterGender","loadDataFromServer","sortField","getUsers","results","onQueryParamsChange","currentSort","RandomUserService","TestDataComponent_Template","TestDataComponent_Template_nz_table_nzQueryParams_0_listener","TestDataComponent_tr_24_Template","resultCount","providerRegistry","getResultCountByCity","TestProviderRegistryService","TestPersonDemographicsComponent_Template","TestPersonDemographicsComponent_span_11_Template","first","last","ɵɵpipeBind1","age","randomUsers","number","postcode","coordinates","latitude","longitude","timezone","offset","uuid","salt","md5","sha1","sha256","registered","cell","large","medium","el","columnResize","startX","startWidth","isResizing","rafId","createResizer","addEventListeners","removeEventListeners","cancelAnimationFrame","resizer","parentNode","removeChild","className","style","cssText","nativeElement","position","appendChild","onMouseDown","onMouseMove","onMouseUp","preventDefault","clientX","offsetWidth","body","cursor","userSelect","diff","newWidth","finalWidth","ElementRef","environment","currentApplicationVersion","appVersion","ComponentVersionComponent_Template","FooterContentComponent_Template","getPerformanceStatusColor","getPerformanceStatus","formatTime","performanceData","totalBackendCallMs","frontendTimeMs","formatSeconds","serverProcessingTimeSeconds","getNetworkDelay","getBackendPercentage","getFrontendPercentage","lastUpdated","getBackendEfficiency","backendTimeSeconds","milliseconds","toFixed","seconds","round","totalMs","serverMs","totalSeconds","efficiency","PerformanceDetailsModalComponent_Template","PerformanceDetailsModalComponent_Template_nz_modal_nzVisibleChange_0_listener","PerformanceDetailsModalComponent_Template_nz_modal_nzOnCancel_0_listener","PerformanceDetailsModalComponent_Template_nz_modal_nzOnOk_0_listener","PerformanceDetailsModalComponent_ng_container_1_Template","showDetailsModal","metricsEffect","newData","performanceMetrics","formatBackendTime","formatTotalBackendTime","formatFrontendTime","openPerformanceDetails","PerformanceStatsComponent_Template","PerformanceStatsComponent_Template_button_click_9_listener","PerformanceStatsComponent_Template_app_performance_details_modal_visibleChange_11_listener","tab_r1","routerLink","forceRender","HeaderContentComponent_ng_container_5_nz_tab_1_Template","hidden","selectedIndex","tabChangeEffect","visibleTabs","getVisibleTabs","tab","availableTabs","tabs","getTabs","currentTab","openNotificationModal","HeaderContentComponent_Template","HeaderContentComponent_Template_nz_tabset_nzSelectedIndexChange_4_listener","HeaderContentComponent_ng_container_5_Template","HeaderContentComponent_Template_app_notification_bell_bellClick_7_listener","HeaderContentComponent_Template_button_click_8_listener","notificationsService","bellClick","onBellClick","NotificationsService","NotificationBellComponent_Template","NotificationBellComponent_Template_button_click_0_listener","NotificationBellComponent_span_3_Template","hasNotifications","NotificationModalComponent_Template","NotificationModalComponent_Template_button_click_7_listener","DEFAULT_USER_PREFERENCES","performanceSettings","batchMode","Observable","shareReplay","customService","compassConfigCache$","userAssignOptionsCache$","outsideLocationsCache$","observer","load","customScript","script","parameters","requestType","clearPatientSource","raw","reply","subeventstatus","subEvent","operationstatus","credentials_request","url_data","record_url_data","mappedUsersAssignable","hasOwnProperty","fullname","parseFloat","personid","clearUserAssignOptionsCache","formattedAssignments","compass_user_config","update_date_time","users_assignable","errorMsg","requestPayload","finalResponse","json","jsonData","parseError","operationData","loadError","ɵɵinject","CustomService","factory","ɵfac","providedIn","_offlineMode","offline","offlineModeValue","getElementById","href","click","viewOrderAsync","viewAppointmentAsync","modifyOrderAsync","cancelOrderAsync","cancelReorderAsync","viewDocumentAsync","viewProcedureAsync","alert","orderInfoViewer","external","DiscernObjectFactory","LaunchOrderInfoViewer","actionType","schedulingActions","ShowView","ShowHistoryView","_this4","orderLst","customizeFlags","tabLst","silentSignFlag","mpagesEventCall","_this5","_this6","_this7","docViewer","CreateDocViewer","AppendDocEvent","skipPrivilegeCheck","SkipDocViewerPrivilegeCheck","LaunchDocViewer","_this8","procViewer","CreateProcViewer","AppendProcEvent","LaunchProcViewer","_configurationLoaded","_compassConfiguration","_columns","list","aCodes","bCodes","aState","bState","aPayors","bPayors","orderSentence","firstDoseDate","pharmacyLocation","_predefinedFilters","_locationOptions","_externalLocations","cnt","_updatingColumnFilters","_columnFiltersUpdated","predefinedFiltersForRoute","updatingColumnFilters","columnFiltersUpdated$","asObservable","loadConfigurationFromBackend","routeMap","mergeCriteria","base","addon","mergeArray","customFilters","predefined","locationValue","o","locationCriteria","sortFilterOptions","aNum","bNum","aText","String","bText","sensitivity","processCompassConfiguration","predefinedFilter","convertFilterSetFiltersToFilterCriteria","excludeFilters","locationOption","convertFilterSetFiltersToLocationFilters","hasAllOption","unshift","criteria","locationFilters","reloadConfiguration","isConfigurationLoaded","updateColumnFiltersFromData","currentColumns","previousSelections","safeString","statusSet","statusColumn","itemStatusSet","itemStatusColumn","priorityColumn","codesSet","flatMap","codesColumn","payorSet","payorColumn","plan","orderingLocationColumn","orderingProviderSet","orderingProviderColumn","provider","schedulingLocationColumn","scheduleStatusSet","scheduleStatusColumn","itemDescriptionSet","itemDescriptionColumn","desc","orderDateSet","orderDateColumn","edosSet","edosColumn","updateFeedbackColumnFiltersFromData","submitterSet","submitterColumn","typeSet","typeColumn","assignedSet","assignedColumn","getDefaultColumns","overrideColumns","updatedColumns","concat","getAllRoutes","widths","workflowWidth","actionsWidth","removeItem","getDefaultColumnWidths","defaults","updateColumnDisplay","columnMeaning","reorderColumns","newOrder","fromIndex","toIndex","movedColumn","getPredefinedFilter","currentFilters","filterIndex","addPredefinedFilter","removePredefinedFilter","_customWorklists","_activeWorklist","activeWorklist","worklistsForRoute","loadFromUserPreferences","generateId","createdDate","modifiedDate","clearDefaultForRoute","updatedWorklists","saveToUserPreferences","existingWorklist","worklistToDelete","duplicateWorklist","originalWorklist","duplicateData","setActiveWorklist","clearActiveWorklist","updatedPreferences","updatePreferences","random","substr","of","catchError","_feedbackItems","_loading","_updatingItems","_loadingDetails","_error","loadingDetails","daysDiff","floor","assigned_to_person_id","isItemUpdating","patientSource","worklistType","clearPatientList","qualData","qual","parseFeedbackWorklistResponse","loadDetailedFeedbackData","handleError","detailRequests","getFeedbackItemById","mergeFeedbackData","updateFeedbackItem","observable","detailedItem","feedbackId","requestId","parseFeedbackItemResponse","replyData","successMessage","reloadInd","mappedMilestones","required_ind","compassWorklistId","submitted_by_person_id","item_id","item_meaning","workflow_type","mapWorkflowStatus","workflow_update_datetime","workflow_update_count","data_refresh_datetime","active_ind","backendStatus","statusMap","parseFeedbackDetailResponse","requestObject","request_object","parseRelatedItem","person_id","encntr_id","order_id","ordering_location","currentItems","i","updatedItems","requestMeaning","compassIdEntry","subevent","targetobjectname","targetobjectvalue","itemHighlight","classes","highlight","matchesHighlightCriteria","cssClass","class","fieldValue","getFieldValue","reference","matchesCriteria","part","fieldValueStr","valueNumber","fieldValueNum","fieldValueDate","criteriaDate","getHighlightRulesForWorkflow","hasHighlightingForWorkflow","content","nzDuration","duration","nzPauseOnHover","pauseOnHover","messageId","remove","removeAll","messageOptions","NzMessageService","_hasNotifications","markAllAsRead","setHasNotifications","switchMap","_worklistItems","_currentDaysFilter","_processingCount","_itemRefreshSubject","_itemDetailUpdatedSubject","_activePredefinedFilter","_showMyAssignmentsOnly","_lastColumnFilterUpdate","filterDays","futureDate","setDate","currentUsername","filteredByDays","allItems","counts","filteredData","dataHash","firstItemId","latestRefresh","statusSample","updateOralChemotherapyItem","itemIndex","existingItem","existingRefreshTime","newRefreshTime","getWorklist","qualArray","mappedItems","mapped","mapToOralChemotherapyItem","completedDetails","totalDetails","getOralChemotherapyItemById","workflowId","edosdate","financialClass","reasonForExam","assignedDisplayName","assignedFullName","setWorklistItems","BehaviorSubject","tap","_commentsSubject","activeItemRefreshes","activeGlidianFetches","glidian","latestStatus","updatePriorAuthItemStatus","updatePriorAuthItemPriority","updatePriorAuthItemMilestone","worklistItemId","milestoneIdEntry","mapToPriorAuthItem","isValidDateString","dateStr","glidian_payer_id","action_by","portalUrl","latestStatusId","authNumber","authStartDateTime","authEndDateTime","payorReferenceNumber","orderingInfo","orderingProviderId","internalProviderInd","orderingProviderInfo","orderingLocationInfo","feedback","buildFilterParameters","include","createEmptyFilterCriteria","exclude","includeCriteria","buildArrayParameter","workflowStatusCnt","schedulingStatusCnt","orderingLocationCnt","orderingProviderCnt","schedulingLocationCnt","priorityCnt","edosStartDate","calculateEdosStartDate","edosEndDate","calculateEdosEndDate","excludeCriteria","values","filterParams","customServiceStartTime","performance","filterCriteria","customServiceEndTime","customServiceDuration","elapsedTimeSeconds","setServerProcessingTime","setTotalBackendCallTime","startFrontendTimer","cacheKey","orders","testJson","attached_documents","enrichedAttachedDocuments","attachedDoc","encounterId","docPreviewRequest","encounter_id","parsedResponse","isSuccess","hasDocumentHtml","documentType","status_data","filteredUsers","valueA","valueB","paginatedUsers","_collapsed","_width","collapsedSubject","collapsed$","widthSubject","width$","setCollapsed","setWidth","collapsedValue","widthValue","http","baseUrl","npiApiBaseUrl","res","result_count","HttpClient","_backendTimeSeconds","_totalBackendCallMs","_serverProcessingTimeSeconds","_frontendTimeMs","_lastUpdated","_frontendStartTime","setBackendTime","endTime","resetTimers","getPerformanceSummary","metrics","isTimerActive","_currentRoute","_userData","_currentFilterState","currentRouteColumns","defaultTabs","enabledRoutes","defaultRoute","defaultTabRoute","defaultValue","setUserData","applyUserColumnPreferences","applySavedFilters","navigateToDefaultTabIfNeeded","targetRoute","setOfflineDefaults","savedPreferences","curnode","runDtTm","defaultUserData","currentUserData","allRoutes","routeFilters","getCurrentFilterState","userColumns","userRouteColumns","defaultRouteColumns","columnsToApply","cleanColumns","preferencesToSave","getDefaultRoute","buildVersion","packageVersion","gitBranch","versionInfo","require","version","production","__NgCli_bootstrap_1","platformBrowser","bootstrapModule"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}